const _0x19e159=_0xf4f1;(function(_0x4ff9c8,_0x214bcb){const _0x10bf29=_0xf4f1,_0x4d5c77=_0x4ff9c8();while(!![]){try{const _0x4bbe12=parseInt(_0x10bf29(0x225))/0x1+-parseInt(_0x10bf29(0x26c))/0x2*(-parseInt(_0x10bf29(0x204))/0x3)+parseInt(_0x10bf29(0x1ed))/0x4*(parseInt(_0x10bf29(0x1d9))/0x5)+-parseInt(_0x10bf29(0x213))/0x6*(parseInt(_0x10bf29(0x252))/0x7)+parseInt(_0x10bf29(0x275))/0x8+-parseInt(_0x10bf29(0x238))/0x9*(parseInt(_0x10bf29(0x208))/0xa)+-parseInt(_0x10bf29(0x1ec))/0xb;if(_0x4bbe12===_0x214bcb)break;else _0x4d5c77['push'](_0x4d5c77['shift']());}catch(_0x32ad04){_0x4d5c77['push'](_0x4d5c77['shift']());}}}(_0xdb5a,0x78a59));const firebaseConfig={'apiKey':_0x19e159(0x212),'authDomain':'easy-chatroom.firebaseapp.com','databaseURL':_0x19e159(0x1eb),'projectId':_0x19e159(0x277),'storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0x19e159(0x1e6),'appId':_0x19e159(0x28b),'measurementId':_0x19e159(0x1f0)};firebase[_0x19e159(0x29c)](firebaseConfig);const db=firebase[_0x19e159(0x243)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x19e159(0x1d8)]()['toString'](0x24)[_0x19e159(0x282)](0x2,0x9),lastActivity=Date['now'](),typingTimeout,gr8stg='';const STATIC_ROOM=_0x19e159(0x22b),MAX_MESSAGES=0xfa,sound=new Audio(_0x19e159(0x248));sound[_0x19e159(0x29d)]=0.3;function _0xf4f1(_0x4179de,_0x5fde6a){const _0xdb5ad=_0xdb5a();return _0xf4f1=function(_0xf4f14d,_0x2859a0){_0xf4f14d=_0xf4f14d-0x1ce;let _0x481702=_0xdb5ad[_0xf4f14d];return _0x481702;},_0xf4f1(_0x4179de,_0x5fde6a);}let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![];function checkIfAdmin(){const _0x349286=_0x19e159,_0x491b6e=db[_0x349286(0x28e)](_0x349286(0x1f2)+roomCode+'/'+sanitizeUsername(username));return _0x491b6e[_0x349286(0x24b)](_0x349286(0x20f))[_0x349286(0x1d1)](_0x2e0800=>{const _0x2988f8=_0x349286;isRoomAdmin=_0x2e0800[_0x2988f8(0x1fb)]();});}function toggleRecording(){const _0x55acab=_0x19e159;isRecording?stopRecording():navigator['mediaDevices']['getUserMedia']({'audio':!![]})[_0x55acab(0x1d1)](_0x20f19f=>{const _0x3cdd64=_0x55acab;mediaRecorder=new MediaRecorder(_0x20f19f),mediaRecorder[_0x3cdd64(0x241)](),isRecording=!![],document['getElementById'](_0x3cdd64(0x205))['innerText']='‚èπÔ∏è',audioChunks=[],mediaRecorder[_0x3cdd64(0x284)]=_0x13580c=>audioChunks[_0x3cdd64(0x207)](_0x13580c[_0x3cdd64(0x1f9)]),mediaRecorder[_0x3cdd64(0x221)]=()=>{const _0x1a3fec=_0x3cdd64;clearTimeout(recordingTimer);const _0x82c5bc=new Blob(audioChunks,{'type':_0x1a3fec(0x258)}),_0x5c401f=new FileReader();_0x5c401f['onloadend']=()=>{const _0x3497ec=_0x1a3fec,_0x2af9be=_0x5c401f['result'][_0x3497ec(0x20b)](',')[0x1],_0x508338=db[_0x3497ec(0x28e)]()['push']()['key'];db[_0x3497ec(0x28e)](_0x3497ec(0x21c)+roomCode+_0x3497ec(0x231)+_0x508338)[_0x3497ec(0x262)]({'msg':_0x3497ec(0x254),'audioBase64':_0x2af9be,'sender':username,'senderId':clientId,'timestamp':Date[_0x3497ec(0x299)]()});},_0x5c401f['readAsDataURL'](_0x82c5bc);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x55acab(0x244)](_0x5b9da6=>{const _0x14523c=_0x55acab;alert(_0x14523c(0x265));});}function stopRecording(){const _0xeb57f3=_0x19e159;mediaRecorder&&isRecording&&(mediaRecorder['stop'](),isRecording=![],document['getElementById'](_0xeb57f3(0x205))[_0xeb57f3(0x227)]=_0xeb57f3(0x1cf));}window[_0x19e159(0x222)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function _0xdb5a(){const _0x19159a=['toLocaleTimeString','profileViewer','join','\x20seconds.','antispam/','button','</small>','\x0aHistory:\x0a','msgInput','ABCDEFGHIJKLMNOPQRSTUVWXYZ','imageBase64','hidden','985049198428','onDisconnect','\x20<span\x20style=\x22color:red;\x22>Admin</span>','classList','passwordError','https://easy-chatroom-default-rtdb.firebaseio.com','8899781VSUBss','302824DykuKq','data:image/png;base64,','lastOnline','G-QDESJ2WR42','display','admins/','popstate','\x0a\x20\x20\x20\x20','No\x20bio\x20set','codeEntryScreen','visibilitychange','scrollTop','data','/typing','exists','You\x27re\x20muted\x20for\x20another\x20','s\x20due\x20to\x20spam.\x20Please\x20wait.','val','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','addEventListener','#00ff88','onclick','<audio\x20controls\x20src=\x22','21MAJhwW','recordBtn','TIMESTAMP','push','6339010qxqYYZ','chatScreen','chat_username','split','Session\x20expired.','trim','profileContent','value','back','2-digit','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','96YDipwn','username','[Image]',';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27','DOMContentLoaded','readAsDataURL','userDisplay','Delete\x20this\x20message?','lastChanged','rooms/','remove','result','equalTo','antispamBlocked/','onstop','onload','avatarBase64','profileAvatarInput','934306ciLJic','profileUsernameInput','innerText','roomCodeInput','getItem','contains','050BBB66HH','show','\x20¬∑\x20‚úì‚úì</small>','\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;\x22>','get','<img\x20src=\x22data:image/png;base64,','/messages/','limitToLast','users/','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20message?','margin-left:8px;background:none;border:none;color:red;font-weight:bold;cursor:pointer;','error','color','9ojhsOS','child_added','profileError','/messages','roomChoiceScreen','data:audio/webm;base64,','createElement','active','appendChild','start','keypress','database','catch','toLocaleString','\x20typing...','antispam','sounds/beep.mp3','userSidebar','filter','once','received','rooms','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','onloadend','sidebarOpen','update','240989SCIvnX','audioUrl','[Voice\x20message]','/typing/','play','profile_description','audio/webm','querySelector','ceil','admin','child','profileScreen','Missing\x20room\x20or\x20user\x20information.','imageInput','description','online','set','Profile\x20not\x20found.','map','Microphone\x20permission\x20denied.','profileDescriptionInput','</span><br>','pushState','üóëÔ∏è','Enter\x20a\x20valid\x20room\x20code','cssText','45948oCsBxk','#888','state','title','gr8stg','div','passwordScreen','‚ùå\x20Username\x20already\x20taken.','files','7508904seLTCT',')\x20New\x20message\x20‚Ä¢\x20','easy-chatroom','roomDisplay','typing','\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>','ServerValue','replace','from','msg','orderByChild','forEach','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','substr','values','ondataavailable','<li\x20style=\x22color:','block','üö´\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.','profiles/','namePreview','muted/','1:985049198428:web:d0eb7e2de39887710c9b99','innerHTML','key','ref','‚õî\x20You\x27re\x20blocked\x20for\x20','getElementById','none','\x20minutes.','\x27)\x22>','toUpperCase','scrollHeight','No\x20room\x20code\x20available\x20for\x20private\x20rooms','style','‚óè\x20Online','now','Failed\x20to\x20register\x20user\x20in\x20room.','add','initializeApp','volume','</li>','audioBase64','setItem','üéôÔ∏è','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','then','change','Admins\x20only.','<small>','sent','\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>','userList','random','30unSbFR'];_0xdb5a=function(){return _0x19159a;};return _0xdb5a();}function sanitizeUsername(_0x1ee4dd){const _0x1ee448=_0x19e159;return _0x1ee4dd[_0x1ee448(0x27c)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x35a162=_0x19e159,_0x22873e=document[_0x35a162(0x290)](_0x35a162(0x226))['value']['trim'](),_0x42d9d5=document[_0x35a162(0x290)](_0x35a162(0x266))[_0x35a162(0x20f)]['trim'](),_0x4ddbd2=document['getElementById'](_0x35a162(0x224)),_0x4f452b=document[_0x35a162(0x290)](_0x35a162(0x23a));if(!_0x22873e||!_0x42d9d5){_0x4f452b[_0x35a162(0x227)]=_0x35a162(0x1d0),_0x4f452b[_0x35a162(0x297)][_0x35a162(0x1f1)]=_0x35a162(0x286);return;}const _0x6b994c=sanitizeUsername(_0x22873e),_0x4f8767=db[_0x35a162(0x28e)](_0x35a162(0x288)+_0x6b994c);_0x4f8767[_0x35a162(0x24b)]('value')[_0x35a162(0x1d1)](_0x478910=>{const _0x45a049=_0x35a162;if(_0x478910[_0x45a049(0x1fb)]()){_0x4f452b[_0x45a049(0x227)]=_0x45a049(0x273),_0x4f452b[_0x45a049(0x297)][_0x45a049(0x1f1)]=_0x45a049(0x286);return;}let _0x21e540='';if(_0x4ddbd2['files']['length']>0x0){const _0x23fa97=new FileReader();_0x23fa97[_0x45a049(0x24f)]=()=>{const _0x5a21c8=_0x45a049;_0x21e540=_0x23fa97[_0x5a21c8(0x21e)]['split'](',')[0x1],saveProfile(_0x22873e,_0x42d9d5,_0x21e540,_0x6b994c);},_0x23fa97[_0x45a049(0x218)](_0x4ddbd2['files'][0x0]);}else saveProfile(_0x22873e,_0x42d9d5,_0x21e540,_0x6b994c);});}function saveProfile(_0x19a404,_0x3f6539,_0x1194ab,_0x4248b1){const _0x15b9fd=_0x19e159,_0x57b43a=Date[_0x15b9fd(0x299)](),_0x59a926=[_0x19a404];db[_0x15b9fd(0x28e)]('profiles/'+_0x4248b1)[_0x15b9fd(0x262)]({'username':_0x19a404,'description':_0x3f6539,'avatarBase64':_0x1194ab,'lastChanged':_0x57b43a,'usernameHistory':_0x59a926}),localStorage['setItem'](_0x15b9fd(0x20a),_0x19a404),localStorage[_0x15b9fd(0x1ce)](_0x15b9fd(0x257),_0x3f6539),document[_0x15b9fd(0x290)](_0x15b9fd(0x289))[_0x15b9fd(0x227)]=_0x19a404,showScreen(_0x15b9fd(0x23c));}function generateRoom(){const _0x33e8b7=_0x19e159;roomCode=genRoomCode(),db[_0x33e8b7(0x28e)]('rooms/'+roomCode)[_0x33e8b7(0x262)]({'active':!![],'created':Date[_0x33e8b7(0x299)]()}),startChat();}function joinRoom(){const _0x3b3d57=_0x19e159,_0x25fe73=roomCode||document[_0x3b3d57(0x290)](_0x3b3d57(0x228))[_0x3b3d57(0x20f)][_0x3b3d57(0x20d)]()[_0x3b3d57(0x294)]();if(!_0x25fe73)return alert(_0x3b3d57(0x26a));roomCode=_0x25fe73;if(roomCode===STATIC_ROOM){showScreen(_0x3b3d57(0x272));return;}db[_0x3b3d57(0x28e)]('rooms/'+roomCode)[_0x3b3d57(0x22f)]()[_0x3b3d57(0x1d1)](_0x2f0016=>{const _0x834d9=_0x3b3d57;_0x2f0016[_0x834d9(0x1fb)]()&&_0x2f0016[_0x834d9(0x1fe)]()[_0x834d9(0x23f)]!==![]?startChat():alert(_0x834d9(0x281));});}function startChat(){const _0x5f1193=_0x19e159;if(!roomCode||!username)return alert(_0x5f1193(0x25e)),showScreen(_0x5f1193(0x23c));checkIfAdmin()[_0x5f1193(0x1d1)](()=>{const _0x855f40=_0x5f1193,_0x5d1633=sanitizeUsername(username),_0x484ad2=db[_0x855f40(0x28e)]('users/'+roomCode+'/'+_0x5d1633),_0x11bfeb={'username':username,'lastOnline':firebase[_0x855f40(0x243)][_0x855f40(0x27b)][_0x855f40(0x206)],'online':!![]};db[_0x855f40(0x28e)](_0x855f40(0x1f2)+roomCode+'/'+_0x5d1633)[_0x855f40(0x24b)]('value')[_0x855f40(0x1d1)](_0x1e0814=>{const _0x13d9e4=_0x855f40;_0x1e0814[_0x13d9e4(0x1fb)]()&&(_0x11bfeb[_0x13d9e4(0x25b)]=!![]),_0x484ad2['set'](_0x11bfeb,_0x13803=>{const _0x5ba40f=_0x13d9e4;if(_0x13803)return alert(_0x5ba40f(0x29a)),showScreen(_0x5ba40f(0x23c));_0x484ad2[_0x5ba40f(0x1e7)]()[_0x5ba40f(0x251)]({'online':![],'lastOnline':Date[_0x5ba40f(0x299)]()}),document[_0x5ba40f(0x290)](_0x5ba40f(0x219))[_0x5ba40f(0x227)]=username,roomCode===STATIC_ROOM?document[_0x5ba40f(0x290)](_0x5ba40f(0x278))[_0x5ba40f(0x227)]=_0x5ba40f(0x296):document[_0x5ba40f(0x290)](_0x5ba40f(0x278))[_0x5ba40f(0x227)]=roomCode,showScreen('chatScreen'),listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();});});});}function validateStaticRoomPassword(){const _0x292e01=_0x19e159,_0x28248b=document[_0x292e01(0x290)]('staticPasswordInput')[_0x292e01(0x20f)],_0x15a07f=document['getElementById'](_0x292e01(0x1ea));db[_0x292e01(0x28e)](_0x292e01(0x270))[_0x292e01(0x22f)]()['then'](_0x50bebd=>{const _0x4abf1c=_0x292e01,_0x405a4b=_0x50bebd[_0x4abf1c(0x1fe)]();_0x28248b===_0x405a4b?(_0x15a07f[_0x4abf1c(0x297)][_0x4abf1c(0x1f1)]=_0x4abf1c(0x291),startChat()):_0x15a07f[_0x4abf1c(0x297)][_0x4abf1c(0x1f1)]=_0x4abf1c(0x286);});}document[_0x19e159(0x290)](_0x19e159(0x25f))['addEventListener'](_0x19e159(0x1d2),function(){const _0x536bcd=_0x19e159,_0x425703=this[_0x536bcd(0x274)][0x0];if(!_0x425703)return;const _0x23c371=new FileReader();_0x23c371[_0x536bcd(0x24f)]=function(){const _0x3c19b7=_0x536bcd,_0x5d175f=_0x23c371[_0x3c19b7(0x21e)][_0x3c19b7(0x20b)](',')[0x1],_0x29c84f=db[_0x3c19b7(0x28e)]()['push']()['key'];db['ref']('rooms/'+roomCode+_0x3c19b7(0x231)+_0x29c84f)[_0x3c19b7(0x262)]({'msg':_0x3c19b7(0x215),'imageBase64':_0x5d175f,'sender':username,'senderId':clientId,'timestamp':Date['now']()});},_0x23c371['readAsDataURL'](_0x425703);});function sendMessage(){const _0x38c3c0=_0x19e159,_0x5e08d5=document['getElementById'](_0x38c3c0(0x1e2)),_0x92b56f=_0x5e08d5['value'][_0x38c3c0(0x20d)]();if(!_0x92b56f)return;const _0xa9dc67=Date[_0x38c3c0(0x299)](),_0x17b893=sanitizeUsername(username);db[_0x38c3c0(0x28e)](_0x38c3c0(0x220)+roomCode+'/'+_0x17b893)[_0x38c3c0(0x24b)](_0x38c3c0(0x20f))['then'](_0x17657a=>{const _0x4cd15d=_0x38c3c0,_0x3b342c=_0x17657a['val']();if(_0x3b342c&&_0xa9dc67<_0x3b342c){const _0x32e139=Math[_0x4cd15d(0x25a)]((_0x3b342c-_0xa9dc67)/0x3e8);alert(_0x4cd15d(0x28f)+_0x32e139+_0x4cd15d(0x1fd));return;}const _0x5dd108=db[_0x4cd15d(0x28e)](_0x4cd15d(0x28a)+roomCode+'/'+sanitizeUsername(username));_0x5dd108[_0x4cd15d(0x24b)](_0x4cd15d(0x20f))[_0x4cd15d(0x1d1)](_0x50e6ce=>{const _0xa3f306=_0x4cd15d,_0xb61601=_0x50e6ce['val']();if(_0xb61601&&Date['now']()<_0xb61601){const _0x1632fb=Math[_0xa3f306(0x25a)]((_0xb61601-Date[_0xa3f306(0x299)]())/0x3e8);return alert(_0xa3f306(0x1fc)+_0x1632fb+_0xa3f306(0x1dd));}});const _0x597d39=db[_0x4cd15d(0x28e)](_0x4cd15d(0x1de)+roomCode+'/'+_0x17b893);_0x597d39['once'](_0x4cd15d(0x20f))['then'](_0x393f48=>{const _0x45a40b=_0x4cd15d,_0x85f79d=_0x393f48['val']()||[],_0x26d1ba=[..._0x85f79d,_0xa9dc67][_0x45a40b(0x24a)](_0x3a3373=>_0xa9dc67-_0x3a3373<0xbb8);if(_0x26d1ba['length']>=0x5){alert(_0x45a40b(0x287)),db[_0x45a40b(0x28e)](_0x45a40b(0x220)+roomCode+'/'+_0x17b893)[_0x45a40b(0x262)](_0xa9dc67+0x7530);const _0xb6c099=db[_0x45a40b(0x28e)](_0x45a40b(0x21c)+roomCode+_0x45a40b(0x23b));_0xb6c099[_0x45a40b(0x27f)]('senderId')[_0x45a40b(0x21f)](clientId)[_0x45a40b(0x232)](0x5)[_0x45a40b(0x24b)](_0x45a40b(0x20f),_0x539b53=>{const _0x3d473=_0x45a40b;_0x539b53[_0x3d473(0x280)](_0x2be982=>{const _0x1370fd=_0x3d473;_0xb6c099[_0x1370fd(0x25c)](_0x2be982[_0x1370fd(0x28d)])[_0x1370fd(0x21d)]();});}),_0x597d39['set']([]);return;}_0x597d39[_0x45a40b(0x262)](_0x26d1ba);const _0x1ec819=db['ref']()[_0x45a40b(0x207)]()[_0x45a40b(0x28d)];db[_0x45a40b(0x28e)]('rooms/'+roomCode+'/messages/'+_0x1ec819)['set']({'msg':_0x92b56f,'sender':username,'senderId':clientId,'timestamp':_0xa9dc67}),_0x5e08d5[_0x45a40b(0x20f)]='',sendTyping(!![]),lastActivity=_0xa9dc67;});});}function listenForMessages(){const _0x4f80d4=_0x19e159,_0x356b8c=db[_0x4f80d4(0x28e)](_0x4f80d4(0x21c)+roomCode+_0x4f80d4(0x23b)),_0x4bee0c=_0x356b8c['limitToLast'](MAX_MESSAGES);_0x4bee0c['on'](_0x4f80d4(0x239),_0x1c2a56=>{const _0x1ef638=_0x4f80d4,_0x566a56=_0x1c2a56['val'](),{msg:_0x1f80b5,sender:_0x71b1c8,senderId:_0x346631,timestamp:_0x39cef4}=_0x566a56,_0x278b71=_0x346631===clientId,_0x3fa121=_0x566a56[_0x1ef638(0x253)]||null,_0x3fc6db=_0x566a56[_0x1ef638(0x29f)]||null;addMessage(_0x1f80b5,_0x71b1c8,_0x39cef4,_0x278b71,_0x3fa121,_0x3fc6db,_0x1c2a56['key']),roomCode!==STATIC_ROOM&&db[_0x1ef638(0x28e)](_0x1ef638(0x21c)+roomCode+'/messages/'+_0x1c2a56[_0x1ef638(0x28d)])[_0x1ef638(0x21d)](),!_0x278b71&&(sound[_0x1ef638(0x256)](),flagPageAttention());});}function addMessage(_0x56be61,_0x4b09d5,_0x4664e0,_0x3c3bb4,_0x9e88ad=null,_0x2a4c50=null,_0x5f02db=null){const _0x485548=_0x19e159,_0x57949c=document['createElement'](_0x485548(0x271));_0x57949c[_0x485548(0x1e9)][_0x485548(0x29b)](_0x485548(0x27e),_0x3c3bb4?_0x485548(0x1d5):_0x485548(0x24c));const _0xcd4849=new Date(_0x4664e0)[_0x485548(0x1da)]([],{'hour':'2-digit','minute':_0x485548(0x211)});let _0x490636='';if(_0x4b09d5&&roomCode){const _0x5aadb7=db[_0x485548(0x28e)](_0x485548(0x1f2)+roomCode+'/'+sanitizeUsername(_0x4b09d5));_0x5aadb7[_0x485548(0x24b)](_0x485548(0x20f))['then'](_0x2ffb2e=>{const _0x5cdf3a=_0x485548;_0x2ffb2e[_0x5cdf3a(0x1fb)]()&&(_0x57949c[_0x5cdf3a(0x259)]('.sender-name')[_0x5cdf3a(0x28c)]+=_0x5cdf3a(0x27a));});}let _0x3ee3dd='<span\x20class=\x22sender-name\x22>'+_0x4b09d5+_0x485548(0x267);_0x3c3bb4?_0x3ee3dd+=_0x485548(0x1d4)+_0xcd4849+_0x485548(0x22d):_0x3ee3dd+=_0x485548(0x1d4)+_0xcd4849+_0x485548(0x1e0);!_0x9e88ad&&!_0x2a4c50&&(_0x56be61=_0x56be61[_0x485548(0x27c)](new RegExp('@'+username+'\x5cb','gi'),'<span\x20style=\x22color:#ff4081;\x22>@$&</span>'));if(_0x9e88ad)_0x3ee3dd+=_0x485548(0x203)+_0x9e88ad+_0x485548(0x24e);else{if(_0x2a4c50){const _0x451a47=_0x485548(0x23d)+_0x2a4c50;_0x3ee3dd+='<audio\x20controls\x20src=\x22'+_0x451a47+_0x485548(0x24e);}else{if(data[_0x485548(0x1e4)]){const _0x5229a7=_0x485548(0x1ee)+data[_0x485548(0x1e4)];_0x3ee3dd+='<img\x20src=\x22'+_0x5229a7+_0x485548(0x1d6);}else _0x3ee3dd+=_0x56be61;}}if(isRoomAdmin&&_0x5f02db){const _0x2f252a=document[_0x485548(0x23e)](_0x485548(0x1df));_0x2f252a[_0x485548(0x227)]=_0x485548(0x269),_0x2f252a[_0x485548(0x297)][_0x485548(0x26b)]=_0x485548(0x235),_0x2f252a[_0x485548(0x202)]=()=>{const _0x54a2f5=_0x485548;confirm(_0x54a2f5(0x234))&&db[_0x54a2f5(0x28e)]('rooms/'+roomCode+'/messages/'+_0x5f02db)[_0x54a2f5(0x21d)]()[_0x54a2f5(0x1d1)](()=>{_0x57949c['remove']();})['catch'](_0x32c512=>{const _0x40e5e3=_0x54a2f5;alert('‚ùå\x20Failed\x20to\x20delete\x20message.'),console[_0x40e5e3(0x236)](_0x32c512);});},_0x57949c[_0x485548(0x240)](_0x2f252a);}_0x3ee3dd+=_0x485548(0x1d4)+_0xcd4849+_0x485548(0x1e0),_0x57949c[_0x485548(0x28c)]=_0x3ee3dd;const _0x451f87=document[_0x485548(0x290)]('messages');_0x451f87[_0x485548(0x240)](_0x57949c);if(isRoomAdmin){const _0x56ac67=document['createElement']('button');_0x56ac67[_0x485548(0x227)]=_0x485548(0x269),_0x56ac67['style'][_0x485548(0x26b)]='margin-left:5px;background:none;border:none;color:red;cursor:pointer;',_0x56ac67[_0x485548(0x202)]=()=>{const _0x1ac89d=_0x485548;confirm(_0x1ac89d(0x21a))&&(db[_0x1ac89d(0x28e)]('rooms/'+roomCode+'/messages/'+snap['key'])[_0x1ac89d(0x21d)](),_0x57949c[_0x1ac89d(0x21d)]());},_0x57949c[_0x485548(0x240)](_0x56ac67);}_0x451f87[_0x485548(0x1f8)]=_0x451f87[_0x485548(0x295)];}function cleanupOldRooms(){const _0x438f79=_0x19e159;db[_0x438f79(0x28e)](_0x438f79(0x24d))[_0x438f79(0x24b)](_0x438f79(0x20f))[_0x438f79(0x1d1)](_0x409868=>{const _0x417500=_0x438f79,_0x4615a0=_0x409868[_0x417500(0x1fe)]();if(!_0x4615a0)return;const _0x36e653=Date['now']();for(const _0x3a2687 in _0x4615a0){if(_0x3a2687===STATIC_ROOM)continue;const _0x147fbf=_0x4615a0[_0x3a2687];_0x36e653-(_0x147fbf['created']||0x0)>0x2*0x3c*0x3e8&&db['ref'](_0x417500(0x21c)+_0x3a2687)[_0x417500(0x21d)]();}db[_0x417500(0x28e)](_0x417500(0x247))[_0x417500(0x24b)](_0x417500(0x20f))[_0x417500(0x1d1)](_0x56f9fd=>{const _0xf9094b=_0x417500,_0x441c41=_0x56f9fd['val']();if(!_0x441c41)return;for(const _0x1024bf in _0x441c41){if(_0x1024bf!==STATIC_ROOM)db['ref'](_0xf9094b(0x1de)+_0x1024bf)['remove']();}}),db[_0x417500(0x28e)]('antispamBlocked')['once'](_0x417500(0x20f))[_0x417500(0x1d1)](_0x9fb1e8=>{const _0x5a2bfe=_0x417500,_0x489160=_0x9fb1e8[_0x5a2bfe(0x1fe)]();if(!_0x489160)return;for(const _0x2a772c in _0x489160){if(_0x2a772c!==STATIC_ROOM)db['ref'](_0x5a2bfe(0x220)+_0x2a772c)[_0x5a2bfe(0x21d)]();}});});}document['addEventListener'](_0x19e159(0x217),()=>{const _0x2ac2f6=_0x19e159,_0x16a377=document[_0x2ac2f6(0x290)](_0x2ac2f6(0x1e2));_0x16a377&&_0x16a377['addEventListener'](_0x2ac2f6(0x242),function(_0x536598){_0x536598['key']==='Enter'&&(_0x536598['preventDefault'](),sendMessage());});});function showScreen(_0xbf452d){const _0x47ef6c=_0x19e159;['usernameScreen',_0x47ef6c(0x23c),_0x47ef6c(0x1f6),_0x47ef6c(0x209),_0x47ef6c(0x272),'profileScreen']['forEach'](_0x1239b0=>{const _0x37e1b4=_0x47ef6c;document['getElementById'](_0x1239b0)[_0x37e1b4(0x297)][_0x37e1b4(0x1f1)]=_0x37e1b4(0x291);}),document['getElementById'](_0xbf452d)['style'][_0x47ef6c(0x1f1)]='flex';}function genRoomCode(){const _0x3808ff=_0x19e159,_0xc1e2fa=_0x3808ff(0x1e3),_0x1da88a='0123456789',_0x2ab1f9=(_0x192de1,_0x359084)=>Array[_0x3808ff(0x27d)]({'length':_0x359084},()=>_0x192de1[Math['floor'](Math[_0x3808ff(0x1d8)]()*_0x192de1['length'])])[_0x3808ff(0x1dc)]('');return _0x2ab1f9(_0x1da88a,0x3)+_0x2ab1f9(_0xc1e2fa,0x3)+_0x2ab1f9(_0x1da88a,0x2)+_0x2ab1f9(_0xc1e2fa,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x1864db=_0xf4f1;Date[_0x1864db(0x299)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db['ref'](_0x1864db(0x21c)+roomCode)['update']({'active':![]}),alert(_0x1864db(0x20c)),location['reload']());},0x7530);}function setupSidebarBackHandler(){const _0x4eca20=_0x19e159;window[_0x4eca20(0x200)](_0x4eca20(0x1f3),()=>{const _0x48a061=_0x4eca20,_0x1bec21=document[_0x48a061(0x290)](_0x48a061(0x249));_0x1bec21?.[_0x48a061(0x1e9)]['contains'](_0x48a061(0x22c))&&_0x1bec21[_0x48a061(0x1e9)][_0x48a061(0x21d)](_0x48a061(0x22c));});}function toggleSidebar(){const _0x47c06b=_0x19e159,_0x12d7e8=document[_0x47c06b(0x290)](_0x47c06b(0x249));if(!_0x12d7e8[_0x47c06b(0x1e9)][_0x47c06b(0x22a)](_0x47c06b(0x22c)))_0x12d7e8[_0x47c06b(0x1e9)]['add'](_0x47c06b(0x22c)),history[_0x47c06b(0x268)]({'sidebarOpen':!![]},'');else{_0x12d7e8['classList'][_0x47c06b(0x21d)](_0x47c06b(0x22c));if(history[_0x47c06b(0x26e)]?.[_0x47c06b(0x250)])history[_0x47c06b(0x210)]();}}function setupVisibilityAttention(){const _0x3f91b1=_0x19e159;let _0x36f543=0x0,_0x49db3a=document[_0x3f91b1(0x26f)];document[_0x3f91b1(0x200)](_0x3f91b1(0x1f7),()=>{const _0x5402c3=_0x3f91b1;!document[_0x5402c3(0x1e5)]&&(document['title']=_0x49db3a,_0x36f543=0x0);}),window['flagPageAttention']=function(){const _0x2c0b02=_0x3f91b1;document[_0x2c0b02(0x1e5)]&&(_0x36f543++,document['title']='('+_0x36f543+_0x2c0b02(0x276)+_0x49db3a);};}function tryEditProfile(){const _0x2740c5=_0x19e159,_0x1f6e82=sanitizeUsername(username);db[_0x2740c5(0x28e)](_0x2740c5(0x288)+_0x1f6e82)[_0x2740c5(0x22f)]()[_0x2740c5(0x1d1)](_0x576f71=>{const _0x759059=_0x2740c5,_0x1e8d55=_0x576f71['val']();if(!_0x1e8d55)return alert(_0x759059(0x263));const _0x4d6e30=_0x1e8d55[_0x759059(0x21b)]||0x0,_0x5a4cb0=Date[_0x759059(0x299)](),_0xe55f94=0x18*0x3c*0x3c*0x3e8;if(_0x5a4cb0-_0x4d6e30<_0xe55f94){const _0x1028e7=Math[_0x759059(0x25a)]((_0xe55f94-(_0x5a4cb0-_0x4d6e30))/(0x3c*0x3e8));alert(_0x759059(0x1ff)+_0x1028e7+_0x759059(0x292));}else showScreen(_0x759059(0x25d)),document[_0x759059(0x290)](_0x759059(0x226))[_0x759059(0x20f)]=username,document[_0x759059(0x290)](_0x759059(0x266))[_0x759059(0x20f)]=_0x1e8d55['description']||'';});}function listenForUserList(){const _0x15f93c=_0x19e159;db['ref'](_0x15f93c(0x233)+roomCode)['on'](_0x15f93c(0x20f),_0x304a1f=>{const _0x5b1421=_0x15f93c,_0x52ab8d=_0x304a1f[_0x5b1421(0x1fe)]()||{},_0x4f95c0=Date[_0x5b1421(0x299)](),_0xa63e99=Object[_0x5b1421(0x283)](_0x52ab8d)[_0x5b1421(0x264)](_0x29b1a8=>{const _0x1cb057=_0x5b1421,_0x1bece3=_0x29b1a8[_0x1cb057(0x261)],_0x3dfa77=_0x4f95c0-_0x29b1a8[_0x1cb057(0x1ef)]<=0x1e*0x3c*0x3e8;if(!_0x1bece3&&!_0x3dfa77)return'';const _0x8b651a=_0x29b1a8[_0x1cb057(0x223)]?_0x1cb057(0x230)+_0x29b1a8['avatarBase64']+_0x1cb057(0x22e):'üë§\x20',_0x2b8630=_0x1bece3?_0x1cb057(0x201):_0x1cb057(0x26d),_0x379ac3=_0x1bece3?'üü¢':'üïí',_0x465d85=new Date(_0x29b1a8[_0x1cb057(0x1ef)])[_0x1cb057(0x1da)]([],{'hour':_0x1cb057(0x211),'minute':_0x1cb057(0x211)}),_0x348aa8=_0x29b1a8[_0x1cb057(0x25b)]?_0x1cb057(0x1e8):'';return _0x1cb057(0x285)+_0x2b8630+_0x1cb057(0x216)+sanitizeUsername(_0x29b1a8[_0x1cb057(0x214)])+_0x1cb057(0x293)+_0x8b651a+_0x379ac3+'\x20'+_0x29b1a8[_0x1cb057(0x214)]+_0x348aa8+_0x1cb057(0x29e);})[_0x5b1421(0x1dc)]('');document[_0x5b1421(0x290)](_0x5b1421(0x1d7))['innerHTML']=_0xa63e99;});}function sendTyping(_0x1e253e=![]){const _0x2c93f1=_0x19e159,_0x5239aa='rooms/'+roomCode+_0x2c93f1(0x255)+clientId;_0x1e253e?db[_0x2c93f1(0x28e)](_0x5239aa)[_0x2c93f1(0x21d)]():(db[_0x2c93f1(0x28e)](_0x5239aa)[_0x2c93f1(0x262)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x4554d7=_0x2c93f1;db[_0x4554d7(0x28e)](_0x5239aa)[_0x4554d7(0x21d)]();},0xbb8));}function listenForTyping(){const _0x1c1f73=_0x19e159,_0x7cb755=document[_0x1c1f73(0x290)](_0x1c1f73(0x279));db[_0x1c1f73(0x28e)]('rooms/'+roomCode+_0x1c1f73(0x1fa))['on']('value',_0x353460=>{const _0x11f822=_0x1c1f73,_0x3d189d=_0x353460[_0x11f822(0x1fe)]();if(!_0x3d189d)return _0x7cb755[_0x11f822(0x227)]='';const _0x7859d5=Object[_0x11f822(0x283)](_0x3d189d)[_0x11f822(0x24a)](_0x585d88=>_0x585d88!==username);_0x7cb755[_0x11f822(0x227)]=_0x7859d5['length']?_0x7859d5[_0x11f822(0x1dc)](',\x20')+_0x11f822(0x246):'';});}function trackPresence(){const _0x4be05a=_0x19e159;if(!username||!roomCode)return;const _0x83564d=sanitizeUsername(username),_0x4ec372=db[_0x4be05a(0x28e)]('users/'+roomCode+'/'+_0x83564d),_0x122cdd={'username':username,'lastOnline':firebase['database'][_0x4be05a(0x27b)][_0x4be05a(0x206)],'online':!![]};db[_0x4be05a(0x28e)](_0x4be05a(0x1f2)+roomCode+'/'+_0x83564d)['once']('value')['then'](_0x1cc48b=>{const _0x45ef34=_0x4be05a;if(_0x1cc48b[_0x45ef34(0x1fb)]())_0x122cdd[_0x45ef34(0x25b)]=!![];_0x4ec372['set'](_0x122cdd),_0x4ec372[_0x45ef34(0x1e7)]()[_0x45ef34(0x251)]({'online':![],'lastOnline':Date[_0x45ef34(0x299)]()}),updateOnlineIndicator();});}function muteUser(_0x4dc167,_0x225687){const _0x38badc=_0x19e159;if(!isRoomAdmin)return alert(_0x38badc(0x1d3));const _0x1194bb=Date[_0x38badc(0x299)]()+_0x225687*0x3c*0x3e8;db[_0x38badc(0x28e)]('muted/'+roomCode+'/'+sanitizeUsername(_0x4dc167))[_0x38badc(0x262)](_0x1194bb);}function unmuteUser(_0x10ab1e){const _0x14998d=_0x19e159;if(!isRoomAdmin)return alert(_0x14998d(0x1d3));db[_0x14998d(0x28e)]('muted/'+roomCode+'/'+sanitizeUsername(_0x10ab1e))[_0x14998d(0x21d)]();}function updateOnlineIndicator(){const _0x2ed2f7=_0x19e159,_0x542fe3=document[_0x2ed2f7(0x290)]('onlineStatus');_0x542fe3[_0x2ed2f7(0x227)]=_0x2ed2f7(0x298),_0x542fe3[_0x2ed2f7(0x297)][_0x2ed2f7(0x237)]='#00ff88';}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x5edf24){const _0x1fbbf1=_0x19e159;db[_0x1fbbf1(0x28e)]('profiles/'+_0x5edf24)[_0x1fbbf1(0x22f)]()[_0x1fbbf1(0x1d1)](_0x370612=>{const _0x4937c2=_0x1fbbf1;if(!_0x370612[_0x4937c2(0x1fb)]())return;const _0x463179=_0x370612[_0x4937c2(0x1fe)](),_0x21263c=('\x0aName:\x20'+_0x463179['username']+'\x0aDescription:\x20'+(_0x463179[_0x4937c2(0x260)]||_0x4937c2(0x1f5))+_0x4937c2(0x1e1)+(_0x463179['usernameHistory']||[])[_0x4937c2(0x1dc)]('\x0a')+'\x0aLast\x20Changed:\x20'+new Date(_0x463179[_0x4937c2(0x21b)])[_0x4937c2(0x245)]()+_0x4937c2(0x1f4))[_0x4937c2(0x20d)]();document['getElementById'](_0x4937c2(0x20e))[_0x4937c2(0x227)]=_0x21263c,document['getElementById'](_0x4937c2(0x1db))[_0x4937c2(0x297)][_0x4937c2(0x1f1)]='block';});}function initUsernameFlow(){const _0x592c19=_0x19e159,_0x4c0687=localStorage[_0x592c19(0x229)](_0x592c19(0x20a));!_0x4c0687?showScreen(_0x592c19(0x25d)):(username=_0x4c0687,document[_0x592c19(0x290)]('namePreview')['innerText']=username,showScreen('roomChoiceScreen'));}function closeProfile(){const _0x4e0c19=_0x19e159;document['getElementById'](_0x4e0c19(0x1db))['style'][_0x4e0c19(0x1f1)]=_0x4e0c19(0x291);}