const _0x13aa4a=_0x4ccf;(function(_0x4f2be1,_0x1cc0e2){const _0x2ffa22=_0x4ccf,_0x9fba3c=_0x4f2be1();while(!![]){try{const _0x59d0dd=-parseInt(_0x2ffa22(0x71))/0x1*(-parseInt(_0x2ffa22(0xcd))/0x2)+parseInt(_0x2ffa22(0xd4))/0x3+-parseInt(_0x2ffa22(0x11c))/0x4*(parseInt(_0x2ffa22(0x131))/0x5)+parseInt(_0x2ffa22(0x10c))/0x6+parseInt(_0x2ffa22(0x6d))/0x7+parseInt(_0x2ffa22(0x95))/0x8+parseInt(_0x2ffa22(0xff))/0x9*(-parseInt(_0x2ffa22(0xe0))/0xa);if(_0x59d0dd===_0x1cc0e2)break;else _0x9fba3c['push'](_0x9fba3c['shift']());}catch(_0x346d24){_0x9fba3c['push'](_0x9fba3c['shift']());}}}(_0xff2f,0x6520b));const firebaseConfig={'apiKey':'AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','authDomain':_0x13aa4a(0xfb),'databaseURL':_0x13aa4a(0xbb),'projectId':_0x13aa4a(0x107),'storageBucket':_0x13aa4a(0xb9),'messagingSenderId':_0x13aa4a(0x88),'appId':'1:985049198428:web:d0eb7e2de39887710c9b99','measurementId':'G-QDESJ2WR42'};firebase['initializeApp'](firebaseConfig);const db=firebase[_0x13aa4a(0xd5)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x13aa4a(0x94)]()[_0x13aa4a(0x86)](0x24)[_0x13aa4a(0xe8)](0x2,0x9),lastActivity=Date['now'](),typingTimeout,gr8stg='';const STATIC_ROOM=_0x13aa4a(0xf2),MAX_MESSAGES=0xfa,sound=new Audio(_0x13aa4a(0x6c));sound[_0x13aa4a(0xa5)]=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![];function checkIfAdmin(){const _0x2ee06e=_0x13aa4a,_0x5e433d=db[_0x2ee06e(0x10b)](_0x2ee06e(0x8c)+roomCode+'/'+sanitizeUsername(username));return _0x5e433d[_0x2ee06e(0xd6)](_0x2ee06e(0xb7))['then'](_0x37d0c0=>{const _0x1039e7=_0x2ee06e;isRoomAdmin=_0x37d0c0[_0x1039e7(0xc6)]();});}function toggleRecording(){const _0x453c4a=_0x13aa4a;isRecording?stopRecording():navigator[_0x453c4a(0x129)][_0x453c4a(0x87)]({'audio':!![]})[_0x453c4a(0xed)](_0x3fb5a7=>{const _0x314879=_0x453c4a;mediaRecorder=new MediaRecorder(_0x3fb5a7),mediaRecorder['start'](),isRecording=!![],document[_0x314879(0xcc)]('recordBtn')[_0x314879(0xa7)]='⏹️',audioChunks=[],mediaRecorder[_0x314879(0x70)]=_0xfead7=>audioChunks[_0x314879(0x123)](_0xfead7['data']),mediaRecorder[_0x314879(0x6b)]=()=>{const _0x23df7f=_0x314879;clearTimeout(recordingTimer);const _0x2a00ca=new Blob(audioChunks,{'type':_0x23df7f(0x10d)}),_0x230261=new FileReader();_0x230261[_0x23df7f(0xc1)]=()=>{const _0x3ee2be=_0x23df7f,_0x1aa031=_0x230261['result'][_0x3ee2be(0x85)](',')[0x1],_0x593940=db[_0x3ee2be(0x10b)]()[_0x3ee2be(0x123)]()[_0x3ee2be(0xf4)];db['ref'](_0x3ee2be(0x90)+roomCode+'/messages/'+_0x593940)['set']({'msg':_0x3ee2be(0x130),'audioBase64':_0x1aa031,'sender':username,'senderId':clientId,'timestamp':Date[_0x3ee2be(0xb4)]()});},_0x230261[_0x23df7f(0xa3)](_0x2a00ca);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x453c4a(0xcb)](_0x236663=>{const _0x47129f=_0x453c4a;alert(_0x47129f(0xf3));});}function stopRecording(){const _0x96d4a9=_0x13aa4a;mediaRecorder&&isRecording&&(mediaRecorder[_0x96d4a9(0xe1)](),isRecording=![],document[_0x96d4a9(0xcc)](_0x96d4a9(0xdf))[_0x96d4a9(0xa7)]=_0x96d4a9(0x79));}function _0x4ccf(_0x1f017d,_0x3e3ad2){const _0xff2f61=_0xff2f();return _0x4ccf=function(_0x4ccf22,_0x3e2c62){_0x4ccf22=_0x4ccf22-0x6a;let _0x23a883=_0xff2f61[_0x4ccf22];return _0x23a883;},_0x4ccf(_0x1f017d,_0x3e3ad2);}window[_0x13aa4a(0x99)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x5b5602){const _0x533d64=_0x13aa4a;return _0x5b5602[_0x533d64(0x8b)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x565a9e=_0x13aa4a,_0x2ebeed=document['getElementById'](_0x565a9e(0xf9))[_0x565a9e(0xb7)][_0x565a9e(0x10a)](),_0x2752bf=document[_0x565a9e(0xcc)](_0x565a9e(0xd9))[_0x565a9e(0xb7)][_0x565a9e(0x10a)](),_0x4c578b=document[_0x565a9e(0xcc)]('profileError');if(!_0x2ebeed||!_0x2752bf){_0x4c578b[_0x565a9e(0xa7)]='Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.',_0x4c578b[_0x565a9e(0x7f)][_0x565a9e(0x114)]=_0x565a9e(0x12d);return;}const _0x572ae3=sanitizeUsername(_0x2ebeed),_0x35ec77=db[_0x565a9e(0x10b)](_0x565a9e(0x81)+_0x572ae3);_0x35ec77[_0x565a9e(0xd6)](_0x565a9e(0xb7))[_0x565a9e(0xed)](_0x66444d=>{const _0x3937f0=_0x565a9e;if(_0x66444d[_0x3937f0(0xc6)]()){_0x4c578b[_0x3937f0(0xa7)]=_0x3937f0(0x125),_0x4c578b[_0x3937f0(0x7f)][_0x3937f0(0x114)]=_0x3937f0(0x12d);return;}});}function saveProfile(_0xe7146b,_0x4505f8,_0x522e15){const _0x13668a=_0x13aa4a,_0x1bf989=Date['now'](),_0x246d54=[_0xe7146b];db['ref'](_0x13668a(0x81)+_0x522e15)[_0x13668a(0xe4)]({'username':_0xe7146b,'description':_0x4505f8,'lastChanged':_0x1bf989,'usernameHistory':_0x246d54}),localStorage[_0x13668a(0x8e)]('chat_username',_0xe7146b),localStorage[_0x13668a(0x8e)](_0x13668a(0x77),_0x4505f8),document[_0x13668a(0xcc)](_0x13668a(0x105))[_0x13668a(0xa7)]=_0xe7146b,showScreen(_0x13668a(0xbf));}function generateRoom(){const _0x120d0e=_0x13aa4a;roomCode=genRoomCode(),db[_0x120d0e(0x10b)](_0x120d0e(0x90)+roomCode)[_0x120d0e(0xe4)]({'active':!![],'created':Date[_0x120d0e(0xb4)]()}),startChat();}function joinRoom(){const _0x40b9b0=_0x13aa4a,_0x52a5b0=roomCode||document['getElementById']('roomCodeInput')[_0x40b9b0(0xb7)][_0x40b9b0(0x10a)]()['toUpperCase']();if(!_0x52a5b0)return alert(_0x40b9b0(0xdb));roomCode=_0x52a5b0;if(roomCode===STATIC_ROOM){showScreen(_0x40b9b0(0xad));return;}db[_0x40b9b0(0x10b)](_0x40b9b0(0x90)+roomCode)[_0x40b9b0(0xa0)]()[_0x40b9b0(0xed)](_0x211732=>{const _0x492473=_0x40b9b0;_0x211732[_0x492473(0xc6)]()&&_0x211732[_0x492473(0x9f)]()['active']!==![]?startChat():alert('Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.');});}function startChat(){const _0x510b3a=_0x13aa4a;if(!roomCode||!username)return alert(_0x510b3a(0xd7)),showScreen(_0x510b3a(0xbf));checkIfAdmin()['then'](()=>{const _0x397f7f=_0x510b3a,_0x4451f9=sanitizeUsername(username),_0x24b019=db[_0x397f7f(0x10b)](_0x397f7f(0xd2)+roomCode+'/'+_0x4451f9),_0x40e8a3={'username':username,'lastOnline':firebase[_0x397f7f(0xd5)][_0x397f7f(0xea)]['TIMESTAMP'],'online':!![]};db[_0x397f7f(0x10b)](_0x397f7f(0x8c)+roomCode+'/'+_0x4451f9)[_0x397f7f(0xd6)](_0x397f7f(0xb7))[_0x397f7f(0xed)](_0x587dbb=>{const _0x109442=_0x397f7f;_0x587dbb[_0x109442(0xc6)]()&&(_0x40e8a3[_0x109442(0xde)]=!![]),_0x24b019[_0x109442(0xe4)](_0x40e8a3,_0x879610=>{const _0x223fe4=_0x109442;if(_0x879610)return alert(_0x223fe4(0x126)),showScreen(_0x223fe4(0xbf));_0x24b019[_0x223fe4(0x6e)]()[_0x223fe4(0x83)]({'online':![],'lastOnline':Date[_0x223fe4(0xb4)]()}),document['getElementById'](_0x223fe4(0xd8))[_0x223fe4(0xa7)]=username,roomCode===STATIC_ROOM?document['getElementById']('roomDisplay')[_0x223fe4(0xa7)]='No\x20room\x20code\x20available\x20for\x20private\x20rooms':document[_0x223fe4(0xcc)]('roomDisplay')['innerText']=roomCode,showScreen(_0x223fe4(0x109)),listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();});});});}function validateStaticRoomPassword(){const _0x94c52c=_0x13aa4a,_0x530c4b=document['getElementById']('staticPasswordInput')['value'],_0x4d9c0b=document[_0x94c52c(0xcc)](_0x94c52c(0xd1));db[_0x94c52c(0x10b)](_0x94c52c(0x9e))[_0x94c52c(0xa0)]()['then'](_0xb1242f=>{const _0x45b400=_0x94c52c,_0x4b7dd8=_0xb1242f[_0x45b400(0x9f)]();_0x530c4b===_0x4b7dd8?(_0x4d9c0b['style']['display']=_0x45b400(0xce),startChat()):_0x4d9c0b[_0x45b400(0x7f)][_0x45b400(0x114)]='block';});}function sendMessage(){const _0x2359df=_0x13aa4a,_0xf30abd=document[_0x2359df(0xcc)](_0x2359df(0xe2)),_0x107b66=_0xf30abd[_0x2359df(0xb7)][_0x2359df(0x10a)]();if(!_0x107b66)return;const _0x3b45d9=Date['now'](),_0x22b0bd=sanitizeUsername(username);db[_0x2359df(0x10b)](_0x2359df(0xbd)+roomCode+'/'+_0x22b0bd)[_0x2359df(0xd6)](_0x2359df(0xb7))[_0x2359df(0xed)](_0x566a2a=>{const _0x30d5cf=_0x2359df,_0x1b83b3=_0x566a2a[_0x30d5cf(0x9f)]();if(_0x1b83b3&&_0x3b45d9<_0x1b83b3){const _0x59edb4=Math[_0x30d5cf(0x98)]((_0x1b83b3-_0x3b45d9)/0x3e8);alert(_0x30d5cf(0xa8)+_0x59edb4+_0x30d5cf(0x118));return;}const _0x53da49=db[_0x30d5cf(0x10b)](_0x30d5cf(0x80)+roomCode+'/'+sanitizeUsername(username));_0x53da49[_0x30d5cf(0xd6)](_0x30d5cf(0xb7))[_0x30d5cf(0xed)](_0x3f2306=>{const _0x1ccf5f=_0x30d5cf,_0x10633c=_0x3f2306[_0x1ccf5f(0x9f)]();if(_0x10633c&&Date['now']()<_0x10633c){const _0x46bfbf=Math['ceil']((_0x10633c-Date[_0x1ccf5f(0xb4)]())/0x3e8);return alert(_0x1ccf5f(0x74)+_0x46bfbf+_0x1ccf5f(0xdd));}});const _0x1b430b=db[_0x30d5cf(0x10b)](_0x30d5cf(0xba)+roomCode+'/'+_0x22b0bd);_0x1b430b['once'](_0x30d5cf(0xb7))[_0x30d5cf(0xed)](_0x10b344=>{const _0x5e1ead=_0x30d5cf,_0xd6d236=_0x10b344[_0x5e1ead(0x9f)]()||[],_0x5e7c3f=[..._0xd6d236,_0x3b45d9]['filter'](_0x4e9424=>_0x3b45d9-_0x4e9424<0xbb8);if(_0x5e7c3f[_0x5e1ead(0xf6)]>=0x5){alert('🚫\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.'),db['ref']('antispamBlocked/'+roomCode+'/'+_0x22b0bd)[_0x5e1ead(0xe4)](_0x3b45d9+0x7530);const _0x28fd25=db['ref'](_0x5e1ead(0x90)+roomCode+_0x5e1ead(0xa1));_0x28fd25[_0x5e1ead(0x7b)](_0x5e1ead(0x10e))[_0x5e1ead(0x108)](clientId)['limitToLast'](0x5)['once'](_0x5e1ead(0xb7),_0xbfb0fb=>{const _0x3f95cc=_0x5e1ead;_0xbfb0fb[_0x3f95cc(0xbe)](_0x37bbb9=>{const _0x4fb612=_0x3f95cc;_0x28fd25[_0x4fb612(0x9c)](_0x37bbb9[_0x4fb612(0xf4)])[_0x4fb612(0xb6)]();});}),_0x1b430b[_0x5e1ead(0xe4)]([]);return;}_0x1b430b[_0x5e1ead(0xe4)](_0x5e7c3f);const _0x5efbd8=db[_0x5e1ead(0x10b)]()['push']()[_0x5e1ead(0xf4)];db[_0x5e1ead(0x10b)](_0x5e1ead(0x90)+roomCode+_0x5e1ead(0x6a)+_0x5efbd8)[_0x5e1ead(0xe4)]({'msg':_0x107b66,'sender':username,'senderId':clientId,'timestamp':_0x3b45d9}),_0xf30abd['value']='',sendTyping(!![]),lastActivity=_0x3b45d9;});});}function listenForMessages(){const _0x24ad50=_0x13aa4a,_0x1fc5c7=db['ref'](_0x24ad50(0x90)+roomCode+_0x24ad50(0xa1)),_0x1a7d37=_0x1fc5c7['limitToLast'](MAX_MESSAGES);_0x1a7d37['on']('child_added',_0x1b0798=>{const _0xe043f5=_0x24ad50,_0x4a9c4f=_0x1b0798[_0xe043f5(0x9f)](),{msg:_0x4bb76c,sender:_0x4ffa54,senderId:_0x4bdce7,timestamp:_0x1b6d6b}=_0x4a9c4f,_0x58042f=_0x4bdce7===clientId,_0x1474aa=_0x4a9c4f[_0xe043f5(0x12e)]||null,_0x2e1a51=_0x4a9c4f[_0xe043f5(0xc2)]||null;addMessage(_0x4bb76c,_0x4ffa54,_0x1b6d6b,_0x58042f,_0x1474aa,_0x2e1a51,_0x1b0798[_0xe043f5(0xf4)]),roomCode!==STATIC_ROOM&&db[_0xe043f5(0x10b)](_0xe043f5(0x90)+roomCode+_0xe043f5(0x6a)+_0x1b0798[_0xe043f5(0xf4)])[_0xe043f5(0xb6)](),!_0x58042f&&(sound[_0xe043f5(0xc9)](),flagPageAttention());});}function addMessage(_0x283170,_0x2b9c3e,_0x13e74c,_0x48f24e,_0x1834e9=null,_0x916a60=null,_0x42fc66=null){const _0x15f0e4=_0x13aa4a,_0x33ec43=document[_0x15f0e4(0x120)](_0x15f0e4(0x11e));_0x33ec43[_0x15f0e4(0xc7)][_0x15f0e4(0x117)](_0x15f0e4(0xb5),_0x48f24e?_0x15f0e4(0x75):_0x15f0e4(0xb3));const _0x5acc67=new Date(_0x13e74c)[_0x15f0e4(0x12f)]([],{'hour':_0x15f0e4(0x9d),'minute':_0x15f0e4(0x9d)});let _0x33298d='';if(_0x2b9c3e&&roomCode){const _0x5a7c74=db[_0x15f0e4(0x10b)](_0x15f0e4(0x8c)+roomCode+'/'+sanitizeUsername(_0x2b9c3e));_0x5a7c74[_0x15f0e4(0xd6)](_0x15f0e4(0xb7))[_0x15f0e4(0xed)](_0x2f3a02=>{const _0x46c77f=_0x15f0e4;_0x2f3a02['exists']()&&(_0x33ec43[_0x46c77f(0x124)](_0x46c77f(0xca))['innerHTML']+=_0x46c77f(0x116));});}const _0x1214f2=data[_0x15f0e4(0xf5)]?'<img\x20src=\x22data:image/png;base64,'+data[_0x15f0e4(0xf5)]+'\x22\x20style=\x22width:28px;height:28px;border-radius:50%;margin-right:8px;vertical-align:middle;\x22>':'<span\x20style=\x22margin-right:8px;\x22>👤</span>';let _0x3c205f=_0x1214f2+_0x15f0e4(0x115)+_0x2b9c3e+_0x15f0e4(0xe5);_0x48f24e?_0x3c205f+='<small>'+_0x5acc67+_0x15f0e4(0xaf):_0x3c205f+=_0x15f0e4(0xe6)+_0x5acc67+_0x15f0e4(0xfd);!_0x1834e9&&!_0x916a60&&(_0x283170=_0x283170[_0x15f0e4(0x8b)](new RegExp('@'+username+'\x5cb','gi'),_0x15f0e4(0xf0)));if(_0x1834e9)_0x3c205f+='<audio\x20controls\x20src=\x22'+_0x1834e9+_0x15f0e4(0x119);else{if(_0x916a60){const _0x387fa0=_0x15f0e4(0x11a)+_0x916a60;_0x3c205f+=_0x15f0e4(0x10f)+_0x387fa0+_0x15f0e4(0x119);}else _0x3c205f+=_0x283170;}isRoomAdmin&&_0x42fc66&&(delBtn['style'][_0x15f0e4(0xf1)]='margin-left:8px;background:none;border:none;color:red;font-weight:bold;cursor:pointer;',delBtn[_0x15f0e4(0xfc)]=()=>{const _0x390b90=_0x15f0e4;confirm(_0x390b90(0x110))&&db['ref'](_0x390b90(0x90)+roomCode+_0x390b90(0x6a)+_0x42fc66)[_0x390b90(0xb6)]()[_0x390b90(0xed)](()=>{const _0x31642a=_0x390b90;_0x33ec43[_0x31642a(0xb6)]();})['catch'](_0x1c33f5=>{const _0x38aba1=_0x390b90;alert(_0x38aba1(0x92)),console['error'](_0x1c33f5);});},_0x33ec43[_0x15f0e4(0x12c)](delBtn));_0x3c205f+='<small>'+_0x5acc67+_0x15f0e4(0xfd),_0x33ec43[_0x15f0e4(0xbc)]=_0x3c205f;const _0x1534fb=document[_0x15f0e4(0xcc)](_0x15f0e4(0x9b));_0x1534fb[_0x15f0e4(0x12c)](_0x33ec43);if(isRoomAdmin){const _0x332dda=document[_0x15f0e4(0x120)](_0x15f0e4(0x82));_0x332dda[_0x15f0e4(0xa7)]=_0x15f0e4(0x122),_0x332dda[_0x15f0e4(0x7f)][_0x15f0e4(0xf1)]=_0x15f0e4(0xac),_0x332dda[_0x15f0e4(0xfc)]=()=>{const _0x3d31ed=_0x15f0e4;confirm(_0x3d31ed(0x127))&&(db[_0x3d31ed(0x10b)](_0x3d31ed(0x90)+roomCode+'/messages/'+snap[_0x3d31ed(0xf4)])['remove'](),_0x33ec43[_0x3d31ed(0xb6)]());},_0x33ec43['appendChild'](_0x332dda);}_0x1534fb['scrollTop']=_0x1534fb[_0x15f0e4(0x104)];}function cleanupOldRooms(){const _0x465718=_0x13aa4a;db[_0x465718(0x10b)](_0x465718(0xef))['once'](_0x465718(0xb7))[_0x465718(0xed)](_0xfe8dad=>{const _0x49e0a9=_0x465718,_0x44e828=_0xfe8dad[_0x49e0a9(0x9f)]();if(!_0x44e828)return;const _0x417346=Date[_0x49e0a9(0xb4)]();for(const _0x1682f6 in _0x44e828){if(_0x1682f6===STATIC_ROOM)continue;const _0x305eee=_0x44e828[_0x1682f6];_0x417346-(_0x305eee[_0x49e0a9(0x91)]||0x0)>0x2*0x3c*0x3e8&&db[_0x49e0a9(0x10b)](_0x49e0a9(0x90)+_0x1682f6)['remove']();}db[_0x49e0a9(0x10b)](_0x49e0a9(0xa6))[_0x49e0a9(0xd6)](_0x49e0a9(0xb7))[_0x49e0a9(0xed)](_0x4e30c0=>{const _0x2dcda8=_0x49e0a9,_0x12a1cf=_0x4e30c0[_0x2dcda8(0x9f)]();if(!_0x12a1cf)return;for(const _0x2787ea in _0x12a1cf){if(_0x2787ea!==STATIC_ROOM)db['ref']('antispam/'+_0x2787ea)[_0x2dcda8(0xb6)]();}}),db[_0x49e0a9(0x10b)](_0x49e0a9(0xfa))[_0x49e0a9(0xd6)](_0x49e0a9(0xb7))[_0x49e0a9(0xed)](_0x2ada7b=>{const _0x316550=_0x49e0a9,_0xf903aa=_0x2ada7b[_0x316550(0x9f)]();if(!_0xf903aa)return;for(const _0x30f21b in _0xf903aa){if(_0x30f21b!==STATIC_ROOM)db['ref'](_0x316550(0xbd)+_0x30f21b)['remove']();}});});}document[_0x13aa4a(0xd3)](_0x13aa4a(0x73),()=>{const _0x5f044c=_0x13aa4a,_0x41180d=document[_0x5f044c(0xcc)]('msgInput');_0x41180d&&_0x41180d[_0x5f044c(0xd3)](_0x5f044c(0xb0),function(_0x6bddbd){const _0x5dec1b=_0x5f044c;_0x6bddbd[_0x5dec1b(0xf4)]===_0x5dec1b(0xaa)&&(_0x6bddbd[_0x5dec1b(0xda)](),sendMessage());});});function showScreen(_0x4426f5){const _0x5de29c=_0x13aa4a;[_0x5de29c(0x128),_0x5de29c(0xbf),'codeEntryScreen',_0x5de29c(0x109),_0x5de29c(0xad),'profileScreen'][_0x5de29c(0xbe)](_0x17304e=>{const _0x393690=_0x5de29c;document[_0x393690(0xcc)](_0x17304e)[_0x393690(0x7f)][_0x393690(0x114)]=_0x393690(0xce);}),document[_0x5de29c(0xcc)](_0x4426f5)[_0x5de29c(0x7f)][_0x5de29c(0x114)]=_0x5de29c(0xb2);}function genRoomCode(){const _0x198ee9=_0x13aa4a,_0x3a6d40='ABCDEFGHIJKLMNOPQRSTUVWXYZ',_0x519eac=_0x198ee9(0xec),_0x2003c0=(_0x381637,_0x4eb46c)=>Array[_0x198ee9(0x89)]({'length':_0x4eb46c},()=>_0x381637[Math[_0x198ee9(0x11f)](Math[_0x198ee9(0x94)]()*_0x381637['length'])])[_0x198ee9(0x12b)]('');return _0x2003c0(_0x519eac,0x3)+_0x2003c0(_0x3a6d40,0x3)+_0x2003c0(_0x519eac,0x2)+_0x2003c0(_0x3a6d40,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x2f15f4=_0x4ccf;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x2f15f4(0x10b)](_0x2f15f4(0x90)+roomCode)[_0x2f15f4(0x83)]({'active':![]}),alert(_0x2f15f4(0xc0)),location['reload']());},0x7530);}function setupSidebarBackHandler(){const _0x321909=_0x13aa4a;window[_0x321909(0xd3)](_0x321909(0x8a),()=>{const _0x43e2ec=_0x321909,_0x1ff5e1=document['getElementById'](_0x43e2ec(0xab));_0x1ff5e1?.[_0x43e2ec(0xc7)][_0x43e2ec(0x84)]('show')&&_0x1ff5e1[_0x43e2ec(0xc7)][_0x43e2ec(0xb6)](_0x43e2ec(0xc4));});}function toggleSidebar(){const _0x55f051=_0x13aa4a,_0x1b893e=document['getElementById']('userSidebar');if(!_0x1b893e[_0x55f051(0xc7)][_0x55f051(0x84)]('show'))_0x1b893e[_0x55f051(0xc7)][_0x55f051(0x117)](_0x55f051(0xc4)),history['pushState']({'sidebarOpen':!![]},'');else{_0x1b893e[_0x55f051(0xc7)][_0x55f051(0xb6)](_0x55f051(0xc4));if(history[_0x55f051(0x100)]?.[_0x55f051(0x93)])history[_0x55f051(0xdc)]();}}function setupVisibilityAttention(){const _0x50b592=_0x13aa4a;let _0x36595b=0x0,_0xf289a1=document[_0x50b592(0x7c)];document['addEventListener'](_0x50b592(0x121),()=>{const _0xe16614=_0x50b592;!document[_0xe16614(0xfe)]&&(document['title']=_0xf289a1,_0x36595b=0x0);}),window[_0x50b592(0xd0)]=function(){const _0x5ae29c=_0x50b592;document['hidden']&&(_0x36595b++,document[_0x5ae29c(0x7c)]='('+_0x36595b+_0x5ae29c(0xb8)+_0xf289a1);};}function tryEditProfile(){const _0x554cac=_0x13aa4a,_0x309928=sanitizeUsername(username);db[_0x554cac(0x10b)](_0x554cac(0x81)+_0x309928)[_0x554cac(0xa0)]()[_0x554cac(0xed)](_0x444bbb=>{const _0x57340d=_0x554cac,_0x2cf1bb=_0x444bbb[_0x57340d(0x9f)]();if(!_0x2cf1bb)return alert(_0x57340d(0x7a));const _0x53617b=_0x2cf1bb[_0x57340d(0x103)]||0x0,_0x30975f=Date[_0x57340d(0xb4)](),_0x2dca8d=0x18*0x3c*0x3c*0x3e8;if(_0x30975f-_0x53617b<_0x2dca8d){const _0x444090=Math[_0x57340d(0x98)]((_0x2dca8d-(_0x30975f-_0x53617b))/(0x3c*0x3e8));alert(_0x57340d(0xf7)+_0x444090+_0x57340d(0xa2));}else showScreen(_0x57340d(0xa4)),document[_0x57340d(0xcc)](_0x57340d(0xf9))['value']=username,document[_0x57340d(0xcc)](_0x57340d(0xd9))['value']=_0x2cf1bb[_0x57340d(0xee)]||'';});}function listenForUserList(){const _0x23841e=_0x13aa4a;db['ref'](_0x23841e(0xd2)+roomCode)['on']('value',_0x2eda25=>{const _0x5607ff=_0x23841e,_0xb1ec77=_0x2eda25[_0x5607ff(0x9f)]()||{},_0x2b3c1e=Date[_0x5607ff(0xb4)](),_0x1ec6de=Object[_0x5607ff(0x111)](_0xb1ec77)[_0x5607ff(0xe3)](_0x54ca93=>{const _0x19cdc6=_0x5607ff,_0x463b10=_0x54ca93['online'],_0x26c3b4=_0x2b3c1e-_0x54ca93[_0x19cdc6(0xc3)]<=0x1e*0x3c*0x3e8;if(!_0x463b10&&!_0x26c3b4)return'';const _0xdd4ee1=_0x463b10?'#00ff88':_0x19cdc6(0x8d),_0x45cafc=_0x463b10?'🟢':'🕒',_0x474659=new Date(_0x54ca93[_0x19cdc6(0xc3)])[_0x19cdc6(0x12f)]([],{'hour':_0x19cdc6(0x9d),'minute':_0x19cdc6(0x9d)}),_0x4f53a0=_0x54ca93[_0x19cdc6(0xf5)]?'<img\x20src=\x22data:image/png;base64,'+_0x54ca93[_0x19cdc6(0xf5)]+'\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;vertical-align:middle;\x22>':_0x19cdc6(0x8f),_0x97b087=_0x54ca93[_0x19cdc6(0xde)]?_0x19cdc6(0x112):'';return _0x19cdc6(0xc8)+_0xdd4ee1+_0x19cdc6(0x78)+sanitizeUsername(_0x54ca93[_0x19cdc6(0x72)])+_0x19cdc6(0x6f)+_0x4f53a0+_0x45cafc+'\x20'+_0x54ca93[_0x19cdc6(0x72)]+_0x97b087+_0x19cdc6(0x113);})['join']('');document[_0x5607ff(0xcc)](_0x5607ff(0x106))['innerHTML']=_0x1ec6de;});}function sendTyping(_0x26ef12=![]){const _0x2610ab=_0x13aa4a,_0x23df8a=_0x2610ab(0x90)+roomCode+'/typing/'+clientId;_0x26ef12?db['ref'](_0x23df8a)[_0x2610ab(0xb6)]():(db[_0x2610ab(0x10b)](_0x23df8a)['set'](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x1021bb=_0x2610ab;db[_0x1021bb(0x10b)](_0x23df8a)['remove']();},0xbb8));}function _0xff2f(){const _0x2c3800=['users/','addEventListener','1904721gJZgZJ','database','once','Missing\x20room\x20or\x20user\x20information.','userDisplay','profileDescriptionInput','preventDefault','Enter\x20a\x20valid\x20room\x20code','back','\x20seconds.','admin','recordBtn','410aZGVde','stop','msgInput','map','set','</span>','<small>','avatar_base64','substr','\x20typing...','ServerValue','\x0aDescription:\x20','0123456789','then','description','rooms','<span\x20style=\x22color:#ff4081;\x22>@$&</span>','cssText','050BBB66HH','Microphone\x20permission\x20denied.','key','avatarBase64','length','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','result','profileUsernameInput','antispamBlocked','easy-chatroom.firebaseapp.com','onclick','</small>','hidden','157428wSfoTY','state','data:image/png;base64,','sidebarAvatarPreview','lastChanged','scrollHeight','namePreview','userList','easy-chatroom','equalTo','chatScreen','trim','ref','873696MdAeqO','audio/webm','senderId','<audio\x20controls\x20src=\x22','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20message?','values','\x20<span\x20style=\x22color:red;\x22>Admin</span>','\x0a\x20\x20\x20\x20\x20\x20</li>','display','<span\x20class=\x22sender-name\x22>','\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>','add','s\x20due\x20to\x20spam.\x20Please\x20wait.','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','data:audio/webm;base64,','color','143812AJiitA','\x0a\x20\x20\x20\x20','div','floor','createElement','visibilitychange','🗑️','push','querySelector','❌\x20Username\x20already\x20taken.','Failed\x20to\x20register\x20user\x20in\x20room.','Delete\x20this\x20message?','usernameScreen','mediaDevices','chat_username','join','appendChild','block','audioUrl','toLocaleTimeString','[Voice\x20message]','55UgfznZ','/messages/','onstop','sounds/beep.mp3','562618bpKqsT','onDisconnect','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ondataavailable','499262FuMGVK','username','DOMContentLoaded','You\x27re\x20muted\x20for\x20another\x20','sent','getItem','profile_description',';cursor:pointer;display:flex;align-items:center;gap:6px;\x22\x20onclick=\x22viewProfile(\x27','🎙️','Profile\x20not\x20found.','orderByChild','title','files','profileContent','style','muted/','profiles/','button','update','contains','split','toString','getUserMedia','985049198428','from','popstate','replace','admins/','#888','setItem','<span\x20style=\x22margin-right:5px;\x22>👤</span>','rooms/','created','❌\x20Failed\x20to\x20delete\x20message.','sidebarOpen','random','1333720PbWnaA','profileViewer','TIMESTAMP','ceil','onload','No\x20bio\x20set','messages','child','2-digit','gr8stg','val','get','/messages','\x20minutes.','readAsDataURL','profileScreen','volume','antispam','innerText','⛔\x20You\x27re\x20blocked\x20for\x20','filter','Enter','userSidebar','margin-left:5px;background:none;border:none;color:red;cursor:pointer;','passwordScreen','/typing','\x20·\x20✓✓</small>','keypress','Admins\x20only.','flex','received','now','msg','remove','value',')\x20New\x20message\x20•\x20','easy-chatroom.firebasestorage.app','antispam/','https://easy-chatroom-default-rtdb.firebaseio.com','innerHTML','antispamBlocked/','forEach','roomChoiceScreen','Session\x20expired.','onloadend','audioBase64','lastOnline','show','●\x20Online','exists','classList','<li\x20style=\x22color:','play','.sender-name','catch','getElementById','2KnIVff','none','typing','flagPageAttention','passwordError'];_0xff2f=function(){return _0x2c3800;};return _0xff2f();}function listenForTyping(){const _0x4ac59d=_0x13aa4a,_0x5bc34d=document[_0x4ac59d(0xcc)](_0x4ac59d(0xcf));db[_0x4ac59d(0x10b)](_0x4ac59d(0x90)+roomCode+_0x4ac59d(0xae))['on'](_0x4ac59d(0xb7),_0x1d66af=>{const _0x5b8e67=_0x4ac59d,_0x3eea04=_0x1d66af['val']();if(!_0x3eea04)return _0x5bc34d[_0x5b8e67(0xa7)]='';const _0x2596aa=Object[_0x5b8e67(0x111)](_0x3eea04)[_0x5b8e67(0xa9)](_0x530bd8=>_0x530bd8!==username);_0x5bc34d[_0x5b8e67(0xa7)]=_0x2596aa[_0x5b8e67(0xf6)]?_0x2596aa[_0x5b8e67(0x12b)](',\x20')+_0x5b8e67(0xe9):'';});}function trackPresence(){const _0x2939d1=_0x13aa4a;if(!username||!roomCode)return;const _0x1df546=sanitizeUsername(username),_0x439308=db[_0x2939d1(0x10b)](_0x2939d1(0xd2)+roomCode+'/'+_0x1df546),_0x56b070=localStorage[_0x2939d1(0x76)](_0x2939d1(0xe7))||'',_0x2c37f6={'username':username,'lastOnline':firebase[_0x2939d1(0xd5)]['ServerValue'][_0x2939d1(0x97)],'online':!![],'avatarBase64':_0x56b070};db[_0x2939d1(0x10b)](_0x2939d1(0x8c)+roomCode+'/'+_0x1df546)[_0x2939d1(0xd6)](_0x2939d1(0xb7))['then'](_0x171d56=>{const _0x559920=_0x2939d1;if(_0x171d56[_0x559920(0xc6)]())_0x2c37f6[_0x559920(0xde)]=!![];_0x439308[_0x559920(0xe4)](_0x2c37f6),_0x439308['onDisconnect']()['update']({'online':![],'lastOnline':Date[_0x559920(0xb4)]()}),updateOnlineIndicator();});}function uploadSidebarAvatar(_0x55cec4){const _0x1412c2=_0x13aa4a;if(!_0x55cec4[_0x1412c2(0x7d)][_0x1412c2(0xf6)])return;const _0x1441f2=new FileReader();_0x1441f2[_0x1412c2(0xc1)]=()=>{const _0x42b34d=_0x1412c2,_0x248d7f=_0x1441f2[_0x42b34d(0xf8)]['split'](',')[0x1];localStorage['setItem']('avatar_base64',_0x248d7f);const _0x3579e0=document[_0x42b34d(0xcc)](_0x42b34d(0x102));_0x3579e0['src']=_0x42b34d(0x101)+_0x248d7f,_0x3579e0[_0x42b34d(0x7f)][_0x42b34d(0x114)]='block',trackPresence();},_0x1441f2['readAsDataURL'](_0x55cec4[_0x1412c2(0x7d)][0x0]);}function muteUser(_0x22ed61,_0x3d0f88){const _0x956240=_0x13aa4a;if(!isRoomAdmin)return alert(_0x956240(0xb1));const _0x5cb714=Date['now']()+_0x3d0f88*0x3c*0x3e8;db[_0x956240(0x10b)](_0x956240(0x80)+roomCode+'/'+sanitizeUsername(_0x22ed61))[_0x956240(0xe4)](_0x5cb714);}function unmuteUser(_0x1a6084){const _0x1c15ba=_0x13aa4a;if(!isRoomAdmin)return alert(_0x1c15ba(0xb1));db[_0x1c15ba(0x10b)](_0x1c15ba(0x80)+roomCode+'/'+sanitizeUsername(_0x1a6084))[_0x1c15ba(0xb6)]();}function updateOnlineIndicator(){const _0x18ff1a=_0x13aa4a,_0x430354=document[_0x18ff1a(0xcc)]('onlineStatus');_0x430354[_0x18ff1a(0xa7)]=_0x18ff1a(0xc5),_0x430354[_0x18ff1a(0x7f)][_0x18ff1a(0x11b)]='#00ff88';}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x41a2f7){const _0x4340ac=_0x13aa4a;db[_0x4340ac(0x10b)](_0x4340ac(0x81)+_0x41a2f7)[_0x4340ac(0xa0)]()[_0x4340ac(0xed)](_0x332309=>{const _0x3fa6ae=_0x4340ac;if(!_0x332309[_0x3fa6ae(0xc6)]())return;const _0x56246e=_0x332309[_0x3fa6ae(0x9f)](),_0x454769=('\x0aName:\x20'+_0x56246e[_0x3fa6ae(0x72)]+_0x3fa6ae(0xeb)+(_0x56246e[_0x3fa6ae(0xee)]||_0x3fa6ae(0x9a))+'\x0aHistory:\x0a'+(_0x56246e['usernameHistory']||[])[_0x3fa6ae(0x12b)]('\x0a')+'\x0aLast\x20Changed:\x20'+new Date(_0x56246e[_0x3fa6ae(0x103)])['toLocaleString']()+_0x3fa6ae(0x11d))[_0x3fa6ae(0x10a)]();document[_0x3fa6ae(0xcc)](_0x3fa6ae(0x7e))['innerText']=_0x454769,document[_0x3fa6ae(0xcc)](_0x3fa6ae(0x96))[_0x3fa6ae(0x7f)][_0x3fa6ae(0x114)]=_0x3fa6ae(0x12d);});}function initUsernameFlow(){const _0x1f3cc7=_0x13aa4a,_0x1d55fb=localStorage['getItem'](_0x1f3cc7(0x12a));!_0x1d55fb?showScreen('profileScreen'):(username=_0x1d55fb,document['getElementById'](_0x1f3cc7(0x105))[_0x1f3cc7(0xa7)]=username,showScreen('roomChoiceScreen'));}function closeProfile(){const _0x360f6d=_0x13aa4a;document[_0x360f6d(0xcc)](_0x360f6d(0x96))[_0x360f6d(0x7f)]['display']='none';}