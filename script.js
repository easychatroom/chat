const _0x4138ac=_0x5e91;(function(_0x46fd39,_0x5e0439){const _0x2eadf7=_0x5e91,_0x2c4f83=_0x46fd39();while(!![]){try{const _0xc5ed97=-parseInt(_0x2eadf7(0xf4))/0x1*(-parseInt(_0x2eadf7(0xbb))/0x2)+-parseInt(_0x2eadf7(0xb7))/0x3*(parseInt(_0x2eadf7(0x113))/0x4)+-parseInt(_0x2eadf7(0x12c))/0x5+parseInt(_0x2eadf7(0xc5))/0x6*(-parseInt(_0x2eadf7(0x129))/0x7)+parseInt(_0x2eadf7(0x104))/0x8+-parseInt(_0x2eadf7(0xc4))/0x9*(parseInt(_0x2eadf7(0x102))/0xa)+parseInt(_0x2eadf7(0x13f))/0xb;if(_0xc5ed97===_0x5e0439)break;else _0x2c4f83['push'](_0x2c4f83['shift']());}catch(_0x3612a7){_0x2c4f83['push'](_0x2c4f83['shift']());}}}(_0x5cd7,0x84b39));const firebaseConfig={'apiKey':'AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','authDomain':_0x4138ac(0x108),'databaseURL':_0x4138ac(0x10b),'projectId':_0x4138ac(0x11b),'storageBucket':_0x4138ac(0xe0),'messagingSenderId':_0x4138ac(0xa9),'appId':_0x4138ac(0xf7),'measurementId':_0x4138ac(0x95)};firebase[_0x4138ac(0x132)](firebaseConfig);const db=firebase['database'](),roomUsers={};let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x4138ac(0xb8)]()['toString'](0x24)[_0x4138ac(0x99)](0x2,0x9),lastActivity=Date[_0x4138ac(0x9c)](),typingTimeout,gr8stg='';const STATIC_ROOM=_0x4138ac(0x116),MAX_MESSAGES=0xfa,sound=new Audio('sounds/beep.mp3');sound[_0x4138ac(0xe4)]=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![];function checkIfAdmin(){const _0x42dcd5=_0x4138ac,_0x1db543=db[_0x42dcd5(0xea)](_0x42dcd5(0x9f)+roomCode+'/'+sanitizeUsername(username));return _0x1db543[_0x42dcd5(0x153)](_0x42dcd5(0x137))[_0x42dcd5(0xd4)](_0x193cd0=>{const _0x550275=_0x42dcd5;isRoomAdmin=_0x193cd0[_0x550275(0x11a)]();});}function toggleRecording(){const _0x24f681=_0x4138ac;isRecording?stopRecording():navigator[_0x24f681(0x121)]['getUserMedia']({'audio':!![]})[_0x24f681(0xd4)](_0x5638c3=>{const _0x461d3c=_0x24f681;mediaRecorder=new MediaRecorder(_0x5638c3),mediaRecorder[_0x461d3c(0xed)](),isRecording=!![],document[_0x461d3c(0xcd)](_0x461d3c(0x12b))[_0x461d3c(0xab)]='⏹️',audioChunks=[],mediaRecorder[_0x461d3c(0x146)]=_0x37d8af=>audioChunks[_0x461d3c(0x135)](_0x37d8af[_0x461d3c(0x96)]),mediaRecorder[_0x461d3c(0xb5)]=()=>{const _0x33553e=_0x461d3c;clearTimeout(recordingTimer);const _0x1af577=new Blob(audioChunks,{'type':_0x33553e(0x112)}),_0x20f17a=new FileReader();_0x20f17a[_0x33553e(0x152)]=()=>{const _0x2c297f=_0x33553e,_0x397095=_0x20f17a[_0x2c297f(0xac)][_0x2c297f(0x13b)](',')[0x1],_0x870ad3=db['ref']()['push']()[_0x2c297f(0xae)];db[_0x2c297f(0xea)]('rooms/'+roomCode+_0x2c297f(0xbd)+_0x870ad3)['set']({'msg':_0x2c297f(0xf3),'audioBase64':_0x397095,'sender':username,'senderId':clientId,'timestamp':Date[_0x2c297f(0x9c)]()});},_0x20f17a[_0x33553e(0xa3)](_0x1af577);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x24f681(0x106)](_0x40300a=>{const _0x355d46=_0x24f681;alert(_0x355d46(0xd1));});}function stopRecording(){const _0x44552d=_0x4138ac;mediaRecorder&&isRecording&&(mediaRecorder[_0x44552d(0x100)](),isRecording=![],document['getElementById'](_0x44552d(0x12b))[_0x44552d(0xab)]=_0x44552d(0x9a));}window['onload']=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x5a32f5){const _0x58c4d4=_0x4138ac;return _0x5a32f5[_0x58c4d4(0xb6)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x1d82e1=_0x4138ac,_0x48304f=document[_0x1d82e1(0xcd)](_0x1d82e1(0x105))[_0x1d82e1(0x137)][_0x1d82e1(0x111)](),_0x1ce881=document[_0x1d82e1(0xcd)](_0x1d82e1(0xb1))['value'][_0x1d82e1(0x111)](),_0x41b078=document['getElementById']('profileError');if(!_0x48304f||!_0x1ce881){_0x41b078[_0x1d82e1(0xab)]=_0x1d82e1(0xa4),_0x41b078['style'][_0x1d82e1(0x139)]='block';return;}_0x41b078[_0x1d82e1(0xfa)][_0x1d82e1(0x139)]='none';const _0x3c18fe=sanitizeUsername(_0x48304f),_0x48b53c=db[_0x1d82e1(0xea)](_0x1d82e1(0xfe)+_0x3c18fe);_0x48b53c['once']('value')[_0x1d82e1(0xd4)](_0x1ed275=>{const _0x2b07b4=_0x1d82e1;_0x1ed275[_0x2b07b4(0x11a)]()?(_0x41b078[_0x2b07b4(0xab)]='❌\x20Username\x20already\x20taken.',_0x41b078['style']['display']=_0x2b07b4(0x127)):saveProfile(_0x48304f,_0x1ce881,_0x3c18fe);})[_0x1d82e1(0x106)](_0x4dbab0=>{const _0x21b57c=_0x1d82e1;console[_0x21b57c(0x13a)](_0x21b57c(0x94),_0x4dbab0),_0x41b078['innerText']=_0x21b57c(0x123),_0x41b078[_0x21b57c(0xfa)][_0x21b57c(0x139)]=_0x21b57c(0x127);});}function saveProfile(_0x378112,_0x564e49,_0x2fa5d3){const _0xbd5826=_0x4138ac,_0x10bfe0=Date[_0xbd5826(0x9c)](),_0x531a64=[_0x378112];db[_0xbd5826(0xea)](_0xbd5826(0xfe)+_0x2fa5d3)[_0xbd5826(0x12a)]({'username':_0x378112,'description':_0x564e49,'lastChanged':_0x10bfe0,'usernameHistory':_0x531a64}),localStorage[_0xbd5826(0xcc)](_0xbd5826(0xc6),_0x378112),localStorage['setItem']('profile_description',_0x564e49),document[_0xbd5826(0xcd)](_0xbd5826(0x130))[_0xbd5826(0xab)]=_0x378112,showScreen(_0xbd5826(0xcf));}function generateRoom(){const _0x4baa9c=_0x4138ac;roomCode=genRoomCode(),db[_0x4baa9c(0xea)]('rooms/'+roomCode)['set']({'active':!![],'created':Date[_0x4baa9c(0x9c)]()}),startChat();}function joinRoom(){const _0x146335=_0x4138ac,_0x25caf6=roomCode||document[_0x146335(0xcd)](_0x146335(0xee))[_0x146335(0x137)][_0x146335(0x111)]()['toUpperCase']();if(!_0x25caf6)return alert(_0x146335(0x14e));roomCode=_0x25caf6;if(roomCode===STATIC_ROOM){showScreen('passwordScreen');return;}db[_0x146335(0xea)](_0x146335(0x134)+roomCode)['get']()[_0x146335(0xd4)](_0x55978b=>{const _0x4abb59=_0x146335;_0x55978b[_0x4abb59(0x11a)]()&&_0x55978b[_0x4abb59(0x128)]()[_0x4abb59(0xaa)]!==![]?startChat():alert(_0x4abb59(0x125));});}function startChat(){const _0x5493b5=_0x4138ac;if(!roomCode||!username)return alert(_0x5493b5(0x107)),showScreen('roomChoiceScreen');checkIfAdmin()[_0x5493b5(0xd4)](()=>{const _0x52cbfe=_0x5493b5,_0x12d4f1=sanitizeUsername(username),_0x47d3eb=db[_0x52cbfe(0xea)]('users/'+roomCode+'/'+_0x12d4f1),_0x210a82={'username':username,'lastOnline':firebase[_0x52cbfe(0xad)][_0x52cbfe(0xd7)][_0x52cbfe(0x11c)],'online':!![]};db[_0x52cbfe(0xea)]('admins/'+roomCode+'/'+_0x12d4f1)[_0x52cbfe(0x153)](_0x52cbfe(0x137))[_0x52cbfe(0xd4)](_0x375449=>{const _0x2de018=_0x52cbfe;_0x375449[_0x2de018(0x11a)]()&&(_0x210a82[_0x2de018(0x14b)]=!![]),_0x47d3eb[_0x2de018(0x12a)](_0x210a82,_0x1f951e=>{const _0x30bc50=_0x2de018;if(_0x1f951e)return alert('Failed\x20to\x20register\x20user\x20in\x20room.'),showScreen(_0x30bc50(0xcf));_0x47d3eb[_0x30bc50(0x12d)]()[_0x30bc50(0xa8)]({'online':![],'lastOnline':Date[_0x30bc50(0x9c)]()}),document[_0x30bc50(0xcd)](_0x30bc50(0x110))[_0x30bc50(0xab)]=username,roomCode===STATIC_ROOM?document[_0x30bc50(0xcd)](_0x30bc50(0x117))[_0x30bc50(0xab)]=_0x30bc50(0xce):document[_0x30bc50(0xcd)](_0x30bc50(0x117))[_0x30bc50(0xab)]=roomCode,showScreen(_0x30bc50(0xc8)),listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();});});});}function validateStaticRoomPassword(){const _0xe8fe0c=_0x4138ac,_0x35c955=document[_0xe8fe0c(0xcd)](_0xe8fe0c(0xeb))[_0xe8fe0c(0x137)],_0x361f72=document[_0xe8fe0c(0xcd)]('passwordError');db[_0xe8fe0c(0xea)](_0xe8fe0c(0x142))['get']()[_0xe8fe0c(0xd4)](_0x8d12c0=>{const _0x3af6f7=_0xe8fe0c,_0x177d30=_0x8d12c0[_0x3af6f7(0x128)]();_0x35c955===_0x177d30?(_0x361f72['style'][_0x3af6f7(0x139)]=_0x3af6f7(0xb4),startChat()):_0x361f72['style'][_0x3af6f7(0x139)]='block';});}const spamTimestamps=[];function sendMessage(){const _0x3a0ad0=_0x4138ac,_0x37e09a=document['getElementById'](_0x3a0ad0(0xbe)),_0x1db628=_0x37e09a['value'][_0x3a0ad0(0x111)]();if(!_0x1db628||isBlocked)return;const _0x4f9418=Date[_0x3a0ad0(0x9c)]();spamTimestamps[_0x3a0ad0(0x135)](_0x4f9418);const _0x564bf0=spamTimestamps[_0x3a0ad0(0x9e)](_0x498b13=>_0x4f9418-_0x498b13<0x1b58);if(_0x564bf0['length']>0x5){isBlocked=!![],_0x37e09a[_0x3a0ad0(0xdf)]=!![],_0x37e09a[_0x3a0ad0(0x103)]=_0x3a0ad0(0xc3),alert(_0x3a0ad0(0x12e)),setTimeout(()=>{const _0x262c63=_0x3a0ad0;isBlocked=![],_0x37e09a[_0x262c63(0xdf)]=![],_0x37e09a[_0x262c63(0x103)]=_0x262c63(0x124),spamTimestamps[_0x262c63(0xf2)]=0x0;},0x7530);return;}const _0x59ee9f=localStorage[_0x3a0ad0(0xa6)]('avatar_base64')||'',_0x38e534=db['ref']()[_0x3a0ad0(0x135)]()[_0x3a0ad0(0xae)];db[_0x3a0ad0(0xea)](_0x3a0ad0(0x134)+roomCode+'/messages/'+_0x38e534)[_0x3a0ad0(0x12a)]({'msg':_0x1db628,'sender':username,'senderId':clientId,'avatarBase64':_0x59ee9f,'timestamp':_0x4f9418}),_0x37e09a[_0x3a0ad0(0x137)]='',sendTyping(!![]),lastActivity=_0x4f9418;}function listenForMessages(){const _0x4c9d04=_0x4138ac,_0x4b238a=db[_0x4c9d04(0xea)](_0x4c9d04(0x134)+roomCode+_0x4c9d04(0x144)),_0x453835=_0x4b238a[_0x4c9d04(0xec)](MAX_MESSAGES);_0x453835['on']('child_added',_0x2ea34a=>{const _0x38544f=_0x4c9d04,_0x251992=_0x2ea34a[_0x38544f(0x128)](),{msg:_0x536bbe,sender:_0x2e5aac,senderId:_0x215dcc,timestamp:_0x3dfaf4}=_0x251992,_0x10614c=_0x215dcc===clientId,_0x268b45=_0x251992[_0x38544f(0xca)]||null,_0x5bffe9=_0x251992[_0x38544f(0xb0)]||null;addMessage(_0x251992,_0x10614c,_0x2ea34a[_0x38544f(0xae)]),roomCode!==STATIC_ROOM&&db['ref'](_0x38544f(0x134)+roomCode+_0x38544f(0xbd)+_0x2ea34a[_0x38544f(0xae)])[_0x38544f(0xc7)](),!_0x10614c&&(sound[_0x38544f(0x148)](),flagPageAttention());});}function _0x5e91(_0x5b2b3a,_0x44e9d6){const _0x5cd7e9=_0x5cd7();return _0x5e91=function(_0x5e9183,_0x3afb64){_0x5e9183=_0x5e9183-0x94;let _0x223631=_0x5cd7e9[_0x5e9183];return _0x223631;},_0x5e91(_0x5b2b3a,_0x44e9d6);}function addMessage(_0x25ec34,_0xe53a95,_0x54791a=null){const _0x4fdd5c=_0x4138ac,{msg:_0x5c5b6f,sender:_0xf58147,senderId:_0x4f516c,timestamp:_0x37b326,audioUrl:_0x500b69,audioBase64:_0x13005d,imageBase64:_0x4dea0d,avatarBase64:_0x1823da}=_0x25ec34,_0x5decdd=document[_0x4fdd5c(0xe7)](_0x4fdd5c(0xda));_0x5decdd['classList']['add'](_0x4fdd5c(0xf0),_0xe53a95?'sent':_0x4fdd5c(0x136));const _0x446c66=new Date(_0x37b326)[_0x4fdd5c(0xc1)]([],{'hour':_0x4fdd5c(0x98),'minute':_0x4fdd5c(0x98)}),_0x4d54e8=sanitizeUsername(_0xf58147),_0xbb3269=roomUsers[_0x4d54e8]||{},_0x5d486b=_0xbb3269[_0x4fdd5c(0x114)]?_0x4fdd5c(0xfd)+_0xbb3269[_0x4fdd5c(0x114)]+'\x22\x20style=\x22width:28px;height:28px;border-radius:50%;margin-right:8px;vertical-align:middle;\x22>':_0x4fdd5c(0xdc);let _0x55f90e=_0x5c5b6f?.[_0x4fdd5c(0xb6)](new RegExp('@'+username+'\x5cb','gi'),_0x4fdd5c(0x156)),_0x45eb2d=_0x5d486b+'<span\x20class=\x22sender-name\x22>'+_0xf58147+_0x4fdd5c(0xfc);_0xe53a95?_0x45eb2d+=_0x4fdd5c(0xd0)+_0x446c66+_0x4fdd5c(0xde):_0x45eb2d+=_0x4fdd5c(0xd0)+_0x446c66+_0x4fdd5c(0x9b);if(_0x500b69)_0x45eb2d+='<audio\x20controls\x20src=\x22'+_0x500b69+'\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>';else{if(_0x13005d){const _0x3e59e5=_0x4fdd5c(0xf6)+_0x13005d;_0x45eb2d+=_0x4fdd5c(0x118)+_0x3e59e5+_0x4fdd5c(0x126);}else{if(_0x4dea0d){const _0xe41086=_0x4fdd5c(0xe2)+_0x4dea0d;_0x45eb2d+=_0x4fdd5c(0xd3)+_0xe41086+'\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>';}else _0x45eb2d+=_0x4fdd5c(0xe1)+_0x55f90e+_0x4fdd5c(0xa5);}}_0x5decdd[_0x4fdd5c(0x14d)]=_0x45eb2d;if(_0xbb3269[_0x4fdd5c(0x14b)]){const _0x4c2e00=_0x5decdd['querySelector']('.sender-name');_0x4c2e00&&(_0x4c2e00[_0x4fdd5c(0x14d)]+='\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>');}const _0x3297f7=document[_0x4fdd5c(0xcd)](_0x4fdd5c(0xa7));_0x3297f7['appendChild'](_0x5decdd),_0x3297f7[_0x4fdd5c(0xef)]=_0x3297f7[_0x4fdd5c(0xb2)];}function cleanupOldRooms(){const _0x3ac5ad=_0x4138ac;db['ref'](_0x3ac5ad(0x150))[_0x3ac5ad(0x153)](_0x3ac5ad(0x137))[_0x3ac5ad(0xd4)](_0x203504=>{const _0xf715bd=_0x3ac5ad,_0xa48368=_0x203504[_0xf715bd(0x128)]();if(!_0xa48368)return;const _0x5c49a7=Date['now']();for(const _0x2c6816 in _0xa48368){if(_0x2c6816===STATIC_ROOM)continue;const _0x2af27e=_0xa48368[_0x2c6816];_0x5c49a7-(_0x2af27e[_0xf715bd(0x10f)]||0x0)>0x2*0x3c*0x3e8&&db[_0xf715bd(0xea)](_0xf715bd(0x134)+_0x2c6816)['remove']();}db[_0xf715bd(0xea)](_0xf715bd(0x10e))[_0xf715bd(0x153)](_0xf715bd(0x137))[_0xf715bd(0xd4)](_0x5e3163=>{const _0x268445=_0xf715bd,_0x1f81f1=_0x5e3163[_0x268445(0x128)]();if(!_0x1f81f1)return;for(const _0x4f00a1 in _0x1f81f1){if(_0x4f00a1!==STATIC_ROOM)db[_0x268445(0xea)]('antispam/'+_0x4f00a1)[_0x268445(0xc7)]();}}),db[_0xf715bd(0xea)]('antispamBlocked')['once'](_0xf715bd(0x137))[_0xf715bd(0xd4)](_0x4a942d=>{const _0x39bd41=_0xf715bd,_0x17b988=_0x4a942d[_0x39bd41(0x128)]();if(!_0x17b988)return;for(const _0x5c8b9a in _0x17b988){if(_0x5c8b9a!==STATIC_ROOM)db[_0x39bd41(0xea)](_0x39bd41(0x13d)+_0x5c8b9a)['remove']();}});});}document[_0x4138ac(0xff)]('DOMContentLoaded',()=>{const _0x26e883=_0x4138ac,_0x7e7a68=document[_0x26e883(0xcd)](_0x26e883(0xbe));_0x7e7a68&&_0x7e7a68[_0x26e883(0xff)](_0x26e883(0x143),function(_0x314c2c){const _0x454bb5=_0x26e883;_0x314c2c[_0x454bb5(0xae)]==='Enter'&&(_0x314c2c[_0x454bb5(0xd2)](),sendMessage());});});function showScreen(_0x13a27e){const _0x2095dd=_0x4138ac;['usernameScreen',_0x2095dd(0xcf),'codeEntryScreen',_0x2095dd(0xc8),_0x2095dd(0xba),'profileScreen',_0x2095dd(0x97)]['forEach'](_0x470af2=>{const _0x4b4df3=_0x2095dd;document['getElementById'](_0x470af2)[_0x4b4df3(0xfa)]['display']=_0x4b4df3(0xb4);}),document[_0x2095dd(0xcd)](_0x13a27e)['style'][_0x2095dd(0x139)]=_0x2095dd(0x140);}function genRoomCode(){const _0x55589a=_0x4138ac,_0x43fc7a=_0x55589a(0x13e),_0x1246ae=_0x55589a(0x10c),_0x30ce7b=(_0x3be414,_0x2dec29)=>Array[_0x55589a(0xdb)]({'length':_0x2dec29},()=>_0x3be414[Math[_0x55589a(0xa2)](Math[_0x55589a(0xb8)]()*_0x3be414[_0x55589a(0xf2)])])[_0x55589a(0xd8)]('');return _0x30ce7b(_0x1246ae,0x3)+_0x30ce7b(_0x43fc7a,0x3)+_0x30ce7b(_0x1246ae,0x2)+_0x30ce7b(_0x43fc7a,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x28cc09=_0x5e91;Date[_0x28cc09(0x9c)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x28cc09(0xea)]('rooms/'+roomCode)[_0x28cc09(0xa8)]({'active':![]}),alert(_0x28cc09(0x154)),location['reload']());},0x7530);}function setupSidebarBackHandler(){const _0x53da5e=_0x4138ac;window[_0x53da5e(0xff)](_0x53da5e(0x11d),()=>{const _0x213fe1=_0x53da5e,_0x21acf2=document['getElementById'](_0x213fe1(0x101));_0x21acf2?.[_0x213fe1(0x10a)][_0x213fe1(0x10d)]('show')&&_0x21acf2[_0x213fe1(0x10a)][_0x213fe1(0xc7)](_0x213fe1(0x145));});}function toggleSidebar(){const _0x2a9fd6=_0x4138ac,_0x193fb7=document[_0x2a9fd6(0xcd)](_0x2a9fd6(0x101));if(!_0x193fb7[_0x2a9fd6(0x10a)][_0x2a9fd6(0x10d)]('show'))_0x193fb7[_0x2a9fd6(0x10a)][_0x2a9fd6(0xa0)](_0x2a9fd6(0x145)),history[_0x2a9fd6(0x13c)]({'sidebarOpen':!![]},'');else{_0x193fb7['classList'][_0x2a9fd6(0xc7)](_0x2a9fd6(0x145));if(history[_0x2a9fd6(0xdd)]?.['sidebarOpen'])history[_0x2a9fd6(0xf1)]();}}function setupVisibilityAttention(){const _0x7b63f9=_0x4138ac;let _0x188e56=0x0,_0xd67a32=document[_0x7b63f9(0x138)];document['addEventListener'](_0x7b63f9(0x12f),()=>{const _0x2f31e1=_0x7b63f9;!document[_0x2f31e1(0x147)]&&(document[_0x2f31e1(0x138)]=_0xd67a32,_0x188e56=0x0);}),window[_0x7b63f9(0xb9)]=function(){const _0x49aac4=_0x7b63f9;document[_0x49aac4(0x147)]&&(_0x188e56++,document[_0x49aac4(0x138)]='('+_0x188e56+_0x49aac4(0xaf)+_0xd67a32);};}function tryEditProfile(){const _0x29f591=_0x4138ac,_0x2dec59=sanitizeUsername(username);db['ref'](_0x29f591(0xfe)+_0x2dec59)[_0x29f591(0x14c)]()[_0x29f591(0xd4)](_0x13e967=>{const _0x2383bd=_0x29f591,_0x41c1ac=_0x13e967[_0x2383bd(0x128)]();if(!_0x41c1ac)return alert(_0x2383bd(0xe6));const _0xae1a79=_0x41c1ac[_0x2383bd(0xf9)]||0x0,_0x3f03c6=Date[_0x2383bd(0x9c)](),_0x3b02e2=0x18*0x3c*0x3c*0x3e8;if(_0x3f03c6-_0xae1a79<_0x3b02e2){const _0x3d9b17=Math['ceil']((_0x3b02e2-(_0x3f03c6-_0xae1a79))/(0x3c*0x3e8));alert(_0x2383bd(0xd6)+_0x3d9b17+'\x20minutes.');}else showScreen('profileScreen'),document[_0x2383bd(0xcd)](_0x2383bd(0x105))['value']=username,document[_0x2383bd(0xcd)](_0x2383bd(0xb1))[_0x2383bd(0x137)]=_0x41c1ac[_0x2383bd(0xe9)]||'';});}function _0x5cd7(){const _0x1578c5=['You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','ServerValue','join','muted/','div','from','<span\x20style=\x22margin-right:8px;\x22>👤</span>','state','\x20·\x20✓✓</small>','disabled','easy-chatroom.firebasestorage.app','<div>','data:image/png;base64,','usernameHistory','volume','<li\x20style=\x22color:','Profile\x20not\x20found.','createElement','typing','description','ref','staticPasswordInput','limitToLast','start','roomCodeInput','scrollTop','msg','back','length','[Voice\x20message]','5HHtwMW','/typing/','data:audio/webm;base64,','1:985049198428:web:d0eb7e2de39887710c9b99','●\x20Online','lastChanged','style','\x0a\x20\x20\x20\x20\x20\x20</li>','</span>','<img\x20src=\x22data:image/png;base64,','profiles/','addEventListener','stop','userSidebar','40FuknpD','placeholder','1723232ibOcPo','profileUsernameInput','catch','Missing\x20room\x20or\x20user\x20information.','easy-chatroom.firebaseapp.com','\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;vertical-align:middle;\x22>','classList','https://easy-chatroom-default-rtdb.firebaseio.com','0123456789','contains','antispam','created','userDisplay','trim','audio/webm','3908276JJbyVg','avatarBase64','lastOnline','050BBB66HH','roomDisplay','<audio\x20controls\x20src=\x22','Admins\x20only.','exists','easy-chatroom','TIMESTAMP','popstate','\x0a\x20\x20\x20\x20','forEach','/typing','mediaDevices','toLocaleString','Error\x20checking\x20username.\x20Try\x20again.','Type\x20a\x20message...','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','block','val','698656tbtUrY','set','recordBtn','3063540UKThNH','onDisconnect','⛔\x20You’ve\x20been\x20muted\x20for\x20spamming.\x20Please\x20wait\x2030\x20seconds.','visibilitychange','namePreview','files','initializeApp','No\x20bio\x20set','rooms/','push','received','value','title','display','error','split','pushState','antispamBlocked/','ABCDEFGHIJKLMNOPQRSTUVWXYZ','18881192lemLmT','flex','\x0aName:\x20','gr8stg','keypress','/messages','show','ondataavailable','hidden','play','\x20<span\x20style=\x22color:red;\x22>Admin</span>','sidebarAvatarPreview','admin','get','innerHTML','Enter\x20a\x20valid\x20room\x20code','profileContent','rooms','onlineStatus','onloadend','once','Session\x20expired.','src','<span\x20style=\x22color:#ff4081;\x22>@$&</span>','Profile\x20check\x20failed','G-QDESJ2WR42','data','profileViewer','2-digit','substr','🎙️','</small>','now','\x0aLast\x20Changed:\x20','filter','admins/','add','\x20typing...','floor','readAsDataURL','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','</div>','getItem','messages','update','985049198428','active','innerText','result','database','key',')\x20New\x20message\x20•\x20','audioBase64','profileDescriptionInput','scrollHeight','color','none','onstop','replace','3ZoszrO','random','flagPageAttention','passwordScreen','318724chAKDb','values','/messages/','msgInput','userList','<span\x20style=\x22margin-right:5px;\x22>👤</span>','toLocaleTimeString','\x0aDescription:\x20','⛔\x20You\x27re\x20blocked\x20for\x20spamming\x20(30s)','1115001gpRDNg','6FqffgL','chat_username','remove','chatScreen','username','audioUrl','users/','setItem','getElementById','No\x20room\x20code\x20available\x20for\x20private\x20rooms','roomChoiceScreen','<small>','Microphone\x20permission\x20denied.','preventDefault','<img\x20src=\x22','then','avatar_base64'];_0x5cd7=function(){return _0x1578c5;};return _0x5cd7();}function listenForUserList(){const _0x17c043=_0x4138ac;db['ref'](_0x17c043(0xcb)+roomCode)['on'](_0x17c043(0x137),_0x5584a7=>{const _0x466df2=_0x17c043,_0x56d7f0=_0x5584a7[_0x466df2(0x128)]()||{};Object['entries'](_0x56d7f0)[_0x466df2(0x11f)](([_0x5c9ac2,_0x6b9d2b])=>{const _0x547a46=_0x466df2;roomUsers[sanitizeUsername(_0x6b9d2b[_0x547a46(0xc9)])]=_0x6b9d2b;});const _0x379d66=Date[_0x466df2(0x9c)](),_0x114a61=Object[_0x466df2(0xbc)](_0x56d7f0)['map'](_0x1cfb1b=>{const _0x27b68d=_0x466df2,_0x58dbac=_0x1cfb1b['online'],_0x2ca4f5=_0x379d66-_0x1cfb1b[_0x27b68d(0x115)]<=0x1e*0x3c*0x3e8;if(!_0x58dbac&&!_0x2ca4f5)return'';const _0x718151=_0x58dbac?'#00ff88':'#888',_0x358ce2=_0x58dbac?'🟢':'🕒',_0x49c1c3=new Date(_0x1cfb1b[_0x27b68d(0x115)])[_0x27b68d(0xc1)]([],{'hour':_0x27b68d(0x98),'minute':_0x27b68d(0x98)}),_0x533d1d=_0x1cfb1b[_0x27b68d(0x114)]?_0x27b68d(0xfd)+_0x1cfb1b[_0x27b68d(0x114)]+_0x27b68d(0x109):_0x27b68d(0xc0),_0x240afa=_0x1cfb1b[_0x27b68d(0x14b)]?_0x27b68d(0x149):'';return _0x27b68d(0xe5)+_0x718151+';cursor:pointer;display:flex;align-items:center;gap:6px;\x22\x20onclick=\x22viewProfile(\x27'+sanitizeUsername(_0x1cfb1b[_0x27b68d(0xc9)])+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x533d1d+_0x358ce2+'\x20'+_0x1cfb1b[_0x27b68d(0xc9)]+_0x240afa+_0x27b68d(0xfb);})[_0x466df2(0xd8)]('');document[_0x466df2(0xcd)](_0x466df2(0xbf))['innerHTML']=_0x114a61;});}function sendTyping(_0x8dc30f=![]){const _0x2f6bb3=_0x4138ac;if(isBlocked)return;const _0x3b53ab=_0x2f6bb3(0x134)+roomCode+_0x2f6bb3(0xf5)+clientId;_0x8dc30f?db[_0x2f6bb3(0xea)](_0x3b53ab)[_0x2f6bb3(0xc7)]():(db[_0x2f6bb3(0xea)](_0x3b53ab)[_0x2f6bb3(0x12a)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x3c7918=_0x2f6bb3;db[_0x3c7918(0xea)](_0x3b53ab)[_0x3c7918(0xc7)]();},0xbb8));}function listenForTyping(){const _0x307fc4=_0x4138ac,_0x287ac8=document[_0x307fc4(0xcd)](_0x307fc4(0xe8));db[_0x307fc4(0xea)](_0x307fc4(0x134)+roomCode+_0x307fc4(0x120))['on']('value',_0x133918=>{const _0x2d21f7=_0x307fc4,_0x58f77e=_0x133918[_0x2d21f7(0x128)]();if(!_0x58f77e)return _0x287ac8[_0x2d21f7(0xab)]='';const _0x51db19=Object[_0x2d21f7(0xbc)](_0x58f77e)['filter'](_0x232f43=>_0x232f43!==username);_0x287ac8['innerText']=_0x51db19[_0x2d21f7(0xf2)]?_0x51db19['join'](',\x20')+_0x2d21f7(0xa1):'';});}function trackPresence(){const _0x4f3055=_0x4138ac;if(!username||!roomCode)return;const _0x36713c=sanitizeUsername(username),_0x56fe04=db[_0x4f3055(0xea)](_0x4f3055(0xcb)+roomCode+'/'+_0x36713c),_0x1a2ddb=localStorage[_0x4f3055(0xa6)](_0x4f3055(0xd5))||'',_0x45205f={'username':username,'lastOnline':firebase[_0x4f3055(0xad)][_0x4f3055(0xd7)][_0x4f3055(0x11c)],'online':!![],'avatarBase64':_0x1a2ddb};db[_0x4f3055(0xea)]('admins/'+roomCode+'/'+_0x36713c)[_0x4f3055(0x153)](_0x4f3055(0x137))[_0x4f3055(0xd4)](_0x50aaeb=>{const _0x4ae42e=_0x4f3055;if(_0x50aaeb[_0x4ae42e(0x11a)]())_0x45205f[_0x4ae42e(0x14b)]=!![];_0x56fe04[_0x4ae42e(0x12a)](_0x45205f),_0x56fe04['onDisconnect']()[_0x4ae42e(0xa8)]({'online':![],'lastOnline':Date[_0x4ae42e(0x9c)]()}),updateOnlineIndicator();});}function uploadSidebarAvatar(_0x486835){const _0x35da5c=_0x4138ac;if(!_0x486835[_0x35da5c(0x131)]['length'])return;const _0xbf4d25=new FileReader();_0xbf4d25[_0x35da5c(0x152)]=()=>{const _0x4dbeb9=_0x35da5c,_0x143185=_0xbf4d25[_0x4dbeb9(0xac)][_0x4dbeb9(0x13b)](',')[0x1];localStorage[_0x4dbeb9(0xcc)]('avatar_base64',_0x143185);const _0x1f2b3f=document[_0x4dbeb9(0xcd)](_0x4dbeb9(0x14a));_0x1f2b3f[_0x4dbeb9(0x155)]=_0x4dbeb9(0xe2)+_0x143185,_0x1f2b3f['style'][_0x4dbeb9(0x139)]=_0x4dbeb9(0x127),trackPresence();},_0xbf4d25[_0x35da5c(0xa3)](_0x486835[_0x35da5c(0x131)][0x0]);}function muteUser(_0x184a65,_0x28bd57){const _0x302e5c=_0x4138ac;if(!isRoomAdmin)return alert(_0x302e5c(0x119));const _0x2209fe=Date[_0x302e5c(0x9c)]()+_0x28bd57*0x3c*0x3e8;db[_0x302e5c(0xea)]('muted/'+roomCode+'/'+sanitizeUsername(_0x184a65))[_0x302e5c(0x12a)](_0x2209fe);}function unmuteUser(_0x409f37){const _0x38553f=_0x4138ac;if(!isRoomAdmin)return alert(_0x38553f(0x119));db[_0x38553f(0xea)](_0x38553f(0xd9)+roomCode+'/'+sanitizeUsername(_0x409f37))[_0x38553f(0xc7)]();}function updateOnlineIndicator(){const _0x793bf1=_0x4138ac,_0x12efbc=document[_0x793bf1(0xcd)](_0x793bf1(0x151));_0x12efbc['innerText']=_0x793bf1(0xf8),_0x12efbc[_0x793bf1(0xfa)][_0x793bf1(0xb3)]='#00ff88';}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x3ddde6){const _0x540ddb=_0x4138ac;db[_0x540ddb(0xea)](_0x540ddb(0xfe)+_0x3ddde6)[_0x540ddb(0x14c)]()[_0x540ddb(0xd4)](_0x162109=>{const _0x872112=_0x540ddb;if(!_0x162109[_0x872112(0x11a)]())return;const _0x517edc=_0x162109[_0x872112(0x128)](),_0x5ded0f=(_0x872112(0x141)+_0x517edc[_0x872112(0xc9)]+_0x872112(0xc2)+(_0x517edc[_0x872112(0xe9)]||_0x872112(0x133))+'\x0aHistory:\x0a'+(_0x517edc[_0x872112(0xe3)]||[])['join']('\x0a')+_0x872112(0x9d)+new Date(_0x517edc[_0x872112(0xf9)])[_0x872112(0x122)]()+_0x872112(0x11e))['trim']();document[_0x872112(0xcd)](_0x872112(0x14f))['innerText']=_0x5ded0f,document[_0x872112(0xcd)](_0x872112(0x97))[_0x872112(0xfa)][_0x872112(0x139)]=_0x872112(0x127);});}function initUsernameFlow(){const _0x52de11=_0x4138ac,_0x4ba23f=localStorage[_0x52de11(0xa6)]('chat_username');!_0x4ba23f?showScreen('profileScreen'):(username=_0x4ba23f,document[_0x52de11(0xcd)](_0x52de11(0x130))[_0x52de11(0xab)]=username,showScreen(_0x52de11(0xcf)));}function closeProfile(){const _0x399f6d=_0x4138ac;document[_0x399f6d(0xcd)](_0x399f6d(0x97))[_0x399f6d(0xfa)][_0x399f6d(0x139)]=_0x399f6d(0xb4);}