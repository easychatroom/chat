const _0x56f5d5=_0x21e6;(function(_0x4a1e48,_0x293d3c){const _0x2f55cb=_0x21e6,_0xce501c=_0x4a1e48();while(!![]){try{const _0x51b928=parseInt(_0x2f55cb(0xe2))/0x1+parseInt(_0x2f55cb(0x146))/0x2*(-parseInt(_0x2f55cb(0x147))/0x3)+parseInt(_0x2f55cb(0x10a))/0x4*(-parseInt(_0x2f55cb(0x13d))/0x5)+-parseInt(_0x2f55cb(0x13b))/0x6*(parseInt(_0x2f55cb(0x126))/0x7)+-parseInt(_0x2f55cb(0x143))/0x8+-parseInt(_0x2f55cb(0x11e))/0x9*(parseInt(_0x2f55cb(0x100))/0xa)+parseInt(_0x2f55cb(0x13a))/0xb;if(_0x51b928===_0x293d3c)break;else _0xce501c['push'](_0xce501c['shift']());}catch(_0x262045){_0xce501c['push'](_0xce501c['shift']());}}}(_0x4d24,0xf295b));const firebaseConfig={'apiKey':_0x56f5d5(0x144),'authDomain':_0x56f5d5(0x153),'databaseURL':'https://easy-chatroom-default-rtdb.firebaseio.com','projectId':'easy-chatroom','storageBucket':_0x56f5d5(0x10d),'messagingSenderId':_0x56f5d5(0x11b),'appId':_0x56f5d5(0x152),'measurementId':_0x56f5d5(0x12d)};firebase[_0x56f5d5(0xf3)](firebaseConfig);function _0x4d24(){const _0x2ed5e6=['active','set','onload','show','createElement','database','roomChoiceScreen','state','985049198428','chat_username','</span><br>','18rArNSq','2-digit','getElementById','TIMESTAMP','update','substr','innerText','style','14pODylf','trim','msg','</small>','DOMContentLoaded','add','forEach','G-QDESJ2WR42','Enter\x20a\x20valid\x20room\x20code','back','classList','Please\x20enter\x20your\x20name','none','value','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','preventDefault','created','pushState','chatScreen','roomCodeInput','52752282ZrPGKk','2364396JEEBeK','sent','25zHcaBW','msgInput','values','exists','rooms','replace','13432992KPswEG','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','üóëÔ∏è\x20Deleted\x20expired\x20room:','55408PwdklE','9beCADi','length','sidebarOpen','get','lastOnline','flex','/messages','typing','/messages/','<span\x20class=\x22sender-name\x22>','push','1:985049198428:web:d0eb7e2de39887710c9b99','easy-chatroom.firebaseapp.com','Session\x20expired.','system','then','usernameInput','key','filter','78982URQmkh','limitToLast','val','\x20joined\x20the\x20room','toLocaleTimeString','scrollTop','usernameScreen','ABCDEFGHIJKLMNOPQRSTUVWXYZ','Enter','child_added','join','codeEntryScreen','map','/typing/','messages','remove','userList','initializeApp','floor','entries','online','namePreview','rooms/','addEventListener','userSidebar','onpopstate','toString','from','System','once','6181870ypSbAG','now','users/','0123456789','innerHTML','ref','username','received','\x20typing...','#888','75420CshcNo','div','#00ff88','easy-chatroom.firebasestorage.app','<small>','log','contains','050BBB66HH','reload'];_0x4d24=function(){return _0x2ed5e6;};return _0x4d24();}const db=firebase[_0x56f5d5(0x118)](),STATIC_ROOM='050BBB66HH',ROOM_TTL_MS=0x2*0x3c*0x3e8;let username=localStorage['getItem'](_0x56f5d5(0x11c)),roomCode='',clientId=generateClientId(),lastActivity=Date[_0x56f5d5(0x101)](),typingTimeout;const userKey=sanitizeUsername(username);window[_0x56f5d5(0x115)]=()=>{const _0x43f711=_0x56f5d5;!username?showScreen('usernameScreen'):(document[_0x43f711(0x120)](_0x43f711(0xf7))['innerText']=username,showScreen(_0x43f711(0x119))),cleanupOldRooms(),!username?showScreen('usernameScreen'):(document[_0x43f711(0x120)](_0x43f711(0xf7))['innerText']=username,showScreen(_0x43f711(0x119)));};function saveUsername(){const _0x3736db=_0x56f5d5;username=document[_0x3736db(0x120)](_0x3736db(0x157))[_0x3736db(0x133)]['trim']();if(!username)return alert(_0x3736db(0x131));localStorage['setItem'](_0x3736db(0x11c),username),document['getElementById']('namePreview')['innerText']=username,showScreen(_0x3736db(0x119));}function generateRoom(){const _0x332056=_0x56f5d5;roomCode=genRoomCode(),db[_0x332056(0x105)](_0x332056(0xf8)+roomCode)['set']({'active':!![],'created':Date[_0x332056(0x101)]()}),startChat();}function joinRoom(){const _0x1fd2ef=_0x56f5d5;roomCode=document[_0x1fd2ef(0x120)](_0x1fd2ef(0x139))[_0x1fd2ef(0x133)][_0x1fd2ef(0x127)]()['toUpperCase']();if(!roomCode)return alert(_0x1fd2ef(0x12e));db[_0x1fd2ef(0x105)](_0x1fd2ef(0xf8)+roomCode)[_0x1fd2ef(0x14a)]()[_0x1fd2ef(0x156)](_0x4c99c5=>{const _0x2c8fff=_0x1fd2ef;_0x4c99c5[_0x2c8fff(0x140)]()&&_0x4c99c5[_0x2c8fff(0xe4)]()[_0x2c8fff(0x113)]!==![]?startChat():alert(_0x2c8fff(0x134));});}function joinGlobalRoom(){const _0x164b34=_0x56f5d5;roomCode=_0x164b34(0x111),db[_0x164b34(0x105)](_0x164b34(0xf8)+roomCode)['set']({'active':!![],'created':Date['now']()}),startChat();}function startChat(){const _0x38860=_0x56f5d5;showScreen(_0x38860(0x138)),document['getElementById']('userDisplay')[_0x38860(0x124)]=username,document[_0x38860(0x120)]('roomDisplay')[_0x38860(0x124)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList(),logSystemMessage(username+_0x38860(0xe5)),window['addEventListener']('beforeunload',()=>{logSystemMessage(username+'\x20left\x20the\x20room');});}function trackPresence(){const _0x3e1f9b=_0x56f5d5,_0x494fa7=sanitizeUsername(username),_0x53dadd=db[_0x3e1f9b(0x105)](_0x3e1f9b(0x102)+roomCode+'/'+_0x494fa7),_0x264327={'username':username,'lastOnline':firebase[_0x3e1f9b(0x118)]['ServerValue'][_0x3e1f9b(0x121)],'online':!![]};_0x53dadd[_0x3e1f9b(0x114)](_0x264327),_0x53dadd['onDisconnect']()[_0x3e1f9b(0x122)]({'online':![],'lastOnline':Date['now']()});}function listenForUserList(){const _0x15eaa7=_0x56f5d5;db[_0x15eaa7(0x105)](_0x15eaa7(0x102)+roomCode)['on'](_0x15eaa7(0x133),_0x18d5f2=>{const _0x413876=_0x15eaa7,_0x23075b=_0x18d5f2[_0x413876(0xe4)]()||{},_0x40c7e9=Date['now'](),_0x225473=Object['values'](_0x23075b)[_0x413876(0xe1)](_0x58374e=>_0x58374e[_0x413876(0x106)])[_0x413876(0xee)](_0x2f9bef=>{const _0x4580c5=_0x413876,_0x1bcf4f=_0x2f9bef[_0x4580c5(0xf6)],_0x41d7c1=_0x40c7e9-_0x2f9bef[_0x4580c5(0x14b)]<=0x1e*0x3c*0x3e8;if(!_0x1bcf4f&&!_0x41d7c1)return'';const _0xde1cda=_0x1bcf4f?_0x4580c5(0x10c):_0x4580c5(0x109),_0xc830fc=_0x1bcf4f?'üü¢':'üïí';return'<li\x20style=\x22color:'+_0xde1cda+'\x22>'+_0xc830fc+'\x20'+_0x2f9bef[_0x4580c5(0x106)]+'</li>';})['join']('');document[_0x413876(0x120)](_0x413876(0xf2))[_0x413876(0x104)]=_0x225473;});}function logSystemMessage(_0x5852dc){const _0x34d865=_0x56f5d5,_0x4f7233=db[_0x34d865(0x105)]()['push']()[_0x34d865(0xe0)];db[_0x34d865(0x105)](_0x34d865(0xf8)+roomCode+_0x34d865(0x14f)+_0x4f7233)[_0x34d865(0x114)]({'msg':_0x5852dc,'sender':_0x34d865(0xfe),'senderId':_0x34d865(0x155),'timestamp':Date['now']()});}function toggleSidebar(){const _0x3c63d5=_0x56f5d5,_0x235daf=document['getElementById'](_0x3c63d5(0xfa));!_0x235daf[_0x3c63d5(0x130)][_0x3c63d5(0x110)](_0x3c63d5(0x116))?(_0x235daf[_0x3c63d5(0x130)][_0x3c63d5(0x12b)](_0x3c63d5(0x116)),history[_0x3c63d5(0x137)]({'sidebarOpen':!![]},'')):(_0x235daf[_0x3c63d5(0x130)]['remove'](_0x3c63d5(0x116)),history[_0x3c63d5(0x11a)]&&history[_0x3c63d5(0x11a)][_0x3c63d5(0x149)]&&history[_0x3c63d5(0x12f)]());}function _0x21e6(_0x41ddb5,_0x1dc7f4){const _0x4d2426=_0x4d24();return _0x21e6=function(_0x21e6d0,_0x5c58b0){_0x21e6d0=_0x21e6d0-0xe0;let _0x267ff1=_0x4d2426[_0x21e6d0];return _0x267ff1;},_0x21e6(_0x41ddb5,_0x1dc7f4);}document[_0x56f5d5(0xf9)](_0x56f5d5(0x12a),()=>{const _0x194158=_0x56f5d5,_0x3df0a7=document[_0x194158(0x120)](_0x194158(0x13e));_0x3df0a7&&_0x3df0a7['addEventListener']('keypress',function(_0x414e7c){const _0x571c1d=_0x194158;_0x414e7c[_0x571c1d(0xe0)]===_0x571c1d(0xea)&&(_0x414e7c[_0x571c1d(0x135)](),sendMessage());});});function showScreen(_0x3a3fa3){const _0x36c590=_0x56f5d5;[_0x36c590(0xe8),_0x36c590(0x119),_0x36c590(0xed),'chatScreen'][_0x36c590(0x12c)](_0x3443b4=>{const _0x3ed83f=_0x36c590;document[_0x3ed83f(0x120)](_0x3443b4)[_0x3ed83f(0x125)]['display']=_0x3ed83f(0x132);}),document[_0x36c590(0x120)](_0x3a3fa3)[_0x36c590(0x125)]['display']=_0x36c590(0x14c);}function sendMessage(){const _0x58e7b3=_0x56f5d5,_0x52e4b1=document[_0x58e7b3(0x120)](_0x58e7b3(0x13e)),_0x336b3b=_0x52e4b1[_0x58e7b3(0x133)][_0x58e7b3(0x127)]();if(!_0x336b3b)return;const _0x5f2c48=db[_0x58e7b3(0x105)]()[_0x58e7b3(0x151)]()[_0x58e7b3(0xe0)];db[_0x58e7b3(0x105)](_0x58e7b3(0xf8)+roomCode+'/messages/'+_0x5f2c48)[_0x58e7b3(0x114)]({'msg':_0x336b3b,'sender':username,'senderId':clientId,'timestamp':Date[_0x58e7b3(0x101)]()}),_0x52e4b1[_0x58e7b3(0x133)]='',sendTyping(!![]),lastActivity=Date['now']();}function listenForMessages(){const _0x166e94=_0x56f5d5,_0x58ccbb=db['ref'](_0x166e94(0xf8)+roomCode+_0x166e94(0x14d)),_0x4e53f9=roomCode===STATIC_ROOM?_0x58ccbb[_0x166e94(0xe3)](0x50):_0x58ccbb;_0x4e53f9['on'](_0x166e94(0xeb),_0x7ef0b8=>{const _0x3da3ac=_0x166e94,{msg:_0x48ca97,sender:_0x27dc35,senderId:_0x399fbe,timestamp:_0x726992}=_0x7ef0b8[_0x3da3ac(0xe4)](),_0x1101f4=_0x399fbe===clientId;addMessage(_0x48ca97,_0x27dc35,_0x726992,_0x1101f4),roomCode!==STATIC_ROOM&&db[_0x3da3ac(0x105)](_0x3da3ac(0xf8)+roomCode+'/messages/'+_0x7ef0b8[_0x3da3ac(0xe0)])[_0x3da3ac(0xf1)]();});}function addMessage(_0x554266,_0x4d99f5,_0xc29310,_0x3c5189){const _0x1c3856=_0x56f5d5,_0x227ab6=document[_0x1c3856(0x117)](_0x1c3856(0x10b));_0x227ab6['classList'][_0x1c3856(0x12b)](_0x1c3856(0x128),_0x3c5189?_0x1c3856(0x13c):_0x1c3856(0x107));const _0x17a681=new Date(_0xc29310)[_0x1c3856(0xe6)]([],{'hour':_0x1c3856(0x11f),'minute':_0x1c3856(0x11f)});_0x227ab6[_0x1c3856(0x104)]=_0x1c3856(0x150)+_0x4d99f5+_0x1c3856(0x11d)+_0x554266+_0x1c3856(0x10e)+_0x17a681+_0x1c3856(0x129),document[_0x1c3856(0x120)](_0x1c3856(0xf0))['appendChild'](_0x227ab6),document[_0x1c3856(0x120)](_0x1c3856(0xf0))[_0x1c3856(0xe7)]=0x1869f;}function sendTyping(_0x32af19=![]){const _0x370e7d=_0x56f5d5;_0x32af19?db[_0x370e7d(0x105)]('rooms/'+roomCode+_0x370e7d(0xef)+clientId)[_0x370e7d(0xf1)]():(db[_0x370e7d(0x105)]('rooms/'+roomCode+_0x370e7d(0xef)+clientId)[_0x370e7d(0x114)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x254b79=_0x370e7d;db['ref'](_0x254b79(0xf8)+roomCode+_0x254b79(0xef)+clientId)['remove']();},0xbb8));}function listenForTyping(){const _0x170eb9=_0x56f5d5,_0x329c0f=document[_0x170eb9(0x120)](_0x170eb9(0x14e));db[_0x170eb9(0x105)]('rooms/'+roomCode+'/typing')['on']('value',_0x6e8dda=>{const _0x42d0e3=_0x170eb9,_0x44b1b7=_0x6e8dda[_0x42d0e3(0xe4)]();if(!_0x44b1b7)return _0x329c0f['innerText']='';const _0x2920b9=Object[_0x42d0e3(0x13f)](_0x44b1b7)['filter'](_0x162e73=>_0x162e73!==username);_0x329c0f['innerText']=_0x2920b9[_0x42d0e3(0x148)]?_0x2920b9[_0x42d0e3(0xec)](',\x20')+_0x42d0e3(0x108):'';});}function startInactivityTimer(){setInterval(()=>{const _0x3376b4=_0x21e6;Date[_0x3376b4(0x101)]()-lastActivity>0x5*0x3c*0x3e8&&(db[_0x3376b4(0x105)]('rooms/'+roomCode)['update']({'active':![]}),alert(_0x3376b4(0x154)),location[_0x3376b4(0x112)]());},0x7530);}function genRoomCode(){const _0x245e9e=_0x56f5d5,_0x35db6e=_0x245e9e(0xe9),_0x2920c1=_0x245e9e(0x103),_0xa5c733=(_0x22c8c9,_0x16afa9)=>Array[_0x245e9e(0xfd)]({'length':_0x16afa9},()=>_0x22c8c9[Math[_0x245e9e(0xf4)](Math['random']()*_0x22c8c9[_0x245e9e(0x148)])])[_0x245e9e(0xec)]('');return _0xa5c733(_0x2920c1,0x3)+_0xa5c733(_0x35db6e,0x3)+_0xa5c733(_0x2920c1,0x2)+_0xa5c733(_0x35db6e,0x2);}function generateClientId(){const _0x19a231=_0x56f5d5;return'_'+Math['random']()[_0x19a231(0xfc)](0x24)[_0x19a231(0x123)](0x2,0x9);}function cleanupOldRooms(){const _0x3c84df=_0x56f5d5;db[_0x3c84df(0x105)](_0x3c84df(0x141))[_0x3c84df(0xff)](_0x3c84df(0x133))[_0x3c84df(0x156)](_0x2ceab0=>{const _0x4004bd=_0x3c84df,_0x3b8108=_0x2ceab0['val']();if(!_0x3b8108)return;const _0x44879c=Date[_0x4004bd(0x101)]();Object[_0x4004bd(0xf5)](_0x3b8108)[_0x4004bd(0x12c)](([_0x48b1b0,_0x46f80f])=>{const _0x341218=_0x4004bd;if(_0x48b1b0===STATIC_ROOM)return;const _0x341591=_0x46f80f[_0x341218(0x136)]||0x0,_0x17505b=_0x44879c-_0x341591>ROOM_TTL_MS;_0x17505b&&(db[_0x341218(0x105)]('rooms/'+_0x48b1b0)['remove'](),console[_0x341218(0x10f)](_0x341218(0x145),_0x48b1b0));});});}function sanitizeUsername(_0x50d5ec){const _0x3ac61c=_0x56f5d5;return _0x50d5ec[_0x3ac61c(0x142)](/[.#$\[\]]/g,'_');}window[_0x56f5d5(0xfb)]=function(_0x415718){const _0x259733=_0x56f5d5,_0x258133=document['getElementById'](_0x259733(0xfa));_0x258133[_0x259733(0x130)]['contains'](_0x259733(0x116))&&_0x258133[_0x259733(0x130)][_0x259733(0xf1)]('show');};