const _0x27587a=_0x258a;(function(_0x5e3032,_0x13e205){const _0x4feecd=_0x258a,_0x2de731=_0x5e3032();while(!![]){try{const _0x55f706=-parseInt(_0x4feecd(0x97))/0x1*(parseInt(_0x4feecd(0x131))/0x2)+-parseInt(_0x4feecd(0xa9))/0x3*(parseInt(_0x4feecd(0x8f))/0x4)+parseInt(_0x4feecd(0x132))/0x5+-parseInt(_0x4feecd(0x92))/0x6*(parseInt(_0x4feecd(0x95))/0x7)+parseInt(_0x4feecd(0x99))/0x8*(parseInt(_0x4feecd(0x7a))/0x9)+-parseInt(_0x4feecd(0x9f))/0xa*(parseInt(_0x4feecd(0xd6))/0xb)+parseInt(_0x4feecd(0xca))/0xc;if(_0x55f706===_0x13e205)break;else _0x2de731['push'](_0x2de731['shift']());}catch(_0x25c1ae){_0x2de731['push'](_0x2de731['shift']());}}}(_0xb4ec,0x42f74));const firebaseConfig={'apiKey':_0x27587a(0xc5),'authDomain':_0x27587a(0x8d),'databaseURL':_0x27587a(0xb9),'projectId':_0x27587a(0xd3),'storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':'985049198428','appId':_0x27587a(0x11f),'measurementId':_0x27587a(0xe2)};firebase[_0x27587a(0x6b)](firebaseConfig);const db=firebase[_0x27587a(0x125)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x27587a(0xcf)]()[_0x27587a(0xdb)](0x24)[_0x27587a(0x8c)](0x2,0x9),lastActivity=Date[_0x27587a(0xd8)](),typingTimeout,gr8stg='';const STATIC_ROOM='050BBB66HH',MAX_MESSAGES=0xfa,sound=new Audio(_0x27587a(0x10c));sound['volume']=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![];function checkIfAdmin(){const _0x3f3c58=_0x27587a,_0x419297=db['ref'](_0x3f3c58(0x128)+roomCode+'/'+sanitizeUsername(username));return _0x419297[_0x3f3c58(0x98)]('value')[_0x3f3c58(0xce)](_0x402ae1=>{const _0x51b613=_0x3f3c58;isRoomAdmin=_0x402ae1[_0x51b613(0x73)]();});}function toggleRecording(){const _0x36b8e9=_0x27587a;isRecording?stopRecording():navigator[_0x36b8e9(0x101)][_0x36b8e9(0xc6)]({'audio':!![]})[_0x36b8e9(0xce)](_0x2d407a=>{const _0x30298d=_0x36b8e9;mediaRecorder=new MediaRecorder(_0x2d407a),mediaRecorder['start'](),isRecording=!![],document[_0x30298d(0x85)](_0x30298d(0xff))[_0x30298d(0x110)]='⏹️',audioChunks=[],mediaRecorder[_0x30298d(0xbb)]=_0x3d2ef3=>audioChunks[_0x30298d(0x86)](_0x3d2ef3[_0x30298d(0x11b)]),mediaRecorder[_0x30298d(0x84)]=()=>{const _0x25747a=_0x30298d;clearTimeout(recordingTimer);const _0x3b45d9=new Blob(audioChunks,{'type':_0x25747a(0x7b)}),_0x3a5830=new FileReader();_0x3a5830[_0x25747a(0x9d)]=()=>{const _0x1c0b54=_0x25747a,_0x45e94c=_0x3a5830['result'][_0x1c0b54(0xda)](',')[0x1],_0x34c0b4=db['ref']()[_0x1c0b54(0x86)]()['key'];db[_0x1c0b54(0x11c)](_0x1c0b54(0xe1)+roomCode+_0x1c0b54(0x82)+_0x34c0b4)[_0x1c0b54(0xc9)]({'msg':_0x1c0b54(0xcb),'audioBase64':_0x45e94c,'sender':username,'senderId':clientId,'timestamp':Date['now']()});},_0x3a5830[_0x25747a(0xf3)](_0x3b45d9);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x36b8e9(0xbe)](_0x31e29b=>{alert('Microphone\x20permission\x20denied.');});}function stopRecording(){const _0x2130e1=_0x27587a;mediaRecorder&&isRecording&&(mediaRecorder[_0x2130e1(0xb5)](),isRecording=![],document['getElementById']('recordBtn')[_0x2130e1(0x110)]='🎙️');}window[_0x27587a(0x80)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x4253ac){const _0x15b9d6=_0x27587a;return _0x4253ac[_0x15b9d6(0xb0)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x30db82=_0x27587a,_0x149d40=document[_0x30db82(0x85)](_0x30db82(0xd4))[_0x30db82(0xf1)][_0x30db82(0xe3)](),_0x13d751=document[_0x30db82(0x85)]('profileDescriptionInput')[_0x30db82(0xf1)][_0x30db82(0xe3)](),_0x1eeefb=document['getElementById'](_0x30db82(0x111)),_0x1646d4=document[_0x30db82(0x85)](_0x30db82(0x6c));if(!_0x149d40||!_0x13d751){_0x1646d4[_0x30db82(0x110)]='Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.',_0x1646d4[_0x30db82(0x11d)][_0x30db82(0xf8)]='block';return;}const _0x56723e=sanitizeUsername(_0x149d40),_0x20d474=db[_0x30db82(0x11c)](_0x30db82(0xdc)+_0x56723e);_0x20d474[_0x30db82(0x98)](_0x30db82(0xf1))['then'](_0x42bd58=>{const _0x31bd1e=_0x30db82;if(_0x42bd58['exists']()){_0x1646d4[_0x31bd1e(0x110)]=_0x31bd1e(0xed),_0x1646d4['style'][_0x31bd1e(0xf8)]=_0x31bd1e(0xfe);return;}let _0x239c59='';if(_0x1eeefb[_0x31bd1e(0x108)][_0x31bd1e(0xd7)]>0x0){const _0x56330b=new FileReader();_0x56330b[_0x31bd1e(0x9d)]=()=>{const _0x5b8c59=_0x31bd1e;_0x239c59=_0x56330b[_0x5b8c59(0xc1)]['split'](',')[0x1],saveProfile(_0x149d40,_0x13d751,_0x239c59,_0x56723e);},_0x56330b[_0x31bd1e(0xf3)](_0x1eeefb[_0x31bd1e(0x108)][0x0]);}else saveProfile(_0x149d40,_0x13d751,_0x239c59,_0x56723e);});}function saveProfile(_0x31bd80,_0x510491,_0x1f115b,_0x15cf83){const _0x1dd569=_0x27587a,_0x4ef898=Date[_0x1dd569(0xd8)](),_0x2f7e2b=[_0x31bd80];db[_0x1dd569(0x11c)](_0x1dd569(0xdc)+_0x15cf83)[_0x1dd569(0xc9)]({'username':_0x31bd80,'description':_0x510491,'avatarBase64':_0x1f115b,'lastChanged':_0x4ef898,'usernameHistory':_0x2f7e2b}),localStorage[_0x1dd569(0xf7)](_0x1dd569(0x78),_0x31bd80),localStorage['setItem']('profile_description',_0x510491),document[_0x1dd569(0x85)](_0x1dd569(0xa2))[_0x1dd569(0x110)]=_0x31bd80,showScreen('roomChoiceScreen');}function generateRoom(){const _0x14c02c=_0x27587a;roomCode=genRoomCode(),db[_0x14c02c(0x11c)]('rooms/'+roomCode)[_0x14c02c(0xc9)]({'active':!![],'created':Date[_0x14c02c(0xd8)]()}),startChat();}function joinRoom(){const _0x18e6ff=_0x27587a,_0x1ee077=roomCode||document[_0x18e6ff(0x85)]('roomCodeInput')[_0x18e6ff(0xf1)][_0x18e6ff(0xe3)]()[_0x18e6ff(0x88)]();if(!_0x1ee077)return alert(_0x18e6ff(0xf2));roomCode=_0x1ee077;if(roomCode===STATIC_ROOM){showScreen(_0x18e6ff(0x96));return;}db['ref'](_0x18e6ff(0xe1)+roomCode)[_0x18e6ff(0xfd)]()[_0x18e6ff(0xce)](_0x98d46=>{const _0x1d983e=_0x18e6ff;_0x98d46['exists']()&&_0x98d46[_0x1d983e(0xc2)]()[_0x1d983e(0xe6)]!==![]?startChat():alert(_0x1d983e(0x113));});}function startChat(){const _0x7ba589=_0x27587a;if(!roomCode||!username)return alert(_0x7ba589(0x75)),showScreen('roomChoiceScreen');showScreen('chatScreen'),document['getElementById'](_0x7ba589(0xb7))[_0x7ba589(0x110)]=username,(roomCode=_0x7ba589(0x8e))?document['getElementById'](_0x7ba589(0x70))[_0x7ba589(0x110)]=_0x7ba589(0x102):document['getElementById'](_0x7ba589(0x70))['innerText']=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();}function validateStaticRoomPassword(){const _0x3faec6=_0x27587a,_0x8c13bf=document[_0x3faec6(0x85)](_0x3faec6(0x124))[_0x3faec6(0xf1)],_0x2739e2=document[_0x3faec6(0x85)]('passwordError');db['ref'](_0x3faec6(0x106))[_0x3faec6(0xfd)]()['then'](_0x16f2d9=>{const _0x1a3e62=_0x3faec6,_0x36964c=_0x16f2d9['val']();_0x8c13bf===_0x36964c?(_0x2739e2['style'][_0x1a3e62(0xf8)]=_0x1a3e62(0xa1),startChat()):_0x2739e2[_0x1a3e62(0x11d)][_0x1a3e62(0xf8)]=_0x1a3e62(0xfe);});}document[_0x27587a(0x85)](_0x27587a(0x9b))[_0x27587a(0x119)](_0x27587a(0x71),function(){const _0x4b8f07=_0x27587a,_0x59018e=this[_0x4b8f07(0x108)][0x0];if(!_0x59018e)return;const _0x59ec85=new FileReader();_0x59ec85['onloadend']=function(){const _0x84a93f=_0x4b8f07,_0x4cb4c5=_0x59ec85[_0x84a93f(0xc1)][_0x84a93f(0xda)](',')[0x1],_0x4f63ee=db[_0x84a93f(0x11c)]()['push']()[_0x84a93f(0x12b)];db[_0x84a93f(0x11c)](_0x84a93f(0xe1)+roomCode+_0x84a93f(0x82)+_0x4f63ee)['set']({'msg':_0x84a93f(0x72),'imageBase64':_0x4cb4c5,'sender':username,'senderId':clientId,'timestamp':Date[_0x84a93f(0xd8)]()});},_0x59ec85['readAsDataURL'](_0x59018e);});function sendMessage(){const _0x31f8d5=_0x27587a,_0x2a7456=document[_0x31f8d5(0x85)](_0x31f8d5(0x129)),_0x2ce851=_0x2a7456[_0x31f8d5(0xf1)]['trim']();if(!_0x2ce851)return;const _0x430aee=Date[_0x31f8d5(0xd8)](),_0x397d73=sanitizeUsername(username);db[_0x31f8d5(0x11c)](_0x31f8d5(0xf9)+roomCode+'/'+_0x397d73)[_0x31f8d5(0x98)](_0x31f8d5(0xf1))[_0x31f8d5(0xce)](_0x2682f2=>{const _0x2574ef=_0x31f8d5,_0x164bd2=_0x2682f2['val']();if(_0x164bd2&&_0x430aee<_0x164bd2){const _0xce40f4=Math[_0x2574ef(0x10d)]((_0x164bd2-_0x430aee)/0x3e8);alert('⛔\x20You\x27re\x20blocked\x20for\x20'+_0xce40f4+'s\x20due\x20to\x20spam.\x20Please\x20wait.');return;}const _0x349523=db[_0x2574ef(0x11c)](_0x2574ef(0xfc)+roomCode+'/'+sanitizeUsername(username));_0x349523[_0x2574ef(0x98)](_0x2574ef(0xf1))['then'](_0x409271=>{const _0x297258=_0x2574ef,_0x4a4bdf=_0x409271[_0x297258(0xc2)]();if(_0x4a4bdf&&Date[_0x297258(0xd8)]()<_0x4a4bdf){const _0x30cdf2=Math[_0x297258(0x10d)]((_0x4a4bdf-Date[_0x297258(0xd8)]())/0x3e8);return alert('You\x27re\x20muted\x20for\x20another\x20'+_0x30cdf2+'\x20seconds.');}});const _0x525ab1=db['ref'](_0x2574ef(0x130)+roomCode+'/'+_0x397d73);_0x525ab1['once'](_0x2574ef(0xf1))[_0x2574ef(0xce)](_0x256c84=>{const _0x139403=_0x2574ef,_0x5d103c=_0x256c84[_0x139403(0xc2)]()||[],_0x19d9f2=[..._0x5d103c,_0x430aee][_0x139403(0xf5)](_0xfa63e=>_0x430aee-_0xfa63e<0xbb8);if(_0x19d9f2['length']>=0x5){alert('🚫\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.'),db['ref'](_0x139403(0xf9)+roomCode+'/'+_0x397d73)[_0x139403(0xc9)](_0x430aee+0x7530);const _0x21d971=db[_0x139403(0x11c)](_0x139403(0xe1)+roomCode+'/messages');_0x21d971[_0x139403(0x121)](_0x139403(0xde))['equalTo'](clientId)[_0x139403(0x126)](0x5)[_0x139403(0x98)](_0x139403(0xf1),_0x1c9dd5=>{const _0x31df6f=_0x139403;_0x1c9dd5[_0x31df6f(0xa7)](_0x1444fe=>{const _0x1afe4a=_0x31df6f;_0x21d971[_0x1afe4a(0x6e)](_0x1444fe[_0x1afe4a(0x12b)])[_0x1afe4a(0x105)]();});}),_0x525ab1[_0x139403(0xc9)]([]);return;}_0x525ab1[_0x139403(0xc9)](_0x19d9f2);const _0x29e9d7=db[_0x139403(0x11c)]()[_0x139403(0x86)]()[_0x139403(0x12b)];db[_0x139403(0x11c)](_0x139403(0xe1)+roomCode+_0x139403(0x82)+_0x29e9d7)[_0x139403(0xc9)]({'msg':_0x2ce851,'sender':username,'senderId':clientId,'timestamp':_0x430aee}),_0x2a7456['value']='',sendTyping(!![]),lastActivity=_0x430aee;});});}function listenForMessages(){const _0x47a018=_0x27587a,_0x1342eb=db[_0x47a018(0x11c)](_0x47a018(0xe1)+roomCode+_0x47a018(0xd9)),_0x4b4545=_0x1342eb['limitToLast'](MAX_MESSAGES);_0x4b4545['on'](_0x47a018(0xfa),_0x5f7b49=>{const _0x593356=_0x47a018,_0x10a354=_0x5f7b49[_0x593356(0xc2)](),{msg:_0x18580a,sender:_0x2e74ec,senderId:_0x5ef642,timestamp:_0x39b1c2}=_0x10a354,_0xfb6753=_0x5ef642===clientId,_0x7c9451=_0x10a354[_0x593356(0xcc)]||null,_0x133b87=_0x10a354['audioBase64']||null;addMessage(_0x18580a,_0x2e74ec,_0x39b1c2,_0xfb6753,_0x7c9451,_0x133b87),roomCode!==STATIC_ROOM&&db[_0x593356(0x11c)](_0x593356(0xe1)+roomCode+_0x593356(0x82)+_0x5f7b49[_0x593356(0x12b)])[_0x593356(0x105)](),!_0xfb6753&&(sound[_0x593356(0x6f)](),flagPageAttention());});}function addMessage(_0x2175d6,_0x3bc692,_0x56c0bd,_0x2a4d39,_0x584dc4=null,_0x3c647c=null){const _0x5d8cd4=_0x27587a,_0x3421a3=document['createElement'](_0x5d8cd4(0xe0));_0x3421a3['classList'][_0x5d8cd4(0xee)](_0x5d8cd4(0xea),_0x2a4d39?'sent':_0x5d8cd4(0x77));const _0x39834d=new Date(_0x56c0bd)[_0x5d8cd4(0x11e)]([],{'hour':_0x5d8cd4(0x116),'minute':'2-digit'});let _0x48d8be='';if(_0x3bc692&&roomCode){const _0x356991=db[_0x5d8cd4(0x11c)](_0x5d8cd4(0x128)+roomCode+'/'+sanitizeUsername(_0x3bc692));_0x356991[_0x5d8cd4(0x98)](_0x5d8cd4(0xf1))['then'](_0xe1cbd2=>{const _0x2a8de1=_0x5d8cd4;_0xe1cbd2[_0x2a8de1(0x73)]()&&(_0x3421a3['querySelector'](_0x2a8de1(0xc4))[_0x2a8de1(0x9c)]+=_0x2a8de1(0xd2));});}let _0x49b4e4=_0x5d8cd4(0x104)+_0x3bc692+_0x5d8cd4(0x12d);_0x2a4d39?_0x49b4e4+=_0x5d8cd4(0xbd)+_0x39834d+'\x20·\x20✓✓</small>':_0x49b4e4+='<small>'+_0x39834d+_0x5d8cd4(0xa0);!_0x584dc4&&!_0x3c647c&&(_0x2175d6=_0x2175d6[_0x5d8cd4(0xb0)](new RegExp('@'+username+'\x5cb','gi'),'<span\x20style=\x22color:#ff4081;\x22>@$&</span>'));if(_0x584dc4)_0x49b4e4+=_0x5d8cd4(0x79)+_0x584dc4+'\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>';else{if(_0x3c647c){const _0x499b41='data:audio/webm;base64,'+_0x3c647c;_0x49b4e4+='<audio\x20controls\x20src=\x22'+_0x499b41+_0x5d8cd4(0x9a);}else{if(data[_0x5d8cd4(0xeb)]){const _0x124685=_0x5d8cd4(0x118)+data['imageBase64'];_0x49b4e4+=_0x5d8cd4(0x114)+_0x124685+_0x5d8cd4(0x12a);}else _0x49b4e4+=_0x2175d6;}}_0x49b4e4+=_0x5d8cd4(0xbd)+_0x39834d+_0x5d8cd4(0xa0),_0x3421a3[_0x5d8cd4(0x9c)]=_0x49b4e4;const _0x1f3ea9=document[_0x5d8cd4(0x85)]('messages');_0x1f3ea9['appendChild'](_0x3421a3);if(isRoomAdmin){const _0x2e19a8=document[_0x5d8cd4(0xad)](_0x5d8cd4(0x103));_0x2e19a8['innerText']='🗑️',_0x2e19a8[_0x5d8cd4(0x11d)][_0x5d8cd4(0xc8)]=_0x5d8cd4(0x69),_0x2e19a8[_0x5d8cd4(0xab)]=()=>{const _0x46c465=_0x5d8cd4;confirm(_0x46c465(0xaa))&&(db['ref'](_0x46c465(0xe1)+roomCode+_0x46c465(0x82)+snap[_0x46c465(0x12b)])[_0x46c465(0x105)](),_0x3421a3[_0x46c465(0x105)]());},_0x3421a3['appendChild'](_0x2e19a8);}_0x1f3ea9[_0x5d8cd4(0xa4)]=_0x1f3ea9['scrollHeight'];}function cleanupOldRooms(){const _0x1d8668=_0x27587a;db[_0x1d8668(0x11c)](_0x1d8668(0x117))[_0x1d8668(0x98)](_0x1d8668(0xf1))['then'](_0x5893a9=>{const _0x4def57=_0x1d8668,_0x260917=_0x5893a9[_0x4def57(0xc2)]();if(!_0x260917)return;const _0x503aff=Date[_0x4def57(0xd8)]();for(const _0xe9a9ac in _0x260917){if(_0xe9a9ac===STATIC_ROOM)continue;const _0x454693=_0x260917[_0xe9a9ac];_0x503aff-(_0x454693[_0x4def57(0x10b)]||0x0)>0x2*0x3c*0x3e8&&db[_0x4def57(0x11c)](_0x4def57(0xe1)+_0xe9a9ac)[_0x4def57(0x105)]();}db['ref'](_0x4def57(0x11a))['once'](_0x4def57(0xf1))[_0x4def57(0xce)](_0x4f017f=>{const _0x209d27=_0x4def57,_0x370769=_0x4f017f[_0x209d27(0xc2)]();if(!_0x370769)return;for(const _0xc4d0c9 in _0x370769){if(_0xc4d0c9!==STATIC_ROOM)db['ref'](_0x209d27(0x130)+_0xc4d0c9)[_0x209d27(0x105)]();}}),db[_0x4def57(0x11c)](_0x4def57(0xf6))['once']('value')[_0x4def57(0xce)](_0x31ad37=>{const _0x20b742=_0x4def57,_0x739f08=_0x31ad37['val']();if(!_0x739f08)return;for(const _0x40cde9 in _0x739f08){if(_0x40cde9!==STATIC_ROOM)db[_0x20b742(0x11c)]('antispamBlocked/'+_0x40cde9)[_0x20b742(0x105)]();}});});}document[_0x27587a(0x119)]('DOMContentLoaded',()=>{const _0x3ddc8c=_0x27587a,_0xae75cb=document[_0x3ddc8c(0x85)](_0x3ddc8c(0x129));_0xae75cb&&_0xae75cb[_0x3ddc8c(0x119)](_0x3ddc8c(0xdd),function(_0x54af23){const _0x2e7904=_0x3ddc8c;_0x54af23[_0x2e7904(0x12b)]==='Enter'&&(_0x54af23[_0x2e7904(0x10a)](),sendMessage());});});function showScreen(_0x1523e5){const _0x5bd389=_0x27587a;[_0x5bd389(0xcd),'roomChoiceScreen',_0x5bd389(0xa8),_0x5bd389(0x7c),_0x5bd389(0x96),'profileScreen'][_0x5bd389(0xa7)](_0x308ad2=>{const _0x3e58bf=_0x5bd389;document[_0x3e58bf(0x85)](_0x308ad2)[_0x3e58bf(0x11d)][_0x3e58bf(0xf8)]='none';}),document['getElementById'](_0x1523e5)[_0x5bd389(0x11d)][_0x5bd389(0xf8)]='flex';}function genRoomCode(){const _0x34d3a0=_0x27587a,_0x3ad479=_0x34d3a0(0x127),_0x4072fa=_0x34d3a0(0xa6),_0xe4a0bb=(_0x4c91c9,_0x1f25b2)=>Array[_0x34d3a0(0xf4)]({'length':_0x1f25b2},()=>_0x4c91c9[Math[_0x34d3a0(0x8b)](Math[_0x34d3a0(0xcf)]()*_0x4c91c9[_0x34d3a0(0xd7)])])[_0x34d3a0(0x89)]('');return _0xe4a0bb(_0x4072fa,0x3)+_0xe4a0bb(_0x3ad479,0x3)+_0xe4a0bb(_0x4072fa,0x2)+_0xe4a0bb(_0x3ad479,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x207f38=_0x258a;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db['ref'](_0x207f38(0xe1)+roomCode)['update']({'active':![]}),alert('Session\x20expired.'),location[_0x207f38(0xb3)]());},0x7530);}function setupSidebarBackHandler(){const _0x57d9ac=_0x27587a;window[_0x57d9ac(0x119)](_0x57d9ac(0xc3),()=>{const _0x5bf04b=_0x57d9ac,_0xd3666=document[_0x5bf04b(0x85)](_0x5bf04b(0x12f));_0xd3666?.['classList'][_0x5bf04b(0x7d)](_0x5bf04b(0x74))&&_0xd3666[_0x5bf04b(0xec)][_0x5bf04b(0x105)](_0x5bf04b(0x74));});}function toggleSidebar(){const _0x332c8c=_0x27587a,_0x5f1a4b=document[_0x332c8c(0x85)](_0x332c8c(0x12f));if(!_0x5f1a4b[_0x332c8c(0xec)][_0x332c8c(0x7d)]('show'))_0x5f1a4b[_0x332c8c(0xec)][_0x332c8c(0xee)](_0x332c8c(0x74)),history[_0x332c8c(0x100)]({'sidebarOpen':!![]},'');else{_0x5f1a4b['classList'][_0x332c8c(0x105)]('show');if(history['state']?.[_0x332c8c(0xfb)])history[_0x332c8c(0xdf)]();}}function setupVisibilityAttention(){const _0x51dcd3=_0x27587a;let _0x48f959=0x0,_0xe1641e=document[_0x51dcd3(0xa5)];document[_0x51dcd3(0x119)](_0x51dcd3(0x94),()=>{const _0x10c724=_0x51dcd3;!document[_0x10c724(0xe9)]&&(document[_0x10c724(0xa5)]=_0xe1641e,_0x48f959=0x0);}),window[_0x51dcd3(0xe4)]=function(){const _0x137ad9=_0x51dcd3;document[_0x137ad9(0xe9)]&&(_0x48f959++,document['title']='('+_0x48f959+_0x137ad9(0xb2)+_0xe1641e);};}function tryEditProfile(){const _0x4adf4e=_0x27587a,_0x3f3c70=sanitizeUsername(username);db[_0x4adf4e(0x11c)]('profiles/'+_0x3f3c70)[_0x4adf4e(0xfd)]()[_0x4adf4e(0xce)](_0x5dddff=>{const _0x3e1ea7=_0x4adf4e,_0x1caf8b=_0x5dddff['val']();if(!_0x1caf8b)return alert(_0x3e1ea7(0x7e));const _0x10858a=_0x1caf8b[_0x3e1ea7(0x76)]||0x0,_0x4d3cec=Date['now'](),_0x43e77e=0x18*0x3c*0x3c*0x3e8;if(_0x4d3cec-_0x10858a<_0x43e77e){const _0xbf39d4=Math[_0x3e1ea7(0x10d)]((_0x43e77e-(_0x4d3cec-_0x10858a))/(0x3c*0x3e8));alert(_0x3e1ea7(0x8a)+_0xbf39d4+_0x3e1ea7(0xc7));}else showScreen('profileScreen'),document[_0x3e1ea7(0x85)](_0x3e1ea7(0xd4))['value']=username,document['getElementById']('profileDescriptionInput')[_0x3e1ea7(0xf1)]=_0x1caf8b[_0x3e1ea7(0xb6)]||'';});}function listenForUserList(){const _0x2f841f=_0x27587a;db[_0x2f841f(0x11c)](_0x2f841f(0xbc)+roomCode)['on'](_0x2f841f(0xf1),_0x4e8aa5=>{const _0x429292=_0x2f841f,_0x329a8e=_0x4e8aa5['val']()||{},_0x11d9f5=Date[_0x429292(0xd8)](),_0x165f81=Object[_0x429292(0xae)](_0x329a8e)[_0x429292(0xba)](_0x5141e3=>{const _0x420cae=_0x429292,_0x2a923d=_0x5141e3['online'],_0x5a7b6d=_0x11d9f5-_0x5141e3[_0x420cae(0x12e)]<=0x1e*0x3c*0x3e8;if(!_0x2a923d&&!_0x5a7b6d)return'';const _0x507212=_0x5141e3[_0x420cae(0xac)]?_0x420cae(0xb4)+_0x5141e3['avatarBase64']+_0x420cae(0x81):_0x420cae(0xe7),_0x5c9976=_0x2a923d?'#00ff88':_0x420cae(0xd5),_0x15303a=_0x2a923d?'🟢':'🕒',_0x2b90b=new Date(_0x5141e3['lastOnline'])['toLocaleTimeString']([],{'hour':'2-digit','minute':_0x420cae(0x116)}),_0x45f274=_0x5141e3['admin']?_0x420cae(0x6a):'';return _0x420cae(0xb1)+_0x5c9976+_0x420cae(0x6d)+sanitizeUsername(_0x5141e3['username'])+_0x420cae(0xaf)+_0x507212+_0x15303a+'\x20'+_0x5141e3[_0x420cae(0x90)]+_0x45f274+_0x420cae(0x83);})[_0x429292(0x89)]('');document['getElementById'](_0x429292(0x123))['innerHTML']=_0x165f81;});}function sendTyping(_0x577940=![]){const _0x3bfa61=_0x27587a,_0x191366=_0x3bfa61(0xe1)+roomCode+_0x3bfa61(0xe5)+clientId;_0x577940?db['ref'](_0x191366)['remove']():(db[_0x3bfa61(0x11c)](_0x191366)[_0x3bfa61(0xc9)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x4ff7aa=_0x3bfa61;db[_0x4ff7aa(0x11c)](_0x191366)[_0x4ff7aa(0x105)]();},0xbb8));}function listenForTyping(){const _0x439cd1=_0x27587a,_0x44e7fc=document['getElementById'](_0x439cd1(0xc0));db[_0x439cd1(0x11c)](_0x439cd1(0xe1)+roomCode+_0x439cd1(0x109))['on'](_0x439cd1(0xf1),_0x36b5ad=>{const _0x2a7e48=_0x439cd1,_0x2482a7=_0x36b5ad[_0x2a7e48(0xc2)]();if(!_0x2482a7)return _0x44e7fc[_0x2a7e48(0x110)]='';const _0x549bed=Object[_0x2a7e48(0xae)](_0x2482a7)['filter'](_0x5d7ad7=>_0x5d7ad7!==username);_0x44e7fc['innerText']=_0x549bed[_0x2a7e48(0xd7)]?_0x549bed['join'](',\x20')+_0x2a7e48(0xe8):'';});}function _0x258a(_0xa39939,_0x2b52a0){const _0xb4ecf3=_0xb4ec();return _0x258a=function(_0x258a69,_0x264d47){_0x258a69=_0x258a69-0x69;let _0x40bb88=_0xb4ecf3[_0x258a69];return _0x40bb88;},_0x258a(_0xa39939,_0x2b52a0);}function trackPresence(){const _0x3afc9e=_0x27587a;if(!username||!roomCode)return;const _0x604594=sanitizeUsername(username),_0x2d838c=db[_0x3afc9e(0x11c)](_0x3afc9e(0xbc)+roomCode+'/'+_0x604594),_0x5a9d42={'username':username,'lastOnline':firebase['database'][_0x3afc9e(0x9e)][_0x3afc9e(0x93)],'online':!![]};db[_0x3afc9e(0x11c)](_0x3afc9e(0x128)+roomCode+'/'+_0x604594)['once'](_0x3afc9e(0xf1))[_0x3afc9e(0xce)](_0x5e9597=>{const _0x2ebc9e=_0x3afc9e;if(_0x5e9597['exists']())_0x5a9d42['admin']=!![];_0x2d838c[_0x2ebc9e(0xc9)](_0x5a9d42),_0x2d838c[_0x2ebc9e(0xbf)]()[_0x2ebc9e(0xa3)]({'online':![],'lastOnline':Date[_0x2ebc9e(0xd8)]()}),updateOnlineIndicator();});}function _0xb4ec(){const _0x586408=['easy-chatroom.firebaseapp.com','050BBB66HH','278660gUJbge','username','toLocaleString','6DynkMy','TIMESTAMP','visibilitychange','1687973uHhpgg','passwordScreen','47SCgSua','once','40NVkuVD','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','imageInput','innerHTML','onloadend','ServerValue','61130thMesA','</small>','none','namePreview','update','scrollTop','title','0123456789','forEach','codeEntryScreen','21waWupA','Delete\x20this\x20message?','onclick','avatarBase64','createElement','values','\x27)\x22>','replace','<li\x20style=\x22color:',')\x20New\x20message\x20•\x20','reload','<img\x20src=\x22data:image/png;base64,','stop','description','userDisplay','\x0aDescription:\x20','https://easy-chatroom-default-rtdb.firebaseio.com','map','ondataavailable','users/','<small>','catch','onDisconnect','typing','result','val','popstate','.sender-name','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','getUserMedia','\x20minutes.','cssText','set','7994028PWjjAK','[Voice\x20message]','audioUrl','usernameScreen','then','random','\x0aLast\x20Changed:\x20','#00ff88','\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>','easy-chatroom','profileUsernameInput','#888','429oLIqFU','length','now','/messages','split','toString','profiles/','keypress','senderId','back','div','rooms/','G-QDESJ2WR42','trim','flagPageAttention','/typing/','active','👤\x20','\x20typing...','hidden','msg','imageBase64','classList','❌\x20Username\x20already\x20taken.','add','onlineStatus','getItem','value','Enter\x20a\x20valid\x20room\x20code','readAsDataURL','from','filter','antispamBlocked','setItem','display','antispamBlocked/','child_added','sidebarOpen','muted/','get','block','recordBtn','pushState','mediaDevices','No\x20room\x20code\x20available\x20for\x20private\x20rooms','button','<span\x20class=\x22sender-name\x22>','remove','gr8stg','\x0a\x20\x20\x20\x20','files','/typing','preventDefault','created','sounds/beep.mp3','ceil','color','Admins\x20only.','innerText','profileAvatarInput','usernameHistory','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','<img\x20src=\x22','profileScreen','2-digit','rooms','data:image/png;base64,','addEventListener','antispam','data','ref','style','toLocaleTimeString','1:985049198428:web:d0eb7e2de39887710c9b99','\x0aHistory:\x0a','orderByChild','No\x20bio\x20set','userList','staticPasswordInput','database','limitToLast','ABCDEFGHIJKLMNOPQRSTUVWXYZ','admins/','msgInput','\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>','key','profileViewer','</span><br>','lastOnline','userSidebar','antispam/','4262lMcApf','2099955CkyHGq','margin-left:5px;background:none;border:none;color:red;cursor:pointer;','\x20<span\x20style=\x22color:red;\x22>Admin</span>','initializeApp','profileError',';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27','child','play','roomDisplay','change','[Image]','exists','show','Missing\x20room\x20or\x20user\x20information.','lastChanged','received','chat_username','<audio\x20controls\x20src=\x22','459882AqHkMI','audio/webm','chatScreen','contains','Profile\x20not\x20found.','roomChoiceScreen','onload','\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;\x22>','/messages/','</li>','onstop','getElementById','push','profileContent','toUpperCase','join','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','floor','substr'];_0xb4ec=function(){return _0x586408;};return _0xb4ec();}function muteUser(_0x4aa020,_0x380b3c){const _0x45e290=_0x27587a;if(!isRoomAdmin)return alert(_0x45e290(0x10f));const _0x146cc0=Date['now']()+_0x380b3c*0x3c*0x3e8;db[_0x45e290(0x11c)]('muted/'+roomCode+'/'+sanitizeUsername(_0x4aa020))[_0x45e290(0xc9)](_0x146cc0);}function unmuteUser(_0x2a0dde){const _0xedb178=_0x27587a;if(!isRoomAdmin)return alert('Admins\x20only.');db[_0xedb178(0x11c)](_0xedb178(0xfc)+roomCode+'/'+sanitizeUsername(_0x2a0dde))['remove']();}function updateOnlineIndicator(){const _0x101af4=_0x27587a,_0x2bd382=document[_0x101af4(0x85)](_0x101af4(0xef));_0x2bd382[_0x101af4(0x110)]='●\x20Online',_0x2bd382[_0x101af4(0x11d)][_0x101af4(0x10e)]=_0x101af4(0xd1);}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x27d928){const _0x2ac577=_0x27587a;db[_0x2ac577(0x11c)](_0x2ac577(0xdc)+_0x27d928)[_0x2ac577(0xfd)]()[_0x2ac577(0xce)](_0x5c502d=>{const _0x16ed2e=_0x2ac577;if(!_0x5c502d['exists']())return;const _0x353c35=_0x5c502d['val'](),_0x5017e7=('\x0aName:\x20'+_0x353c35[_0x16ed2e(0x90)]+_0x16ed2e(0xb8)+(_0x353c35[_0x16ed2e(0xb6)]||_0x16ed2e(0x122))+_0x16ed2e(0x120)+(_0x353c35[_0x16ed2e(0x112)]||[])[_0x16ed2e(0x89)]('\x0a')+_0x16ed2e(0xd0)+new Date(_0x353c35[_0x16ed2e(0x76)])[_0x16ed2e(0x91)]()+_0x16ed2e(0x107))[_0x16ed2e(0xe3)]();document[_0x16ed2e(0x85)](_0x16ed2e(0x87))[_0x16ed2e(0x110)]=_0x5017e7,document[_0x16ed2e(0x85)](_0x16ed2e(0x12c))[_0x16ed2e(0x11d)][_0x16ed2e(0xf8)]=_0x16ed2e(0xfe);});}function initUsernameFlow(){const _0x512745=_0x27587a,_0x347a92=localStorage[_0x512745(0xf0)](_0x512745(0x78));!_0x347a92?showScreen(_0x512745(0x115)):(username=_0x347a92,document[_0x512745(0x85)](_0x512745(0xa2))[_0x512745(0x110)]=username,showScreen(_0x512745(0x7f)));}function closeProfile(){const _0x513eae=_0x27587a;document[_0x513eae(0x85)](_0x513eae(0x12c))[_0x513eae(0x11d)]['display']='none';}