const _0x1827aa=_0x3336;(function(_0xbf7641,_0x19cafe){const _0x2927e0=_0x3336,_0x6ac12=_0xbf7641();while(!![]){try{const _0x1ee089=-parseInt(_0x2927e0(0x10f))/0x1+parseInt(_0x2927e0(0x131))/0x2*(parseInt(_0x2927e0(0xd3))/0x3)+-parseInt(_0x2927e0(0x150))/0x4+parseInt(_0x2927e0(0xcf))/0x5*(-parseInt(_0x2927e0(0x134))/0x6)+parseInt(_0x2927e0(0xed))/0x7*(parseInt(_0x2927e0(0x122))/0x8)+-parseInt(_0x2927e0(0x128))/0x9+parseInt(_0x2927e0(0x167))/0xa*(parseInt(_0x2927e0(0x16a))/0xb);if(_0x1ee089===_0x19cafe)break;else _0x6ac12['push'](_0x6ac12['shift']());}catch(_0x488eb3){_0x6ac12['push'](_0x6ac12['shift']());}}}(_0x447e,0xe9678));const firebaseConfig={'apiKey':'AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','authDomain':_0x1827aa(0x151),'databaseURL':'https://easy-chatroom-default-rtdb.firebaseio.com','projectId':_0x1827aa(0x132),'storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0x1827aa(0x116),'appId':'1:985049198428:web:d0eb7e2de39887710c9b99','measurementId':_0x1827aa(0x166)};firebase[_0x1827aa(0x118)](firebaseConfig);const db=firebase[_0x1827aa(0xcc)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x1827aa(0x114)]()[_0x1827aa(0xd6)](0x24)['substr'](0x2,0x9),lastActivity=Date[_0x1827aa(0x107)](),typingTimeout,gr8stg='';function _0x3336(_0x305add,_0x5847e0){const _0x447ea3=_0x447e();return _0x3336=function(_0x33363d,_0xe57f00){_0x33363d=_0x33363d-0xc5;let _0x4cdbbc=_0x447ea3[_0x33363d];return _0x4cdbbc;},_0x3336(_0x305add,_0x5847e0);}const STATIC_ROOM=_0x1827aa(0x124),MAX_MESSAGES=0xfa,sound=new Audio(_0x1827aa(0x164));sound[_0x1827aa(0x11e)]=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer;function toggleRecording(){const _0x439c55=_0x1827aa;isRecording?stopRecording():navigator[_0x439c55(0xd4)][_0x439c55(0x104)]({'audio':!![]})[_0x439c55(0xf0)](_0x18a5e0=>{const _0x3c53e9=_0x439c55;mediaRecorder=new MediaRecorder(_0x18a5e0),mediaRecorder['start'](),isRecording=!![],document[_0x3c53e9(0xf3)](_0x3c53e9(0xeb))[_0x3c53e9(0x10d)]='⏹️',audioChunks=[],mediaRecorder[_0x3c53e9(0x10e)]=_0x1b43df=>audioChunks['push'](_0x1b43df[_0x3c53e9(0x11d)]),mediaRecorder['onstop']=()=>{clearTimeout(recordingTimer);const _0x485c05=new Blob(audioChunks,{'type':'audio/webm'}),_0x4aad6d=new FileReader();_0x4aad6d['onloadend']=()=>{const _0x2aae12=_0x3336,_0x53bb88=_0x4aad6d[_0x2aae12(0x121)][_0x2aae12(0x161)](',')[0x1],_0x5afe4b=db[_0x2aae12(0x115)]()['push']()['key'];db[_0x2aae12(0x115)](_0x2aae12(0x133)+roomCode+'/messages/'+_0x5afe4b)[_0x2aae12(0xd2)]({'msg':_0x2aae12(0xc6),'audioBase64':_0x53bb88,'sender':username,'senderId':clientId,'timestamp':Date[_0x2aae12(0x107)]()});},_0x4aad6d['readAsDataURL'](_0x485c05);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x439c55(0x15e)](_0x2e60a3=>{const _0x2d5d93=_0x439c55;alert(_0x2d5d93(0x16e));});}function stopRecording(){const _0x12fff4=_0x1827aa;mediaRecorder&&isRecording&&(mediaRecorder[_0x12fff4(0x103)](),isRecording=![],document[_0x12fff4(0xf3)](_0x12fff4(0xeb))[_0x12fff4(0x10d)]='🎙️');}window['onload']=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x29c03f){const _0xb43eba=_0x1827aa;return _0x29c03f[_0xb43eba(0x12f)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x5eba83=_0x1827aa,_0x3ed352=document[_0x5eba83(0xf3)]('profileUsernameInput')['value'][_0x5eba83(0xca)](),_0xc6a6f=document[_0x5eba83(0xf3)](_0x5eba83(0x10a))['value']['trim'](),_0x4d3c50=document['getElementById'](_0x5eba83(0xf6));if(!_0x3ed352||!_0xc6a6f){_0x4d3c50[_0x5eba83(0x10d)]=_0x5eba83(0x10c),_0x4d3c50[_0x5eba83(0xe1)][_0x5eba83(0x13f)]='block';return;}_0x4d3c50['style']['display']='none',username=_0x3ed352;const _0x16dac7=Date[_0x5eba83(0x107)](),_0x5510f1=sanitizeUsername(_0x3ed352),_0x49f845=db[_0x5eba83(0x115)](_0x5eba83(0xf9)+_0x5510f1);_0x49f845[_0x5eba83(0xd0)]()[_0x5eba83(0xf0)](_0x197728=>{const _0x5f3892=_0x5eba83,_0x5adcf5=_0x197728['val']()||{},_0x2d6383=_0x5adcf5[_0x5f3892(0x169)]||[];if(!_0x2d6383[_0x5f3892(0x10b)](_0x3ed352))_0x2d6383[_0x5f3892(0x13e)](_0x3ed352);_0x49f845[_0x5f3892(0xd2)]({'username':_0x3ed352,'description':_0xc6a6f,'lastChanged':_0x16dac7,'usernameHistory':_0x2d6383}),localStorage[_0x5f3892(0xc7)](_0x5f3892(0x16b),_0x3ed352),localStorage[_0x5f3892(0xc7)](_0x5f3892(0x14c),_0xc6a6f),document[_0x5f3892(0xf3)](_0x5f3892(0x138))['innerText']=username,showScreen('roomChoiceScreen');});}function saveUsername(){const _0x49504f=_0x1827aa,_0x505d1b=document['getElementById']('usernameInput')['value'][_0x49504f(0xca)]();if(!_0x505d1b)return alert('Please\x20enter\x20a\x20valid\x20name');username=_0x505d1b,localStorage['setItem'](_0x49504f(0x16b),username),initUsernameFlow();}function generateRoom(){const _0x3fa7e2=_0x1827aa;roomCode=genRoomCode(),db['ref'](_0x3fa7e2(0x133)+roomCode)[_0x3fa7e2(0xd2)]({'active':!![],'created':Date['now']()}),startChat();}function joinRoom(){const _0x4e2e59=_0x1827aa,_0x5a663c=roomCode||document[_0x4e2e59(0xf3)](_0x4e2e59(0x162))[_0x4e2e59(0xfa)]['trim']()[_0x4e2e59(0x15a)]();if(!_0x5a663c)return alert('Enter\x20a\x20valid\x20room\x20code');roomCode=_0x5a663c;if(roomCode===STATIC_ROOM){showScreen(_0x4e2e59(0xf8));return;}db[_0x4e2e59(0x115)](_0x4e2e59(0x133)+roomCode)[_0x4e2e59(0xd0)]()[_0x4e2e59(0xf0)](_0x28fca1=>{const _0x476c64=_0x4e2e59;_0x28fca1[_0x476c64(0xe4)]()&&_0x28fca1[_0x476c64(0xea)]()[_0x476c64(0x16d)]!==![]?startChat():alert(_0x476c64(0x147));});}function _0x447e(){const _0x2e94bb=['username','replace','users/','22WQKzAC','easy-chatroom','rooms/','305598qAFaKM','classList','</span><br>','join','namePreview','play','userList','add','ServerValue','\x20typing...','push','display','/messages/','title','pushState','chatScreen','key','none','from','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','⛔\x20You\x27re\x20blocked\x20for\x20','data:audio/webm;base64,','</small>','\x20minutes.','profile_description','antispamBlocked','audioBase64','received','4082668aIdXsU','easy-chatroom.firebaseapp.com','/messages','forEach','audioUrl','values','length','lastChanged',';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27','preventDefault','toUpperCase','back','map','block','catch','gr8stg','/typing/','split','roomCodeInput','\x0a\x20\x20\x20\x20','sounds/beep.mp3','visibilitychange','G-QDESJ2WR42','900460Ucxtoe','div','usernameHistory','451REzRIC','chat_username','TIMESTAMP','active','Microphone\x20permission\x20denied.','sent','[Voice\x20message]','setItem','Enter','typing','trim','createElement','database','online','limitToLast','125teNmJY','get','innerHTML','set','250869wYaDMT','mediaDevices','appendChild','toString','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','floor','profileScreen','filter','ABCDEFGHIJKLMNOPQRSTUVWXYZ','senderId','state','<span\x20class=\x22sender-name\x22>','msg','onDisconnect','style','toLocaleTimeString','lastOnline','exists','staticPasswordInput','No\x20bio\x20set','getItem','update','\x27)\x22>','val','recordBtn','messages','3736397MZqqQe','antispam/','roomDisplay','then','DOMContentLoaded','</li>','getElementById','\x0aHistory:\x0a','show','profileError','profileContent','passwordScreen','profiles/','value','antispamBlocked/','passwordError','msgInput','toLocaleString','userDisplay','2-digit','#00ff88','<li\x20style=\x22color:','stop','getUserMedia','Missing\x20room\x20or\x20user\x20information.','contains','now',')\x20New\x20message\x20•\x20','0123456789','profileDescriptionInput','includes','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','innerText','ondataavailable','692527jdRMjC','/typing','child','#888','profileUsernameInput','random','ref','985049198428','hidden','initializeApp','🚫\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.','equalTo','keypress','Session\x20expired.','data','volume','roomChoiceScreen','remove','result','8nwvyOY','No\x20room\x20code\x20available\x20for\x20private\x20rooms','050BBB66HH','<audio\x20controls\x20src=\x22','addEventListener','description','10826703SnkGLt','\x0aLast\x20Changed:\x20','\x0aName:\x20','scrollHeight','created','once'];_0x447e=function(){return _0x2e94bb;};return _0x447e();}function startChat(){const _0x554894=_0x1827aa;if(!roomCode||!username)return alert(_0x554894(0x105)),showScreen(_0x554894(0x11f));showScreen(_0x554894(0x143)),document[_0x554894(0xf3)](_0x554894(0xff))[_0x554894(0x10d)]=username,(roomCode=_0x554894(0x124))?document['getElementById']('roomDisplay')[_0x554894(0x10d)]=_0x554894(0x123):document[_0x554894(0xf3)](_0x554894(0xef))[_0x554894(0x10d)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();}function validateStaticRoomPassword(){const _0x4faa32=_0x1827aa,_0x134949=document['getElementById'](_0x4faa32(0xe5))[_0x4faa32(0xfa)],_0x35ee6b=document[_0x4faa32(0xf3)](_0x4faa32(0xfc));db[_0x4faa32(0x115)](_0x4faa32(0x15f))[_0x4faa32(0xd0)]()[_0x4faa32(0xf0)](_0x5f2469=>{const _0x32275f=_0x4faa32,_0x5bac42=_0x5f2469[_0x32275f(0xea)]();_0x134949===_0x5bac42?(_0x35ee6b['style'][_0x32275f(0x13f)]=_0x32275f(0x145),startChat()):_0x35ee6b[_0x32275f(0xe1)][_0x32275f(0x13f)]='block';});}function sendMessage(){const _0x197a84=_0x1827aa,_0x14b19a=document['getElementById'](_0x197a84(0xfd)),_0x4811e5=_0x14b19a['value'][_0x197a84(0xca)]();if(!_0x4811e5)return;const _0x466239=Date['now'](),_0x199788=sanitizeUsername(username);db[_0x197a84(0x115)](_0x197a84(0xfb)+roomCode+'/'+_0x199788)[_0x197a84(0x12d)](_0x197a84(0xfa))[_0x197a84(0xf0)](_0x434296=>{const _0xe5ef6=_0x197a84,_0x3fb038=_0x434296['val']();if(_0x3fb038&&_0x466239<_0x3fb038){const _0x56c131=Math['ceil']((_0x3fb038-_0x466239)/0x3e8);alert(_0xe5ef6(0x148)+_0x56c131+'s\x20due\x20to\x20spam.\x20Please\x20wait.');return;}const _0x2e7cc7=db[_0xe5ef6(0x115)](_0xe5ef6(0xee)+roomCode+'/'+_0x199788);_0x2e7cc7[_0xe5ef6(0x12d)](_0xe5ef6(0xfa))[_0xe5ef6(0xf0)](_0x1ec013=>{const _0x201c22=_0xe5ef6,_0x5e1612=_0x1ec013[_0x201c22(0xea)]()||[],_0x5226da=[..._0x5e1612,_0x466239]['filter'](_0x59b95e=>_0x466239-_0x59b95e<0xbb8);if(_0x5226da[_0x201c22(0x156)]>=0x5){alert(_0x201c22(0x119)),db['ref'](_0x201c22(0xfb)+roomCode+'/'+_0x199788)[_0x201c22(0xd2)](_0x466239+0x7530);const _0x2c5c22=db[_0x201c22(0x115)](_0x201c22(0x133)+roomCode+_0x201c22(0x152));_0x2c5c22['orderByChild'](_0x201c22(0xdc))[_0x201c22(0x11a)](clientId)[_0x201c22(0xce)](0x5)[_0x201c22(0x12d)]('value',_0x58cdee=>{_0x58cdee['forEach'](_0x16a312=>{const _0x2d6458=_0x3336;_0x2c5c22[_0x2d6458(0x111)](_0x16a312['key'])[_0x2d6458(0x120)]();});}),_0x2e7cc7['set']([]);return;}_0x2e7cc7[_0x201c22(0xd2)](_0x5226da);const _0x45df77=db[_0x201c22(0x115)]()[_0x201c22(0x13e)]()['key'];db['ref']('rooms/'+roomCode+_0x201c22(0x140)+_0x45df77)['set']({'msg':_0x4811e5,'sender':username,'senderId':clientId,'timestamp':_0x466239}),_0x14b19a['value']='',sendTyping(!![]),lastActivity=_0x466239;});});}function listenForMessages(){const _0x4cd0d0=_0x1827aa,_0x2ba167=db[_0x4cd0d0(0x115)]('rooms/'+roomCode+'/messages'),_0x576d86=_0x2ba167[_0x4cd0d0(0xce)](MAX_MESSAGES);_0x576d86['on']('child_added',_0xca91f4=>{const _0x46da18=_0x4cd0d0,_0xd9721e=_0xca91f4[_0x46da18(0xea)](),{msg:_0x10001e,sender:_0x393fc8,senderId:_0x17d2be,timestamp:_0x48a20a}=_0xd9721e,_0x44cc71=_0x17d2be===clientId,_0x4b70bf=_0xd9721e[_0x46da18(0x154)]||null,_0x3e1a66=_0xd9721e[_0x46da18(0x14e)]||null;addMessage(_0x10001e,_0x393fc8,_0x48a20a,_0x44cc71,_0x4b70bf,_0x3e1a66),roomCode!==STATIC_ROOM&&db[_0x46da18(0x115)](_0x46da18(0x133)+roomCode+_0x46da18(0x140)+_0xca91f4[_0x46da18(0x144)])[_0x46da18(0x120)](),!_0x44cc71&&(sound[_0x46da18(0x139)](),flagPageAttention());});}function addMessage(_0xe303cb,_0x33d211,_0xc1ce60,_0xc18ca0,_0x21c0c9=null,_0x26c3cd=null){const _0x4bf97c=_0x1827aa,_0x2c2595=document[_0x4bf97c(0xcb)](_0x4bf97c(0x168));_0x2c2595['classList'][_0x4bf97c(0x13b)](_0x4bf97c(0xdf),_0xc18ca0?_0x4bf97c(0xc5):_0x4bf97c(0x14f));const _0x274e00=new Date(_0xc1ce60)[_0x4bf97c(0xe2)]([],{'hour':_0x4bf97c(0x100),'minute':_0x4bf97c(0x100)});let _0xe92257=_0x4bf97c(0xde)+_0x33d211+_0x4bf97c(0x136);if(_0x21c0c9)_0xe92257+=_0x4bf97c(0x125)+_0x21c0c9+_0x4bf97c(0xd7);else{if(_0x26c3cd){const _0x4ebb6c=_0x4bf97c(0x149)+_0x26c3cd;_0xe92257+=_0x4bf97c(0x125)+_0x4ebb6c+'\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>';}else _0xe92257+=_0xe303cb;}_0xe92257+='<small>'+_0x274e00+_0x4bf97c(0x14a),_0x2c2595[_0x4bf97c(0xd1)]=_0xe92257;const _0x244856=document[_0x4bf97c(0xf3)](_0x4bf97c(0xec));_0x244856[_0x4bf97c(0xd5)](_0x2c2595),_0x244856['scrollTop']=_0x244856[_0x4bf97c(0x12b)];}function cleanupOldRooms(){const _0x65d179=_0x1827aa;db['ref']('rooms')[_0x65d179(0x12d)](_0x65d179(0xfa))[_0x65d179(0xf0)](_0x3bc0f5=>{const _0x438982=_0x65d179,_0x4d9042=_0x3bc0f5['val']();if(!_0x4d9042)return;const _0x8fa294=Date[_0x438982(0x107)]();for(const _0x2eb128 in _0x4d9042){if(_0x2eb128===STATIC_ROOM)continue;const _0x57fff1=_0x4d9042[_0x2eb128];_0x8fa294-(_0x57fff1[_0x438982(0x12c)]||0x0)>0x2*0x3c*0x3e8&&db['ref'](_0x438982(0x133)+_0x2eb128)['remove']();}db[_0x438982(0x115)]('antispam')[_0x438982(0x12d)](_0x438982(0xfa))[_0x438982(0xf0)](_0x5b81d7=>{const _0xad95f9=_0x438982,_0x5ed8c9=_0x5b81d7['val']();if(!_0x5ed8c9)return;for(const _0x3e6610 in _0x5ed8c9){if(_0x3e6610!==STATIC_ROOM)db[_0xad95f9(0x115)]('antispam/'+_0x3e6610)['remove']();}}),db[_0x438982(0x115)](_0x438982(0x14d))[_0x438982(0x12d)](_0x438982(0xfa))['then'](_0x2f709b=>{const _0x4a7151=_0x438982,_0x2a7065=_0x2f709b[_0x4a7151(0xea)]();if(!_0x2a7065)return;for(const _0x58ac8a in _0x2a7065){if(_0x58ac8a!==STATIC_ROOM)db['ref'](_0x4a7151(0xfb)+_0x58ac8a)[_0x4a7151(0x120)]();}});});}document[_0x1827aa(0x126)](_0x1827aa(0xf1),()=>{const _0x11c12f=_0x1827aa,_0x28cba=document[_0x11c12f(0xf3)](_0x11c12f(0xfd));_0x28cba&&_0x28cba[_0x11c12f(0x126)](_0x11c12f(0x11b),function(_0x1b342e){const _0x20f326=_0x11c12f;_0x1b342e[_0x20f326(0x144)]===_0x20f326(0xc8)&&(_0x1b342e[_0x20f326(0x159)](),sendMessage());});});function showScreen(_0x5e603b){const _0x1035be=_0x1827aa;['usernameScreen',_0x1035be(0x11f),'codeEntryScreen',_0x1035be(0x143),'passwordScreen',_0x1035be(0xd9)][_0x1035be(0x153)](_0x356cac=>{const _0x46a56a=_0x1035be;document[_0x46a56a(0xf3)](_0x356cac)[_0x46a56a(0xe1)]['display']=_0x46a56a(0x145);}),document[_0x1035be(0xf3)](_0x5e603b)[_0x1035be(0xe1)]['display']='flex';}function genRoomCode(){const _0xcb6e02=_0x1827aa,_0x3a6e57=_0xcb6e02(0xdb),_0xb0351d=_0xcb6e02(0x109),_0x13e8c6=(_0x44cc60,_0x3fd027)=>Array[_0xcb6e02(0x146)]({'length':_0x3fd027},()=>_0x44cc60[Math[_0xcb6e02(0xd8)](Math['random']()*_0x44cc60['length'])])[_0xcb6e02(0x137)]('');return _0x13e8c6(_0xb0351d,0x3)+_0x13e8c6(_0x3a6e57,0x3)+_0x13e8c6(_0xb0351d,0x2)+_0x13e8c6(_0x3a6e57,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x466017=_0x3336;Date[_0x466017(0x107)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x466017(0x115)](_0x466017(0x133)+roomCode)[_0x466017(0xe8)]({'active':![]}),alert(_0x466017(0x11c)),location['reload']());},0x7530);}function setupSidebarBackHandler(){const _0x3d15ab=_0x1827aa;window[_0x3d15ab(0x126)]('popstate',()=>{const _0x387074=_0x3d15ab,_0x30719b=document['getElementById']('userSidebar');_0x30719b?.['classList'][_0x387074(0x106)](_0x387074(0xf5))&&_0x30719b[_0x387074(0x135)][_0x387074(0x120)](_0x387074(0xf5));});}function toggleSidebar(){const _0x419724=_0x1827aa,_0x2260f1=document[_0x419724(0xf3)]('userSidebar');if(!_0x2260f1['classList'][_0x419724(0x106)](_0x419724(0xf5)))_0x2260f1[_0x419724(0x135)][_0x419724(0x13b)](_0x419724(0xf5)),history[_0x419724(0x142)]({'sidebarOpen':!![]},'');else{_0x2260f1['classList']['remove']('show');if(history[_0x419724(0xdd)]?.['sidebarOpen'])history[_0x419724(0x15b)]();}}function setupVisibilityAttention(){const _0x285db0=_0x1827aa;let _0x45692a=0x0,_0x16f4cf=document['title'];document[_0x285db0(0x126)](_0x285db0(0x165),()=>{!document['hidden']&&(document['title']=_0x16f4cf,_0x45692a=0x0);}),window['flagPageAttention']=function(){const _0x1e339f=_0x285db0;document[_0x1e339f(0x117)]&&(_0x45692a++,document[_0x1e339f(0x141)]='('+_0x45692a+_0x1e339f(0x108)+_0x16f4cf);};}function tryEditProfile(){const _0x175bf8=_0x1827aa,_0x165482=sanitizeUsername(username);db[_0x175bf8(0x115)](_0x175bf8(0xf9)+_0x165482)[_0x175bf8(0xd0)]()[_0x175bf8(0xf0)](_0x2b6fb1=>{const _0xbb121a=_0x175bf8,_0x3d454f=_0x2b6fb1[_0xbb121a(0xea)]();if(!_0x3d454f)return alert('Profile\x20not\x20found.');const _0x23899d=_0x3d454f['lastChanged']||0x0,_0x1e53d0=Date[_0xbb121a(0x107)](),_0x4219f7=0x18*0x3c*0x3c*0x3e8;if(_0x1e53d0-_0x23899d<_0x4219f7){const _0x2f2bae=Math['ceil']((_0x4219f7-(_0x1e53d0-_0x23899d))/(0x3c*0x3e8));alert('You\x20can\x20change\x20your\x20profile\x20again\x20in\x20'+_0x2f2bae+_0xbb121a(0x14b));}else showScreen('profileScreen'),document['getElementById'](_0xbb121a(0x113))[_0xbb121a(0xfa)]=username,document['getElementById'](_0xbb121a(0x10a))[_0xbb121a(0xfa)]=_0x3d454f[_0xbb121a(0x127)]||'';});}function listenForUserList(){const _0x508e01=_0x1827aa;db['ref'](_0x508e01(0x130)+roomCode)['on'](_0x508e01(0xfa),_0x47ecc9=>{const _0x30b138=_0x508e01,_0x3803e1=_0x47ecc9[_0x30b138(0xea)]()||{},_0x505023=Date[_0x30b138(0x107)](),_0xe2889b=Object[_0x30b138(0x155)](_0x3803e1)[_0x30b138(0x15c)](_0x41f62e=>{const _0x1df8e0=_0x30b138,_0x349bf0=_0x41f62e[_0x1df8e0(0xcd)],_0xafdfef=_0x505023-_0x41f62e[_0x1df8e0(0xe3)]<=0x1e*0x3c*0x3e8;if(!_0x349bf0&&!_0xafdfef)return'';const _0x50dcf7=_0x349bf0?_0x1df8e0(0x101):_0x1df8e0(0x112),_0x19880b=_0x349bf0?'🟢':'🕒',_0x4a5a67=new Date(_0x41f62e[_0x1df8e0(0xe3)])[_0x1df8e0(0xe2)]([],{'hour':_0x1df8e0(0x100),'minute':_0x1df8e0(0x100)});return _0x1df8e0(0x102)+_0x50dcf7+_0x1df8e0(0x158)+sanitizeUsername(_0x41f62e[_0x1df8e0(0x12e)])+_0x1df8e0(0xe9)+_0x19880b+'\x20'+_0x41f62e['username']+_0x1df8e0(0xf2);})['join']('');document[_0x30b138(0xf3)](_0x30b138(0x13a))[_0x30b138(0xd1)]=_0xe2889b;});}function sendTyping(_0x3adb58=![]){const _0x54253a=_0x1827aa,_0x41b262=_0x54253a(0x133)+roomCode+_0x54253a(0x160)+clientId;_0x3adb58?db[_0x54253a(0x115)](_0x41b262)[_0x54253a(0x120)]():(db['ref'](_0x41b262)[_0x54253a(0xd2)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x12ae2b=_0x54253a;db[_0x12ae2b(0x115)](_0x41b262)[_0x12ae2b(0x120)]();},0xbb8));}function listenForTyping(){const _0x546287=_0x1827aa,_0x32fe62=document['getElementById'](_0x546287(0xc9));db[_0x546287(0x115)](_0x546287(0x133)+roomCode+_0x546287(0x110))['on'](_0x546287(0xfa),_0x143423=>{const _0xd28c46=_0x546287,_0x5e4d8f=_0x143423[_0xd28c46(0xea)]();if(!_0x5e4d8f)return _0x32fe62[_0xd28c46(0x10d)]='';const _0xadbaf7=Object[_0xd28c46(0x155)](_0x5e4d8f)[_0xd28c46(0xda)](_0x258087=>_0x258087!==username);_0x32fe62[_0xd28c46(0x10d)]=_0xadbaf7['length']?_0xadbaf7[_0xd28c46(0x137)](',\x20')+_0xd28c46(0x13d):'';});}function trackPresence(){const _0xa6e091=_0x1827aa;if(!username||!roomCode)return;const _0x27746a=sanitizeUsername(username),_0x5ca803=db[_0xa6e091(0x115)](_0xa6e091(0x130)+roomCode+'/'+_0x27746a),_0x249716={'username':username,'lastOnline':firebase[_0xa6e091(0xcc)][_0xa6e091(0x13c)][_0xa6e091(0x16c)],'online':!![]};_0x5ca803[_0xa6e091(0xd2)](_0x249716),_0x5ca803[_0xa6e091(0xe0)]()[_0xa6e091(0xe8)]({'online':![],'lastOnline':Date[_0xa6e091(0x107)]()});}function viewProfile(_0x4615a0){const _0x2deb78=_0x1827aa;db[_0x2deb78(0x115)]('profiles/'+_0x4615a0)[_0x2deb78(0xd0)]()[_0x2deb78(0xf0)](_0x12cc2f=>{const _0x42ebcf=_0x2deb78;if(!_0x12cc2f[_0x42ebcf(0xe4)]())return;const _0x356824=_0x12cc2f['val'](),_0xe7f91a=(_0x42ebcf(0x12a)+_0x356824[_0x42ebcf(0x12e)]+'\x0aDescription:\x20'+(_0x356824[_0x42ebcf(0x127)]||_0x42ebcf(0xe6))+_0x42ebcf(0xf4)+(_0x356824['usernameHistory']||[])[_0x42ebcf(0x137)]('\x0a')+_0x42ebcf(0x129)+new Date(_0x356824[_0x42ebcf(0x157)])[_0x42ebcf(0xfe)]()+_0x42ebcf(0x163))[_0x42ebcf(0xca)]();document[_0x42ebcf(0xf3)](_0x42ebcf(0xf7))['innerText']=_0xe7f91a,document[_0x42ebcf(0xf3)]('profileViewer')[_0x42ebcf(0xe1)][_0x42ebcf(0x13f)]=_0x42ebcf(0x15d);});}function initUsernameFlow(){const _0x1c8091=_0x1827aa,_0x39f7d3=localStorage[_0x1c8091(0xe7)](_0x1c8091(0x16b));!_0x39f7d3?showScreen('profileScreen'):(username=_0x39f7d3,document['getElementById'](_0x1c8091(0x138))['innerText']=username,showScreen(_0x1c8091(0x11f)));}