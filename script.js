const _0xf481d8=_0x5c33;(function(_0x171f77,_0x1da7b7){const _0x24bbae=_0x5c33,_0x210f17=_0x171f77();while(!![]){try{const _0x3ff0c8=parseInt(_0x24bbae(0xfd))/0x1*(-parseInt(_0x24bbae(0xf2))/0x2)+parseInt(_0x24bbae(0x130))/0x3+parseInt(_0x24bbae(0x12e))/0x4+parseInt(_0x24bbae(0xcc))/0x5*(-parseInt(_0x24bbae(0x101))/0x6)+parseInt(_0x24bbae(0xfc))/0x7+parseInt(_0x24bbae(0x119))/0x8*(-parseInt(_0x24bbae(0x121))/0x9)+-parseInt(_0x24bbae(0x108))/0xa;if(_0x3ff0c8===_0x1da7b7)break;else _0x210f17['push'](_0x210f17['shift']());}catch(_0x29fbcf){_0x210f17['push'](_0x210f17['shift']());}}}(_0x2073,0x34556));const firebaseConfig={'apiKey':_0xf481d8(0x132),'authDomain':_0xf481d8(0x11d),'databaseURL':'https://easy-chatroom-default-rtdb.firebaseio.com','projectId':'easy-chatroom','storageBucket':_0xf481d8(0x110),'messagingSenderId':'985049198428','appId':'1:985049198428:web:d0eb7e2de39887710c9b99','measurementId':_0xf481d8(0x117)};firebase[_0xf481d8(0xcd)](firebaseConfig);const db=firebase[_0xf481d8(0xec)](),STATIC_ROOM=_0xf481d8(0xd2),ROOM_TTL_MS=0x2*0x3c*0x3e8;function _0x2073(){const _0x5ed8aa=['username','2671540PMFUvf','usernameScreen','<li\x20style=\x22color:','0123456789','DOMContentLoaded','msgInput','floor','toggle','easy-chatroom.firebasestorage.app','exists','userSidebar','update','/typing/','</li>','usernameInput','G-QDESJ2WR42','random','224zhqQvM','System','onload','forEach','easy-chatroom.firebaseapp.com','#00ff88','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','TIMESTAMP','10872MXDjne','limitToLast','namePreview','remove','users/','show','</span><br>','toUpperCase','set','roomChoiceScreen','typing','2-digit','ServerValue','1497420qllnXQ','trim','690456lPxEJY','messages','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','innerHTML','35alILaH','initializeApp','rooms/','beforeunload','entries','from','050BBB66HH','length','rooms','<span\x20class=\x22sender-name\x22>','/messages/','preventDefault','\x20typing...','roomDisplay','msg','display','join','getItem','#888','map','then','keypress','chat_username','now','Please\x20enter\x20your\x20name','</small>','toLocaleTimeString','lastOnline','values','classList','scrollTop','filter','database','system','ref','log','\x20left\x20the\x20room','div','126538HDfegY','ABCDEFGHIJKLMNOPQRSTUVWXYZ','setItem','/messages','push','addEventListener','get','innerText','key','Enter','2126579zBbGhu','3zhVitI','value','sent','val','174138dffRXz','getElementById','once','Enter\x20a\x20valid\x20room\x20code','\x20joined\x20the\x20room','chatScreen'];_0x2073=function(){return _0x5ed8aa;};return _0x2073();}let username=localStorage[_0xf481d8(0xdd)](_0xf481d8(0xe2)),roomCode='',clientId=generateClientId(),lastActivity=Date['now'](),typingTimeout;window[_0xf481d8(0x11b)]=()=>{const _0x12c3a8=_0xf481d8;!username?showScreen(_0x12c3a8(0x109)):(document[_0x12c3a8(0x102)]('namePreview')[_0x12c3a8(0xf9)]=username,showScreen(_0x12c3a8(0x12a))),cleanupOldRooms(),!username?showScreen(_0x12c3a8(0x109)):(document['getElementById'](_0x12c3a8(0x123))[_0x12c3a8(0xf9)]=username,showScreen(_0x12c3a8(0x12a)));};function saveUsername(){const _0x3a3f1f=_0xf481d8;username=document[_0x3a3f1f(0x102)](_0x3a3f1f(0x116))['value'][_0x3a3f1f(0x12f)]();if(!username)return alert(_0x3a3f1f(0xe4));localStorage[_0x3a3f1f(0xf4)](_0x3a3f1f(0xe2),username),document[_0x3a3f1f(0x102)](_0x3a3f1f(0x123))[_0x3a3f1f(0xf9)]=username,showScreen(_0x3a3f1f(0x12a));}function generateRoom(){const _0xe88121=_0xf481d8;roomCode=genRoomCode(),db['ref']('rooms/'+roomCode)[_0xe88121(0x129)]({'active':!![],'created':Date[_0xe88121(0xe3)]()}),startChat();}function joinRoom(){const _0x5984fb=_0xf481d8;roomCode=document[_0x5984fb(0x102)]('roomCodeInput')[_0x5984fb(0xfe)][_0x5984fb(0x12f)]()[_0x5984fb(0x128)]();if(!roomCode)return alert(_0x5984fb(0x104));db[_0x5984fb(0xee)](_0x5984fb(0xce)+roomCode)[_0x5984fb(0xf8)]()[_0x5984fb(0xe0)](_0x1a07b6=>{const _0x516afd=_0x5984fb;_0x1a07b6[_0x516afd(0x111)]()&&_0x1a07b6['val']()['active']!==![]?startChat():alert(_0x516afd(0x11f));});}function joinGlobalRoom(){const _0x13fc62=_0xf481d8;roomCode='050BBB66HH',db[_0x13fc62(0xee)]('rooms/'+roomCode)[_0x13fc62(0x129)]({'active':!![],'created':Date[_0x13fc62(0xe3)]()}),startChat();}function startChat(){const _0x13b38e=_0xf481d8;showScreen('chatScreen'),document[_0x13b38e(0x102)]('userDisplay')[_0x13b38e(0xf9)]=username,document[_0x13b38e(0x102)](_0x13b38e(0xd9))['innerText']=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),logSystemMessage(username+_0x13b38e(0x105)),window[_0x13b38e(0xf7)](_0x13b38e(0xcf),()=>{const _0x45e1c3=_0x13b38e;logSystemMessage(username+_0x45e1c3(0xf0));});}function trackPresence(){const _0x5c91f7=_0xf481d8,_0x532c4a=db[_0x5c91f7(0xee)](_0x5c91f7(0x125)+roomCode+'/'+username),_0x288e83={'username':username,'lastOnline':firebase[_0x5c91f7(0xec)][_0x5c91f7(0x12d)][_0x5c91f7(0x120)],'online':!![]};_0x532c4a['set'](_0x288e83),_0x532c4a['onDisconnect']()[_0x5c91f7(0x113)]({'online':![],'lastOnline':Date[_0x5c91f7(0xe3)]()});}function listenForUserList(){const _0x374e0d=_0xf481d8;db[_0x374e0d(0xee)](_0x374e0d(0x125)+roomCode)['on'](_0x374e0d(0xfe),_0x31d9e6=>{const _0x4f91a0=_0x374e0d,_0x17e95f=_0x31d9e6['val']()||{},_0x56cb4c=Date[_0x4f91a0(0xe3)](),_0x470a9e=Object[_0x4f91a0(0xe8)](_0x17e95f)[_0x4f91a0(0xdf)](_0x438ee8=>{const _0x5085e3=_0x4f91a0,_0x350be7=_0x438ee8['online']===!![],_0x56feb9=_0x56cb4c-_0x438ee8[_0x5085e3(0xe7)]<=0x1e*0x3c*0x3e8;if(!_0x350be7&&!_0x56feb9)return'';const _0x6e4f77=_0x350be7?_0x5085e3(0x11e):_0x5085e3(0xde),_0x1b6995=_0x350be7?'üü¢':'üïí';return _0x5085e3(0x10a)+_0x6e4f77+'\x22>'+_0x1b6995+'\x20'+_0x438ee8[_0x5085e3(0x107)]+_0x5085e3(0x115);})['join']('');document[_0x4f91a0(0x102)]('userList')[_0x4f91a0(0x133)]=_0x470a9e;});}function logSystemMessage(_0x3ebf21){const _0x29d51f=_0xf481d8,_0x59b37d=db[_0x29d51f(0xee)]()[_0x29d51f(0xf6)]()[_0x29d51f(0xfa)];db['ref'](_0x29d51f(0xce)+roomCode+_0x29d51f(0xd6)+_0x59b37d)[_0x29d51f(0x129)]({'msg':_0x3ebf21,'sender':_0x29d51f(0x11a),'senderId':_0x29d51f(0xed),'timestamp':Date[_0x29d51f(0xe3)]()});}function toggleSidebar(){const _0x4f6a91=_0xf481d8;document['getElementById'](_0x4f6a91(0x112))[_0x4f6a91(0xe9)][_0x4f6a91(0x10f)](_0x4f6a91(0x126));}document[_0xf481d8(0xf7)](_0xf481d8(0x10c),()=>{const _0xe09c6a=_0xf481d8,_0x4276a0=document[_0xe09c6a(0x102)](_0xe09c6a(0x10d));_0x4276a0&&_0x4276a0[_0xe09c6a(0xf7)](_0xe09c6a(0xe1),function(_0x21457f){const _0x2a125a=_0xe09c6a;_0x21457f[_0x2a125a(0xfa)]===_0x2a125a(0xfb)&&(_0x21457f[_0x2a125a(0xd7)](),sendMessage());});});function showScreen(_0x40e8f6){const _0x7af6a6=_0xf481d8;[_0x7af6a6(0x109),_0x7af6a6(0x12a),'codeEntryScreen',_0x7af6a6(0x106)]['forEach'](_0x1bce52=>{const _0x2ca17a=_0x7af6a6;document[_0x2ca17a(0x102)](_0x1bce52)['style'][_0x2ca17a(0xdb)]='none';}),document[_0x7af6a6(0x102)](_0x40e8f6)['style'][_0x7af6a6(0xdb)]='flex';}function sendMessage(){const _0x1f3bf4=_0xf481d8,_0x4d1f58=document['getElementById'](_0x1f3bf4(0x10d)),_0x1f584e=_0x4d1f58[_0x1f3bf4(0xfe)]['trim']();if(!_0x1f584e)return;const _0x32997b=db[_0x1f3bf4(0xee)]()['push']()[_0x1f3bf4(0xfa)];db[_0x1f3bf4(0xee)](_0x1f3bf4(0xce)+roomCode+_0x1f3bf4(0xd6)+_0x32997b)[_0x1f3bf4(0x129)]({'msg':_0x1f584e,'sender':username,'senderId':clientId,'timestamp':Date[_0x1f3bf4(0xe3)]()}),_0x4d1f58[_0x1f3bf4(0xfe)]='',sendTyping(!![]),lastActivity=Date[_0x1f3bf4(0xe3)]();}function listenForMessages(){const _0x30331f=_0xf481d8,_0x4b2a47=db[_0x30331f(0xee)]('rooms/'+roomCode+_0x30331f(0xf5)),_0x4992e6=roomCode===STATIC_ROOM?_0x4b2a47[_0x30331f(0x122)](0x50):_0x4b2a47;_0x4992e6['on']('child_added',_0x24768e=>{const _0x24f008=_0x30331f,{msg:_0x4dd13d,sender:_0x315ca6,senderId:_0x4c9f4a,timestamp:_0x115cbc}=_0x24768e[_0x24f008(0x100)](),_0x5c2621=_0x4c9f4a===clientId;addMessage(_0x4dd13d,_0x315ca6,_0x115cbc,_0x5c2621),roomCode!==STATIC_ROOM&&db['ref']('rooms/'+roomCode+_0x24f008(0xd6)+_0x24768e['key'])[_0x24f008(0x124)]();});}function addMessage(_0x21b980,_0x4b255f,_0x3d7a95,_0x19a81c){const _0x5c2cd0=_0xf481d8,_0x5e8ab0=document['createElement'](_0x5c2cd0(0xf1));_0x5e8ab0[_0x5c2cd0(0xe9)]['add'](_0x5c2cd0(0xda),_0x19a81c?_0x5c2cd0(0xff):'received');const _0x52ed45=new Date(_0x3d7a95)[_0x5c2cd0(0xe6)]([],{'hour':_0x5c2cd0(0x12c),'minute':_0x5c2cd0(0x12c)});_0x5e8ab0[_0x5c2cd0(0x133)]=_0x5c2cd0(0xd5)+_0x4b255f+_0x5c2cd0(0x127)+_0x21b980+'<small>'+_0x52ed45+_0x5c2cd0(0xe5),document['getElementById'](_0x5c2cd0(0x131))['appendChild'](_0x5e8ab0),document['getElementById'](_0x5c2cd0(0x131))[_0x5c2cd0(0xea)]=0x1869f;}function sendTyping(_0x4848b4=![]){const _0x301955=_0xf481d8;_0x4848b4?db[_0x301955(0xee)](_0x301955(0xce)+roomCode+_0x301955(0x114)+clientId)[_0x301955(0x124)]():(db[_0x301955(0xee)](_0x301955(0xce)+roomCode+_0x301955(0x114)+clientId)[_0x301955(0x129)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x1258af=_0x301955;db[_0x1258af(0xee)]('rooms/'+roomCode+_0x1258af(0x114)+clientId)[_0x1258af(0x124)]();},0xbb8));}function listenForTyping(){const _0x5e3fc2=_0xf481d8,_0x26b590=document[_0x5e3fc2(0x102)](_0x5e3fc2(0x12b));db[_0x5e3fc2(0xee)](_0x5e3fc2(0xce)+roomCode+'/typing')['on'](_0x5e3fc2(0xfe),_0x5bd08f=>{const _0xa2ad36=_0x5e3fc2,_0x58f68a=_0x5bd08f[_0xa2ad36(0x100)]();if(!_0x58f68a)return _0x26b590[_0xa2ad36(0xf9)]='';const _0x69527f=Object['values'](_0x58f68a)[_0xa2ad36(0xeb)](_0x499550=>_0x499550!==username);_0x26b590['innerText']=_0x69527f[_0xa2ad36(0xd3)]?_0x69527f[_0xa2ad36(0xdc)](',\x20')+_0xa2ad36(0xd8):'';});}function startInactivityTimer(){setInterval(()=>{const _0x51c93f=_0x5c33;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&(db[_0x51c93f(0xee)](_0x51c93f(0xce)+roomCode)[_0x51c93f(0x113)]({'active':![]}),alert('Session\x20expired.'),location['reload']());},0x7530);}function genRoomCode(){const _0x35e119=_0xf481d8,_0x456aec=_0x35e119(0xf3),_0x4664bd=_0x35e119(0x10b),_0x28580a=(_0x5064f0,_0x1226a3)=>Array[_0x35e119(0xd1)]({'length':_0x1226a3},()=>_0x5064f0[Math[_0x35e119(0x10e)](Math[_0x35e119(0x118)]()*_0x5064f0[_0x35e119(0xd3)])])[_0x35e119(0xdc)]('');return _0x28580a(_0x4664bd,0x3)+_0x28580a(_0x456aec,0x3)+_0x28580a(_0x4664bd,0x2)+_0x28580a(_0x456aec,0x2);}function generateClientId(){const _0x12797d=_0xf481d8;return'_'+Math[_0x12797d(0x118)]()['toString'](0x24)['substr'](0x2,0x9);}function _0x5c33(_0x2b93a5,_0x4d9a0b){const _0x207387=_0x2073();return _0x5c33=function(_0x5c33a8,_0x2babeb){_0x5c33a8=_0x5c33a8-0xcc;let _0x537c4d=_0x207387[_0x5c33a8];return _0x537c4d;},_0x5c33(_0x2b93a5,_0x4d9a0b);}function cleanupOldRooms(){const _0x46a8c3=_0xf481d8;db['ref'](_0x46a8c3(0xd4))[_0x46a8c3(0x103)](_0x46a8c3(0xfe))[_0x46a8c3(0xe0)](_0x3ee0cb=>{const _0x6f49c4=_0x46a8c3,_0x6ee726=_0x3ee0cb[_0x6f49c4(0x100)]();if(!_0x6ee726)return;const _0x4858a0=Date[_0x6f49c4(0xe3)]();Object[_0x6f49c4(0xd0)](_0x6ee726)[_0x6f49c4(0x11c)](([_0x18cb8a,_0x106ca8])=>{const _0x58a7b8=_0x6f49c4;if(_0x18cb8a===STATIC_ROOM)return;const _0x2fb58b=_0x106ca8['created']||0x0,_0x3440d1=_0x4858a0-_0x2fb58b>ROOM_TTL_MS;_0x3440d1&&(db[_0x58a7b8(0xee)](_0x58a7b8(0xce)+_0x18cb8a)[_0x58a7b8(0x124)](),console[_0x58a7b8(0xef)]('üóëÔ∏è\x20Deleted\x20expired\x20room:',_0x18cb8a));});});}