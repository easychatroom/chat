const _0x143c25=_0x329a;(function(_0x50fb11,_0x3fc3ee){const _0x15e387=_0x329a,_0x3c9ef1=_0x50fb11();while(!![]){try{const _0x2d7bbc=parseInt(_0x15e387(0xa5))/0x1*(parseInt(_0x15e387(0x122))/0x2)+-parseInt(_0x15e387(0xb2))/0x3*(parseInt(_0x15e387(0x7c))/0x4)+-parseInt(_0x15e387(0xd6))/0x5+parseInt(_0x15e387(0x131))/0x6*(parseInt(_0x15e387(0x99))/0x7)+parseInt(_0x15e387(0xf2))/0x8*(-parseInt(_0x15e387(0x123))/0x9)+-parseInt(_0x15e387(0xbe))/0xa*(-parseInt(_0x15e387(0xff))/0xb)+parseInt(_0x15e387(0x9b))/0xc*(-parseInt(_0x15e387(0xc1))/0xd);if(_0x2d7bbc===_0x3fc3ee)break;else _0x3c9ef1['push'](_0x3c9ef1['shift']());}catch(_0x14e6f2){_0x3c9ef1['push'](_0x3c9ef1['shift']());}}}(_0x1a48,0x8c40f));const firebaseConfig={'apiKey':'AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','authDomain':'easy-chatroom.firebaseapp.com','databaseURL':_0x143c25(0x95),'projectId':_0x143c25(0x97),'storageBucket':_0x143c25(0x119),'messagingSenderId':'985049198428','appId':'1:985049198428:web:d0eb7e2de39887710c9b99','measurementId':'G-QDESJ2WR42'};firebase[_0x143c25(0x12b)](firebaseConfig);const db=firebase[_0x143c25(0x116)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x143c25(0x115)]()[_0x143c25(0xc8)](0x24)[_0x143c25(0xa1)](0x2,0x9),lastActivity=Date[_0x143c25(0x124)](),typingTimeout,gr8stg='';const STATIC_ROOM=_0x143c25(0xcc),MAX_MESSAGES=0xfa,sound=new Audio(_0x143c25(0xa3));sound['volume']=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer;function _0x329a(_0x3c41f1,_0x2f1db9){const _0x1a486d=_0x1a48();return _0x329a=function(_0x329a43,_0x4f6cd9){_0x329a43=_0x329a43-0x79;let _0x1f4d36=_0x1a486d[_0x329a43];return _0x1f4d36;},_0x329a(_0x3c41f1,_0x2f1db9);}function toggleRecording(){isRecording?stopRecording():navigator['mediaDevices']['getUserMedia']({'audio':!![]})['then'](_0x4e1e53=>{const _0x423e97=_0x329a;mediaRecorder=new MediaRecorder(_0x4e1e53),mediaRecorder[_0x423e97(0xb7)](),isRecording=!![],document[_0x423e97(0xa7)](_0x423e97(0x11e))[_0x423e97(0xdb)]='⏹️',audioChunks=[],mediaRecorder['ondataavailable']=_0x4d9917=>audioChunks[_0x423e97(0xde)](_0x4d9917['data']),mediaRecorder[_0x423e97(0x129)]=()=>{const _0x61c44e=_0x423e97;clearTimeout(recordingTimer);const _0x183627=new Blob(audioChunks,{'type':_0x61c44e(0xea)}),_0x553fe3=new FileReader();_0x553fe3[_0x61c44e(0xab)]=()=>{const _0x1c4f11=_0x61c44e,_0x192034=_0x553fe3[_0x1c4f11(0xcb)][_0x1c4f11(0xa6)](',')[0x1],_0x5a238c=db[_0x1c4f11(0x106)]()[_0x1c4f11(0xde)]()['key'];db[_0x1c4f11(0x106)](_0x1c4f11(0x117)+roomCode+_0x1c4f11(0x102)+_0x5a238c)[_0x1c4f11(0x11d)]({'msg':_0x1c4f11(0xc6),'audioBase64':_0x192034,'sender':username,'senderId':clientId,'timestamp':Date[_0x1c4f11(0x124)]()});},_0x553fe3[_0x61c44e(0xf6)](_0x183627);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})['catch'](_0x2581e1=>{alert('Microphone\x20permission\x20denied.');});}function stopRecording(){const _0x12f3d0=_0x143c25;mediaRecorder&&isRecording&&(mediaRecorder[_0x12f3d0(0x107)](),isRecording=![],document[_0x12f3d0(0xa7)]('recordBtn')[_0x12f3d0(0xdb)]=_0x12f3d0(0x8d));}window[_0x143c25(0xeb)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x51ae78){const _0x2c9aee=_0x143c25;return _0x51ae78[_0x2c9aee(0xe6)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x1fba66=_0x143c25,_0x2e2b7c=document[_0x1fba66(0xa7)](_0x1fba66(0x7b))[_0x1fba66(0x8a)][_0x1fba66(0xe5)](),_0x2701f3=document[_0x1fba66(0xa7)](_0x1fba66(0xed))[_0x1fba66(0x8a)][_0x1fba66(0xe5)](),_0x20e948=document['getElementById'](_0x1fba66(0x12c)),_0x1a2ebd=firebase[_0x1fba66(0x9c)]()[_0x1fba66(0x79)][_0x1fba66(0xaa)];if(!_0x2e2b7c||!_0x2701f3){_0x20e948[_0x1fba66(0xdb)]='Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.',_0x20e948[_0x1fba66(0xbb)][_0x1fba66(0x103)]='block';return;}_0x20e948[_0x1fba66(0xbb)][_0x1fba66(0x103)]='none';const _0x17dc50=sanitizeUsername(_0x2e2b7c);db[_0x1fba66(0x106)](_0x1fba66(0xb3)+_0x17dc50)[_0x1fba66(0x111)](_0x1fba66(0x8a))[_0x1fba66(0x8b)](_0x27113c=>{const _0x39ea40=_0x1fba66;if(_0x27113c[_0x39ea40(0xd5)]()){alert(_0x39ea40(0xd2));return;}const _0x4e22e7=Date['now'](),_0x1c8412=db['ref']('profiles/'+_0x17dc50);_0x1c8412[_0x39ea40(0x98)]()[_0x39ea40(0x8b)](_0x486597=>{const _0x30b047=_0x39ea40,_0x37d5c0=_0x486597[_0x30b047(0x9a)]()||{},_0x3a9a02=_0x37d5c0['usernameHistory']||[];if(!_0x3a9a02[_0x30b047(0xb0)](_0x2e2b7c))_0x3a9a02[_0x30b047(0xde)](_0x2e2b7c);_0x1c8412[_0x30b047(0x11d)]({'username':_0x2e2b7c,'description':_0x2701f3,'lastChanged':_0x4e22e7,'usernameHistory':_0x3a9a02}),db[_0x30b047(0x106)](_0x30b047(0x10d)+_0x1a2ebd)[_0x30b047(0x11d)]({'username':_0x2e2b7c,'description':_0x2701f3,'usernameChangedAt':_0x4e22e7}),username=_0x2e2b7c,document[_0x30b047(0xa7)]('namePreview')['innerText']=username,showScreen('roomChoiceScreen');});});}function saveUsername(){const _0x5bb8be=_0x143c25,_0x4beb32=document[_0x5bb8be(0xa7)](_0x5bb8be(0x84))[_0x5bb8be(0x8a)]['trim']();if(!_0x4beb32)return alert(_0x5bb8be(0x10a));username=_0x4beb32,localStorage[_0x5bb8be(0x8e)]('chat_username',username),initUsernameFlow();}function generateRoom(){const _0x2c089f=_0x143c25;roomCode=genRoomCode(),db[_0x2c089f(0x106)](_0x2c089f(0x117)+roomCode)['set']({'active':!![],'created':Date[_0x2c089f(0x124)]()}),startChat();}function joinRoom(){const _0x43878f=_0x143c25,_0x2a0606=roomCode||document['getElementById'](_0x43878f(0xca))[_0x43878f(0x8a)][_0x43878f(0xe5)]()[_0x43878f(0x9e)]();if(!_0x2a0606)return alert(_0x43878f(0x9f));roomCode=_0x2a0606;if(roomCode===STATIC_ROOM){showScreen(_0x43878f(0x88));return;}db[_0x43878f(0x106)]('rooms/'+roomCode)[_0x43878f(0x98)]()['then'](_0x4b9e0f=>{const _0x280fc2=_0x43878f;_0x4b9e0f[_0x280fc2(0xd5)]()&&_0x4b9e0f[_0x280fc2(0x9a)]()[_0x280fc2(0xb1)]!==![]?startChat():alert(_0x280fc2(0x9d));});}function startChat(){const _0x5ef30d=_0x143c25;if(!roomCode||!username)return alert(_0x5ef30d(0x94)),showScreen(_0x5ef30d(0x130));showScreen('chatScreen'),document[_0x5ef30d(0xa7)]('userDisplay')[_0x5ef30d(0xdb)]=username,(roomCode='050BBB66HH')?document[_0x5ef30d(0xa7)](_0x5ef30d(0x81))['innerText']='No\x20room\x20code\x20available\x20for\x20private\x20rooms':document[_0x5ef30d(0xa7)](_0x5ef30d(0x81))[_0x5ef30d(0xdb)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();}function validateStaticRoomPassword(){const _0x4e686d=_0x143c25,_0x3ba273=document[_0x4e686d(0xa7)](_0x4e686d(0xd7))[_0x4e686d(0x8a)],_0x393996=document['getElementById']('passwordError');db[_0x4e686d(0x106)](_0x4e686d(0x12f))[_0x4e686d(0x98)]()['then'](_0x4d3b46=>{const _0x1cfb06=_0x4e686d,_0x128dfe=_0x4d3b46[_0x1cfb06(0x9a)]();_0x3ba273===_0x128dfe?(_0x393996[_0x1cfb06(0xbb)][_0x1cfb06(0x103)]=_0x1cfb06(0xfb),startChat()):_0x393996['style'][_0x1cfb06(0x103)]=_0x1cfb06(0xc2);});}function sendMessage(){const _0x478b59=_0x143c25,_0x356084=document[_0x478b59(0xa7)]('msgInput'),_0x56bdd7=_0x356084['value'][_0x478b59(0xe5)]();if(!_0x56bdd7)return;const _0x203a75=Date[_0x478b59(0x124)](),_0x13d870=sanitizeUsername(username);db[_0x478b59(0x106)](_0x478b59(0xa0)+roomCode+'/'+_0x13d870)[_0x478b59(0x111)](_0x478b59(0x8a))[_0x478b59(0x8b)](_0x499682=>{const _0x4a8678=_0x478b59,_0x515313=_0x499682[_0x4a8678(0x9a)]();if(_0x515313&&_0x203a75<_0x515313){const _0x2f0d06=Math[_0x4a8678(0x110)]((_0x515313-_0x203a75)/0x3e8);alert(_0x4a8678(0x108)+_0x2f0d06+_0x4a8678(0x109));return;}const _0xc65ea7=db[_0x4a8678(0x106)](_0x4a8678(0xc7)+roomCode+'/'+_0x13d870);_0xc65ea7[_0x4a8678(0x111)]('value')[_0x4a8678(0x8b)](_0xf65322=>{const _0x3eea65=_0x4a8678,_0x154e48=_0xf65322['val']()||[],_0x5100f4=[..._0x154e48,_0x203a75][_0x3eea65(0xd1)](_0x2060df=>_0x203a75-_0x2060df<0xbb8);if(_0x5100f4[_0x3eea65(0x12d)]>=0x5){alert(_0x3eea65(0xdf)),db[_0x3eea65(0x106)]('antispamBlocked/'+roomCode+'/'+_0x13d870)[_0x3eea65(0x11d)](_0x203a75+0x7530);const _0x4d4a85=db[_0x3eea65(0x106)](_0x3eea65(0x117)+roomCode+'/messages');_0x4d4a85[_0x3eea65(0xee)](_0x3eea65(0xd4))['equalTo'](clientId)['limitToLast'](0x5)[_0x3eea65(0x111)](_0x3eea65(0x8a),_0x4bf318=>{_0x4bf318['forEach'](_0x1b5943=>{const _0x48d46c=_0x329a;_0x4d4a85[_0x48d46c(0x7a)](_0x1b5943[_0x48d46c(0x118)])[_0x48d46c(0x83)]();});}),_0xc65ea7[_0x3eea65(0x11d)]([]);return;}_0xc65ea7['set'](_0x5100f4);const _0x1a821b=db[_0x3eea65(0x106)]()[_0x3eea65(0xde)]()['key'];db['ref'](_0x3eea65(0x117)+roomCode+_0x3eea65(0x102)+_0x1a821b)[_0x3eea65(0x11d)]({'msg':_0x56bdd7,'sender':username,'senderId':clientId,'timestamp':_0x203a75}),_0x356084[_0x3eea65(0x8a)]='',sendTyping(!![]),lastActivity=_0x203a75;});});}function listenForMessages(){const _0x29f781=_0x143c25,_0x18fb64=db[_0x29f781(0x106)]('rooms/'+roomCode+'/messages'),_0x3863cc=_0x18fb64[_0x29f781(0x101)](MAX_MESSAGES);_0x3863cc['on'](_0x29f781(0x121),_0x77a537=>{const _0x1f4d63=_0x29f781,_0x3b26c5=_0x77a537[_0x1f4d63(0x9a)](),{msg:_0x580f2e,sender:_0x41a087,senderId:_0x46d58d,timestamp:_0x1153cd}=_0x3b26c5,_0x3ab27f=_0x46d58d===clientId,_0x5e0689=_0x3b26c5[_0x1f4d63(0xf7)]||null,_0x277a5f=_0x3b26c5['audioBase64']||null;addMessage(_0x580f2e,_0x41a087,_0x1153cd,_0x3ab27f,_0x5e0689,_0x277a5f),roomCode!==STATIC_ROOM&&db['ref']('rooms/'+roomCode+_0x1f4d63(0x102)+_0x77a537['key'])[_0x1f4d63(0x83)](),!_0x3ab27f&&(sound[_0x1f4d63(0xc3)](),flagPageAttention());});}function addMessage(_0x3df387,_0x3d7a68,_0x2d99a0,_0x10e302,_0x5c901a=null,_0x1c205f=null){const _0x832939=_0x143c25,_0x5d0c84=document['createElement']('div');_0x5d0c84[_0x832939(0x105)][_0x832939(0xe1)](_0x832939(0xbd),_0x10e302?_0x832939(0x11c):'received');const _0x1bd8b8=new Date(_0x2d99a0)[_0x832939(0xaf)]([],{'hour':_0x832939(0x11b),'minute':_0x832939(0x11b)});let _0x22814b=_0x832939(0xa2)+_0x3d7a68+_0x832939(0xdc);!_0x5c901a&&!_0x1c205f&&(_0x3df387=_0x3df387[_0x832939(0xe6)](new RegExp('@'+username+'\x5cb','gi'),'<span\x20style=\x22color:#ff4081;\x22>@$&</span>'));if(_0x5c901a)_0x22814b+=_0x832939(0xd0)+_0x5c901a+'\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>';else{if(_0x1c205f){const _0x212013=_0x832939(0x11f)+_0x1c205f;_0x22814b+='<audio\x20controls\x20src=\x22'+_0x212013+_0x832939(0x11a);}else _0x22814b+=_0x3df387;}_0x22814b+=_0x832939(0xac)+_0x1bd8b8+_0x832939(0xc9);_0x10e302&&(_0x22814b+=_0x832939(0x8f)+key+_0x832939(0x7e));_0x5d0c84[_0x832939(0x128)]=_0x22814b;const _0x409c77=document['getElementById']('messages');_0x409c77['appendChild'](_0x5d0c84),_0x409c77['scrollTop']=_0x409c77[_0x832939(0x92)];}function _0x1a48(){const _0xabef3e=['●\x20Online','onDisconnect','innerText','</span><br>','No\x20bio\x20set','push','🚫\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.','from','add','reload','join','admins/','trim','replace','\x0aLast\x20Changed:\x20','forEach','userList','audio/webm','onload','0123456789','profileDescriptionInput','orderByChild','title','contains','pushState','5832LPjtzr','popstate','#00ff88','\x20typing...','readAsDataURL','audioUrl','sendEmailVerification',';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27','update','none','values','namePreview','onlineStatus','11897006nrKSjl',')\x20New\x20message\x20•\x20','limitToLast','/messages/','display','\x20minutes.','classList','ref','stop','⛔\x20You\x27re\x20blocked\x20for\x20','s\x20due\x20to\x20spam.\x20Please\x20wait.','Please\x20enter\x20a\x20valid\x20name','profiles/','You\x20can\x20change\x20your\x20username\x20again\x20in\x20','users/','chatScreen','back','ceil','once','state','emailVerified','/typing/','random','database','rooms/','key','easy-chatroom.firebasestorage.app','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','2-digit','sent','set','recordBtn','data:audio/webm;base64,','antispam','child_added','118CFWLIa','3699hPAoGw','now','profileViewer','Only\x20admins\x20can\x20delete\x20messages.','usernameHistory','innerHTML','onstop','ServerValue','initializeApp','profileError','length','<li\x20style=\x22color:','gr8stg','roomChoiceScreen','445254vGbole','currentUser','child','profileUsernameInput','1133708FqHKeF','username','\x27)\x22\x20style=\x22margin-left:5px;\x22>🗑️</button>','signInWithEmailAndPassword','codeEntryScreen','roomDisplay','hidden','remove','usernameInput','keypress','DOMContentLoaded','Please\x20verify\x20your\x20email\x20before\x20continuing.','passwordScreen','addEventListener','value','then','usernameChangedAt','🎙️','setItem','\x20<button\x20onclick=\x22deleteMessage(\x27','color','message','scrollHeight','\x0aName:\x20','Missing\x20room\x20or\x20user\x20information.','https://easy-chatroom-default-rtdb.firebaseio.com','\x0aHistory:\x0a','easy-chatroom','get','84YxZTCx','val','36ULJvkb','auth','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','toUpperCase','Enter\x20a\x20valid\x20room\x20code','antispamBlocked/','substr','<span\x20class=\x22sender-name\x22>','sounds/beep.mp3','msgInput','7333TAudXa','split','getElementById','\x0a\x20\x20\x20\x20','Session\x20expired.','uid','onloadend','<small>','chat_username','Enter','toLocaleTimeString','includes','active','6dZXbVy','usernames/','#888','lastOnline','authScreen','start','description','antispamBlocked','\x0aDescription:\x20','style','show','msg','10xcEumb','created','</li>','2983110pRlZdP','block','play','typing','visibilitychange','[Voice\x20message]','antispam/','toString','</small>','roomCodeInput','result','050BBB66HH','catch','user','userSidebar','<audio\x20controls\x20src=\x22','filter','Username\x20already\x20taken.','/typing','senderId','exists','1376695NNWyyl','staticPasswordInput','ABCDEFGHIJKLMNOPQRSTUVWXYZ'];_0x1a48=function(){return _0xabef3e;};return _0x1a48();}function deleteMessage(_0x3f3d0d){const _0x2fdf14=_0x143c25,_0x5454b6=firebase[_0x2fdf14(0x9c)]()[_0x2fdf14(0x79)]['uid'];db[_0x2fdf14(0x106)](_0x2fdf14(0xe4)+roomCode+'/'+_0x5454b6)[_0x2fdf14(0x111)](_0x2fdf14(0x8a))['then'](_0x58425d=>{const _0x203e4f=_0x2fdf14;_0x58425d[_0x203e4f(0xd5)]()?db[_0x203e4f(0x106)](_0x203e4f(0x117)+roomCode+'/messages/'+_0x3f3d0d)['remove']():alert(_0x203e4f(0x126));});}function signIn(_0x42bb0c,_0x5e39a4){const _0x388036=_0x143c25;firebase[_0x388036(0x9c)]()[_0x388036(0x7f)](_0x42bb0c,_0x5e39a4)[_0x388036(0x8b)](()=>{const _0x4ed091=_0x388036;if(!firebase[_0x4ed091(0x9c)]()['currentUser'][_0x4ed091(0x113)]){alert(_0x4ed091(0x87));return;}loadProfileAfterLogin();})[_0x388036(0xcd)](_0x3bf7b3=>alert(_0x3bf7b3[_0x388036(0x91)]));}function signUp(_0x16d4c6,_0x21635c){const _0x530ae7=_0x143c25;firebase[_0x530ae7(0x9c)]()['createUserWithEmailAndPassword'](_0x16d4c6,_0x21635c)[_0x530ae7(0x8b)](_0x9442df=>_0x9442df[_0x530ae7(0xce)][_0x530ae7(0xf8)]())[_0x530ae7(0xcd)](_0x5e072c=>alert(_0x5e072c[_0x530ae7(0x91)]));}function cleanupOldRooms(){const _0xa671c3=_0x143c25;db['ref']('rooms')['once'](_0xa671c3(0x8a))[_0xa671c3(0x8b)](_0x3f92e3=>{const _0x6a9b71=_0xa671c3,_0xd86fce=_0x3f92e3[_0x6a9b71(0x9a)]();if(!_0xd86fce)return;const _0xcd5b2b=Date[_0x6a9b71(0x124)]();for(const _0x39330e in _0xd86fce){if(_0x39330e===STATIC_ROOM)continue;const _0x41b6d0=_0xd86fce[_0x39330e];_0xcd5b2b-(_0x41b6d0[_0x6a9b71(0xbf)]||0x0)>0x2*0x3c*0x3e8&&db[_0x6a9b71(0x106)]('rooms/'+_0x39330e)[_0x6a9b71(0x83)]();}db[_0x6a9b71(0x106)](_0x6a9b71(0x120))[_0x6a9b71(0x111)](_0x6a9b71(0x8a))['then'](_0x49287e=>{const _0x170ad0=_0x6a9b71,_0x20ca0f=_0x49287e[_0x170ad0(0x9a)]();if(!_0x20ca0f)return;for(const _0x164bf6 in _0x20ca0f){if(_0x164bf6!==STATIC_ROOM)db['ref'](_0x170ad0(0xc7)+_0x164bf6)[_0x170ad0(0x83)]();}}),db['ref'](_0x6a9b71(0xb9))[_0x6a9b71(0x111)](_0x6a9b71(0x8a))[_0x6a9b71(0x8b)](_0x214eb4=>{const _0x299c38=_0x6a9b71,_0x1cd3fb=_0x214eb4['val']();if(!_0x1cd3fb)return;for(const _0x119cb0 in _0x1cd3fb){if(_0x119cb0!==STATIC_ROOM)db['ref']('antispamBlocked/'+_0x119cb0)[_0x299c38(0x83)]();}});});}function loadProfileAfterLogin(){const _0x20f312=_0x143c25,_0x564bdd=firebase[_0x20f312(0x9c)]()['currentUser'][_0x20f312(0xaa)];db[_0x20f312(0x106)](_0x20f312(0x10d)+_0x564bdd)[_0x20f312(0x111)](_0x20f312(0x8a))[_0x20f312(0x8b)](_0x3ac524=>{const _0x5620ab=_0x20f312,_0x3776c3=_0x3ac524[_0x5620ab(0x9a)]();!_0x3776c3||!_0x3776c3[_0x5620ab(0x7d)]?showScreen(_0x5620ab(0xb6)):(username=_0x3776c3[_0x5620ab(0x7d)],document['getElementById']('namePreview')['innerText']=username,showScreen(_0x5620ab(0x130)));});}document[_0x143c25(0x89)](_0x143c25(0x86),()=>{const _0x3cac0f=_0x143c25,_0x26d368=document[_0x3cac0f(0xa7)](_0x3cac0f(0xa4));_0x26d368&&_0x26d368[_0x3cac0f(0x89)](_0x3cac0f(0x85),function(_0xc6321b){const _0x3d1497=_0x3cac0f;_0xc6321b[_0x3d1497(0x118)]===_0x3d1497(0xae)&&(_0xc6321b['preventDefault'](),sendMessage());});});function showScreen(_0x505583){const _0x54417b=_0x143c25;[_0x54417b(0xb6),'roomChoiceScreen',_0x54417b(0x80),_0x54417b(0x10e),'passwordScreen'][_0x54417b(0xe8)](_0x53166b=>{const _0x36822c=_0x54417b;document[_0x36822c(0xa7)](_0x53166b)[_0x36822c(0xbb)][_0x36822c(0x103)]=_0x36822c(0xfb);}),document[_0x54417b(0xa7)](_0x505583)[_0x54417b(0xbb)]['display']='flex';}function genRoomCode(){const _0x1fc5bf=_0x143c25,_0x2bdf07=_0x1fc5bf(0xd8),_0x1a9e59=_0x1fc5bf(0xec),_0x4e6720=(_0x4a577e,_0xca0deb)=>Array[_0x1fc5bf(0xe0)]({'length':_0xca0deb},()=>_0x4a577e[Math['floor'](Math[_0x1fc5bf(0x115)]()*_0x4a577e['length'])])[_0x1fc5bf(0xe3)]('');return _0x4e6720(_0x1a9e59,0x3)+_0x4e6720(_0x2bdf07,0x3)+_0x4e6720(_0x1a9e59,0x2)+_0x4e6720(_0x2bdf07,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x5c5099=_0x329a;Date[_0x5c5099(0x124)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x5c5099(0x106)]('rooms/'+roomCode)[_0x5c5099(0xfa)]({'active':![]}),alert(_0x5c5099(0xa9)),location[_0x5c5099(0xe2)]());},0x7530);}function setupSidebarBackHandler(){const _0x11a4f0=_0x143c25;window['addEventListener'](_0x11a4f0(0xf3),()=>{const _0x244fa6=_0x11a4f0,_0x284f12=document[_0x244fa6(0xa7)](_0x244fa6(0xcf));_0x284f12?.[_0x244fa6(0x105)][_0x244fa6(0xf0)]('show')&&_0x284f12[_0x244fa6(0x105)][_0x244fa6(0x83)]('show');});}function toggleSidebar(){const _0x49bb6e=_0x143c25,_0x260855=document[_0x49bb6e(0xa7)](_0x49bb6e(0xcf));if(!_0x260855['classList'][_0x49bb6e(0xf0)](_0x49bb6e(0xbc)))_0x260855[_0x49bb6e(0x105)][_0x49bb6e(0xe1)]('show'),history[_0x49bb6e(0xf1)]({'sidebarOpen':!![]},'');else{_0x260855[_0x49bb6e(0x105)][_0x49bb6e(0x83)](_0x49bb6e(0xbc));if(history[_0x49bb6e(0x112)]?.['sidebarOpen'])history[_0x49bb6e(0x10f)]();}}function setupVisibilityAttention(){const _0x145a57=_0x143c25;let _0x4f859f=0x0,_0xc6050a=document[_0x145a57(0xef)];document[_0x145a57(0x89)](_0x145a57(0xc5),()=>{const _0xd0f2a0=_0x145a57;!document[_0xd0f2a0(0x82)]&&(document[_0xd0f2a0(0xef)]=_0xc6050a,_0x4f859f=0x0);}),window['flagPageAttention']=function(){const _0xb65eeb=_0x145a57;document[_0xb65eeb(0x82)]&&(_0x4f859f++,document[_0xb65eeb(0xef)]='('+_0x4f859f+_0xb65eeb(0x100)+_0xc6050a);};}function tryEditProfile(){const _0x531673=_0x143c25,_0xca382a=firebase['auth']()[_0x531673(0x79)][_0x531673(0xaa)];db[_0x531673(0x106)](_0x531673(0x10d)+_0xca382a)['get']()['then'](_0x21fa56=>{const _0x85cf2d=_0x531673,_0x15e95a=_0x21fa56[_0x85cf2d(0x9a)]();if(!_0x15e95a)return alert('Profile\x20not\x20found.');const _0x45f087=_0x15e95a[_0x85cf2d(0x8c)]||0x0,_0x4b4a36=Date[_0x85cf2d(0x124)](),_0x20ee6c=0x18*0x3c*0x3c*0x3e8;if(_0x4b4a36-_0x45f087<_0x20ee6c){const _0x53fda5=Math['ceil']((_0x20ee6c-(_0x4b4a36-_0x45f087))/(0x3c*0x3e8));alert(_0x85cf2d(0x10c)+_0x53fda5+_0x85cf2d(0x104));}else showScreen(_0x85cf2d(0xb6)),document['getElementById'](_0x85cf2d(0x7b))[_0x85cf2d(0x8a)]=_0x15e95a[_0x85cf2d(0x7d)]||'',document[_0x85cf2d(0xa7)](_0x85cf2d(0xed))[_0x85cf2d(0x8a)]=_0x15e95a[_0x85cf2d(0xb8)]||'';});}function listenForUserList(){const _0x3d4585=_0x143c25;db[_0x3d4585(0x106)](_0x3d4585(0x10d)+roomCode)['on']('value',_0x1d6fea=>{const _0x56c3ec=_0x3d4585,_0x4ab9ab=_0x1d6fea['val']()||{},_0x18553f=Date[_0x56c3ec(0x124)](),_0x2ae5af=Object[_0x56c3ec(0xfc)](_0x4ab9ab)['map'](_0x440892=>{const _0x251715=_0x56c3ec,_0x5bb3f0=_0x440892['online'],_0x52715c=_0x18553f-_0x440892[_0x251715(0xb5)]<=0x1e*0x3c*0x3e8;if(!_0x5bb3f0&&!_0x52715c)return'';const _0x1fc830=_0x5bb3f0?_0x251715(0xf4):_0x251715(0xb4),_0x59c2c3=_0x5bb3f0?'🟢':'🕒',_0x3f1dc1=new Date(_0x440892[_0x251715(0xb5)])[_0x251715(0xaf)]([],{'hour':_0x251715(0x11b),'minute':'2-digit'});return _0x251715(0x12e)+_0x1fc830+_0x251715(0xf9)+sanitizeUsername(_0x440892['username'])+'\x27)\x22>'+_0x59c2c3+'\x20'+_0x440892[_0x251715(0x7d)]+_0x251715(0xc0);})['join']('');document[_0x56c3ec(0xa7)](_0x56c3ec(0xe9))[_0x56c3ec(0x128)]=_0x2ae5af;});}function sendTyping(_0x118d64=![]){const _0x4760fd=_0x143c25,_0x5b679b='rooms/'+roomCode+_0x4760fd(0x114)+clientId;_0x118d64?db[_0x4760fd(0x106)](_0x5b679b)['remove']():(db[_0x4760fd(0x106)](_0x5b679b)[_0x4760fd(0x11d)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x56c18c=_0x4760fd;db[_0x56c18c(0x106)](_0x5b679b)[_0x56c18c(0x83)]();},0xbb8));}function listenForTyping(){const _0x2fb949=_0x143c25,_0x118ee0=document[_0x2fb949(0xa7)](_0x2fb949(0xc4));db['ref'](_0x2fb949(0x117)+roomCode+_0x2fb949(0xd3))['on'](_0x2fb949(0x8a),_0x242739=>{const _0x557bfe=_0x2fb949,_0x22a380=_0x242739['val']();if(!_0x22a380)return _0x118ee0[_0x557bfe(0xdb)]='';const _0x510bcb=Object[_0x557bfe(0xfc)](_0x22a380)['filter'](_0x1e92dd=>_0x1e92dd!==username);_0x118ee0[_0x557bfe(0xdb)]=_0x510bcb['length']?_0x510bcb[_0x557bfe(0xe3)](',\x20')+_0x557bfe(0xf5):'';});}function trackPresence(){const _0x43bfb6=_0x143c25;if(!username||!roomCode)return;const _0x22e7c4=sanitizeUsername(username),_0x9e594b=db[_0x43bfb6(0x106)](_0x43bfb6(0x10d)+roomCode+'/'+_0x22e7c4),_0x60d464={'username':username,'lastOnline':firebase[_0x43bfb6(0x116)][_0x43bfb6(0x12a)]['TIMESTAMP'],'online':!![]};_0x9e594b['set'](_0x60d464),_0x9e594b[_0x43bfb6(0xda)]()[_0x43bfb6(0xfa)]({'online':![],'lastOnline':Date[_0x43bfb6(0x124)]()}),updateOnlineIndicator();}function updateOnlineIndicator(){const _0x5d12d5=_0x143c25,_0x4877a5=document[_0x5d12d5(0xa7)](_0x5d12d5(0xfe));_0x4877a5['innerText']=_0x5d12d5(0xd9),_0x4877a5[_0x5d12d5(0xbb)][_0x5d12d5(0x90)]='#00ff88';}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x4f4f23){const _0xf34628=_0x143c25;db['ref'](_0xf34628(0x10b)+_0x4f4f23)['get']()[_0xf34628(0x8b)](_0x5b6003=>{const _0x555852=_0xf34628;if(!_0x5b6003[_0x555852(0xd5)]())return;const _0x5fdf21=_0x5b6003[_0x555852(0x9a)](),_0x26977c=(_0x555852(0x93)+_0x5fdf21['username']+_0x555852(0xba)+(_0x5fdf21[_0x555852(0xb8)]||_0x555852(0xdd))+_0x555852(0x96)+(_0x5fdf21[_0x555852(0x127)]||[])[_0x555852(0xe3)]('\x0a')+_0x555852(0xe7)+new Date(_0x5fdf21['lastChanged'])['toLocaleString']()+_0x555852(0xa8))[_0x555852(0xe5)]();document[_0x555852(0xa7)]('profileContent')[_0x555852(0xdb)]=_0x26977c,document[_0x555852(0xa7)](_0x555852(0x125))[_0x555852(0xbb)]['display']=_0x555852(0xc2);});}function initUsernameFlow(){const _0x433eda=_0x143c25,_0x2eae29=localStorage['getItem'](_0x433eda(0xad));!_0x2eae29?showScreen(_0x433eda(0xb6)):(username=_0x2eae29,document[_0x433eda(0xa7)](_0x433eda(0xfd))[_0x433eda(0xdb)]=username,showScreen(_0x433eda(0x130)));}function closeProfile(){const _0x12ae06=_0x143c25;document[_0x12ae06(0xa7)](_0x12ae06(0x125))['style'][_0x12ae06(0x103)]=_0x12ae06(0xfb);}