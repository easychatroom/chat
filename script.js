const _0x42d3bd=_0x33c5;function _0x3667(){const _0x2f4760=['sent','</span><br>','18cMZCWk','from','getItem','contains','initializeApp','innerHTML','username','G-QDESJ2WR42','usernameInput','chatScreen','join','469485tjcnSF','ref','none','getElementById','https://easy-chatroom-default-rtdb.firebaseio.com','scrollTop','lastOnline','beforeunload','limitToLast','easy-chatroom','237248klotrj','now','received','rooms/','316500xXTOfk','/typing/','toUpperCase','System','show','remove','1387005GaWNOy','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','popstate','online','system','innerText','sidebarOpen','Enter','üóëÔ∏è\x20Deleted\x20expired\x20room:','val','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','msgInput','chat_username','random','map','</li>','4JpPbNr','length','DOMContentLoaded','set','value','roomChoiceScreen','flex','created','classList','forEach','roomDisplay','add','onload','<span\x20class=\x22sender-name\x22>','<li\x20style=\x22color:','preventDefault','toLocaleTimeString','rooms','0123456789','entries','active','namePreview','display','userDisplay','setItem','\x20joined\x20the\x20room','toString','trim','7721304QNqmsT','style','\x20typing...','7753767IhXWLI','appendChild','state','then','onDisconnect','substr','050BBB66HH','#00ff88','log','users/','50BWmMvC','pushState','update','once','createElement','filter','usernameScreen','back','push','Enter\x20a\x20valid\x20room\x20code','Session\x20expired.','reload','2-digit','/messages/','/typing','easy-chatroom.firebaseapp.com','msg','messages','5676084hmkRYE','userSidebar','addEventListener','database','Please\x20enter\x20a\x20valid\x20name','1:985049198428:web:d0eb7e2de39887710c9b99','codeEntryScreen','key','values'];_0x3667=function(){return _0x2f4760;};return _0x3667();}(function(_0x434c4a,_0x29ba31){const _0x4cc71f=_0x33c5,_0x323418=_0x434c4a();while(!![]){try{const _0x5c8734=parseInt(_0x4cc71f(0x228))/0x1+parseInt(_0x4cc71f(0x22c))/0x2+parseInt(_0x4cc71f(0x232))/0x3*(-parseInt(_0x4cc71f(0x242))/0x4)+-parseInt(_0x4cc71f(0x21e))/0x5*(parseInt(_0x4cc71f(0x213))/0x6)+-parseInt(_0x4cc71f(0x1ec))/0x7+-parseInt(_0x4cc71f(0x1e9))/0x8+parseInt(_0x4cc71f(0x208))/0x9*(parseInt(_0x4cc71f(0x1f6))/0xa);if(_0x5c8734===_0x29ba31)break;else _0x323418['push'](_0x323418['shift']());}catch(_0x58a9e3){_0x323418['push'](_0x323418['shift']());}}}(_0x3667,0xb2b68));const firebaseConfig={'apiKey':_0x42d3bd(0x233),'authDomain':_0x42d3bd(0x205),'databaseURL':_0x42d3bd(0x222),'projectId':_0x42d3bd(0x227),'storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':'985049198428','appId':_0x42d3bd(0x20d),'measurementId':_0x42d3bd(0x21a)};firebase[_0x42d3bd(0x217)](firebaseConfig);const db=firebase[_0x42d3bd(0x20b)](),STATIC_ROOM=_0x42d3bd(0x1f2),ROOM_TTL_MS=0x2*0x3c*0x3e8;let username=localStorage[_0x42d3bd(0x215)](_0x42d3bd(0x23e)),roomCode='',clientId=generateClientId(),lastActivity=Date[_0x42d3bd(0x229)](),typingTimeout;window[_0x42d3bd(0x24e)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow();};function initUsernameFlow(){const _0x210523=_0x42d3bd,_0x163a3c=localStorage[_0x210523(0x215)](_0x210523(0x23e));!_0x163a3c?(username=null,showScreen(_0x210523(0x1fc))):(username=_0x163a3c,document[_0x210523(0x221)](_0x210523(0x1e2))[_0x210523(0x237)]=username,showScreen(_0x210523(0x247)));}function saveUsername(){const _0x1af81d=_0x42d3bd,_0x1fb260=document['getElementById'](_0x1af81d(0x21b))[_0x1af81d(0x246)][_0x1af81d(0x1e8)]();if(!_0x1fb260)return alert(_0x1af81d(0x20c));username=_0x1fb260,localStorage[_0x1af81d(0x1e5)]('chat_username',username),initUsernameFlow();}function generateRoom(){const _0x5239fc=_0x42d3bd;roomCode=genRoomCode(),db[_0x5239fc(0x21f)]('rooms/'+roomCode)[_0x5239fc(0x245)]({'active':!![],'created':Date[_0x5239fc(0x229)]()}),startChat();}function joinRoom(){const _0x5b8120=_0x42d3bd;roomCode=document[_0x5b8120(0x221)]('roomCodeInput')['value'][_0x5b8120(0x1e8)]()[_0x5b8120(0x22e)]();if(!roomCode)return alert(_0x5b8120(0x1ff));db[_0x5b8120(0x21f)]('rooms/'+roomCode)['get']()[_0x5b8120(0x1ef)](_0x5725e6=>{const _0x10fe8e=_0x5b8120;_0x5725e6['exists']()&&_0x5725e6[_0x10fe8e(0x23b)]()[_0x10fe8e(0x256)]!==![]?startChat():alert(_0x10fe8e(0x23c));});}function joinGlobalRoom(){const _0x1b5bfe=_0x42d3bd;roomCode='050BBB66HH',db[_0x1b5bfe(0x21f)](_0x1b5bfe(0x22b)+roomCode)['set']({'active':!![],'created':Date['now']()}),startChat();}function startChat(){const _0x38b976=_0x42d3bd;showScreen(_0x38b976(0x21c)),document[_0x38b976(0x221)](_0x38b976(0x1e4))[_0x38b976(0x237)]=username,document[_0x38b976(0x221)](_0x38b976(0x24c))['innerText']=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList(),logSystemMessage(username+_0x38b976(0x1e6)),window['addEventListener'](_0x38b976(0x225),()=>{logSystemMessage(username+'\x20left\x20the\x20room');});}function trackPresence(){const _0x2a9b11=_0x42d3bd;if(!username||!roomCode)return;const _0x1cad4c=sanitizeUsername(username),_0x24ba42=db[_0x2a9b11(0x21f)](_0x2a9b11(0x1f5)+roomCode+'/'+_0x1cad4c),_0x450c84={'username':username,'lastOnline':firebase[_0x2a9b11(0x20b)]['ServerValue']['TIMESTAMP'],'online':!![]};_0x24ba42[_0x2a9b11(0x245)](_0x450c84),_0x24ba42[_0x2a9b11(0x1f0)]()[_0x2a9b11(0x1f8)]({'online':![],'lastOnline':Date[_0x2a9b11(0x229)]()});}function listenForUserList(){const _0x222029=_0x42d3bd;db[_0x222029(0x21f)](_0x222029(0x1f5)+roomCode)['on'](_0x222029(0x246),_0x2e83fe=>{const _0x415a9d=_0x222029,_0x56b2f2=_0x2e83fe['val']()||{},_0x50294e=Date[_0x415a9d(0x229)](),_0x103dac=Object[_0x415a9d(0x210)](_0x56b2f2)[_0x415a9d(0x1fb)](_0x1bf067=>_0x1bf067[_0x415a9d(0x219)])[_0x415a9d(0x240)](_0x31abb0=>{const _0x1eecc8=_0x415a9d,_0x57cb15=_0x31abb0[_0x1eecc8(0x235)],_0x2b3fb6=_0x50294e-_0x31abb0[_0x1eecc8(0x224)]<=0x1e*0x3c*0x3e8;if(!_0x57cb15&&!_0x2b3fb6)return'';const _0x1c1aad=_0x57cb15?_0x1eecc8(0x1f3):'#888',_0x230ab4=_0x57cb15?'üü¢':'üïí';return _0x1eecc8(0x250)+_0x1c1aad+'\x22>'+_0x230ab4+'\x20'+_0x31abb0[_0x1eecc8(0x219)]+_0x1eecc8(0x241);})['join']('');document[_0x415a9d(0x221)]('userList')['innerHTML']=_0x103dac;});}function logSystemMessage(_0x6ff468){const _0x6d07f9=_0x42d3bd,_0x3a234e=db[_0x6d07f9(0x21f)]()['push']()['key'];db[_0x6d07f9(0x21f)](_0x6d07f9(0x22b)+roomCode+'/messages/'+_0x3a234e)[_0x6d07f9(0x245)]({'msg':_0x6ff468,'sender':_0x6d07f9(0x22f),'senderId':_0x6d07f9(0x236),'timestamp':Date[_0x6d07f9(0x229)]()});}function setupSidebarBackHandler(){const _0x384b2b=_0x42d3bd;window[_0x384b2b(0x20a)](_0x384b2b(0x234),()=>{const _0x43f21c=_0x384b2b,_0x30875a=document[_0x43f21c(0x221)](_0x43f21c(0x209));_0x30875a?.[_0x43f21c(0x24a)][_0x43f21c(0x216)]('show')&&_0x30875a['classList'][_0x43f21c(0x231)](_0x43f21c(0x230));});}function toggleSidebar(){const _0xa10dcb=_0x42d3bd,_0x470b0d=document[_0xa10dcb(0x221)](_0xa10dcb(0x209));if(!_0x470b0d['classList'][_0xa10dcb(0x216)](_0xa10dcb(0x230)))_0x470b0d['classList'][_0xa10dcb(0x24d)](_0xa10dcb(0x230)),history[_0xa10dcb(0x1f7)]({'sidebarOpen':!![]},'');else{_0x470b0d[_0xa10dcb(0x24a)][_0xa10dcb(0x231)](_0xa10dcb(0x230));if(history[_0xa10dcb(0x1ee)]?.[_0xa10dcb(0x238)])history[_0xa10dcb(0x1fd)]();}}document[_0x42d3bd(0x20a)](_0x42d3bd(0x244),()=>{const _0x259d73=_0x42d3bd,_0x2d9825=document[_0x259d73(0x221)](_0x259d73(0x23d));_0x2d9825&&_0x2d9825[_0x259d73(0x20a)]('keypress',function(_0x42fc00){const _0x44b5ef=_0x259d73;_0x42fc00['key']===_0x44b5ef(0x239)&&(_0x42fc00[_0x44b5ef(0x251)](),sendMessage());});});function showScreen(_0x49ede6){const _0x122ff7=_0x42d3bd;[_0x122ff7(0x1fc),_0x122ff7(0x247),_0x122ff7(0x20e),_0x122ff7(0x21c)]['forEach'](_0x1374cd=>{const _0x5be8e6=_0x122ff7;document[_0x5be8e6(0x221)](_0x1374cd)[_0x5be8e6(0x1ea)][_0x5be8e6(0x1e3)]=_0x5be8e6(0x220);}),document['getElementById'](_0x49ede6)[_0x122ff7(0x1ea)]['display']=_0x122ff7(0x248);}function _0x33c5(_0xb1d9bb,_0x545288){const _0x366774=_0x3667();return _0x33c5=function(_0x33c595,_0x4d5c15){_0x33c595=_0x33c595-0x1e2;let _0x318ef4=_0x366774[_0x33c595];return _0x318ef4;},_0x33c5(_0xb1d9bb,_0x545288);}function sendMessage(){const _0x140647=_0x42d3bd,_0x145f01=document[_0x140647(0x221)]('msgInput'),_0x41cb29=_0x145f01[_0x140647(0x246)][_0x140647(0x1e8)]();if(!_0x41cb29)return;const _0x7186f8=db[_0x140647(0x21f)]()[_0x140647(0x1fe)]()[_0x140647(0x20f)];db[_0x140647(0x21f)](_0x140647(0x22b)+roomCode+_0x140647(0x203)+_0x7186f8)[_0x140647(0x245)]({'msg':_0x41cb29,'sender':username,'senderId':clientId,'timestamp':Date[_0x140647(0x229)]()}),_0x145f01['value']='',sendTyping(!![]),lastActivity=Date[_0x140647(0x229)]();}function listenForMessages(){const _0x3399f5=_0x42d3bd,_0x1262a7=db[_0x3399f5(0x21f)]('rooms/'+roomCode+'/messages'),_0x131943=roomCode===STATIC_ROOM?_0x1262a7[_0x3399f5(0x226)](0x50):_0x1262a7;_0x131943['on']('child_added',_0x248f22=>{const _0xaa4a59=_0x3399f5,{msg:_0x33a0c1,sender:_0x57722f,senderId:_0x2c9604,timestamp:_0x51bcc3}=_0x248f22[_0xaa4a59(0x23b)](),_0x5125a3=_0x2c9604===clientId;addMessage(_0x33a0c1,_0x57722f,_0x51bcc3,_0x5125a3),roomCode!==STATIC_ROOM&&db[_0xaa4a59(0x21f)](_0xaa4a59(0x22b)+roomCode+_0xaa4a59(0x203)+_0x248f22[_0xaa4a59(0x20f)])[_0xaa4a59(0x231)]();});}function addMessage(_0x3d0f21,_0x1cc7c7,_0x566090,_0x521afc){const _0x566638=_0x42d3bd,_0x1b62c4=document[_0x566638(0x1fa)]('div');_0x1b62c4['classList'][_0x566638(0x24d)](_0x566638(0x206),_0x521afc?_0x566638(0x211):_0x566638(0x22a));const _0x35619a=new Date(_0x566090)[_0x566638(0x252)]([],{'hour':_0x566638(0x202),'minute':_0x566638(0x202)});_0x1b62c4[_0x566638(0x218)]=_0x566638(0x24f)+_0x1cc7c7+_0x566638(0x212)+_0x3d0f21+'<small>'+_0x35619a+'</small>',document['getElementById'](_0x566638(0x207))[_0x566638(0x1ed)](_0x1b62c4),document[_0x566638(0x221)](_0x566638(0x207))[_0x566638(0x223)]=0x1869f;}function sendTyping(_0x857ee7=![]){const _0x47bef8=_0x42d3bd;_0x857ee7?db[_0x47bef8(0x21f)](_0x47bef8(0x22b)+roomCode+_0x47bef8(0x22d)+clientId)[_0x47bef8(0x231)]():(db[_0x47bef8(0x21f)]('rooms/'+roomCode+'/typing/'+clientId)[_0x47bef8(0x245)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x3aa4a7=_0x47bef8;db[_0x3aa4a7(0x21f)]('rooms/'+roomCode+_0x3aa4a7(0x22d)+clientId)[_0x3aa4a7(0x231)]();},0xbb8));}function listenForTyping(){const _0x483c8e=_0x42d3bd,_0x170d1c=document[_0x483c8e(0x221)]('typing');db[_0x483c8e(0x21f)]('rooms/'+roomCode+_0x483c8e(0x204))['on'](_0x483c8e(0x246),_0x2e2e1f=>{const _0x5d711d=_0x483c8e,_0x4afb29=_0x2e2e1f['val']();if(!_0x4afb29)return _0x170d1c[_0x5d711d(0x237)]='';const _0xd9be4f=Object['values'](_0x4afb29)['filter'](_0xe27809=>_0xe27809!==username);_0x170d1c[_0x5d711d(0x237)]=_0xd9be4f[_0x5d711d(0x243)]?_0xd9be4f[_0x5d711d(0x21d)](',\x20')+_0x5d711d(0x1eb):'';});}function startInactivityTimer(){setInterval(()=>{const _0x2290ac=_0x33c5;Date[_0x2290ac(0x229)]()-lastActivity>0x5*0x3c*0x3e8&&(db[_0x2290ac(0x21f)]('rooms/'+roomCode)[_0x2290ac(0x1f8)]({'active':![]}),alert(_0x2290ac(0x200)),location[_0x2290ac(0x201)]());},0x7530);}function genRoomCode(){const _0x3d5ce0=_0x42d3bd,_0x51c596='ABCDEFGHIJKLMNOPQRSTUVWXYZ',_0x2c7903=_0x3d5ce0(0x254),_0x42c988=(_0xafcdae,_0x46192e)=>Array[_0x3d5ce0(0x214)]({'length':_0x46192e},()=>_0xafcdae[Math['floor'](Math[_0x3d5ce0(0x23f)]()*_0xafcdae['length'])])[_0x3d5ce0(0x21d)]('');return _0x42c988(_0x2c7903,0x3)+_0x42c988(_0x51c596,0x3)+_0x42c988(_0x2c7903,0x2)+_0x42c988(_0x51c596,0x2);}function generateClientId(){const _0x15ec56=_0x42d3bd;return'_'+Math['random']()[_0x15ec56(0x1e7)](0x24)[_0x15ec56(0x1f1)](0x2,0x9);}function cleanupOldRooms(){const _0x3b6bc9=_0x42d3bd;db[_0x3b6bc9(0x21f)](_0x3b6bc9(0x253))[_0x3b6bc9(0x1f9)](_0x3b6bc9(0x246))[_0x3b6bc9(0x1ef)](_0x1072b0=>{const _0x2cda83=_0x3b6bc9,_0x2d5a56=_0x1072b0[_0x2cda83(0x23b)]();if(!_0x2d5a56)return;const _0x456c9f=Date['now']();Object[_0x2cda83(0x255)](_0x2d5a56)[_0x2cda83(0x24b)](([_0x2e71b8,_0x2f7aca])=>{const _0x1eaf18=_0x2cda83;if(_0x2e71b8===STATIC_ROOM)return;const _0x1e4ba9=_0x2f7aca[_0x1eaf18(0x249)]||0x0,_0x1f36b6=_0x456c9f-_0x1e4ba9>ROOM_TTL_MS;_0x1f36b6&&(db[_0x1eaf18(0x21f)](_0x1eaf18(0x22b)+_0x2e71b8)[_0x1eaf18(0x231)](),console[_0x1eaf18(0x1f4)](_0x1eaf18(0x23a),_0x2e71b8));});});}function sanitizeUsername(_0x98056a){return _0x98056a['replace'](/[.#$\[\]]/g,'_');}