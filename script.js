const _0x3cc990=_0x5546;(function(_0x1d86d2,_0x2b1f13){const _0x3b7b35=_0x5546,_0x45e35b=_0x1d86d2();while(!![]){try{const _0x565ff5=-parseInt(_0x3b7b35(0xfc))/0x1+parseInt(_0x3b7b35(0xd6))/0x2*(-parseInt(_0x3b7b35(0x79))/0x3)+-parseInt(_0x3b7b35(0xb9))/0x4+parseInt(_0x3b7b35(0xdb))/0x5*(-parseInt(_0x3b7b35(0xfb))/0x6)+parseInt(_0x3b7b35(0x91))/0x7*(-parseInt(_0x3b7b35(0x77))/0x8)+-parseInt(_0x3b7b35(0xd5))/0x9+parseInt(_0x3b7b35(0xf5))/0xa*(parseInt(_0x3b7b35(0x82))/0xb);if(_0x565ff5===_0x2b1f13)break;else _0x45e35b['push'](_0x45e35b['shift']());}catch(_0xf96735){_0x45e35b['push'](_0x45e35b['shift']());}}}(_0x2d08,0xdeac4));const firebaseConfig={'apiKey':_0x3cc990(0xe2),'authDomain':_0x3cc990(0xdf),'databaseURL':_0x3cc990(0xea),'projectId':_0x3cc990(0xa4),'storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0x3cc990(0x70),'appId':_0x3cc990(0xb7),'measurementId':_0x3cc990(0xaf)};firebase['initializeApp'](firebaseConfig);const db=firebase[_0x3cc990(0xec)]();let username=null,roomCode=null,clientId='_'+Math[_0x3cc990(0xb6)]()['toString'](0x24)[_0x3cc990(0xbc)](0x2,0x9),lastActivity=Date[_0x3cc990(0xf6)](),typingTimeout,gr8stg='';const STATIC_ROOM=_0x3cc990(0xb1),MAX_MESSAGES=0x1f4,sound=new Audio(_0x3cc990(0xeb));sound[_0x3cc990(0xee)]=0.3,window[_0x3cc990(0x8a)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x39e519){return _0x39e519['replace'](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x294a7e=_0x3cc990,_0x4c68e0=document[_0x294a7e(0xd4)](_0x294a7e(0xf2))['value'][_0x294a7e(0xa1)](),_0x11d9d3=document['getElementById'](_0x294a7e(0xe6))[_0x294a7e(0x92)][_0x294a7e(0xa1)](),_0x3e6a3f=document[_0x294a7e(0xd4)](_0x294a7e(0x9a));if(!_0x4c68e0){_0x3e6a3f[_0x294a7e(0xac)][_0x294a7e(0xd0)]=_0x294a7e(0xd1);return;}_0x3e6a3f[_0x294a7e(0xac)][_0x294a7e(0xd0)]=_0x294a7e(0x81),username=_0x4c68e0;const _0x48164c=Date[_0x294a7e(0xf6)](),_0x8b4f58=sanitizeUsername(_0x4c68e0),_0x533271=db[_0x294a7e(0x7e)]('profiles/'+_0x8b4f58);_0x533271[_0x294a7e(0x80)]()[_0x294a7e(0xb0)](_0x1af4ab=>{const _0x4e4739=_0x294a7e,_0x5ea577=_0x1af4ab[_0x4e4739(0xe1)]()||{},_0x2adf18=_0x5ea577[_0x4e4739(0xc4)]||[];if(!_0x2adf18[_0x4e4739(0xa9)](_0x4c68e0))_0x2adf18['push'](_0x4c68e0);_0x533271[_0x4e4739(0x98)]({'username':_0x4c68e0,'description':_0x11d9d3,'lastChanged':_0x48164c,'usernameHistory':_0x2adf18}),localStorage[_0x4e4739(0x97)](_0x4e4739(0x95),_0x4c68e0),localStorage['setItem']('profile_description',_0x11d9d3),document[_0x4e4739(0xd4)](_0x4e4739(0x7d))[_0x4e4739(0xb3)]=username,showScreen('roomChoiceScreen');});}function saveUsername(){const _0x33dd85=_0x3cc990,_0x336cd1=document['getElementById']('usernameInput')['value'][_0x33dd85(0xa1)]();if(!_0x336cd1)return alert('Please\x20enter\x20a\x20valid\x20name');username=_0x336cd1,localStorage['setItem'](_0x33dd85(0x95),username),initUsernameFlow();}function generateRoom(){const _0x40b123=_0x3cc990;roomCode=genRoomCode(),db[_0x40b123(0x7e)](_0x40b123(0xf7)+roomCode)[_0x40b123(0x98)]({'active':!![],'created':Date[_0x40b123(0xf6)]()}),startChat();}function joinRoom(){const _0x42498d=_0x3cc990,_0x30fd24=roomCode||document[_0x42498d(0xd4)](_0x42498d(0x93))['value'][_0x42498d(0xa1)]()[_0x42498d(0x72)]();if(!_0x30fd24)return alert(_0x42498d(0xcd));roomCode=_0x30fd24;if(roomCode===STATIC_ROOM){showScreen('passwordScreen');return;}db[_0x42498d(0x7e)](_0x42498d(0xf7)+roomCode)[_0x42498d(0x80)]()[_0x42498d(0xb0)](_0x28805c=>{const _0x4af05f=_0x42498d;_0x28805c[_0x4af05f(0xc3)]()&&_0x28805c['val']()[_0x4af05f(0xc8)]!==![]?startChat():alert(_0x4af05f(0x9f));});}function startChat(){const _0x36544f=_0x3cc990;if(!roomCode||!username)return alert(_0x36544f(0x73)),showScreen(_0x36544f(0xab));showScreen(_0x36544f(0x94)),document[_0x36544f(0xd4)](_0x36544f(0xe0))[_0x36544f(0xb3)]=username,(roomCode=_0x36544f(0xb1))?document['getElementById']('roomDisplay')[_0x36544f(0xb3)]=_0x36544f(0x75):document[_0x36544f(0xd4)](_0x36544f(0xba))[_0x36544f(0xb3)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();}function validateStaticRoomPassword(){const _0x4222f8=_0x3cc990,_0x37b66f=document[_0x4222f8(0xd4)](_0x4222f8(0x8d))[_0x4222f8(0x92)],_0x1c1393=document['getElementById'](_0x4222f8(0x7f));db[_0x4222f8(0x7e)]('gr8stg')[_0x4222f8(0x80)]()[_0x4222f8(0xb0)](_0x4aa33b=>{const _0x4d6894=_0x4222f8,_0x1216ee=_0x4aa33b['val']();_0x37b66f===_0x1216ee?(_0x1c1393[_0x4d6894(0xac)][_0x4d6894(0xd0)]=_0x4d6894(0x81),startChat()):_0x1c1393[_0x4d6894(0xac)][_0x4d6894(0xd0)]=_0x4d6894(0xd1);});}function sendMessage(){const _0x127de9=_0x3cc990,_0x1b039d=document[_0x127de9(0xd4)]('msgInput'),_0x48bd8f=_0x1b039d['value'][_0x127de9(0xa1)]();if(!_0x48bd8f)return;const _0x57d111=db[_0x127de9(0x7e)]()[_0x127de9(0xc9)]()[_0x127de9(0xed)];db[_0x127de9(0x7e)](_0x127de9(0xf7)+roomCode+_0x127de9(0xb2)+_0x57d111)['set']({'msg':_0x48bd8f,'sender':username,'senderId':clientId,'timestamp':Date['now']()}),_0x1b039d['value']='',sendTyping(!![]),lastActivity=Date['now']();}function listenForMessages(){const _0x4e134f=_0x3cc990,_0x4a9af2=db[_0x4e134f(0x7e)]('rooms/'+roomCode+_0x4e134f(0xbe)),_0xfc872a=_0x4a9af2['limitToLast'](MAX_MESSAGES);_0xfc872a['on'](_0x4e134f(0x99),_0x551e99=>{const _0x3ec481=_0x4e134f,{msg:_0x50ad37,sender:_0x180eaa,senderId:_0x209ea3,timestamp:_0x5606e2}=_0x551e99[_0x3ec481(0xe1)](),_0x51a37d=_0x209ea3===clientId;addMessage(_0x50ad37,_0x180eaa,_0x5606e2,_0x51a37d),roomCode!==STATIC_ROOM&&db['ref'](_0x3ec481(0xf7)+roomCode+_0x3ec481(0xb2)+_0x551e99['key'])[_0x3ec481(0x8b)](),!_0x51a37d&&(sound[_0x3ec481(0xaa)](),flagPageAttention());});}function addMessage(_0x4ffeab,_0x4fd7fe,_0x2aec7d,_0x5dbeab){const _0x4a07e5=_0x3cc990,_0x505e61=document['createElement'](_0x4a07e5(0xfa));_0x505e61['classList'][_0x4a07e5(0x8c)](_0x4a07e5(0x7b),_0x5dbeab?_0x4a07e5(0xa7):_0x4a07e5(0xc6));const _0x25376d=new Date(_0x2aec7d)[_0x4a07e5(0xc0)]([],{'hour':_0x4a07e5(0xa5),'minute':_0x4a07e5(0xa5)});_0x505e61[_0x4a07e5(0xda)]=_0x4a07e5(0xbf)+_0x4fd7fe+_0x4a07e5(0xb8)+_0x4ffeab+'<small>'+_0x25376d+_0x4a07e5(0xc2);const _0x196596=document[_0x4a07e5(0xd4)](_0x4a07e5(0x87));_0x196596[_0x4a07e5(0x6e)](_0x505e61),_0x196596[_0x4a07e5(0x86)]=_0x196596[_0x4a07e5(0xc7)];}function closeProfile(){const _0x3ad816=_0x3cc990;document[_0x3ad816(0xd4)](_0x3ad816(0xe4))[_0x3ad816(0xac)]['display']=_0x3ad816(0x81);}function cleanupOldRooms(){const _0x2bd34a=_0x3cc990;db[_0x2bd34a(0x7e)](_0x2bd34a(0x7a))[_0x2bd34a(0xe5)](_0x2bd34a(0x92))[_0x2bd34a(0xb0)](_0x35475=>{const _0x2dbc0f=_0x2bd34a,_0x334cd9=_0x35475[_0x2dbc0f(0xe1)]();if(!_0x334cd9)return;const _0x102037=Date[_0x2dbc0f(0xf6)]();for(const _0x2d51bf in _0x334cd9){if(_0x2d51bf===STATIC_ROOM)continue;const _0x430166=_0x334cd9[_0x2d51bf];_0x102037-(_0x430166[_0x2dbc0f(0xde)]||0x0)>0x2*0x3c*0x3e8&&db['ref'](_0x2dbc0f(0xf7)+_0x2d51bf)[_0x2dbc0f(0x8b)]();}});}document[_0x3cc990(0xcb)](_0x3cc990(0xc1),()=>{const _0x5bb5fd=_0x3cc990,_0x20ddb0=document['getElementById'](_0x5bb5fd(0x89));_0x20ddb0&&_0x20ddb0['addEventListener']('keypress',function(_0x1b78db){const _0x400056=_0x5bb5fd;_0x1b78db[_0x400056(0xed)]===_0x400056(0xa3)&&(_0x1b78db[_0x400056(0x9b)](),sendMessage());});});function showScreen(_0x3621b6){const _0x8b3359=_0x3cc990;[_0x8b3359(0x6f),'roomChoiceScreen','codeEntryScreen',_0x8b3359(0x94),_0x8b3359(0x83),_0x8b3359(0x76)][_0x8b3359(0xd7)](_0x30f380=>{const _0x38ad76=_0x8b3359;document[_0x38ad76(0xd4)](_0x30f380)[_0x38ad76(0xac)]['display']='none';}),document[_0x8b3359(0xd4)](_0x3621b6)['style'][_0x8b3359(0xd0)]=_0x8b3359(0xd8);}function genRoomCode(){const _0x5ae306=_0x3cc990,_0x1fe6e1='ABCDEFGHIJKLMNOPQRSTUVWXYZ',_0x3aca29=_0x5ae306(0x74),_0x5048f9=(_0x514eda,_0x40730e)=>Array[_0x5ae306(0x84)]({'length':_0x40730e},()=>_0x514eda[Math[_0x5ae306(0xe9)](Math[_0x5ae306(0xb6)]()*_0x514eda[_0x5ae306(0xe7)])])[_0x5ae306(0xf4)]('');return _0x5048f9(_0x3aca29,0x3)+_0x5048f9(_0x1fe6e1,0x3)+_0x5048f9(_0x3aca29,0x2)+_0x5048f9(_0x1fe6e1,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x384e16=_0x5546;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x384e16(0x7e)](_0x384e16(0xf7)+roomCode)['update']({'active':![]}),alert('Session\x20expired.'),location[_0x384e16(0xdd)]());},0x7530);}function setupSidebarBackHandler(){const _0xb4cec2=_0x3cc990;window[_0xb4cec2(0xcb)]('popstate',()=>{const _0x4df0cb=_0xb4cec2,_0x2efd04=document[_0x4df0cb(0xd4)](_0x4df0cb(0xf0));_0x2efd04?.['classList'][_0x4df0cb(0xd3)](_0x4df0cb(0xae))&&_0x2efd04[_0x4df0cb(0xdc)][_0x4df0cb(0x8b)]('show');});}function toggleSidebar(){const _0x394e87=_0x3cc990,_0x1d938a=document['getElementById'](_0x394e87(0xf0));if(!_0x1d938a[_0x394e87(0xdc)]['contains'](_0x394e87(0xae)))_0x1d938a['classList'][_0x394e87(0x8c)](_0x394e87(0xae)),history[_0x394e87(0xf9)]({'sidebarOpen':!![]},'');else{_0x1d938a[_0x394e87(0xdc)][_0x394e87(0x8b)](_0x394e87(0xae));if(history['state']?.[_0x394e87(0xbb)])history['back']();}}function setupVisibilityAttention(){const _0x548351=_0x3cc990;let _0x2c416e=0x0,_0x115718=document[_0x548351(0xbd)];document[_0x548351(0xcb)](_0x548351(0xa0),()=>{const _0x5254f4=_0x548351;!document[_0x5254f4(0xb5)]&&(document['title']=_0x115718,_0x2c416e=0x0);}),window['flagPageAttention']=function(){const _0x495010=_0x548351;document[_0x495010(0xb5)]&&(_0x2c416e++,document[_0x495010(0xbd)]='('+_0x2c416e+_0x495010(0x90)+_0x115718);};}function tryEditProfile(){const _0x5c44ca=_0x3cc990,_0x4c09d2=sanitizeUsername(username);db[_0x5c44ca(0x7e)](_0x5c44ca(0xce)+_0x4c09d2)['get']()[_0x5c44ca(0xb0)](_0x2bce76=>{const _0x33b59f=_0x5c44ca,_0x3431a6=_0x2bce76[_0x33b59f(0xe1)]();if(!_0x3431a6)return alert(_0x33b59f(0xd9));const _0x333d6f=_0x3431a6[_0x33b59f(0xc5)]||0x0,_0x3bb3b9=Date[_0x33b59f(0xf6)](),_0x5a7f29=0x18*0x3c*0x3c*0x3e8;if(_0x3bb3b9-_0x333d6f<_0x5a7f29){const _0x556594=Math[_0x33b59f(0xa8)]((_0x5a7f29-(_0x3bb3b9-_0x333d6f))/(0x3c*0x3e8));alert(_0x33b59f(0x88)+_0x556594+_0x33b59f(0xa6));}else showScreen(_0x33b59f(0x76)),document[_0x33b59f(0xd4)](_0x33b59f(0xf2))[_0x33b59f(0x92)]=username,document[_0x33b59f(0xd4)](_0x33b59f(0xe6))[_0x33b59f(0x92)]=_0x3431a6['description']||'';});}function listenForUserList(){const _0x2868d8=_0x3cc990;db[_0x2868d8(0x7e)](_0x2868d8(0x9d)+roomCode)['on'](_0x2868d8(0x92),_0x1690f8=>{const _0x3573af=_0x2868d8,_0x5414ad=_0x1690f8[_0x3573af(0xe1)]()||{},_0x3c8472=Date[_0x3573af(0xf6)](),_0x10e26c=Object[_0x3573af(0xf8)](_0x5414ad)[_0x3573af(0x71)](_0x55ccd4=>{const _0x1c6163=_0x3573af,_0x325e32=_0x55ccd4[_0x1c6163(0xcf)],_0x5ebd1d=_0x3c8472-_0x55ccd4['lastOnline']<=0x1e*0x3c*0x3e8;if(!_0x325e32&&!_0x5ebd1d)return'';const _0x1a1d47=_0x325e32?_0x1c6163(0x85):'#888',_0x551a5=_0x325e32?'🟢':'🕒',_0x2e18c7=new Date(_0x55ccd4[_0x1c6163(0xf3)])[_0x1c6163(0xc0)]([],{'hour':_0x1c6163(0xa5),'minute':_0x1c6163(0xa5)});return _0x1c6163(0xcc)+_0x1a1d47+';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27'+sanitizeUsername(_0x55ccd4['username'])+_0x1c6163(0x96)+_0x551a5+'\x20'+_0x55ccd4[_0x1c6163(0x9e)]+_0x1c6163(0xd2);})[_0x3573af(0xf4)]('');document[_0x3573af(0xd4)](_0x3573af(0x7c))[_0x3573af(0xda)]=_0x10e26c;});}function sendTyping(_0xb9408f=![]){const _0x1cef14=_0x3cc990,_0x5cac19=_0x1cef14(0xf7)+roomCode+'/typing/'+clientId;_0xb9408f?db[_0x1cef14(0x7e)](_0x5cac19)[_0x1cef14(0x8b)]():(db[_0x1cef14(0x7e)](_0x5cac19)[_0x1cef14(0x98)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x1a0946=_0x1cef14;db[_0x1a0946(0x7e)](_0x5cac19)[_0x1a0946(0x8b)]();},0xbb8));}function listenForTyping(){const _0x5e65e6=_0x3cc990,_0x1666de=document[_0x5e65e6(0xd4)](_0x5e65e6(0xe3));db['ref'](_0x5e65e6(0xf7)+roomCode+'/typing')['on'](_0x5e65e6(0x92),_0x3c8f76=>{const _0x1ead4f=_0x5e65e6,_0x3717db=_0x3c8f76[_0x1ead4f(0xe1)]();if(!_0x3717db)return _0x1666de[_0x1ead4f(0xb3)]='';const _0x106f19=Object[_0x1ead4f(0xf8)](_0x3717db)['filter'](_0x25ff26=>_0x25ff26!==username);_0x1666de['innerText']=_0x106f19[_0x1ead4f(0xe7)]?_0x106f19['join'](',\x20')+_0x1ead4f(0x8f):'';});}function trackPresence(){const _0x329b4b=_0x3cc990;if(!username||!roomCode)return;const _0x48731c=sanitizeUsername(username),_0x31127f=db[_0x329b4b(0x7e)](_0x329b4b(0x9d)+roomCode+'/'+_0x48731c),_0x4d910b={'username':username,'lastOnline':firebase[_0x329b4b(0xec)][_0x329b4b(0xca)][_0x329b4b(0xb4)],'online':!![]};_0x31127f['set'](_0x4d910b),_0x31127f['onDisconnect']()[_0x329b4b(0xa2)]({'online':![],'lastOnline':Date[_0x329b4b(0xf6)]()});}function _0x5546(_0x505275,_0x304d32){const _0x2d08db=_0x2d08();return _0x5546=function(_0x55468d,_0x1e2c4a){_0x55468d=_0x55468d-0x6e;let _0x47f46e=_0x2d08db[_0x55468d];return _0x47f46e;},_0x5546(_0x505275,_0x304d32);}function viewProfile(_0x231e15){const _0xe43e0=_0x3cc990;db[_0xe43e0(0x7e)]('profiles/'+_0x231e15)[_0xe43e0(0x80)]()['then'](_0x6c06b2=>{const _0x5b3ce8=_0xe43e0;if(!_0x6c06b2['exists']())return;const _0x41af85=_0x6c06b2[_0x5b3ce8(0xe1)](),_0x11a183=(_0x5b3ce8(0xf1)+_0x41af85['username']+_0x5b3ce8(0xad)+(_0x41af85['description']||'No\x20bio\x20set')+_0x5b3ce8(0xe8)+(_0x41af85[_0x5b3ce8(0xc4)]||[])[_0x5b3ce8(0xf4)]('\x0a')+'\x0aLast\x20Changed:\x20'+new Date(_0x41af85[_0x5b3ce8(0xc5)])[_0x5b3ce8(0x78)]()+_0x5b3ce8(0xef))[_0x5b3ce8(0xa1)]();document[_0x5b3ce8(0xd4)](_0x5b3ce8(0x8e))[_0x5b3ce8(0xb3)]=_0x11a183,document[_0x5b3ce8(0xd4)]('profileViewer')[_0x5b3ce8(0xac)][_0x5b3ce8(0xd0)]='block';});}function initUsernameFlow(){const _0x37c57e=_0x3cc990,_0x40a9d0=localStorage[_0x37c57e(0x9c)](_0x37c57e(0x95));!_0x40a9d0?showScreen(_0x37c57e(0x76)):(username=_0x40a9d0,document['getElementById'](_0x37c57e(0x7d))['innerText']=username,showScreen(_0x37c57e(0xab)));}function _0x2d08(){const _0x4513a5=['lastChanged','received','scrollHeight','active','push','ServerValue','addEventListener','<li\x20style=\x22color:','Enter\x20a\x20valid\x20room\x20code','profiles/','online','display','block','</li>','contains','getElementById','1344213bzwRqQ','34tgJGoQ','forEach','flex','Profile\x20not\x20found.','innerHTML','55HCQxJX','classList','reload','created','easy-chatroom.firebaseapp.com','userDisplay','val','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','typing','profileViewer','once','profileDescriptionInput','length','\x0aHistory:\x0a','floor','https://easy-chatroom-default-rtdb.firebaseio.com','https://notificationsounds.com/notification-sounds/eventually-590/download/mp3','database','key','volume','\x0a\x20\x20\x20\x20','userSidebar','\x0aName:\x20','profileUsernameInput','lastOnline','join','590yPcyZe','now','rooms/','values','pushState','div','149658wWnRhP','1080596htmUVh','appendChild','usernameScreen','985049198428','map','toUpperCase','Missing\x20room\x20or\x20user\x20information.','0123456789','No\x20room\x20code\x20available\x20for\x20private\x20rooms','profileScreen','7152664oCOzSy','toLocaleString','202821CSnwpd','rooms','msg','userList','namePreview','ref','passwordError','get','none','1014409rFmNqn','passwordScreen','from','#00ff88','scrollTop','messages','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','msgInput','onload','remove','add','staticPasswordInput','profileContent','\x20typing...',')\x20New\x20message\x20•\x20','7GZrxKF','value','roomCodeInput','chatScreen','chat_username','\x27)\x22>','setItem','set','child_added','profileError','preventDefault','getItem','users/','username','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','visibilitychange','trim','update','Enter','easy-chatroom','2-digit','\x20minutes.','sent','ceil','includes','play','roomChoiceScreen','style','\x0aDescription:\x20','show','G-QDESJ2WR42','then','050BBB66HH','/messages/','innerText','TIMESTAMP','hidden','random','1:985049198428:web:d0eb7e2de39887710c9b99','</span><br>','3924500PKbeuf','roomDisplay','sidebarOpen','substr','title','/messages','<span\x20class=\x22sender-name\x22>','toLocaleTimeString','DOMContentLoaded','</small>','exists','usernameHistory'];_0x2d08=function(){return _0x4513a5;};return _0x2d08();}