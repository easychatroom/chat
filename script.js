const _0x2801b0=_0x2ffe;(function(_0x5b686d,_0x5b8ed5){const _0x79a2f3=_0x2ffe,_0x2fda83=_0x5b686d();while(!![]){try{const _0x211217=-parseInt(_0x79a2f3(0xf2))/0x1+-parseInt(_0x79a2f3(0xc2))/0x2+parseInt(_0x79a2f3(0x101))/0x3+-parseInt(_0x79a2f3(0xd0))/0x4+parseInt(_0x79a2f3(0xff))/0x5+parseInt(_0x79a2f3(0xfb))/0x6+parseInt(_0x79a2f3(0xf0))/0x7;if(_0x211217===_0x5b8ed5)break;else _0x2fda83['push'](_0x2fda83['shift']());}catch(_0x6e1f23){_0x2fda83['push'](_0x2fda83['shift']());}}}(_0x355d,0x8cc92));const firebaseConfig={'apiKey':_0x2801b0(0x113),'authDomain':'easy-chatroom.firebaseapp.com','databaseURL':_0x2801b0(0x100),'projectId':_0x2801b0(0xe5),'storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0x2801b0(0x10d),'appId':_0x2801b0(0xd4),'measurementId':'G-QDESJ2WR42'};firebase[_0x2801b0(0xf8)](firebaseConfig);const db=firebase[_0x2801b0(0xf5)](),STATIC_ROOM='050BBB66HH',ROOM_TTL_MS=0x2*0x3c*0x3e8;let username=localStorage['getItem'](_0x2801b0(0x111)),roomCode='',clientId=generateClientId(),lastActivity=Date[_0x2801b0(0xc3)](),typingTimeout;function _0x2ffe(_0x396ac2,_0x3f42d5){const _0x355d13=_0x355d();return _0x2ffe=function(_0x2ffe32,_0x2f440c){_0x2ffe32=_0x2ffe32-0xc1;let _0x2ba281=_0x355d13[_0x2ffe32];return _0x2ba281;},_0x2ffe(_0x396ac2,_0x3f42d5);}window[_0x2801b0(0xd7)]=()=>{const _0x41d26e=_0x2801b0;!username?showScreen(_0x41d26e(0xf3)):(document[_0x41d26e(0xcd)](_0x41d26e(0x106))[_0x41d26e(0xd8)]=username,showScreen(_0x41d26e(0xc5))),cleanupOldRooms(),!username?showScreen(_0x41d26e(0xf3)):(document[_0x41d26e(0xcd)](_0x41d26e(0x106))[_0x41d26e(0xd8)]=username,showScreen('roomChoiceScreen'));};function saveUsername(){const _0x27eee6=_0x2801b0;username=document['getElementById']('usernameInput')['value'][_0x27eee6(0xc1)]();if(!username)return alert(_0x27eee6(0xdb));localStorage[_0x27eee6(0xfd)](_0x27eee6(0x111),username),document[_0x27eee6(0xcd)](_0x27eee6(0x106))[_0x27eee6(0xd8)]=username,showScreen(_0x27eee6(0xc5));}function generateRoom(){const _0x983699=_0x2801b0;roomCode=genRoomCode(),db[_0x983699(0xed)](_0x983699(0xc8)+roomCode)[_0x983699(0x10a)]({'active':!![],'created':Date['now']()}),startChat();}function joinRoom(){const _0x5c316b=_0x2801b0;roomCode=document['getElementById'](_0x5c316b(0x10c))[_0x5c316b(0x102)][_0x5c316b(0xc1)]()[_0x5c316b(0xf1)]();if(!roomCode)return alert(_0x5c316b(0xfe));db['ref'](_0x5c316b(0xc8)+roomCode)[_0x5c316b(0xef)]()[_0x5c316b(0x10b)](_0x134d69=>{const _0x275283=_0x5c316b;_0x134d69[_0x275283(0x115)]()&&_0x134d69[_0x275283(0x105)]()[_0x275283(0xda)]!==![]?startChat():alert(_0x275283(0xea));});}function joinGlobalRoom(){const _0x2b8c9b=_0x2801b0;roomCode=_0x2b8c9b(0xde),db['ref'](_0x2b8c9b(0xc8)+roomCode)['set']({'active':!![],'created':Date[_0x2b8c9b(0xc3)]()}),startChat();}function startChat(){const _0x31f40e=_0x2801b0;showScreen(_0x31f40e(0x116)),document['getElementById'](_0x31f40e(0xc9))[_0x31f40e(0xd8)]=username,document[_0x31f40e(0xcd)]('roomDisplay')['innerText']=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),logSystemMessage(username+_0x31f40e(0xe1)),window['addEventListener'](_0x31f40e(0xc4),()=>{const _0x2c032b=_0x31f40e;logSystemMessage(username+_0x2c032b(0xdc));});}function logSystemMessage(_0x2e82ff){const _0x10d893=_0x2801b0,_0x18ff2a=db[_0x10d893(0xed)]()[_0x10d893(0xf4)]()[_0x10d893(0x109)];db[_0x10d893(0xed)]('rooms/'+roomCode+'/messages/'+_0x18ff2a)['set']({'msg':_0x2e82ff,'sender':_0x10d893(0xc7),'senderId':_0x10d893(0xeb),'timestamp':Date[_0x10d893(0xc3)]()});}function showScreen(_0x3a86ad){const _0xc38207=_0x2801b0;[_0xc38207(0xf3),'roomChoiceScreen','codeEntryScreen',_0xc38207(0x116)][_0xc38207(0xdf)](_0x38760d=>{const _0x3db817=_0xc38207;document['getElementById'](_0x38760d)[_0x3db817(0xe2)][_0x3db817(0xca)]='none';}),document[_0xc38207(0xcd)](_0x3a86ad)[_0xc38207(0xe2)][_0xc38207(0xca)]=_0xc38207(0x110);}function sendMessage(){const _0x3a4ed9=_0x2801b0,_0x452ac7=document[_0x3a4ed9(0xcd)](_0x3a4ed9(0xe6)),_0x3330e9=_0x452ac7[_0x3a4ed9(0x102)]['trim']();if(!_0x3330e9)return;const _0x25e7b2=db[_0x3a4ed9(0xed)]()[_0x3a4ed9(0xf4)]()[_0x3a4ed9(0x109)];db[_0x3a4ed9(0xed)](_0x3a4ed9(0xc8)+roomCode+'/messages/'+_0x25e7b2)['set']({'msg':_0x3330e9,'sender':username,'senderId':clientId,'timestamp':Date[_0x3a4ed9(0xc3)]()}),_0x452ac7[_0x3a4ed9(0x102)]='',sendTyping(!![]),lastActivity=Date['now']();}function listenForMessages(){const _0x48b48b=_0x2801b0,_0x210c95=db['ref'](_0x48b48b(0xc8)+roomCode+'/messages'),_0x2f80a7=roomCode===STATIC_ROOM?_0x210c95['limitToLast'](0x50):_0x210c95;_0x2f80a7['on'](_0x48b48b(0xc6),_0x4bc7d3=>{const _0x3f6d5e=_0x48b48b,{msg:_0x3986ef,sender:_0x4b5112,senderId:_0x137c56,timestamp:_0x26a116}=_0x4bc7d3[_0x3f6d5e(0x105)](),_0x38dbb6=_0x137c56===clientId;addMessage(_0x3986ef,_0x4b5112,_0x26a116,_0x38dbb6),roomCode!==STATIC_ROOM&&db[_0x3f6d5e(0xed)](_0x3f6d5e(0xc8)+roomCode+'/messages/'+_0x4bc7d3[_0x3f6d5e(0x109)])[_0x3f6d5e(0xee)]();});}function addMessage(_0x2a6933,_0x52b0e0,_0x52f4a9,_0x4181ea){const _0x4f8267=_0x2801b0,_0x79a74e=document[_0x4f8267(0x103)](_0x4f8267(0xcf));_0x79a74e[_0x4f8267(0xe0)][_0x4f8267(0xd2)]('msg',_0x4181ea?_0x4f8267(0xdd):_0x4f8267(0x112));const _0x19677a=new Date(_0x52f4a9)[_0x4f8267(0xd6)]([],{'hour':'2-digit','minute':_0x4f8267(0xf6)});_0x79a74e[_0x4f8267(0xe9)]=_0x4f8267(0x104)+_0x52b0e0+_0x4f8267(0xd5)+_0x2a6933+'<small>'+_0x19677a+'</small>',document[_0x4f8267(0xcd)](_0x4f8267(0xd9))[_0x4f8267(0xcc)](_0x79a74e),document['getElementById'](_0x4f8267(0xd9))[_0x4f8267(0xd3)]=0x1869f;}function sendTyping(_0x5a0d42=![]){const _0x36783e=_0x2801b0;_0x5a0d42?db[_0x36783e(0xed)](_0x36783e(0xc8)+roomCode+_0x36783e(0x108)+clientId)[_0x36783e(0xee)]():(db[_0x36783e(0xed)](_0x36783e(0xc8)+roomCode+_0x36783e(0x108)+clientId)[_0x36783e(0x10a)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x373d64=_0x36783e;db['ref'](_0x373d64(0xc8)+roomCode+'/typing/'+clientId)[_0x373d64(0xee)]();},0xbb8));}function listenForTyping(){const _0x4c29d4=_0x2801b0,_0x51c4d9=document[_0x4c29d4(0xcd)](_0x4c29d4(0xe7));db[_0x4c29d4(0xed)]('rooms/'+roomCode+_0x4c29d4(0xfc))['on']('value',_0x5582b6=>{const _0x56f8f8=_0x4c29d4,_0x27d0aa=_0x5582b6['val']();if(!_0x27d0aa)return _0x51c4d9[_0x56f8f8(0xd8)]='';const _0x428943=Object[_0x56f8f8(0x114)](_0x27d0aa)[_0x56f8f8(0xce)](_0x236cf6=>_0x236cf6!==username);_0x51c4d9[_0x56f8f8(0xd8)]=_0x428943[_0x56f8f8(0xe3)]?_0x428943['join'](',\x20')+_0x56f8f8(0xd1):'';});}function startInactivityTimer(){setInterval(()=>{const _0x46af2f=_0x2ffe;Date[_0x46af2f(0xc3)]()-lastActivity>0x5*0x3c*0x3e8&&(db['ref'](_0x46af2f(0xc8)+roomCode)['update']({'active':![]}),alert(_0x46af2f(0xe4)),location['reload']());},0x7530);}function genRoomCode(){const _0x47b828=_0x2801b0,_0x57b5e7=_0x47b828(0xe8),_0x95ed62=_0x47b828(0xf9),_0xc42d77=(_0xb8aecc,_0x14e806)=>Array[_0x47b828(0x107)]({'length':_0x14e806},()=>_0xb8aecc[Math[_0x47b828(0x10e)](Math[_0x47b828(0x10f)]()*_0xb8aecc['length'])])[_0x47b828(0xcb)]('');return _0xc42d77(_0x95ed62,0x3)+_0xc42d77(_0x57b5e7,0x3)+_0xc42d77(_0x95ed62,0x2)+_0xc42d77(_0x57b5e7,0x2);}function _0x355d(){const _0x33d255=['roomCodeInput','985049198428','floor','random','flex','chat_username','received','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','values','exists','chatScreen','trim','371506qjMXFm','now','beforeunload','roomChoiceScreen','child_added','System','rooms/','userDisplay','display','join','appendChild','getElementById','filter','div','2941096siPuEO','\x20typing...','add','scrollTop','1:985049198428:web:d0eb7e2de39887710c9b99','</span><br>','toLocaleTimeString','onload','innerText','messages','active','Please\x20enter\x20your\x20name','\x20left\x20the\x20room','sent','050BBB66HH','forEach','classList','\x20joined\x20the\x20room','style','length','Session\x20expired.','easy-chatroom','msgInput','typing','ABCDEFGHIJKLMNOPQRSTUVWXYZ','innerHTML','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','system','entries','ref','remove','get','5281535HIpgyJ','toUpperCase','325630mGownM','usernameScreen','push','database','2-digit','üóëÔ∏è\x20Deleted\x20expired\x20room:','initializeApp','0123456789','log','2102850uUsDzU','/typing','setItem','Enter\x20a\x20valid\x20room\x20code','451535clEaLz','https://easy-chatroom-default-rtdb.firebaseio.com','1884084ltkKpy','value','createElement','<span\x20class=\x22sender-name\x22>','val','namePreview','from','/typing/','key','set','then'];_0x355d=function(){return _0x33d255;};return _0x355d();}function generateClientId(){const _0x5943f3=_0x2801b0;return'_'+Math[_0x5943f3(0x10f)]()['toString'](0x24)['substr'](0x2,0x9);}function cleanupOldRooms(){const _0x2a2a32=_0x2801b0;db[_0x2a2a32(0xed)]('rooms')['once'](_0x2a2a32(0x102))['then'](_0x38c75f=>{const _0x56a5bf=_0x2a2a32,_0x37bb42=_0x38c75f[_0x56a5bf(0x105)]();if(!_0x37bb42)return;const _0x186482=Date[_0x56a5bf(0xc3)]();Object[_0x56a5bf(0xec)](_0x37bb42)[_0x56a5bf(0xdf)](([_0x2a3700,_0x63017])=>{const _0x197ecd=_0x56a5bf;if(_0x2a3700===STATIC_ROOM)return;const _0x3eca19=_0x63017['created']||0x0,_0x20d43d=_0x186482-_0x3eca19>ROOM_TTL_MS;_0x20d43d&&(db[_0x197ecd(0xed)](_0x197ecd(0xc8)+_0x2a3700)[_0x197ecd(0xee)](),console[_0x197ecd(0xfa)](_0x197ecd(0xf7),_0x2a3700));});});}