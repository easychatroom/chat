const _0x56f1ba=_0x3421;(function(_0x3b1c02,_0x37bc67){const _0x4e5eae=_0x3421,_0x205c70=_0x3b1c02();while(!![]){try{const _0x1091d1=-parseInt(_0x4e5eae(0x11d))/0x1+-parseInt(_0x4e5eae(0x10b))/0x2+-parseInt(_0x4e5eae(0x122))/0x3+-parseInt(_0x4e5eae(0x131))/0x4*(parseInt(_0x4e5eae(0x149))/0x5)+-parseInt(_0x4e5eae(0x105))/0x6*(parseInt(_0x4e5eae(0x15f))/0x7)+parseInt(_0x4e5eae(0xed))/0x8*(parseInt(_0x4e5eae(0xf9))/0x9)+parseInt(_0x4e5eae(0x140))/0xa;if(_0x1091d1===_0x37bc67)break;else _0x205c70['push'](_0x205c70['shift']());}catch(_0x6e0c62){_0x205c70['push'](_0x205c70['shift']());}}}(_0x5401,0xe5e55));const firebaseConfig={'apiKey':_0x56f1ba(0x117),'authDomain':_0x56f1ba(0x16f),'databaseURL':_0x56f1ba(0x164),'projectId':'easy-chatroom','storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0x56f1ba(0x11b),'appId':'1:985049198428:web:d0eb7e2de39887710c9b99','measurementId':'G-QDESJ2WR42'};firebase['initializeApp'](firebaseConfig);const db=firebase[_0x56f1ba(0x123)]();let username=null,roomCode=null,clientId='_'+Math[_0x56f1ba(0x125)]()[_0x56f1ba(0x144)](0x24)['substr'](0x2,0x9),lastActivity=Date['now'](),typingTimeout,gr8stg='';const STATIC_ROOM=_0x56f1ba(0xf4),MAX_MESSAGES=0x1f4,sound=new Audio(_0x56f1ba(0xff));sound[_0x56f1ba(0x171)]=0.3,window[_0x56f1ba(0x173)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x25ea42){const _0x159984=_0x56f1ba;return _0x25ea42[_0x159984(0x132)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x4b6cc1=_0x56f1ba,_0x2c116e=document[_0x4b6cc1(0x143)](_0x4b6cc1(0xfe))[_0x4b6cc1(0x112)]['trim'](),_0x32105c=document[_0x4b6cc1(0x143)](_0x4b6cc1(0x14d))[_0x4b6cc1(0x112)][_0x4b6cc1(0x155)](),_0x2bfaaf=document[_0x4b6cc1(0x143)](_0x4b6cc1(0x151));if(!_0x2c116e||!_0x32105c){_0x2bfaaf[_0x4b6cc1(0x148)]=_0x4b6cc1(0x150),_0x2bfaaf[_0x4b6cc1(0x13c)][_0x4b6cc1(0x12e)]=_0x4b6cc1(0x13b);return;}_0x2bfaaf[_0x4b6cc1(0x13c)][_0x4b6cc1(0x12e)]=_0x4b6cc1(0x168),username=_0x2c116e;const _0x32dffc=Date[_0x4b6cc1(0x16b)](),_0x278d01=sanitizeUsername(_0x2c116e),_0x192b4b=db[_0x4b6cc1(0x11c)](_0x4b6cc1(0x116)+_0x278d01);_0x192b4b['get']()[_0x4b6cc1(0x153)](_0x780141=>{const _0x40c363=_0x4b6cc1,_0x5b3462=_0x780141[_0x40c363(0x113)]()||{},_0x11782d=_0x5b3462[_0x40c363(0x110)]||[];if(!_0x11782d['includes'](_0x2c116e))_0x11782d['push'](_0x2c116e);_0x192b4b[_0x40c363(0x13a)]({'username':_0x2c116e,'description':_0x32105c,'lastChanged':_0x32dffc,'usernameHistory':_0x11782d}),localStorage['setItem'](_0x40c363(0x165),_0x2c116e),localStorage[_0x40c363(0xfc)](_0x40c363(0x145),_0x32105c),document[_0x40c363(0x143)](_0x40c363(0x12f))['innerText']=username,showScreen(_0x40c363(0x10e));});}function saveUsername(){const _0x1ce4bb=_0x56f1ba,_0x39a448=document[_0x1ce4bb(0x143)](_0x1ce4bb(0x103))[_0x1ce4bb(0x112)][_0x1ce4bb(0x155)]();if(!_0x39a448)return alert('Please\x20enter\x20a\x20valid\x20name');username=_0x39a448,localStorage['setItem'](_0x1ce4bb(0x165),username),initUsernameFlow();}function generateRoom(){const _0x377040=_0x56f1ba;roomCode=genRoomCode(),db['ref']('rooms/'+roomCode)[_0x377040(0x13a)]({'active':!![],'created':Date[_0x377040(0x16b)]()}),startChat();}function joinRoom(){const _0x2ef32c=_0x56f1ba,_0x593615=roomCode||document[_0x2ef32c(0x143)]('roomCodeInput')[_0x2ef32c(0x112)]['trim']()['toUpperCase']();if(!_0x593615)return alert('Enter\x20a\x20valid\x20room\x20code');roomCode=_0x593615;if(roomCode===STATIC_ROOM){showScreen(_0x2ef32c(0xef));return;}db['ref']('rooms/'+roomCode)[_0x2ef32c(0x108)]()[_0x2ef32c(0x153)](_0x12c513=>{const _0xf09f05=_0x2ef32c;_0x12c513[_0xf09f05(0x102)]()&&_0x12c513[_0xf09f05(0x113)]()[_0xf09f05(0xf8)]!==![]?startChat():alert(_0xf09f05(0x11a));});}function startChat(){const _0x3fb31a=_0x56f1ba;if(!roomCode||!username)return alert(_0x3fb31a(0x14a)),showScreen(_0x3fb31a(0x10e));showScreen(_0x3fb31a(0x158)),document[_0x3fb31a(0x143)](_0x3fb31a(0x162))[_0x3fb31a(0x148)]=username,(roomCode='050BBB66HH')?document['getElementById'](_0x3fb31a(0x130))[_0x3fb31a(0x148)]=_0x3fb31a(0x15a):document[_0x3fb31a(0x143)](_0x3fb31a(0x130))[_0x3fb31a(0x148)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();}function validateStaticRoomPassword(){const _0x21dd53=_0x56f1ba,_0x2b01b0=document['getElementById']('staticPasswordInput')['value'],_0x3b9578=document[_0x21dd53(0x143)](_0x21dd53(0x127));db[_0x21dd53(0x11c)](_0x21dd53(0x10c))[_0x21dd53(0x108)]()[_0x21dd53(0x153)](_0x15f886=>{const _0x3c6b49=_0x21dd53,_0x13f35f=_0x15f886[_0x3c6b49(0x113)]();_0x2b01b0===_0x13f35f?(_0x3b9578[_0x3c6b49(0x13c)]['display']='none',startChat()):_0x3b9578['style']['display']=_0x3c6b49(0x13b);});}function _0x5401(){const _0x571706=['profiles/','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','title','received','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','985049198428','ref','1295610nQqsgW','visibilitychange','2-digit','sent','TIMESTAMP','2081658Uuguso','database','state','random','</small>','passwordError','<small>','\x0aDescription:\x20','innerHTML','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','toLocaleTimeString','msgInput','display','namePreview','roomDisplay','460132KdvfnJ','replace','0123456789','\x20minutes.','ceil','toLocaleString','flagPageAttention','\x20typing...',';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27','set','block','style','hidden','show','Profile\x20not\x20found.','60738170HdbJFa','lastChanged','keypress','getElementById','toString','profile_description','\x0aName:\x20','ABCDEFGHIJKLMNOPQRSTUVWXYZ','innerText','55lUJmyB','Missing\x20room\x20or\x20user\x20information.','flex','once','profileDescriptionInput','profileContent','preventDefault','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','profileError','reload','then','</li>','trim','</span><br>','description','chatScreen','values','No\x20room\x20code\x20available\x20for\x20private\x20rooms','ServerValue','\x0a\x20\x20\x20\x20','No\x20bio\x20set','<li\x20style=\x22color:','8808023jIqXhW','sidebarOpen','forEach','userDisplay','userSidebar','https://easy-chatroom-default-rtdb.firebaseio.com','chat_username','rooms/','<span\x20class=\x22sender-name\x22>','none','getItem','typing','now','messages','online','limitToLast','easy-chatroom.firebaseapp.com','DOMContentLoaded','volume','addEventListener','onload','Session\x20expired.','remove','10088488DHtGhf','onDisconnect','passwordScreen','push','child_added','join','contains','050BBB66HH','classList','codeEntryScreen','key','active','9BsULOl','lastOnline','length','setItem','back','profileUsernameInput','https://notificationsounds.com/notification-sounds/eventually-590/download/mp3','div','users/','exists','usernameInput','appendChild','6CcdGQV','scrollHeight','#888','get','rooms','username','3760154uMoaZM','gr8stg','from','roomChoiceScreen','/messages/','usernameHistory','\x0aHistory:\x0a','value','val','add','profileScreen'];_0x5401=function(){return _0x571706;};return _0x5401();}function sendMessage(){const _0x3b96ec=_0x56f1ba,_0x4a6925=document[_0x3b96ec(0x143)](_0x3b96ec(0x12d)),_0x300c83=_0x4a6925[_0x3b96ec(0x112)][_0x3b96ec(0x155)]();if(!_0x300c83)return;const _0x134104=db[_0x3b96ec(0x11c)]()[_0x3b96ec(0xf0)]()[_0x3b96ec(0xf7)];db[_0x3b96ec(0x11c)](_0x3b96ec(0x166)+roomCode+_0x3b96ec(0x10f)+_0x134104)[_0x3b96ec(0x13a)]({'msg':_0x300c83,'sender':username,'senderId':clientId,'timestamp':Date[_0x3b96ec(0x16b)]()}),_0x4a6925['value']='',sendTyping(!![]),lastActivity=Date['now']();}function listenForMessages(){const _0x44c91f=_0x56f1ba,_0x1cb8fc=db['ref']('rooms/'+roomCode+'/messages'),_0x1af1b4=_0x1cb8fc[_0x44c91f(0x16e)](MAX_MESSAGES);_0x1af1b4['on'](_0x44c91f(0xf1),_0x3dd444=>{const _0x2417b=_0x44c91f,{msg:_0x54282e,sender:_0x2f52a6,senderId:_0x3e529b,timestamp:_0x102c2f}=_0x3dd444[_0x2417b(0x113)](),_0x3ad99e=_0x3e529b===clientId;addMessage(_0x54282e,_0x2f52a6,_0x102c2f,_0x3ad99e),roomCode!==STATIC_ROOM&&db[_0x2417b(0x11c)](_0x2417b(0x166)+roomCode+_0x2417b(0x10f)+_0x3dd444['key'])['remove'](),!_0x3ad99e&&(sound['play'](),flagPageAttention());});}function addMessage(_0x579fce,_0x27bc66,_0x4a474e,_0x598142){const _0x208efa=_0x56f1ba,_0x13da07=document['createElement'](_0x208efa(0x100));_0x13da07[_0x208efa(0xf5)][_0x208efa(0x114)]('msg',_0x598142?_0x208efa(0x120):_0x208efa(0x119));const _0x1f6529=new Date(_0x4a474e)[_0x208efa(0x12c)]([],{'hour':_0x208efa(0x11f),'minute':'2-digit'});_0x13da07[_0x208efa(0x12a)]=_0x208efa(0x167)+_0x27bc66+_0x208efa(0x156)+_0x579fce+_0x208efa(0x128)+_0x1f6529+_0x208efa(0x126);const _0xd386de=document['getElementById'](_0x208efa(0x16c));_0xd386de[_0x208efa(0x104)](_0x13da07),_0xd386de['scrollTop']=_0xd386de[_0x208efa(0x106)];}function closeProfile(){const _0x5aa835=_0x56f1ba;document[_0x5aa835(0x143)]('profileViewer')['style']['display']='none';}function cleanupOldRooms(){const _0x1aea33=_0x56f1ba;db['ref'](_0x1aea33(0x109))[_0x1aea33(0x14c)]('value')[_0x1aea33(0x153)](_0x199a06=>{const _0x9c1c3a=_0x1aea33,_0x3d9f6d=_0x199a06[_0x9c1c3a(0x113)]();if(!_0x3d9f6d)return;const _0x79dc0f=Date[_0x9c1c3a(0x16b)]();for(const _0xc92a78 in _0x3d9f6d){if(_0xc92a78===STATIC_ROOM)continue;const _0x1b31aa=_0x3d9f6d[_0xc92a78];_0x79dc0f-(_0x1b31aa['created']||0x0)>0x2*0x3c*0x3e8&&db[_0x9c1c3a(0x11c)](_0x9c1c3a(0x166)+_0xc92a78)['remove']();}});}document['addEventListener'](_0x56f1ba(0x170),()=>{const _0x54a4cf=_0x56f1ba,_0x5285e2=document[_0x54a4cf(0x143)]('msgInput');_0x5285e2&&_0x5285e2[_0x54a4cf(0x172)](_0x54a4cf(0x142),function(_0x21316b){const _0x1363e8=_0x54a4cf;_0x21316b[_0x1363e8(0xf7)]==='Enter'&&(_0x21316b[_0x1363e8(0x14f)](),sendMessage());});});function _0x3421(_0x1924be,_0x61e97){const _0x5401e8=_0x5401();return _0x3421=function(_0x34210f,_0x3c4d72){_0x34210f=_0x34210f-0xed;let _0x1b1eee=_0x5401e8[_0x34210f];return _0x1b1eee;},_0x3421(_0x1924be,_0x61e97);}function showScreen(_0x3fc19d){const _0x539bce=_0x56f1ba;['usernameScreen',_0x539bce(0x10e),_0x539bce(0xf6),'chatScreen',_0x539bce(0xef),_0x539bce(0x115)][_0x539bce(0x161)](_0x4103cb=>{const _0x40f48a=_0x539bce;document['getElementById'](_0x4103cb)['style'][_0x40f48a(0x12e)]='none';}),document['getElementById'](_0x3fc19d)[_0x539bce(0x13c)]['display']=_0x539bce(0x14b);}function genRoomCode(){const _0x3d83ed=_0x56f1ba,_0x290585=_0x3d83ed(0x147),_0x742253=_0x3d83ed(0x133),_0x138f18=(_0x297555,_0x17c7ce)=>Array[_0x3d83ed(0x10d)]({'length':_0x17c7ce},()=>_0x297555[Math['floor'](Math[_0x3d83ed(0x125)]()*_0x297555[_0x3d83ed(0xfb)])])[_0x3d83ed(0xf2)]('');return _0x138f18(_0x742253,0x3)+_0x138f18(_0x290585,0x3)+_0x138f18(_0x742253,0x2)+_0x138f18(_0x290585,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x56558f=_0x3421;Date[_0x56558f(0x16b)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db['ref'](_0x56558f(0x166)+roomCode)['update']({'active':![]}),alert(_0x56558f(0x174)),location[_0x56558f(0x152)]());},0x7530);}function setupSidebarBackHandler(){const _0x5031e2=_0x56f1ba;window[_0x5031e2(0x172)]('popstate',()=>{const _0x443db0=_0x5031e2,_0x35fd4b=document[_0x443db0(0x143)](_0x443db0(0x163));_0x35fd4b?.[_0x443db0(0xf5)]['contains'](_0x443db0(0x13e))&&_0x35fd4b[_0x443db0(0xf5)][_0x443db0(0x175)](_0x443db0(0x13e));});}function toggleSidebar(){const _0x24d8f2=_0x56f1ba,_0x39f2b5=document[_0x24d8f2(0x143)](_0x24d8f2(0x163));if(!_0x39f2b5[_0x24d8f2(0xf5)][_0x24d8f2(0xf3)](_0x24d8f2(0x13e)))_0x39f2b5['classList']['add'](_0x24d8f2(0x13e)),history['pushState']({'sidebarOpen':!![]},'');else{_0x39f2b5[_0x24d8f2(0xf5)][_0x24d8f2(0x175)](_0x24d8f2(0x13e));if(history[_0x24d8f2(0x124)]?.[_0x24d8f2(0x160)])history[_0x24d8f2(0xfd)]();}}function setupVisibilityAttention(){const _0x4eb3d2=_0x56f1ba;let _0x56fc10=0x0,_0x558fd1=document[_0x4eb3d2(0x118)];document[_0x4eb3d2(0x172)](_0x4eb3d2(0x11e),()=>{!document['hidden']&&(document['title']=_0x558fd1,_0x56fc10=0x0);}),window[_0x4eb3d2(0x137)]=function(){const _0x3ff022=_0x4eb3d2;document[_0x3ff022(0x13d)]&&(_0x56fc10++,document[_0x3ff022(0x118)]='('+_0x56fc10+')\x20New\x20message\x20•\x20'+_0x558fd1);};}function tryEditProfile(){const _0x51fa12=_0x56f1ba,_0x2e67eb=sanitizeUsername(username);db[_0x51fa12(0x11c)](_0x51fa12(0x116)+_0x2e67eb)[_0x51fa12(0x108)]()[_0x51fa12(0x153)](_0x3a162c=>{const _0x9ea495=_0x51fa12,_0x1b0629=_0x3a162c['val']();if(!_0x1b0629)return alert(_0x9ea495(0x13f));const _0x5c5423=_0x1b0629[_0x9ea495(0x141)]||0x0,_0x1ed95f=Date[_0x9ea495(0x16b)](),_0x4a1afb=0x18*0x3c*0x3c*0x3e8;if(_0x1ed95f-_0x5c5423<_0x4a1afb){const _0x56a515=Math[_0x9ea495(0x135)]((_0x4a1afb-(_0x1ed95f-_0x5c5423))/(0x3c*0x3e8));alert(_0x9ea495(0x12b)+_0x56a515+_0x9ea495(0x134));}else showScreen(_0x9ea495(0x115)),document[_0x9ea495(0x143)](_0x9ea495(0xfe))[_0x9ea495(0x112)]=username,document[_0x9ea495(0x143)](_0x9ea495(0x14d))[_0x9ea495(0x112)]=_0x1b0629[_0x9ea495(0x157)]||'';});}function listenForUserList(){const _0xa6747e=_0x56f1ba;db[_0xa6747e(0x11c)](_0xa6747e(0x101)+roomCode)['on'](_0xa6747e(0x112),_0x4a1e26=>{const _0x340ab6=_0xa6747e,_0x2f81fa=_0x4a1e26['val']()||{},_0x1d27b8=Date['now'](),_0xf5bbb4=Object['values'](_0x2f81fa)['map'](_0x1e91d7=>{const _0x2c42bb=_0x3421,_0x181292=_0x1e91d7[_0x2c42bb(0x16d)],_0xce8b7e=_0x1d27b8-_0x1e91d7[_0x2c42bb(0xfa)]<=0x1e*0x3c*0x3e8;if(!_0x181292&&!_0xce8b7e)return'';const _0x50bc75=_0x181292?'#00ff88':_0x2c42bb(0x107),_0x461561=_0x181292?'🟢':'🕒',_0x2f46ea=new Date(_0x1e91d7['lastOnline'])['toLocaleTimeString']([],{'hour':_0x2c42bb(0x11f),'minute':_0x2c42bb(0x11f)});return _0x2c42bb(0x15e)+_0x50bc75+_0x2c42bb(0x139)+sanitizeUsername(_0x1e91d7[_0x2c42bb(0x10a)])+'\x27)\x22>'+_0x461561+'\x20'+_0x1e91d7[_0x2c42bb(0x10a)]+_0x2c42bb(0x154);})[_0x340ab6(0xf2)]('');document[_0x340ab6(0x143)]('userList')[_0x340ab6(0x12a)]=_0xf5bbb4;});}function sendTyping(_0x112ea6=![]){const _0x1c7da3=_0x56f1ba,_0x381221='rooms/'+roomCode+'/typing/'+clientId;_0x112ea6?db[_0x1c7da3(0x11c)](_0x381221)[_0x1c7da3(0x175)]():(db[_0x1c7da3(0x11c)](_0x381221)['set'](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{db['ref'](_0x381221)['remove']();},0xbb8));}function listenForTyping(){const _0x4c1bd5=_0x56f1ba,_0x517236=document[_0x4c1bd5(0x143)](_0x4c1bd5(0x16a));db[_0x4c1bd5(0x11c)](_0x4c1bd5(0x166)+roomCode+'/typing')['on']('value',_0xecc14b=>{const _0x5ec812=_0x4c1bd5,_0x54e226=_0xecc14b['val']();if(!_0x54e226)return _0x517236['innerText']='';const _0x3479b3=Object[_0x5ec812(0x159)](_0x54e226)['filter'](_0x2bdb6d=>_0x2bdb6d!==username);_0x517236['innerText']=_0x3479b3[_0x5ec812(0xfb)]?_0x3479b3['join'](',\x20')+_0x5ec812(0x138):'';});}function trackPresence(){const _0x206ee6=_0x56f1ba;if(!username||!roomCode)return;const _0x25f5fb=sanitizeUsername(username),_0x47d9eb=db[_0x206ee6(0x11c)](_0x206ee6(0x101)+roomCode+'/'+_0x25f5fb),_0x16e243={'username':username,'lastOnline':firebase['database'][_0x206ee6(0x15b)][_0x206ee6(0x121)],'online':!![]};_0x47d9eb[_0x206ee6(0x13a)](_0x16e243),_0x47d9eb[_0x206ee6(0xee)]()['update']({'online':![],'lastOnline':Date[_0x206ee6(0x16b)]()});}function viewProfile(_0x504ec7){const _0x316011=_0x56f1ba;db['ref'](_0x316011(0x116)+_0x504ec7)[_0x316011(0x108)]()['then'](_0x350580=>{const _0x338e0a=_0x316011;if(!_0x350580[_0x338e0a(0x102)]())return;const _0x532476=_0x350580['val'](),_0x11c38a=(_0x338e0a(0x146)+_0x532476[_0x338e0a(0x10a)]+_0x338e0a(0x129)+(_0x532476[_0x338e0a(0x157)]||_0x338e0a(0x15d))+_0x338e0a(0x111)+(_0x532476[_0x338e0a(0x110)]||[])[_0x338e0a(0xf2)]('\x0a')+'\x0aLast\x20Changed:\x20'+new Date(_0x532476[_0x338e0a(0x141)])[_0x338e0a(0x136)]()+_0x338e0a(0x15c))['trim']();document[_0x338e0a(0x143)](_0x338e0a(0x14e))[_0x338e0a(0x148)]=_0x11c38a,document[_0x338e0a(0x143)]('profileViewer')[_0x338e0a(0x13c)][_0x338e0a(0x12e)]=_0x338e0a(0x13b);});}function initUsernameFlow(){const _0xc4ba3d=_0x56f1ba,_0x24a8e7=localStorage[_0xc4ba3d(0x169)]('chat_username');!_0x24a8e7?showScreen('profileScreen'):(username=_0x24a8e7,document['getElementById'](_0xc4ba3d(0x12f))[_0xc4ba3d(0x148)]=username,showScreen(_0xc4ba3d(0x10e)));}