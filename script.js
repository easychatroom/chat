const _0x1504b5=_0x37a5;(function(_0x26fe1a,_0xabbd){const _0x36a2d2=_0x37a5,_0x10d33c=_0x26fe1a();while(!![]){try{const _0x4ca7f4=-parseInt(_0x36a2d2(0x109))/0x1+parseInt(_0x36a2d2(0xf6))/0x2*(-parseInt(_0x36a2d2(0xc8))/0x3)+-parseInt(_0x36a2d2(0xde))/0x4+-parseInt(_0x36a2d2(0x11e))/0x5*(parseInt(_0x36a2d2(0x113))/0x6)+parseInt(_0x36a2d2(0xeb))/0x7*(parseInt(_0x36a2d2(0x124))/0x8)+-parseInt(_0x36a2d2(0x11a))/0x9+parseInt(_0x36a2d2(0xf3))/0xa;if(_0x4ca7f4===_0xabbd)break;else _0x10d33c['push'](_0x10d33c['shift']());}catch(_0x2e8706){_0x10d33c['push'](_0x10d33c['shift']());}}}(_0x15b6,0x3bc49));const firebaseConfig={'apiKey':'AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','authDomain':'easy-chatroom.firebaseapp.com','databaseURL':'https://easy-chatroom-default-rtdb.firebaseio.com','projectId':'easy-chatroom','storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0x1504b5(0x101),'appId':'1:985049198428:web:d0eb7e2de39887710c9b99','measurementId':_0x1504b5(0xdf)};firebase[_0x1504b5(0x11b)](firebaseConfig);const db=firebase[_0x1504b5(0xc6)](),STATIC_ROOM=_0x1504b5(0xe2),ROOM_TTL_MS=0x2*0x3c*0x3e8;let username=localStorage['getItem'](_0x1504b5(0x110)),roomCode='',clientId=generateClientId(),lastActivity=Date[_0x1504b5(0x108)](),typingTimeout;window[_0x1504b5(0xf5)]=()=>{const _0x2c3e38=_0x1504b5;!username?showScreen(_0x2c3e38(0xf7)):(document['getElementById'](_0x2c3e38(0xce))['innerText']=username,showScreen('roomChoiceScreen')),cleanupOldRooms(),!username?showScreen('usernameScreen'):(document[_0x2c3e38(0xdd)](_0x2c3e38(0xce))[_0x2c3e38(0x12a)]=username,showScreen('roomChoiceScreen'));};function saveUsername(){const _0x2b1caf=_0x1504b5;username=document[_0x2b1caf(0xdd)](_0x2b1caf(0x105))[_0x2b1caf(0xd4)][_0x2b1caf(0xef)]();if(!username)return alert('Please\x20enter\x20your\x20name');localStorage[_0x2b1caf(0xc9)]('chat_username',username),document[_0x2b1caf(0xdd)]('namePreview')[_0x2b1caf(0x12a)]=username,showScreen(_0x2b1caf(0xe8));}function _0x37a5(_0x32cb64,_0x1cdcde){const _0x15b6e8=_0x15b6();return _0x37a5=function(_0x37a507,_0x39a0e7){_0x37a507=_0x37a507-0xc6;let _0x3c93d8=_0x15b6e8[_0x37a507];return _0x3c93d8;},_0x37a5(_0x32cb64,_0x1cdcde);}function generateRoom(){const _0xa35304=_0x1504b5;roomCode=genRoomCode(),db[_0xa35304(0xfb)](_0xa35304(0x103)+roomCode)[_0xa35304(0x117)]({'active':!![],'created':Date[_0xa35304(0x108)]()}),startChat();}function joinRoom(){const _0x591385=_0x1504b5;roomCode=document['getElementById'](_0x591385(0xd1))[_0x591385(0xd4)]['trim']()[_0x591385(0x10c)]();if(!roomCode)return alert('Enter\x20a\x20valid\x20room\x20code');db[_0x591385(0xfb)](_0x591385(0x103)+roomCode)[_0x591385(0xfa)]()[_0x591385(0x12b)](_0x3d1ca5=>{const _0x495511=_0x591385;_0x3d1ca5[_0x495511(0x119)]()&&_0x3d1ca5[_0x495511(0x128)]()[_0x495511(0xe1)]!==![]?startChat():alert(_0x495511(0xee));});}function joinGlobalRoom(){const _0x45986d=_0x1504b5;roomCode='050BBB66HH',db[_0x45986d(0xfb)](_0x45986d(0x103)+roomCode)[_0x45986d(0x117)]({'active':!![],'created':Date[_0x45986d(0x108)]()}),startChat();}function startChat(){const _0x5eed3a=_0x1504b5;showScreen(_0x5eed3a(0xfd)),document[_0x5eed3a(0xdd)](_0x5eed3a(0x129))[_0x5eed3a(0x12a)]=username,document[_0x5eed3a(0xdd)](_0x5eed3a(0xf0))[_0x5eed3a(0x12a)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),logSystemMessage(username+_0x5eed3a(0x104)),window[_0x5eed3a(0xcc)](_0x5eed3a(0xfe),()=>{const _0x455724=_0x5eed3a;logSystemMessage(username+_0x455724(0xe9));});}function trackPresence(){const _0x16d9d9=_0x1504b5,_0x154d2b=db[_0x16d9d9(0xfb)]('users/'+roomCode+'/'+clientId),_0x340428={'username':username,'lastOnline':firebase[_0x16d9d9(0xc6)]['ServerValue']['TIMESTAMP'],'online':!![]};_0x154d2b[_0x16d9d9(0x117)](_0x340428),_0x154d2b[_0x16d9d9(0xe0)]()[_0x16d9d9(0x10f)]({'online':![],'lastOnline':Date[_0x16d9d9(0x108)]()}),listenForUserList();}function _0x15b6(){const _0x537c4e=['get','ref','values','chatScreen','beforeunload','from','log','985049198428','remove','rooms/','\x20joined\x20the\x20room','usernameInput','DOMContentLoaded','none','now','20398DeDPrS','/typing/','toLocaleTimeString','toUpperCase','System','messages','update','chat_username','Enter','msgInput','1854408HRsZnA','innerHTML','<small>','random','set','/typing','exists','1887732TrsKDk','initializeApp','style','\x20typing...','5BwMBcf','once','sent','/messages/','forEach','limitToLast','233912lMIKYO','2-digit','Session\x20expired.','filter','val','userDisplay','innerText','then','0123456789','database','classList','3nTkPlh','setItem','<li\x20style=\x22color:','ðŸ—‘ï¸\x20Deleted\x20expired\x20room:','addEventListener','push','namePreview','display','reload','roomCodeInput','keypress','length','value','#888','online','/messages','username','users/','typing','scrollTop','system','getElementById','86188mQfdoS','G-QDESJ2WR42','onDisconnect','active','050BBB66HH','flex','created','rooms','</span><br>','show','roomChoiceScreen','\x20left\x20the\x20room','lastOnline','70HmqyRc','codeEntryScreen','join','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','trim','roomDisplay','appendChild','msg','7103290hFuJzK','floor','onload','394298iZDgIY','usernameScreen','key','entries'];_0x15b6=function(){return _0x537c4e;};return _0x15b6();}function listenForUserList(){const _0x19cff8=_0x1504b5;db[_0x19cff8(0xfb)](_0x19cff8(0xd9)+roomCode)['on'](_0x19cff8(0xd4),_0x4a9901=>{const _0x58a522=_0x19cff8,_0x13fe8b=_0x4a9901[_0x58a522(0x128)]()||{},_0x322fb1=Object[_0x58a522(0xfc)](_0x13fe8b),_0xef1c27=Date[_0x58a522(0x108)](),_0x4649a1=_0x322fb1['map'](_0x4f446c=>{const _0x43974c=_0x58a522,_0x4b1bb7=_0x4f446c[_0x43974c(0xd6)]===!![],_0x4ea043=_0xef1c27-_0x4f446c[_0x43974c(0xea)]<=0x1e*0x3c*0x3e8;if(_0x4b1bb7||_0x4ea043){const _0x5d7708=_0x4b1bb7?'#00ff88':_0x43974c(0xd5),_0x2878be=_0x4b1bb7?'ðŸŸ¢':'ðŸ•’';return _0x43974c(0xca)+_0x5d7708+'\x22>'+_0x2878be+'\x20'+_0x4f446c[_0x43974c(0xd8)]+'</li>';}return'';})[_0x58a522(0xed)]('');document[_0x58a522(0xdd)]('userList')['innerHTML']=_0x4649a1;});}function logSystemMessage(_0x34a9a2){const _0x5eed25=_0x1504b5,_0x4c6bd5=db['ref']()[_0x5eed25(0xcd)]()[_0x5eed25(0xf8)];db[_0x5eed25(0xfb)](_0x5eed25(0x103)+roomCode+_0x5eed25(0x121)+_0x4c6bd5)[_0x5eed25(0x117)]({'msg':_0x34a9a2,'sender':_0x5eed25(0x10d),'senderId':_0x5eed25(0xdc),'timestamp':Date['now']()});}function toggleSidebar(){const _0x29c074=_0x1504b5;document[_0x29c074(0xdd)]('userSidebar')[_0x29c074(0xc7)]['toggle'](_0x29c074(0xe7));}document[_0x1504b5(0xcc)](_0x1504b5(0x106),()=>{const _0xf7ee95=_0x1504b5,_0x17de80=document['getElementById'](_0xf7ee95(0x112));_0x17de80&&_0x17de80['addEventListener'](_0xf7ee95(0xd2),function(_0x232b6b){const _0x414e66=_0xf7ee95;_0x232b6b[_0x414e66(0xf8)]===_0x414e66(0x111)&&(_0x232b6b['preventDefault'](),sendMessage());});});function showScreen(_0x8b0308){const _0x387652=_0x1504b5;[_0x387652(0xf7),'roomChoiceScreen',_0x387652(0xec),_0x387652(0xfd)][_0x387652(0x122)](_0x50c966=>{const _0x3d9b84=_0x387652;document[_0x3d9b84(0xdd)](_0x50c966)[_0x3d9b84(0x11c)]['display']=_0x3d9b84(0x107);}),document[_0x387652(0xdd)](_0x8b0308)['style'][_0x387652(0xcf)]=_0x387652(0xe3);}function sendMessage(){const _0x2883ea=_0x1504b5,_0x5e8abf=document[_0x2883ea(0xdd)]('msgInput'),_0x34f612=_0x5e8abf[_0x2883ea(0xd4)][_0x2883ea(0xef)]();if(!_0x34f612)return;const _0x141951=db[_0x2883ea(0xfb)]()[_0x2883ea(0xcd)]()['key'];db[_0x2883ea(0xfb)](_0x2883ea(0x103)+roomCode+_0x2883ea(0x121)+_0x141951)[_0x2883ea(0x117)]({'msg':_0x34f612,'sender':username,'senderId':clientId,'timestamp':Date[_0x2883ea(0x108)]()}),_0x5e8abf[_0x2883ea(0xd4)]='',sendTyping(!![]),lastActivity=Date[_0x2883ea(0x108)]();}function listenForMessages(){const _0x450022=_0x1504b5,_0x208b67=db[_0x450022(0xfb)]('rooms/'+roomCode+_0x450022(0xd7)),_0x5c5f55=roomCode===STATIC_ROOM?_0x208b67[_0x450022(0x123)](0x50):_0x208b67;_0x5c5f55['on']('child_added',_0x145523=>{const _0x4fbadc=_0x450022,{msg:_0x48c1a4,sender:_0x7fa5b0,senderId:_0x167bc4,timestamp:_0x540fb3}=_0x145523[_0x4fbadc(0x128)](),_0x948d2c=_0x167bc4===clientId;addMessage(_0x48c1a4,_0x7fa5b0,_0x540fb3,_0x948d2c),roomCode!==STATIC_ROOM&&db[_0x4fbadc(0xfb)](_0x4fbadc(0x103)+roomCode+_0x4fbadc(0x121)+_0x145523[_0x4fbadc(0xf8)])[_0x4fbadc(0x102)]();});}function addMessage(_0x1875b4,_0x6d5aba,_0x5931a2,_0x1d6559){const _0x2e8796=_0x1504b5,_0x3ceb25=document['createElement']('div');_0x3ceb25[_0x2e8796(0xc7)]['add'](_0x2e8796(0xf2),_0x1d6559?_0x2e8796(0x120):'received');const _0x4a1022=new Date(_0x5931a2)[_0x2e8796(0x10b)]([],{'hour':_0x2e8796(0x125),'minute':_0x2e8796(0x125)});_0x3ceb25[_0x2e8796(0x114)]='<span\x20class=\x22sender-name\x22>'+_0x6d5aba+_0x2e8796(0xe6)+_0x1875b4+_0x2e8796(0x115)+_0x4a1022+'</small>',document[_0x2e8796(0xdd)]('messages')[_0x2e8796(0xf1)](_0x3ceb25),document[_0x2e8796(0xdd)](_0x2e8796(0x10e))[_0x2e8796(0xdb)]=0x1869f;}function sendTyping(_0x40531c=![]){const _0x173b0d=_0x1504b5;_0x40531c?db[_0x173b0d(0xfb)](_0x173b0d(0x103)+roomCode+'/typing/'+clientId)[_0x173b0d(0x102)]():(db[_0x173b0d(0xfb)](_0x173b0d(0x103)+roomCode+_0x173b0d(0x10a)+clientId)[_0x173b0d(0x117)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x2cbfdf=_0x173b0d;db[_0x2cbfdf(0xfb)](_0x2cbfdf(0x103)+roomCode+_0x2cbfdf(0x10a)+clientId)[_0x2cbfdf(0x102)]();},0xbb8));}function listenForTyping(){const _0x2922e5=_0x1504b5,_0xce2579=document['getElementById'](_0x2922e5(0xda));db['ref'](_0x2922e5(0x103)+roomCode+_0x2922e5(0x118))['on'](_0x2922e5(0xd4),_0x43f3b2=>{const _0x1d38ed=_0x2922e5,_0x1bd7d7=_0x43f3b2['val']();if(!_0x1bd7d7)return _0xce2579[_0x1d38ed(0x12a)]='';const _0x19e409=Object['values'](_0x1bd7d7)[_0x1d38ed(0x127)](_0x14a253=>_0x14a253!==username);_0xce2579[_0x1d38ed(0x12a)]=_0x19e409['length']?_0x19e409['join'](',\x20')+_0x1d38ed(0x11d):'';});}function startInactivityTimer(){setInterval(()=>{const _0x1737a9=_0x37a5;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&(db[_0x1737a9(0xfb)](_0x1737a9(0x103)+roomCode)[_0x1737a9(0x10f)]({'active':![]}),alert(_0x1737a9(0x126)),location[_0x1737a9(0xd0)]());},0x7530);}function genRoomCode(){const _0x2fc6a7=_0x1504b5,_0x817c45='ABCDEFGHIJKLMNOPQRSTUVWXYZ',_0x313f3a=_0x2fc6a7(0x12c),_0x4497b8=(_0x27fd21,_0x251358)=>Array[_0x2fc6a7(0xff)]({'length':_0x251358},()=>_0x27fd21[Math[_0x2fc6a7(0xf4)](Math[_0x2fc6a7(0x116)]()*_0x27fd21[_0x2fc6a7(0xd3)])])[_0x2fc6a7(0xed)]('');return _0x4497b8(_0x313f3a,0x3)+_0x4497b8(_0x817c45,0x3)+_0x4497b8(_0x313f3a,0x2)+_0x4497b8(_0x817c45,0x2);}function generateClientId(){const _0x186684=_0x1504b5;return'_'+Math[_0x186684(0x116)]()['toString'](0x24)['substr'](0x2,0x9);}function cleanupOldRooms(){const _0x3c9cbe=_0x1504b5;db['ref'](_0x3c9cbe(0xe5))[_0x3c9cbe(0x11f)]('value')['then'](_0x536a8e=>{const _0x52eb7a=_0x3c9cbe,_0x4ae135=_0x536a8e[_0x52eb7a(0x128)]();if(!_0x4ae135)return;const _0xe8959e=Date[_0x52eb7a(0x108)]();Object[_0x52eb7a(0xf9)](_0x4ae135)[_0x52eb7a(0x122)](([_0x46c5d0,_0x1e699e])=>{const _0x52473d=_0x52eb7a;if(_0x46c5d0===STATIC_ROOM)return;const _0x4e1bbe=_0x1e699e[_0x52473d(0xe4)]||0x0,_0x2ea42d=_0xe8959e-_0x4e1bbe>ROOM_TTL_MS;_0x2ea42d&&(db[_0x52473d(0xfb)]('rooms/'+_0x46c5d0)['remove'](),console[_0x52473d(0x100)](_0x52473d(0xcb),_0x46c5d0));});});}