const _0x51a914=_0x1a0a;(function(_0x55c967,_0x48ba67){const _0x312ef9=_0x1a0a,_0x2498dc=_0x55c967();while(!![]){try{const _0x2c2a91=-parseInt(_0x312ef9(0x1da))/0x1*(parseInt(_0x312ef9(0x14c))/0x2)+-parseInt(_0x312ef9(0x20f))/0x3*(parseInt(_0x312ef9(0x15a))/0x4)+-parseInt(_0x312ef9(0x1fb))/0x5+parseInt(_0x312ef9(0x196))/0x6+-parseInt(_0x312ef9(0x1ee))/0x7+-parseInt(_0x312ef9(0x153))/0x8*(parseInt(_0x312ef9(0x165))/0x9)+parseInt(_0x312ef9(0x182))/0xa;if(_0x2c2a91===_0x48ba67)break;else _0x2498dc['push'](_0x2498dc['shift']());}catch(_0x4eebb5){_0x2498dc['push'](_0x2498dc['shift']());}}}(_0x565d,0x22dce));const firebaseConfig={'apiKey':_0x51a914(0x1b0),'authDomain':'easy-chatroom.firebaseapp.com','databaseURL':_0x51a914(0x13d),'projectId':_0x51a914(0x186),'storageBucket':_0x51a914(0x1f1),'messagingSenderId':_0x51a914(0x17e),'appId':_0x51a914(0x1ea),'measurementId':_0x51a914(0x1d0)};firebase['initializeApp'](firebaseConfig);const db=firebase['database']();let deviceId=null;((async()=>{deviceId=await generateDeviceId();})());let roomUsers={},userListReady=![],pendingMessages=[],messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x51a914(0x204)]()[_0x51a914(0x170)](0x24)[_0x51a914(0x1db)](0x2,0x9),lastActivity=Date[_0x51a914(0x18a)](),typingTimeout,gr8stg='';const STATIC_ROOM='050BBB66HH',MAX_MESSAGES=0xfa,sound=new Audio('sounds/beep.mp3');sound[_0x51a914(0x20b)]=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![],isRegisterMode=![];async function generateDeviceId(){const _0x44da40=_0x51a914,_0x387e22=navigator[_0x44da40(0x151)]+screen['width']+screen[_0x44da40(0x1e1)],_0x133fee=await sha256(_0x387e22);return'_'+_0x133fee[_0x44da40(0x1db)](0x0,0x14);}function sha256(_0x102dc6){const _0x1ce89c=_0x51a914,_0x3fc7ff=new TextEncoder()[_0x1ce89c(0x160)](_0x102dc6);return crypto[_0x1ce89c(0x1d8)][_0x1ce89c(0x183)](_0x1ce89c(0x158),_0x3fc7ff)[_0x1ce89c(0x1bd)](_0x2439cd=>{const _0x2a8ab6=_0x1ce89c;return Array[_0x2a8ab6(0x181)](new Uint8Array(_0x2439cd))[_0x2a8ab6(0x1a5)](_0x17f2e3=>_0x17f2e3[_0x2a8ab6(0x170)](0x10)[_0x2a8ab6(0x1f8)](0x2,'0'))['join']('');});}function toggleAuthMode(){const _0xab53bf=_0x51a914;isRegisterMode=!isRegisterMode,document['getElementById']('authTitle')[_0xab53bf(0x17b)]=isRegisterMode?_0xab53bf(0x17d):'Login',document[_0xab53bf(0x203)]('authPasswordConfirm')[_0xab53bf(0x1be)][_0xab53bf(0x137)]=isRegisterMode?_0xab53bf(0x1dd):'none',document[_0xab53bf(0x203)]('authDescription')['style'][_0xab53bf(0x137)]=isRegisterMode?'block':_0xab53bf(0x1a8),document[_0xab53bf(0x203)](_0xab53bf(0x162))[_0xab53bf(0x1be)][_0xab53bf(0x137)]=isRegisterMode?_0xab53bf(0x1dd):_0xab53bf(0x1a8),document['getElementById'](_0xab53bf(0x19f))[_0xab53bf(0x1be)][_0xab53bf(0x137)]=_0xab53bf(0x1a8),document['getElementById'](_0xab53bf(0x147))[_0xab53bf(0x17b)]=isRegisterMode?_0xab53bf(0x17d):_0xab53bf(0x1c0),document[_0xab53bf(0x203)](_0xab53bf(0x1e6))['style'][_0xab53bf(0x137)]=_0xab53bf(0x1a8);}function previewAvatar(){const _0x13d8af=_0x51a914,_0xfd7326=document['getElementById'](_0x13d8af(0x162));if(!_0xfd7326[_0x13d8af(0x205)]['length'])return;const _0x489adb=new FileReader();_0x489adb['onloadend']=()=>{const _0xa1a13=_0x13d8af;document['getElementById'](_0xa1a13(0x19f))[_0xa1a13(0x169)]=_0x489adb[_0xa1a13(0x1ae)],document['getElementById']('authAvatarPreview')[_0xa1a13(0x1be)][_0xa1a13(0x137)]='block';},_0x489adb[_0x13d8af(0x1cd)](_0xfd7326[_0x13d8af(0x205)][0x0]);}async function submitAuth(){const _0x220bfa=_0x51a914;!deviceId&&(deviceId=await generateDeviceId());const _0x34f6aa=document[_0x220bfa(0x203)]('authUsername')['value']['trim'](),_0x22e4b1=document[_0x220bfa(0x203)](_0x220bfa(0x154))[_0x220bfa(0x136)],_0x251f10=document[_0x220bfa(0x203)]('authPasswordConfirm')[_0x220bfa(0x136)],_0x1c7b6c=document['getElementById']('authError'),_0xe24a31=document[_0x220bfa(0x203)](_0x220bfa(0x178))['value']['trim'](),_0x1d8344=document['getElementById'](_0x220bfa(0x162));if(!_0x34f6aa||!_0x22e4b1||isRegisterMode&&!_0x251f10){_0x1c7b6c[_0x220bfa(0x17b)]=_0x220bfa(0x192),_0x1c7b6c['style'][_0x220bfa(0x137)]=_0x220bfa(0x1dd);return;}const _0x1c604d=await sha256(_0x22e4b1),_0x43608f=db[_0x220bfa(0x157)](_0x220bfa(0x1e0)+sanitizeUsername(_0x34f6aa));_0x43608f[_0x220bfa(0x1e9)]()[_0x220bfa(0x1bd)](_0x329f87=>{const _0x43c1d3=_0x220bfa;if(isRegisterMode){if(_0x329f87['exists']()){_0x1c7b6c[_0x43c1d3(0x17b)]='Username\x20already\x20exists.',_0x1c7b6c['style'][_0x43c1d3(0x137)]=_0x43c1d3(0x1dd);return;}if(_0x22e4b1!==_0x251f10){_0x1c7b6c[_0x43c1d3(0x17b)]=_0x43c1d3(0x1c3),_0x1c7b6c[_0x43c1d3(0x1be)][_0x43c1d3(0x137)]=_0x43c1d3(0x1dd);return;}db['ref'](_0x43c1d3(0x187))[_0x43c1d3(0x1df)]('deviceId')[_0x43c1d3(0x197)](deviceId)[_0x43c1d3(0x1e9)]()['then'](_0x3c277f=>{const _0x1a6ef3=_0x43c1d3;_0x3c277f[_0x1a6ef3(0x13e)]()?(_0x1c7b6c['innerText']=_0x1a6ef3(0x20d),_0x1c7b6c[_0x1a6ef3(0x1be)][_0x1a6ef3(0x137)]='block'):_0x43608f['set']({'passwordHash':_0x1c604d,'deviceId':deviceId})[_0x1a6ef3(0x1bd)](()=>{username=_0x34f6aa,startAfterAuth();});});}else{if(!_0x329f87[_0x43c1d3(0x13e)]()){_0x1c7b6c[_0x43c1d3(0x17b)]=_0x43c1d3(0x18e),_0x1c7b6c[_0x43c1d3(0x1be)][_0x43c1d3(0x137)]=_0x43c1d3(0x1dd);return;}if(_0x329f87['val']()[_0x43c1d3(0x142)]!==_0x1c604d){_0x1c7b6c['innerText']=_0x43c1d3(0x1a0),_0x1c7b6c[_0x43c1d3(0x1be)][_0x43c1d3(0x137)]='block';return;}let _0x387a10='';if(_0x1d8344[_0x43c1d3(0x205)]['length']){const _0x3743e9=new FileReader();_0x3743e9[_0x43c1d3(0x167)]=()=>{const _0x5783cd=_0x43c1d3;_0x387a10=_0x3743e9['result'][_0x5783cd(0x180)](',')[0x1],saveNewUser(_0x34f6aa,_0x1c604d,deviceId,_0x387a10,_0xe24a31);},_0x3743e9[_0x43c1d3(0x1cd)](_0x1d8344['files'][0x0]);}else saveNewUser(_0x34f6aa,_0x1c604d,deviceId,_0x387a10,_0xe24a31);username=_0x34f6aa,startAfterAuth();}});}function saveNewUser(_0x47ba5b,_0x3edeec,_0x44c773,_0x39482a,_0x519b0b){const _0x4735a2=_0x51a914,_0xa47642=db[_0x4735a2(0x157)](_0x4735a2(0x1e0)+sanitizeUsername(_0x47ba5b));_0xa47642[_0x4735a2(0x1ac)]({'passwordHash':_0x3edeec,'deviceId':_0x44c773,'avatarBase64':_0x39482a,'description':_0x519b0b,'username':_0x47ba5b,'lastChanged':Date[_0x4735a2(0x18a)]()})[_0x4735a2(0x1bd)](()=>{username=_0x47ba5b,startAfterAuth();});}function startAfterAuth(){const _0x2fcbd2=_0x51a914,_0x2e025d=sanitizeUsername(username);db[_0x2fcbd2(0x157)](_0x2fcbd2(0x1e0)+_0x2e025d)[_0x2fcbd2(0x1e9)]()['then'](_0x57d300=>{const _0x50d637=_0x2fcbd2;if(_0x57d300[_0x50d637(0x13e)]()){const _0x256b5b=_0x57d300[_0x50d637(0x17c)]();avatarBase64=_0x256b5b[_0x50d637(0x1e8)]||'',userDescription=_0x256b5b['description']||'';}document[_0x50d637(0x203)](_0x50d637(0x1a1))[_0x50d637(0x17b)]=username,showScreen(_0x50d637(0x156));});}function checkIfAdmin(){const _0x2cce44=_0x51a914,_0x412c00=db[_0x2cce44(0x157)]('admins/'+roomCode+'/'+sanitizeUsername(username));return _0x412c00[_0x2cce44(0x14a)]('value')[_0x2cce44(0x1bd)](_0x3b6448=>{const _0x37e7dc=_0x2cce44;isRoomAdmin=_0x3b6448[_0x37e7dc(0x13e)]();});}function toggleRecording(){const _0x29b7d7=_0x51a914;isRecording?stopRecording():navigator[_0x29b7d7(0x1e5)][_0x29b7d7(0x1f3)]({'audio':!![]})[_0x29b7d7(0x1bd)](_0x3791a0=>{const _0x4ca4b2=_0x29b7d7;mediaRecorder=new MediaRecorder(_0x3791a0),mediaRecorder[_0x4ca4b2(0x189)](),isRecording=!![],document['getElementById']('recordBtn')[_0x4ca4b2(0x17b)]='⏹️',audioChunks=[],mediaRecorder[_0x4ca4b2(0x207)]=_0x1f7f29=>audioChunks['push'](_0x1f7f29[_0x4ca4b2(0x19a)]),mediaRecorder[_0x4ca4b2(0x1c8)]=()=>{const _0x33d997=_0x4ca4b2;clearTimeout(recordingTimer);const _0x5e1b08=new Blob(audioChunks,{'type':'audio/webm'}),_0x432517=new FileReader();_0x432517[_0x33d997(0x167)]=()=>{const _0x22194e=_0x33d997,_0x3f68c9=_0x432517['result']['split'](',')[0x1],_0x26bf7a=db[_0x22194e(0x157)]()[_0x22194e(0x1ba)]()[_0x22194e(0x1e4)];db[_0x22194e(0x157)](_0x22194e(0x163)+roomCode+_0x22194e(0x20c)+_0x26bf7a)['set']({'msg':'[Voice\x20message]','audioBase64':_0x3f68c9,'sender':username,'senderId':clientId,'timestamp':Date[_0x22194e(0x18a)]()});},_0x432517[_0x33d997(0x1cd)](_0x5e1b08);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})['catch'](_0x27a56b=>{const _0x50ca0b=_0x29b7d7;alert(_0x50ca0b(0x1b9));});}function stopRecording(){const _0x53ebc1=_0x51a914;mediaRecorder&&isRecording&&(mediaRecorder[_0x53ebc1(0x1a7)](),isRecording=![],document[_0x53ebc1(0x203)](_0x53ebc1(0x1c4))['innerText']='🎙️');}window[_0x51a914(0x166)]=async()=>{const _0x2790d9=_0x51a914;cleanupOldRooms(),setupSidebarBackHandler(),setupVisibilityAttention(),resetWebsiteData(),showScreen(_0x2790d9(0x152));};function sanitizeUsername(_0x3da068){const _0x1a8133=_0x51a914;return _0x3da068[_0x1a8133(0x18d)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x5840f6=_0x51a914,_0x26a626=document[_0x5840f6(0x203)](_0x5840f6(0x16c))[_0x5840f6(0x136)]['trim'](),_0x177737=document['getElementById'](_0x5840f6(0x1c6))['value'][_0x5840f6(0x1a4)](),_0x168db1=document[_0x5840f6(0x203)]('profileError');if(!_0x26a626||!_0x177737){_0x168db1['innerText']=_0x5840f6(0x1a6),_0x168db1[_0x5840f6(0x1be)][_0x5840f6(0x137)]=_0x5840f6(0x1dd);return;}const _0x143bd5=sanitizeUsername(_0x26a626),_0x2d70d9=db['ref'](_0x5840f6(0x1d1)+_0x143bd5);_0x2d70d9[_0x5840f6(0x14a)]('value')[_0x5840f6(0x1bd)](_0x20da57=>{const _0xe98afc=_0x5840f6;if(_0x20da57[_0xe98afc(0x13e)]())_0x168db1['innerText']=_0xe98afc(0x202),_0x168db1['style'][_0xe98afc(0x137)]=_0xe98afc(0x1dd);else{const _0x4a0a0={'username':_0x26a626,'description':_0x177737,'lastChanged':Date[_0xe98afc(0x18a)](),'usernameHistory':[_0x26a626]};_0x2d70d9['set'](_0x4a0a0,_0x45c47f=>{const _0x1986e6=_0xe98afc;_0x45c47f?(console[_0x1986e6(0x1aa)](_0x1986e6(0x1eb),_0x45c47f),_0x168db1['innerText']=_0x1986e6(0x1d7),_0x168db1[_0x1986e6(0x1be)][_0x1986e6(0x137)]=_0x1986e6(0x1dd)):(localStorage['setItem'](_0x1986e6(0x1f7),_0x26a626),localStorage[_0x1986e6(0x1c7)](_0x1986e6(0x1b5),_0x177737),username=_0x26a626,document[_0x1986e6(0x203)](_0x1986e6(0x1a1))[_0x1986e6(0x17b)]=_0x26a626,showScreen(_0x1986e6(0x156)));});}})[_0x5840f6(0x1ab)](_0x4750ad=>{const _0x5189f3=_0x5840f6;console[_0x5189f3(0x1aa)](_0x5189f3(0x149),_0x4750ad),_0x168db1[_0x5189f3(0x17b)]=_0x5189f3(0x1ad),_0x168db1[_0x5189f3(0x1be)]['display']=_0x5189f3(0x1dd);});}function saveProfile(_0x1958b7,_0x2624b9,_0x358c7a){const _0x63a54e=_0x51a914,_0x92f962=Date[_0x63a54e(0x18a)](),_0x5179c6=[_0x1958b7];db[_0x63a54e(0x157)](_0x63a54e(0x1d1)+_0x358c7a)[_0x63a54e(0x1ac)]({'username':_0x1958b7,'description':_0x2624b9,'lastChanged':_0x92f962,'usernameHistory':_0x5179c6}),document[_0x63a54e(0x203)](_0x63a54e(0x1a1))[_0x63a54e(0x17b)]=_0x1958b7,showScreen(_0x63a54e(0x156));}function generateRoom(){const _0x10711e=_0x51a914;roomCode=genRoomCode(),db[_0x10711e(0x157)]('rooms/'+roomCode)['set']({'active':!![],'created':Date[_0x10711e(0x18a)]()}),startChat();}function joinRoom(){const _0xc63760=_0x51a914,_0x27ec76=roomCode||document[_0xc63760(0x203)](_0xc63760(0x1bc))['value'][_0xc63760(0x1a4)]()[_0xc63760(0x19e)]();if(!_0x27ec76)return alert('Enter\x20a\x20valid\x20room\x20code');roomCode=_0x27ec76;if(roomCode===STATIC_ROOM){showScreen(_0xc63760(0x1b6));return;}db[_0xc63760(0x157)](_0xc63760(0x163)+roomCode)[_0xc63760(0x1e9)]()[_0xc63760(0x1bd)](_0x277a8a=>{const _0x3490bc=_0xc63760;_0x277a8a[_0x3490bc(0x13e)]()&&_0x277a8a[_0x3490bc(0x17c)]()[_0x3490bc(0x1b7)]!==![]?startChat():alert('Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.');});}function _0x565d(){const _0x3fcc86=['pushState','flagPageAttention','users/','profile_description','passwordScreen','active','<img\x20src=\x22data:image/png;base64,','Microphone\x20permission\x20denied.','push','sidebarAvatarPreview','roomCodeInput','then','style','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Login','add','antispam','Passwords\x20do\x20not\x20match.','recordBtn','filter','profileDescriptionInput','setItem','onstop','usernameHistory','lastChanged','appendChild','codeEntryScreen','readAsDataURL','\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>','values','G-QDESJ2WR42','profiles/','div','disabled','length','⛔\x20You\x27re\x20blocked\x20for\x20spamming\x20(30s)','toLocaleString','⚠️\x20Failed\x20to\x20save\x20profile.\x20Try\x20again.','subtle','muted/','7EwBxQx','substr','2-digit','block','forEach','orderByChild','auth/','height','DOMContentLoaded','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','key','mediaDevices','authError','antispamBlocked','avatarBase64','get','1:985049198428:web:d0eb7e2de39887710c9b99','Failed\x20to\x20save\x20profile:','chatScreen','roomDisplay','238476RDoXPs','color','passwordError','easy-chatroom.firebasestorage.app','<span\x20class=\x22sender-name\x22>','getUserMedia','Profile\x20not\x20found.','ServerValue','msg','chat_username','padStart','remove','<span\x20style=\x22margin-right:5px;\x22>👤</span>','324230aqQplb','<li\x20style=\x22color:',')\x20New\x20message\x20•\x20','#00ff88','description','toLocaleTimeString','username','❌\x20Username\x20already\x20taken.','getElementById','random','files','audioBase64','ondataavailable','update','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','⛔\x20You’ve\x20been\x20muted\x20for\x20spamming.\x20Please\x20wait\x2030\x20seconds.','volume','/messages/','Only\x20one\x20account\x20per\x20device\x20allowed.','\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>','3PDTyXl','userSidebar','value','display','child_added','No\x20room\x20code\x20available\x20for\x20private\x20rooms','back','\x0aHistory:\x0a','limitToLast','https://easy-chatroom-default-rtdb.firebaseio.com','exists','classList','</small>','keypress','passwordHash','<div>','avatar_base64','clear','state','authSubmitBtn','profileScreen','Error\x20checking\x20username:','once','floor','71848DrZzfX','data:image/png;base64,','0123456789','userList','innerHTML','userAgent','authScreen','240ahjAcf','authPassword','createElement','roomChoiceScreen','ref','SHA-256','created','227764gKqaJn','Missing\x20room\x20or\x20user\x20information.','ABCDEFGHIJKLMNOPQRSTUVWXYZ','getItem','#888','show','encode','<br>','authAvatar','rooms/','contains','26658CQAoMV','onload','onloadend','received','src','flex','No\x20bio\x20set','profileUsernameInput','\x22\x20style=\x22width:28px;height:28px;border-radius:50%;margin-right:8px;vertical-align:middle;\x22>','Admins\x20only.','preventDefault','toString','Type\x20a\x20message...','audioUrl','●\x20Online','<span\x20style=\x22margin-right:8px;\x22>👤</span>','typing','staticPasswordInput','<audio\x20controls\x20src=\x22','authDescription','ceil','msgInput','innerText','val','Register','985049198428','/typing','split','from','4256750TEzGAd','digest','addEventListener','sidebarOpen','easy-chatroom','auth','title','start','now','join','admin','replace','Username\x20not\x20found.','messages','admins/','<img\x20src=\x22','Please\x20fill\x20all\x20fields.','Session\x20expired.','antispam/','visibilitychange','1279836acRTLO','equalTo','Failed\x20to\x20register\x20user\x20in\x20room.','userDisplay','data','lastOnline','<small>','placeholder','toUpperCase','authAvatarPreview','Incorrect\x20password.','namePreview','usernameScreen','profileViewer','trim','map','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','stop','none','reload','error','catch','set','⚠️\x20Could\x20not\x20check\x20username.\x20Try\x20again.','result','database','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','Enter'];_0x565d=function(){return _0x3fcc86;};return _0x565d();}function startChat(){const _0x1d98c6=_0x51a914;if(!roomCode||!username)return alert(_0x1d98c6(0x15b)),showScreen(_0x1d98c6(0x156));checkIfAdmin()[_0x1d98c6(0x1bd)](()=>{const _0x4a533f=_0x1d98c6,_0x446115=sanitizeUsername(username),_0x51e3a1=db['ref'](_0x4a533f(0x1b4)+roomCode+'/'+_0x446115),_0x3adbb7={'username':username,'lastOnline':firebase[_0x4a533f(0x1af)][_0x4a533f(0x1f5)]['TIMESTAMP'],'online':!![]};db[_0x4a533f(0x157)](_0x4a533f(0x190)+roomCode+'/'+_0x446115)[_0x4a533f(0x14a)]('value')[_0x4a533f(0x1bd)](_0x21b17b=>{const _0x28807a=_0x4a533f;_0x21b17b[_0x28807a(0x13e)]()&&(_0x3adbb7[_0x28807a(0x18c)]=!![]),_0x51e3a1[_0x28807a(0x1ac)](_0x3adbb7,_0xa471c2=>{const _0x5d54f8=_0x28807a;if(_0xa471c2)return alert(_0x5d54f8(0x198)),showScreen(_0x5d54f8(0x156));_0x51e3a1['onDisconnect']()['update']({'online':![],'lastOnline':Date[_0x5d54f8(0x18a)]()}),document[_0x5d54f8(0x203)](_0x5d54f8(0x199))['innerText']=username,roomCode===STATIC_ROOM?document['getElementById'](_0x5d54f8(0x1ed))[_0x5d54f8(0x17b)]=_0x5d54f8(0x139):document[_0x5d54f8(0x203)](_0x5d54f8(0x1ed))['innerText']=roomCode,showScreen(_0x5d54f8(0x1ec)),listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();});});});}function validateStaticRoomPassword(){const _0x18edb6=_0x51a914,_0x3c9457=document[_0x18edb6(0x203)](_0x18edb6(0x176))[_0x18edb6(0x136)],_0x1f6b27=document[_0x18edb6(0x203)](_0x18edb6(0x1f0));db[_0x18edb6(0x157)]('gr8stg')[_0x18edb6(0x1e9)]()[_0x18edb6(0x1bd)](_0x33179f=>{const _0x3327c3=_0x18edb6,_0x187a9a=_0x33179f[_0x3327c3(0x17c)]();_0x3c9457===_0x187a9a?(_0x1f6b27[_0x3327c3(0x1be)][_0x3327c3(0x137)]=_0x3327c3(0x1a8),startChat()):_0x1f6b27[_0x3327c3(0x1be)][_0x3327c3(0x137)]=_0x3327c3(0x1dd);});}const spamTimestamps=[];function sendMessage(){const _0x599bcc=_0x51a914,_0x8db32c=document[_0x599bcc(0x203)](_0x599bcc(0x17a)),_0x477574=_0x8db32c[_0x599bcc(0x136)]['trim']();if(!_0x477574||isBlocked)return;const _0xdf829b=Date[_0x599bcc(0x18a)]();spamTimestamps[_0x599bcc(0x1ba)](_0xdf829b);const _0x2a8a37=spamTimestamps[_0x599bcc(0x1c5)](_0x5d7536=>_0xdf829b-_0x5d7536<0x1b58);if(_0x2a8a37['length']>0x5){isBlocked=!![],_0x8db32c[_0x599bcc(0x1d3)]=!![],_0x8db32c[_0x599bcc(0x19d)]=_0x599bcc(0x1d5),alert(_0x599bcc(0x20a)),setTimeout(()=>{const _0x268caa=_0x599bcc;isBlocked=![],_0x8db32c[_0x268caa(0x1d3)]=![],_0x8db32c[_0x268caa(0x19d)]=_0x268caa(0x171),spamTimestamps[_0x268caa(0x1d4)]=0x0;},0x7530);return;}const _0x17fd3f=localStorage[_0x599bcc(0x15d)](_0x599bcc(0x144))||'',_0x1f38af=db[_0x599bcc(0x157)]()[_0x599bcc(0x1ba)]()[_0x599bcc(0x1e4)];db['ref'](_0x599bcc(0x163)+roomCode+_0x599bcc(0x20c)+_0x1f38af)[_0x599bcc(0x1ac)]({'msg':_0x477574,'sender':username,'senderId':clientId,'avatarBase64':_0x17fd3f,'timestamp':_0xdf829b}),_0x8db32c[_0x599bcc(0x136)]='',sendTyping(!![]),lastActivity=_0xdf829b;}function listenForMessages(){const _0x1eaf43=_0x51a914,_0x51cb6b=db[_0x1eaf43(0x157)](_0x1eaf43(0x163)+roomCode+'/messages'),_0x258981=_0x51cb6b[_0x1eaf43(0x13c)](MAX_MESSAGES);userListReady=!![],_0x258981['on'](_0x1eaf43(0x138),_0x29d75e=>{const _0x5a2c5a=_0x1eaf43,_0x172abb=_0x29d75e[_0x5a2c5a(0x17c)](),{senderId:_0x5e1ce4}=_0x172abb,_0x4fa056=_0x5e1ce4===clientId;if(!userListReady){pendingMessages[_0x5a2c5a(0x1de)](({data:_0x54ec18,sent:_0x3efe4a,key:_0x35bdf2})=>{addMessage(_0x54ec18,_0x3efe4a,_0x35bdf2);}),pendingMessages=[];return;}const _0x10cbb2=_0x172abb[_0x5a2c5a(0x172)]||null,_0x281261=_0x172abb[_0x5a2c5a(0x206)]||null;addMessage(_0x172abb,_0x4fa056,_0x29d75e[_0x5a2c5a(0x1e4)]),roomCode!==STATIC_ROOM&&db[_0x5a2c5a(0x157)](_0x5a2c5a(0x163)+roomCode+'/messages/'+_0x29d75e[_0x5a2c5a(0x1e4)])[_0x5a2c5a(0x1f9)](),!_0x4fa056&&(sound['play'](),flagPageAttention());});}function addMessage(_0x590a61,_0x46cf06,_0xb63deb=null){const _0x62df14=_0x51a914,{msg:_0x1df343,sender:_0x2fac79,senderId:_0x440190,timestamp:_0x3063e7,audioUrl:_0x1a4284,audioBase64:_0x3ee13e,imageBase64:_0x1df89a}=_0x590a61,_0x321ded=document[_0x62df14(0x155)](_0x62df14(0x1d2));_0x321ded[_0x62df14(0x13f)][_0x62df14(0x1c1)](_0x62df14(0x1f6),_0x46cf06?'sent':_0x62df14(0x168));const _0x3c7528=new Date(_0x3063e7)[_0x62df14(0x200)]([],{'hour':_0x62df14(0x1dc),'minute':_0x62df14(0x1dc)}),_0x5938b4=sanitizeUsername(_0x2fac79),_0x4db7cd=roomUsers[_0x5938b4]||{},_0x5a1fa4=_0x4db7cd[_0x62df14(0x1e8)]?_0x62df14(0x1b8)+_0x4db7cd[_0x62df14(0x1e8)]+_0x62df14(0x16d):_0x62df14(0x174);let _0x40a684=_0x5a1fa4+_0x62df14(0x1f2)+_0x2fac79+'</span>';_0x4db7cd['admin']&&(_0x40a684+=_0x62df14(0x20e));_0x40a684+=_0x62df14(0x161);const _0x370e3b=_0x1df343?.[_0x62df14(0x18d)](new RegExp('@'+username+'\x5cb','gi'),'<span\x20style=\x22color:#ff4081;\x22>@$&</span>');if(_0x1a4284)_0x40a684+=_0x62df14(0x177)+_0x1a4284+_0x62df14(0x209);else{if(_0x3ee13e){const _0xe3a05a='data:audio/webm;base64,'+_0x3ee13e;_0x40a684+=_0x62df14(0x177)+_0xe3a05a+_0x62df14(0x209);}else{if(_0x1df89a){const _0x2e8d9f=_0x62df14(0x14d)+_0x1df89a;_0x40a684+=_0x62df14(0x191)+_0x2e8d9f+_0x62df14(0x1ce);}else _0x40a684+=_0x62df14(0x143)+_0x370e3b+'</div>';}}_0x40a684+=_0x62df14(0x19c)+_0x3c7528+_0x62df14(0x140),_0x321ded[_0x62df14(0x150)]=_0x40a684;const _0x40f2ec=document[_0x62df14(0x203)](_0x62df14(0x18f));_0x40f2ec[_0x62df14(0x1cb)](_0x321ded),_0x40f2ec['scrollTop']=_0x40f2ec['scrollHeight'];}function cleanupOldRooms(){const _0xe61efa=_0x51a914;db[_0xe61efa(0x157)]('rooms')[_0xe61efa(0x14a)](_0xe61efa(0x136))['then'](_0x43caf3=>{const _0xa565bc=_0xe61efa,_0x999379=_0x43caf3['val']();if(!_0x999379)return;const _0x330646=Date['now']();for(const _0x4a1909 in _0x999379){if(_0x4a1909===STATIC_ROOM)continue;const _0x4ee37e=_0x999379[_0x4a1909];_0x330646-(_0x4ee37e[_0xa565bc(0x159)]||0x0)>0x2*0x3c*0x3e8&&db['ref'](_0xa565bc(0x163)+_0x4a1909)[_0xa565bc(0x1f9)]();}db[_0xa565bc(0x157)](_0xa565bc(0x1c2))['once'](_0xa565bc(0x136))[_0xa565bc(0x1bd)](_0x56682a=>{const _0x116e33=_0xa565bc,_0x5c3a12=_0x56682a[_0x116e33(0x17c)]();if(!_0x5c3a12)return;for(const _0x2758fe in _0x5c3a12){if(_0x2758fe!==STATIC_ROOM)db[_0x116e33(0x157)](_0x116e33(0x194)+_0x2758fe)[_0x116e33(0x1f9)]();}}),db[_0xa565bc(0x157)](_0xa565bc(0x1e7))[_0xa565bc(0x14a)](_0xa565bc(0x136))[_0xa565bc(0x1bd)](_0xd3be5=>{const _0x42ed06=_0xa565bc,_0x2bdda7=_0xd3be5['val']();if(!_0x2bdda7)return;for(const _0x565987 in _0x2bdda7){if(_0x565987!==STATIC_ROOM)db[_0x42ed06(0x157)]('antispamBlocked/'+_0x565987)['remove']();}});});}document[_0x51a914(0x184)](_0x51a914(0x1e2),()=>{const _0x3401eb=_0x51a914,_0xfb0013=document[_0x3401eb(0x203)](_0x3401eb(0x17a));_0xfb0013&&_0xfb0013[_0x3401eb(0x184)](_0x3401eb(0x141),function(_0x1b38bf){const _0x15d05e=_0x3401eb;_0x1b38bf['key']===_0x15d05e(0x1b1)&&(_0x1b38bf[_0x15d05e(0x16f)](),sendMessage());});});function showScreen(_0x5dfd38){const _0x39e6f6=_0x51a914;[_0x39e6f6(0x1a2),_0x39e6f6(0x156),_0x39e6f6(0x1cc),_0x39e6f6(0x1ec),_0x39e6f6(0x1b6),_0x39e6f6(0x148),_0x39e6f6(0x1a3),_0x39e6f6(0x152)][_0x39e6f6(0x1de)](_0x2e658f=>{const _0x3d42da=_0x39e6f6;document[_0x3d42da(0x203)](_0x2e658f)[_0x3d42da(0x1be)][_0x3d42da(0x137)]=_0x3d42da(0x1a8);}),document[_0x39e6f6(0x203)](_0x5dfd38)[_0x39e6f6(0x1be)]['display']=_0x39e6f6(0x16a);}function genRoomCode(){const _0x2c0bc1=_0x51a914,_0x53db4f=_0x2c0bc1(0x15c),_0x2c842f=_0x2c0bc1(0x14e),_0x1af47c=(_0x4a77c5,_0x345d05)=>Array['from']({'length':_0x345d05},()=>_0x4a77c5[Math[_0x2c0bc1(0x14b)](Math['random']()*_0x4a77c5['length'])])['join']('');return _0x1af47c(_0x2c842f,0x3)+_0x1af47c(_0x53db4f,0x3)+_0x1af47c(_0x2c842f,0x2)+_0x1af47c(_0x53db4f,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x232cd9=_0x1a0a;Date[_0x232cd9(0x18a)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x232cd9(0x157)](_0x232cd9(0x163)+roomCode)['update']({'active':![]}),alert(_0x232cd9(0x193)),location[_0x232cd9(0x1a9)]());},0x7530);}function setupSidebarBackHandler(){const _0x5ccc7c=_0x51a914;window[_0x5ccc7c(0x184)]('popstate',()=>{const _0x596c58=_0x5ccc7c,_0x17b902=document[_0x596c58(0x203)](_0x596c58(0x210));_0x17b902?.[_0x596c58(0x13f)]['contains'](_0x596c58(0x15f))&&_0x17b902[_0x596c58(0x13f)][_0x596c58(0x1f9)](_0x596c58(0x15f));});}function toggleSidebar(){const _0x185829=_0x51a914,_0x18d8f1=document['getElementById'](_0x185829(0x210));if(!_0x18d8f1[_0x185829(0x13f)][_0x185829(0x164)](_0x185829(0x15f)))_0x18d8f1[_0x185829(0x13f)]['add'](_0x185829(0x15f)),history[_0x185829(0x1b2)]({'sidebarOpen':!![]},'');else{_0x18d8f1[_0x185829(0x13f)][_0x185829(0x1f9)](_0x185829(0x15f));if(history[_0x185829(0x146)]?.[_0x185829(0x185)])history[_0x185829(0x13a)]();}}function setupVisibilityAttention(){const _0x13dcd0=_0x51a914;let _0x29519a=0x0,_0x4cdd35=document[_0x13dcd0(0x188)];document[_0x13dcd0(0x184)](_0x13dcd0(0x195),()=>{const _0x39d1f2=_0x13dcd0;!document['hidden']&&(document[_0x39d1f2(0x188)]=_0x4cdd35,_0x29519a=0x0);}),window[_0x13dcd0(0x1b3)]=function(){const _0x1ca406=_0x13dcd0;document['hidden']&&(_0x29519a++,document['title']='('+_0x29519a+_0x1ca406(0x1fd)+_0x4cdd35);};}function tryEditProfile(){const _0x1e6409=_0x51a914,_0xea351c=sanitizeUsername(username);db[_0x1e6409(0x157)](_0x1e6409(0x1d1)+_0xea351c)[_0x1e6409(0x1e9)]()['then'](_0x24e13e=>{const _0x26a743=_0x1e6409,_0x5c90b4=_0x24e13e[_0x26a743(0x17c)]();if(!_0x5c90b4)return alert(_0x26a743(0x1f4));const _0x5e595d=_0x5c90b4[_0x26a743(0x1ca)]||0x0,_0x231be9=Date['now'](),_0x36a3bb=0x18*0x3c*0x3c*0x3e8;if(_0x231be9-_0x5e595d<_0x36a3bb){const _0x109af4=Math[_0x26a743(0x179)]((_0x36a3bb-(_0x231be9-_0x5e595d))/(0x3c*0x3e8));alert(_0x26a743(0x1e3)+_0x109af4+'\x20minutes.');}else showScreen(_0x26a743(0x148)),document[_0x26a743(0x203)](_0x26a743(0x16c))['value']=username,document[_0x26a743(0x203)](_0x26a743(0x1c6))[_0x26a743(0x136)]=_0x5c90b4['description']||'';});}function listenForUserList(){const _0x89cf1a=_0x51a914;db[_0x89cf1a(0x157)]('users/'+roomCode)['on'](_0x89cf1a(0x136),_0x4fb209=>{const _0x4770d0=_0x89cf1a,_0x641200=_0x4fb209[_0x4770d0(0x17c)]()||{},_0x5e40e9=Date[_0x4770d0(0x18a)]();roomUsers={},Object['entries'](_0x641200)[_0x4770d0(0x1de)](([_0x3e5cb3,_0x57fa56])=>{const _0x4fa1e6=_0x4770d0;roomUsers[sanitizeUsername(_0x57fa56[_0x4fa1e6(0x201)])]=_0x57fa56;}),userListReady=!![],pendingMessages[_0x4770d0(0x1de)](({data:_0x197abf,sent:_0x3ab46e,key:_0x224d67})=>{addMessage(_0x197abf,_0x3ab46e,_0x224d67);}),pendingMessages=[];const _0x386626=Object[_0x4770d0(0x1cf)](_0x641200)[_0x4770d0(0x1a5)](_0x28a750=>{const _0x55b59c=_0x4770d0,_0x4cbb6c=_0x28a750['online'],_0x42c307=_0x5e40e9-_0x28a750[_0x55b59c(0x19b)]<=0x1e*0x3c*0x3e8;if(!_0x4cbb6c&&!_0x42c307)return'';const _0x53f344=_0x4cbb6c?'#00ff88':_0x55b59c(0x15e),_0x3d9c9d=_0x4cbb6c?'🟢':'🕒',_0x1b77a9=_0x28a750[_0x55b59c(0x1e8)]?_0x55b59c(0x1b8)+_0x28a750['avatarBase64']+'\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;vertical-align:middle;\x22>':_0x55b59c(0x1fa),_0x23d394=_0x28a750[_0x55b59c(0x18c)]?'\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>':'';return _0x55b59c(0x1fc)+_0x53f344+';cursor:pointer;display:flex;align-items:center;gap:6px;\x22\x20onclick=\x22viewProfile(\x27'+sanitizeUsername(_0x28a750[_0x55b59c(0x201)])+_0x55b59c(0x1bf)+_0x1b77a9+_0x3d9c9d+'\x20'+_0x28a750[_0x55b59c(0x201)]+_0x23d394+'\x0a\x20\x20\x20\x20\x20\x20</li>';})[_0x4770d0(0x18b)]('');document[_0x4770d0(0x203)](_0x4770d0(0x14f))[_0x4770d0(0x150)]=_0x386626;});}function sendTyping(_0x31e6e7=![]){const _0x221291=_0x51a914;if(isBlocked)return;const _0x3bd644=_0x221291(0x163)+roomCode+'/typing/'+clientId;_0x31e6e7?db[_0x221291(0x157)](_0x3bd644)[_0x221291(0x1f9)]():(db['ref'](_0x3bd644)[_0x221291(0x1ac)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{db['ref'](_0x3bd644)['remove']();},0xbb8));}function _0x1a0a(_0x37232d,_0x578486){const _0x565df0=_0x565d();return _0x1a0a=function(_0x1a0a0b,_0x4371b0){_0x1a0a0b=_0x1a0a0b-0x136;let _0x5ed399=_0x565df0[_0x1a0a0b];return _0x5ed399;},_0x1a0a(_0x37232d,_0x578486);}function listenForTyping(){const _0x31f1e8=_0x51a914,_0x5b4dc6=document[_0x31f1e8(0x203)](_0x31f1e8(0x175));db[_0x31f1e8(0x157)](_0x31f1e8(0x163)+roomCode+_0x31f1e8(0x17f))['on'](_0x31f1e8(0x136),_0xf1362b=>{const _0x4bfeff=_0x31f1e8,_0x55249f=_0xf1362b[_0x4bfeff(0x17c)]();if(!_0x55249f)return _0x5b4dc6[_0x4bfeff(0x17b)]='';const _0x5a2b84=Object[_0x4bfeff(0x1cf)](_0x55249f)['filter'](_0x2b863f=>_0x2b863f!==username);_0x5b4dc6[_0x4bfeff(0x17b)]=_0x5a2b84['length']?_0x5a2b84['join'](',\x20')+'\x20typing...':'';});}function trackPresence(){const _0x918e2d=_0x51a914;if(!username||!roomCode)return;const _0x580ae6=sanitizeUsername(username),_0x40acb1=db[_0x918e2d(0x157)](_0x918e2d(0x1b4)+roomCode+'/'+_0x580ae6),_0x4b7e5a={'username':username,'avatarBase64':avatarBase64||'','description':userDescription||'','online':!![],'lastOnline':firebase[_0x918e2d(0x1af)]['ServerValue']['TIMESTAMP']};db['ref'](_0x918e2d(0x190)+roomCode+'/'+_0x580ae6)[_0x918e2d(0x14a)](_0x918e2d(0x136))['then'](_0x1ee2a8=>{const _0x3d04db=_0x918e2d;_0x1ee2a8[_0x3d04db(0x13e)]()&&(_0x4b7e5a[_0x3d04db(0x18c)]=!![]),_0x40acb1[_0x3d04db(0x1ac)](_0x4b7e5a),_0x40acb1['onDisconnect']()[_0x3d04db(0x208)]({'online':![],'lastOnline':Date[_0x3d04db(0x18a)]()}),updateOnlineIndicator();});}function uploadSidebarAvatar(_0x280790){const _0x3d9861=_0x51a914;if(!_0x280790[_0x3d9861(0x205)][_0x3d9861(0x1d4)])return;const _0x17aefa=new FileReader();_0x17aefa['onloadend']=()=>{const _0x2412e4=_0x3d9861,_0x1adb10=_0x17aefa[_0x2412e4(0x1ae)][_0x2412e4(0x180)](',')[0x1],_0x207cc6=document['getElementById'](_0x2412e4(0x1bb));_0x207cc6[_0x2412e4(0x169)]=_0x2412e4(0x14d)+_0x1adb10,_0x207cc6[_0x2412e4(0x1be)][_0x2412e4(0x137)]=_0x2412e4(0x1dd),trackPresence();},_0x17aefa['readAsDataURL'](_0x280790['files'][0x0]);}function muteUser(_0x2c7a41,_0x336041){const _0x597483=_0x51a914;if(!isRoomAdmin)return alert(_0x597483(0x16e));const _0x17aaba=Date[_0x597483(0x18a)]()+_0x336041*0x3c*0x3e8;db[_0x597483(0x157)](_0x597483(0x1d9)+roomCode+'/'+sanitizeUsername(_0x2c7a41))[_0x597483(0x1ac)](_0x17aaba);}function unmuteUser(_0x989b1f){const _0x27d1a9=_0x51a914;if(!isRoomAdmin)return alert(_0x27d1a9(0x16e));db[_0x27d1a9(0x157)](_0x27d1a9(0x1d9)+roomCode+'/'+sanitizeUsername(_0x989b1f))[_0x27d1a9(0x1f9)]();}function updateOnlineIndicator(){const _0x28270b=_0x51a914,_0x2fee32=document[_0x28270b(0x203)]('onlineStatus');_0x2fee32[_0x28270b(0x17b)]=_0x28270b(0x173),_0x2fee32['style'][_0x28270b(0x1ef)]=_0x28270b(0x1fe);}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x39edff){const _0x4659eb=_0x51a914;db[_0x4659eb(0x157)](_0x4659eb(0x1d1)+_0x39edff)['get']()['then'](_0x4a3cd7=>{const _0x237941=_0x4659eb;if(!_0x4a3cd7[_0x237941(0x13e)]())return;const _0x4e3644=_0x4a3cd7[_0x237941(0x17c)](),_0x3fc14c=('\x0aName:\x20'+_0x4e3644[_0x237941(0x201)]+'\x0aDescription:\x20'+(_0x4e3644[_0x237941(0x1ff)]||_0x237941(0x16b))+_0x237941(0x13b)+(_0x4e3644[_0x237941(0x1c9)]||[])[_0x237941(0x18b)]('\x0a')+'\x0aLast\x20Changed:\x20'+new Date(_0x4e3644[_0x237941(0x1ca)])[_0x237941(0x1d6)]()+'\x0a\x20\x20\x20\x20')[_0x237941(0x1a4)]();document['getElementById']('profileContent')[_0x237941(0x17b)]=_0x3fc14c,document[_0x237941(0x203)](_0x237941(0x1a3))[_0x237941(0x1be)][_0x237941(0x137)]=_0x237941(0x1dd);});}function initUsernameFlow(){const _0x332a6c=_0x51a914,_0x1a8bfe=localStorage[_0x332a6c(0x15d)]('chat_username');!_0x1a8bfe?showScreen('profileScreen'):(username=_0x1a8bfe,document[_0x332a6c(0x203)]('namePreview')[_0x332a6c(0x17b)]=username,showScreen(_0x332a6c(0x156)));}function closeProfile(){const _0x3eda56=_0x51a914;document['getElementById'](_0x3eda56(0x1a3))[_0x3eda56(0x1be)]['display']='none';}function resetWebsiteData(){const _0x1fc356=_0x51a914;try{localStorage[_0x1fc356(0x145)](),sessionStorage[_0x1fc356(0x145)]();}catch(_0x552f35){}username=null,roomCode=null,isRoomAdmin=![],pendingMessages=[],clientId='_'+Math[_0x1fc356(0x204)]()[_0x1fc356(0x170)](0x24)[_0x1fc356(0x1db)](0x2,0x9);}