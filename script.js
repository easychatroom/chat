const _0x402fce=_0x1b95;(function(_0x5e9d94,_0x283504){const _0x2c0d40=_0x1b95,_0x3a7fbf=_0x5e9d94();while(!![]){try{const _0x363ec1=parseInt(_0x2c0d40(0x143))/0x1*(parseInt(_0x2c0d40(0x100))/0x2)+-parseInt(_0x2c0d40(0x17f))/0x3*(parseInt(_0x2c0d40(0x132))/0x4)+-parseInt(_0x2c0d40(0x158))/0x5+parseInt(_0x2c0d40(0x1ab))/0x6*(-parseInt(_0x2c0d40(0x131))/0x7)+parseInt(_0x2c0d40(0x134))/0x8*(-parseInt(_0x2c0d40(0x15a))/0x9)+parseInt(_0x2c0d40(0x198))/0xa*(-parseInt(_0x2c0d40(0x16b))/0xb)+-parseInt(_0x2c0d40(0xfe))/0xc*(-parseInt(_0x2c0d40(0x1b3))/0xd);if(_0x363ec1===_0x283504)break;else _0x3a7fbf['push'](_0x3a7fbf['shift']());}catch(_0x3a5db7){_0x3a7fbf['push'](_0x3a7fbf['shift']());}}}(_0x1b78,0x4cc70));const firebaseConfig={'apiKey':'AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','authDomain':_0x402fce(0x156),'databaseURL':_0x402fce(0x18b),'projectId':_0x402fce(0x16c),'storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0x402fce(0x126),'appId':_0x402fce(0x13f),'measurementId':_0x402fce(0xfd)};firebase[_0x402fce(0x186)](firebaseConfig);const db=firebase['database']();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x402fce(0x113)]()[_0x402fce(0x11a)](0x24)['substr'](0x2,0x9),lastActivity=Date[_0x402fce(0x16f)](),typingTimeout,gr8stg='';const STATIC_ROOM='050BBB66HH',MAX_MESSAGES=0xfa,sound=new Audio(_0x402fce(0x16d));sound[_0x402fce(0x1a2)]=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer;function toggleRecording(){const _0x4ce108=_0x402fce;isRecording?stopRecording():navigator[_0x4ce108(0x172)][_0x4ce108(0x177)]({'audio':!![]})[_0x4ce108(0x196)](_0x1e5686=>{const _0x157167=_0x4ce108;mediaRecorder=new MediaRecorder(_0x1e5686),mediaRecorder[_0x157167(0x13c)](),isRecording=!![],document[_0x157167(0x160)]('recordBtn')[_0x157167(0x133)]='‚èπÔ∏è',audioChunks=[],mediaRecorder['ondataavailable']=_0x19793c=>audioChunks['push'](_0x19793c[_0x157167(0x161)]),mediaRecorder['onstop']=()=>{const _0x5dbfe7=_0x157167;clearTimeout(recordingTimer);const _0x2cb694=new Blob(audioChunks,{'type':'audio/webm'}),_0x3404ab=new FileReader();_0x3404ab[_0x5dbfe7(0x192)]=()=>{const _0x3f05d7=_0x5dbfe7,_0x599ac8=_0x3404ab[_0x3f05d7(0x17e)]['split'](',')[0x1],_0xb3cef=db[_0x3f05d7(0x169)]()['push']()['key'];db[_0x3f05d7(0x169)](_0x3f05d7(0x19f)+roomCode+_0x3f05d7(0x181)+_0xb3cef)['set']({'msg':'[Voice\x20message]','audioBase64':_0x599ac8,'sender':username,'senderId':clientId,'timestamp':Date[_0x3f05d7(0x16f)]()});},_0x3404ab[_0x5dbfe7(0x13b)](_0x2cb694);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x4ce108(0x15b)](_0xa7d476=>{const _0x3ea397=_0x4ce108;alert(_0x3ea397(0x12f));});}function stopRecording(){const _0x7f35e0=_0x402fce;mediaRecorder&&isRecording&&(mediaRecorder[_0x7f35e0(0x180)](),isRecording=![],document[_0x7f35e0(0x160)](_0x7f35e0(0x1b1))[_0x7f35e0(0x133)]='üéôÔ∏è');}window[_0x402fce(0x13d)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x40c51d){return _0x40c51d['replace'](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x18e371=_0x402fce,_0x529157=document[_0x18e371(0x160)](_0x18e371(0x165))['value']['trim'](),_0x5483c8=document[_0x18e371(0x160)](_0x18e371(0x149))[_0x18e371(0x11f)][_0x18e371(0x155)](),_0x137298=document[_0x18e371(0x160)](_0x18e371(0x12c)),_0x418d59=firebase[_0x18e371(0x164)]()['currentUser']['uid'];if(!_0x529157||!_0x5483c8){_0x137298['innerText']=_0x18e371(0x187),_0x137298[_0x18e371(0x140)][_0x18e371(0x12a)]=_0x18e371(0x1b2);return;}_0x137298['style'][_0x18e371(0x12a)]=_0x18e371(0x102);const _0x24b401=sanitizeUsername(_0x529157);db[_0x18e371(0x169)](_0x18e371(0x117)+_0x24b401)[_0x18e371(0x15c)](_0x18e371(0x11f))[_0x18e371(0x196)](_0x17c261=>{const _0x1f7614=_0x18e371;if(_0x17c261[_0x1f7614(0x116)]()){alert(_0x1f7614(0x114));return;}const _0x2998ab=Date[_0x1f7614(0x16f)](),_0x39d736=db[_0x1f7614(0x169)](_0x1f7614(0x108)+_0x24b401);_0x39d736[_0x1f7614(0x1a4)]()[_0x1f7614(0x196)](_0x48f548=>{const _0x525e2f=_0x1f7614,_0x58920d=_0x48f548[_0x525e2f(0x101)]()||{},_0x8694a8=_0x58920d['usernameHistory']||[];if(!_0x8694a8[_0x525e2f(0x18a)](_0x529157))_0x8694a8['push'](_0x529157);_0x39d736[_0x525e2f(0x12b)]({'username':_0x529157,'description':_0x5483c8,'lastChanged':_0x2998ab,'usernameHistory':_0x8694a8}),db[_0x525e2f(0x169)](_0x525e2f(0x14b)+_0x418d59)[_0x525e2f(0x12b)]({'username':_0x529157,'description':_0x5483c8,'usernameChangedAt':_0x2998ab}),username=_0x529157,document['getElementById'](_0x525e2f(0x189))[_0x525e2f(0x133)]=username,showScreen(_0x525e2f(0x17a));});});}function saveUsername(){const _0xc402db=_0x402fce,_0x543c97=document['getElementById']('usernameInput')[_0xc402db(0x11f)][_0xc402db(0x155)]();if(!_0x543c97)return alert('Please\x20enter\x20a\x20valid\x20name');username=_0x543c97,localStorage['setItem']('chat_username',username),initUsernameFlow();}function generateRoom(){const _0x6edc05=_0x402fce;roomCode=genRoomCode(),db[_0x6edc05(0x169)](_0x6edc05(0x19f)+roomCode)[_0x6edc05(0x12b)]({'active':!![],'created':Date['now']()}),startChat();}function joinRoom(){const _0x443c40=_0x402fce,_0x18c930=roomCode||document['getElementById']('roomCodeInput')[_0x443c40(0x11f)][_0x443c40(0x155)]()[_0x443c40(0x148)]();if(!_0x18c930)return alert(_0x443c40(0x159));roomCode=_0x18c930;if(roomCode===STATIC_ROOM){showScreen(_0x443c40(0x184));return;}db[_0x443c40(0x169)]('rooms/'+roomCode)['get']()[_0x443c40(0x196)](_0x3cb5cf=>{const _0x1f343f=_0x443c40;_0x3cb5cf['exists']()&&_0x3cb5cf[_0x1f343f(0x101)]()[_0x1f343f(0x154)]!==![]?startChat():alert(_0x1f343f(0x18d));});}function startChat(){const _0x331374=_0x402fce;if(!roomCode||!username)return alert('Missing\x20room\x20or\x20user\x20information.'),showScreen(_0x331374(0x17a));showScreen(_0x331374(0x115)),document[_0x331374(0x160)](_0x331374(0x157))[_0x331374(0x133)]=username,(roomCode=_0x331374(0x1b0))?document[_0x331374(0x160)](_0x331374(0x15d))[_0x331374(0x133)]=_0x331374(0x11d):document['getElementById']('roomDisplay')[_0x331374(0x133)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();}function validateStaticRoomPassword(){const _0x344c44=_0x402fce,_0x51c293=document['getElementById'](_0x344c44(0x147))[_0x344c44(0x11f)],_0x51cb14=document[_0x344c44(0x160)](_0x344c44(0x199));db[_0x344c44(0x169)](_0x344c44(0x18e))[_0x344c44(0x1a4)]()[_0x344c44(0x196)](_0xcf2530=>{const _0x3f0e80=_0x344c44,_0x306f3d=_0xcf2530['val']();_0x51c293===_0x306f3d?(_0x51cb14['style'][_0x3f0e80(0x12a)]=_0x3f0e80(0x102),startChat()):_0x51cb14[_0x3f0e80(0x140)]['display']='block';});}function sendMessage(){const _0x5019a2=_0x402fce,_0x599144=document[_0x5019a2(0x160)](_0x5019a2(0x110)),_0x3698f0=_0x599144[_0x5019a2(0x11f)][_0x5019a2(0x155)]();if(!_0x3698f0)return;const _0x749b36=Date[_0x5019a2(0x16f)](),_0x2834f6=sanitizeUsername(username);db[_0x5019a2(0x169)](_0x5019a2(0x162)+roomCode+'/'+_0x2834f6)[_0x5019a2(0x15c)](_0x5019a2(0x11f))[_0x5019a2(0x196)](_0x1a7039=>{const _0x491475=_0x5019a2,_0x45dc89=_0x1a7039[_0x491475(0x101)]();if(_0x45dc89&&_0x749b36<_0x45dc89){const _0x28e9ab=Math['ceil']((_0x45dc89-_0x749b36)/0x3e8);alert(_0x491475(0x11e)+_0x28e9ab+_0x491475(0x178));return;}const _0xff54ea=db['ref'](_0x491475(0x1ae)+roomCode+'/'+_0x2834f6);_0xff54ea[_0x491475(0x15c)]('value')['then'](_0x1f31b7=>{const _0x4f7024=_0x491475,_0xc13d40=_0x1f31b7[_0x4f7024(0x101)]()||[],_0x1b4a83=[..._0xc13d40,_0x749b36][_0x4f7024(0x191)](_0x20a72e=>_0x749b36-_0x20a72e<0xbb8);if(_0x1b4a83[_0x4f7024(0x174)]>=0x5){alert('üö´\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.'),db[_0x4f7024(0x169)](_0x4f7024(0x162)+roomCode+'/'+_0x2834f6)[_0x4f7024(0x12b)](_0x749b36+0x7530);const _0x1064bf=db['ref'](_0x4f7024(0x19f)+roomCode+'/messages');_0x1064bf['orderByChild'](_0x4f7024(0x13a))[_0x4f7024(0x10b)](clientId)[_0x4f7024(0x152)](0x5)[_0x4f7024(0x15c)](_0x4f7024(0x11f),_0x5d3926=>{_0x5d3926['forEach'](_0x1032f2=>{_0x1064bf['child'](_0x1032f2['key'])['remove']();});}),_0xff54ea[_0x4f7024(0x12b)]([]);return;}_0xff54ea[_0x4f7024(0x12b)](_0x1b4a83);const _0x37b04b=db[_0x4f7024(0x169)]()[_0x4f7024(0x19a)]()[_0x4f7024(0x16a)];db[_0x4f7024(0x169)](_0x4f7024(0x19f)+roomCode+_0x4f7024(0x181)+_0x37b04b)[_0x4f7024(0x12b)]({'msg':_0x3698f0,'sender':username,'senderId':clientId,'timestamp':_0x749b36}),_0x599144['value']='',sendTyping(!![]),lastActivity=_0x749b36;});});}function _0x1b78(){const _0x41c879=['senderId','readAsDataURL','start','onload','<audio\x20controls\x20src=\x22','1:985049198428:web:d0eb7e2de39887710c9b99','style','</span><br>','reload','185154qgBysZ','innerHTML','‚óè\x20Online','visibilitychange','staticPasswordInput','toUpperCase','profileDescriptionInput','toLocaleString','users/','codeEntryScreen','lastOnline','state','replace','getItem','show','limitToLast','remove','active','trim','easy-chatroom.firebaseapp.com','userDisplay','279495gdEeNJ','Enter\x20a\x20valid\x20room\x20code','9gFJTdS','catch','once','roomDisplay','child_added','\x0aName:\x20','getElementById','data','antispamBlocked/','onlineStatus','auth','profileUsernameInput','userSidebar','username','<span\x20style=\x22color:#ff4081;\x22>@$&</span>','ref','key','968HYxPyz','easy-chatroom','sounds/beep.mp3','Please\x20verify\x20your\x20email\x20before\x20continuing.','now','sent','update','mediaDevices','description','length','classList','usernameChangedAt','getUserMedia','s\x20due\x20to\x20spam.\x20Please\x20wait.','/messages','roomChoiceScreen','message',')\x20New\x20message\x20‚Ä¢\x20','#00ff88','result','12bCBkvV','stop','/messages/','<small>','toLocaleTimeString','passwordScreen','antispam','initializeApp','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','userList','namePreview','includes','https://easy-chatroom-default-rtdb.firebaseio.com','from','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','gr8stg','join','typing','filter','onloadend','DOMContentLoaded','Only\x20admins\x20can\x20delete\x20messages.','Profile\x20not\x20found.','then','preventDefault','29060ZIAoDl','passwordError','push','hidden','back','\x0aHistory:\x0a','profileScreen','rooms/','user','\x27)\x22>','volume','\x27)\x22\x20style=\x22margin-left:5px;\x22>üóëÔ∏è</button>','get','admins/','msg','<li\x20style=\x22color:','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','appendChild','keypress','3474kCXIUM','</li>','div','antispam/','/typing/','050BBB66HH','recordBtn','block','72397cFqOJw','chat_username','sidebarOpen','pushState','G-QDESJ2WR42','2244SHUgsf','popstate','6LTwtuR','val','none','#888','add','uid','createElement','\x0aLast\x20Changed:\x20','profiles/','antispamBlocked','map','equalTo','values','</small>','sendEmailVerification','Session\x20expired.','msgInput','0123456789','data:audio/webm;base64,','random','Username\x20already\x20taken.','chatScreen','exists','usernames/','\x20<button\x20onclick=\x22deleteMessage(\x27','profileViewer','toString','createUserWithEmailAndPassword','/typing','No\x20room\x20code\x20available\x20for\x20private\x20rooms','‚õî\x20You\x27re\x20blocked\x20for\x20','value','currentUser','database','2-digit','messages','\x0a\x20\x20\x20\x20','\x0aDescription:\x20','985049198428','contains','addEventListener','title','display','set','profileError','Enter','received','Microphone\x20permission\x20denied.','onDisconnect','1246wiNgrQ','535036RFFxRU','innerText','2661280cMxkqU','color','No\x20bio\x20set','play','forEach','created'];_0x1b78=function(){return _0x41c879;};return _0x1b78();}function listenForMessages(){const _0x167b5a=_0x402fce,_0x145dee=db['ref'](_0x167b5a(0x19f)+roomCode+_0x167b5a(0x179)),_0x4cb0de=_0x145dee[_0x167b5a(0x152)](MAX_MESSAGES);_0x4cb0de['on'](_0x167b5a(0x15e),_0x3e0385=>{const _0x23767e=_0x167b5a,_0x1a3ac7=_0x3e0385[_0x23767e(0x101)](),{msg:_0x19dd4c,sender:_0x21b86e,senderId:_0x4bd0f2,timestamp:_0x55b77c}=_0x1a3ac7,_0xe059c6=_0x4bd0f2===clientId,_0x5d60d1=_0x1a3ac7['audioUrl']||null,_0x21b5e5=_0x1a3ac7['audioBase64']||null;addMessage(_0x19dd4c,_0x21b86e,_0x55b77c,_0xe059c6,_0x5d60d1,_0x21b5e5),roomCode!==STATIC_ROOM&&db[_0x23767e(0x169)](_0x23767e(0x19f)+roomCode+_0x23767e(0x181)+_0x3e0385[_0x23767e(0x16a)])[_0x23767e(0x153)](),!_0xe059c6&&(sound[_0x23767e(0x137)](),flagPageAttention());});}function addMessage(_0x52cd95,_0x343541,_0x2836d8,_0x71c005,_0x205c8b=null,_0x592b17=null){const _0x4365cf=_0x402fce,_0x1ac2c2=document[_0x4365cf(0x106)](_0x4365cf(0x1ad));_0x1ac2c2[_0x4365cf(0x175)][_0x4365cf(0x104)](_0x4365cf(0x1a6),_0x71c005?_0x4365cf(0x170):_0x4365cf(0x12e));const _0x2627f0=new Date(_0x2836d8)[_0x4365cf(0x183)]([],{'hour':_0x4365cf(0x122),'minute':'2-digit'});let _0x534eea='<span\x20class=\x22sender-name\x22>'+_0x343541+_0x4365cf(0x141);!_0x205c8b&&!_0x592b17&&(_0x52cd95=_0x52cd95[_0x4365cf(0x14f)](new RegExp('@'+username+'\x5cb','gi'),_0x4365cf(0x168)));if(_0x205c8b)_0x534eea+=_0x4365cf(0x13e)+_0x205c8b+_0x4365cf(0x1a8);else{if(_0x592b17){const _0x1daa18=_0x4365cf(0x112)+_0x592b17;_0x534eea+=_0x4365cf(0x13e)+_0x1daa18+'\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>';}else _0x534eea+=_0x52cd95;}_0x534eea+=_0x4365cf(0x182)+_0x2627f0+_0x4365cf(0x10d);_0x71c005&&(_0x534eea+=_0x4365cf(0x118)+key+_0x4365cf(0x1a3));_0x1ac2c2['innerHTML']=_0x534eea;const _0x2f817d=document[_0x4365cf(0x160)](_0x4365cf(0x123));_0x2f817d[_0x4365cf(0x1a9)](_0x1ac2c2),_0x2f817d['scrollTop']=_0x2f817d['scrollHeight'];}function deleteMessage(_0x2e5560){const _0x3400ff=_0x402fce,_0x49aba4=firebase[_0x3400ff(0x164)]()[_0x3400ff(0x120)][_0x3400ff(0x105)];db['ref'](_0x3400ff(0x1a5)+roomCode+'/'+_0x49aba4)[_0x3400ff(0x15c)](_0x3400ff(0x11f))[_0x3400ff(0x196)](_0x107da6=>{const _0x58c4a9=_0x3400ff;_0x107da6['exists']()?db['ref'](_0x58c4a9(0x19f)+roomCode+'/messages/'+_0x2e5560)['remove']():alert(_0x58c4a9(0x194));});}function signIn(_0x5ebe26,_0x10ab12){const _0x5aafc7=_0x402fce;firebase[_0x5aafc7(0x164)]()['signInWithEmailAndPassword'](_0x5ebe26,_0x10ab12)[_0x5aafc7(0x196)](()=>{const _0x547f60=_0x5aafc7;if(!firebase[_0x547f60(0x164)]()[_0x547f60(0x120)]['emailVerified']){alert(_0x547f60(0x16e));return;}loadProfileAfterLogin();})[_0x5aafc7(0x15b)](_0x13de2e=>alert(_0x13de2e[_0x5aafc7(0x17b)]));}function signUp(_0x57fd85,_0x10d2a0){const _0x338d96=_0x402fce;firebase[_0x338d96(0x164)]()[_0x338d96(0x11b)](_0x57fd85,_0x10d2a0)['then'](_0x2616e4=>_0x2616e4[_0x338d96(0x1a0)][_0x338d96(0x10e)]())[_0x338d96(0x15b)](_0x3ea2df=>alert(_0x3ea2df[_0x338d96(0x17b)]));}function cleanupOldRooms(){const _0x20cb7e=_0x402fce;db[_0x20cb7e(0x169)]('rooms')['once'](_0x20cb7e(0x11f))['then'](_0xf56552=>{const _0x281636=_0x20cb7e,_0x4e4445=_0xf56552[_0x281636(0x101)]();if(!_0x4e4445)return;const _0x3bc063=Date['now']();for(const _0x188141 in _0x4e4445){if(_0x188141===STATIC_ROOM)continue;const _0x3641f7=_0x4e4445[_0x188141];_0x3bc063-(_0x3641f7[_0x281636(0x139)]||0x0)>0x2*0x3c*0x3e8&&db[_0x281636(0x169)]('rooms/'+_0x188141)[_0x281636(0x153)]();}db[_0x281636(0x169)](_0x281636(0x185))[_0x281636(0x15c)]('value')[_0x281636(0x196)](_0x5b1ebd=>{const _0x9fa27d=_0x281636,_0x1f4c0f=_0x5b1ebd[_0x9fa27d(0x101)]();if(!_0x1f4c0f)return;for(const _0x5bcfb7 in _0x1f4c0f){if(_0x5bcfb7!==STATIC_ROOM)db[_0x9fa27d(0x169)](_0x9fa27d(0x1ae)+_0x5bcfb7)['remove']();}}),db[_0x281636(0x169)](_0x281636(0x109))[_0x281636(0x15c)]('value')[_0x281636(0x196)](_0x4bbc31=>{const _0x621914=_0x281636,_0xff195d=_0x4bbc31[_0x621914(0x101)]();if(!_0xff195d)return;for(const _0x2f2813 in _0xff195d){if(_0x2f2813!==STATIC_ROOM)db[_0x621914(0x169)](_0x621914(0x162)+_0x2f2813)[_0x621914(0x153)]();}});});}function _0x1b95(_0x1c7c54,_0x512cbc){const _0x1b7839=_0x1b78();return _0x1b95=function(_0x1b956f,_0x180ad1){_0x1b956f=_0x1b956f-0xfd;let _0x4a376b=_0x1b7839[_0x1b956f];return _0x4a376b;},_0x1b95(_0x1c7c54,_0x512cbc);}function loadProfileAfterLogin(){const _0xbd47d7=_0x402fce,_0x126071=firebase[_0xbd47d7(0x164)]()[_0xbd47d7(0x120)]['uid'];db[_0xbd47d7(0x169)](_0xbd47d7(0x14b)+_0x126071)[_0xbd47d7(0x15c)](_0xbd47d7(0x11f))[_0xbd47d7(0x196)](_0x397500=>{const _0x229b7d=_0xbd47d7,_0x341365=_0x397500[_0x229b7d(0x101)]();!_0x341365||!_0x341365[_0x229b7d(0x167)]?showScreen(_0x229b7d(0x19e)):(username=_0x341365['username'],document[_0x229b7d(0x160)](_0x229b7d(0x189))['innerText']=username,showScreen(_0x229b7d(0x17a)));});}document[_0x402fce(0x128)](_0x402fce(0x193),()=>{const _0xaad0aa=_0x402fce,_0x31fa6e=document[_0xaad0aa(0x160)](_0xaad0aa(0x110));_0x31fa6e&&_0x31fa6e[_0xaad0aa(0x128)](_0xaad0aa(0x1aa),function(_0x4fa620){const _0xb83dff=_0xaad0aa;_0x4fa620[_0xb83dff(0x16a)]===_0xb83dff(0x12d)&&(_0x4fa620[_0xb83dff(0x197)](),sendMessage());});});function showScreen(_0x3961fe){const _0x3b3172=_0x402fce;['authScreen',_0x3b3172(0x17a),_0x3b3172(0x14c),_0x3b3172(0x115),_0x3b3172(0x184),_0x3b3172(0x19e)][_0x3b3172(0x138)](_0x1b19a2=>{const _0x2325d7=_0x3b3172;document[_0x2325d7(0x160)](_0x1b19a2)['style'][_0x2325d7(0x12a)]=_0x2325d7(0x102);}),document[_0x3b3172(0x160)](_0x3961fe)[_0x3b3172(0x140)][_0x3b3172(0x12a)]='flex';}function genRoomCode(){const _0x22e5a3=_0x402fce,_0x31be32='ABCDEFGHIJKLMNOPQRSTUVWXYZ',_0x58dea8=_0x22e5a3(0x111),_0x11d355=(_0x30fc2f,_0x286319)=>Array[_0x22e5a3(0x18c)]({'length':_0x286319},()=>_0x30fc2f[Math['floor'](Math[_0x22e5a3(0x113)]()*_0x30fc2f[_0x22e5a3(0x174)])])[_0x22e5a3(0x18f)]('');return _0x11d355(_0x58dea8,0x3)+_0x11d355(_0x31be32,0x3)+_0x11d355(_0x58dea8,0x2)+_0x11d355(_0x31be32,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x3eb038=_0x1b95;Date[_0x3eb038(0x16f)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x3eb038(0x169)](_0x3eb038(0x19f)+roomCode)[_0x3eb038(0x171)]({'active':![]}),alert(_0x3eb038(0x10f)),location[_0x3eb038(0x142)]());},0x7530);}function setupSidebarBackHandler(){const _0x531f6a=_0x402fce;window[_0x531f6a(0x128)](_0x531f6a(0xff),()=>{const _0x13acc3=_0x531f6a,_0x5aeec6=document['getElementById'](_0x13acc3(0x166));_0x5aeec6?.[_0x13acc3(0x175)][_0x13acc3(0x127)](_0x13acc3(0x151))&&_0x5aeec6[_0x13acc3(0x175)][_0x13acc3(0x153)]('show');});}function toggleSidebar(){const _0x2c80f2=_0x402fce,_0x4ee8e8=document[_0x2c80f2(0x160)](_0x2c80f2(0x166));if(!_0x4ee8e8[_0x2c80f2(0x175)][_0x2c80f2(0x127)]('show'))_0x4ee8e8['classList'][_0x2c80f2(0x104)](_0x2c80f2(0x151)),history[_0x2c80f2(0x1b6)]({'sidebarOpen':!![]},'');else{_0x4ee8e8[_0x2c80f2(0x175)][_0x2c80f2(0x153)](_0x2c80f2(0x151));if(history[_0x2c80f2(0x14e)]?.[_0x2c80f2(0x1b5)])history[_0x2c80f2(0x19c)]();}}function setupVisibilityAttention(){const _0xd5c35e=_0x402fce;let _0x2a29e2=0x0,_0x3df1ce=document[_0xd5c35e(0x129)];document['addEventListener'](_0xd5c35e(0x146),()=>{const _0xde6107=_0xd5c35e;!document[_0xde6107(0x19b)]&&(document[_0xde6107(0x129)]=_0x3df1ce,_0x2a29e2=0x0);}),window['flagPageAttention']=function(){const _0x541a26=_0xd5c35e;document['hidden']&&(_0x2a29e2++,document['title']='('+_0x2a29e2+_0x541a26(0x17c)+_0x3df1ce);};}function tryEditProfile(){const _0x50729b=_0x402fce,_0x5d64d0=firebase[_0x50729b(0x164)]()[_0x50729b(0x120)][_0x50729b(0x105)];db[_0x50729b(0x169)]('users/'+_0x5d64d0)[_0x50729b(0x1a4)]()[_0x50729b(0x196)](_0x7b1a95=>{const _0x14ed65=_0x50729b,_0x3a801d=_0x7b1a95[_0x14ed65(0x101)]();if(!_0x3a801d)return alert(_0x14ed65(0x195));const _0x3f016e=_0x3a801d[_0x14ed65(0x176)]||0x0,_0x5a3897=Date['now'](),_0x45b214=0x18*0x3c*0x3c*0x3e8;if(_0x5a3897-_0x3f016e<_0x45b214){const _0x466ee2=Math['ceil']((_0x45b214-(_0x5a3897-_0x3f016e))/(0x3c*0x3e8));alert('You\x20can\x20change\x20your\x20username\x20again\x20in\x20'+_0x466ee2+'\x20minutes.');}else showScreen(_0x14ed65(0x19e)),document[_0x14ed65(0x160)](_0x14ed65(0x165))[_0x14ed65(0x11f)]=_0x3a801d[_0x14ed65(0x167)]||'',document[_0x14ed65(0x160)]('profileDescriptionInput')[_0x14ed65(0x11f)]=_0x3a801d[_0x14ed65(0x173)]||'';});}function listenForUserList(){const _0x34dc99=_0x402fce;db['ref'](_0x34dc99(0x14b)+roomCode)['on'](_0x34dc99(0x11f),_0xa82eb3=>{const _0x5aca62=_0x34dc99,_0x4f5b30=_0xa82eb3[_0x5aca62(0x101)]()||{},_0x1fa049=Date[_0x5aca62(0x16f)](),_0xa4512a=Object[_0x5aca62(0x10c)](_0x4f5b30)[_0x5aca62(0x10a)](_0x32fcb7=>{const _0x31be3d=_0x5aca62,_0x29499b=_0x32fcb7['online'],_0x2a16f7=_0x1fa049-_0x32fcb7[_0x31be3d(0x14d)]<=0x1e*0x3c*0x3e8;if(!_0x29499b&&!_0x2a16f7)return'';const _0x273165=_0x29499b?_0x31be3d(0x17d):_0x31be3d(0x103),_0x466e9d=_0x29499b?'üü¢':'üïí',_0xbd46ea=new Date(_0x32fcb7[_0x31be3d(0x14d)])[_0x31be3d(0x183)]([],{'hour':_0x31be3d(0x122),'minute':_0x31be3d(0x122)});return _0x31be3d(0x1a7)+_0x273165+';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27'+sanitizeUsername(_0x32fcb7['username'])+_0x31be3d(0x1a1)+_0x466e9d+'\x20'+_0x32fcb7[_0x31be3d(0x167)]+_0x31be3d(0x1ac);})['join']('');document[_0x5aca62(0x160)](_0x5aca62(0x188))[_0x5aca62(0x144)]=_0xa4512a;});}function sendTyping(_0x31ee45=![]){const _0x5b3c64=_0x402fce,_0x348bd6='rooms/'+roomCode+_0x5b3c64(0x1af)+clientId;_0x31ee45?db[_0x5b3c64(0x169)](_0x348bd6)['remove']():(db[_0x5b3c64(0x169)](_0x348bd6)['set'](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x277528=_0x5b3c64;db[_0x277528(0x169)](_0x348bd6)['remove']();},0xbb8));}function listenForTyping(){const _0x242925=_0x402fce,_0x164587=document[_0x242925(0x160)](_0x242925(0x190));db[_0x242925(0x169)](_0x242925(0x19f)+roomCode+_0x242925(0x11c))['on']('value',_0x540bc4=>{const _0x5b28cc=_0x242925,_0x8aac46=_0x540bc4[_0x5b28cc(0x101)]();if(!_0x8aac46)return _0x164587[_0x5b28cc(0x133)]='';const _0x3f5558=Object[_0x5b28cc(0x10c)](_0x8aac46)[_0x5b28cc(0x191)](_0x97ab73=>_0x97ab73!==username);_0x164587[_0x5b28cc(0x133)]=_0x3f5558['length']?_0x3f5558[_0x5b28cc(0x18f)](',\x20')+'\x20typing...':'';});}function trackPresence(){const _0xf07a6a=_0x402fce;if(!username||!roomCode)return;const _0x1970b4=sanitizeUsername(username),_0x579e60=db[_0xf07a6a(0x169)](_0xf07a6a(0x14b)+roomCode+'/'+_0x1970b4),_0x30fc1e={'username':username,'lastOnline':firebase[_0xf07a6a(0x121)]['ServerValue']['TIMESTAMP'],'online':!![]};_0x579e60['set'](_0x30fc1e),_0x579e60[_0xf07a6a(0x130)]()[_0xf07a6a(0x171)]({'online':![],'lastOnline':Date[_0xf07a6a(0x16f)]()}),updateOnlineIndicator();}function updateOnlineIndicator(){const _0x2b6f0e=_0x402fce,_0xe21a4c=document['getElementById'](_0x2b6f0e(0x163));_0xe21a4c['innerText']=_0x2b6f0e(0x145),_0xe21a4c[_0x2b6f0e(0x140)][_0x2b6f0e(0x135)]='#00ff88';}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0xd7ef95){const _0x336e5a=_0x402fce;db['ref'](_0x336e5a(0x108)+_0xd7ef95)[_0x336e5a(0x1a4)]()[_0x336e5a(0x196)](_0x335f45=>{const _0x575597=_0x336e5a;if(!_0x335f45[_0x575597(0x116)]())return;const _0xbffbb1=_0x335f45[_0x575597(0x101)](),_0x45002e=(_0x575597(0x15f)+_0xbffbb1['username']+_0x575597(0x125)+(_0xbffbb1[_0x575597(0x173)]||_0x575597(0x136))+_0x575597(0x19d)+(_0xbffbb1['usernameHistory']||[])[_0x575597(0x18f)]('\x0a')+_0x575597(0x107)+new Date(_0xbffbb1['lastChanged'])[_0x575597(0x14a)]()+_0x575597(0x124))[_0x575597(0x155)]();document['getElementById']('profileContent')[_0x575597(0x133)]=_0x45002e,document[_0x575597(0x160)](_0x575597(0x119))[_0x575597(0x140)][_0x575597(0x12a)]=_0x575597(0x1b2);});}function initUsernameFlow(){const _0x380ae9=_0x402fce,_0x210803=localStorage[_0x380ae9(0x150)](_0x380ae9(0x1b4));!_0x210803?showScreen(_0x380ae9(0x19e)):(username=_0x210803,document[_0x380ae9(0x160)](_0x380ae9(0x189))[_0x380ae9(0x133)]=username,showScreen(_0x380ae9(0x17a)));}function closeProfile(){const _0x19ebde=_0x402fce;document[_0x19ebde(0x160)]('profileViewer')[_0x19ebde(0x140)][_0x19ebde(0x12a)]=_0x19ebde(0x102);}