const _0x41a088=_0x257b;(function(_0x23da66,_0x59f914){const _0x4ad5aa=_0x257b,_0x6aa792=_0x23da66();while(!![]){try{const _0x236be7=-parseInt(_0x4ad5aa(0x165))/0x1+parseInt(_0x4ad5aa(0x18e))/0x2*(parseInt(_0x4ad5aa(0x173))/0x3)+parseInt(_0x4ad5aa(0x1e0))/0x4+parseInt(_0x4ad5aa(0x20e))/0x5+parseInt(_0x4ad5aa(0x197))/0x6*(parseInt(_0x4ad5aa(0x178))/0x7)+-parseInt(_0x4ad5aa(0x1a7))/0x8+-parseInt(_0x4ad5aa(0x1e8))/0x9*(parseInt(_0x4ad5aa(0x163))/0xa);if(_0x236be7===_0x59f914)break;else _0x6aa792['push'](_0x6aa792['shift']());}catch(_0x3da5c4){_0x6aa792['push'](_0x6aa792['shift']());}}}(_0x504b,0xd3261));const firebaseConfig={'apiKey':_0x41a088(0x210),'authDomain':_0x41a088(0x16b),'databaseURL':_0x41a088(0x1a5),'projectId':_0x41a088(0x155),'storageBucket':_0x41a088(0x1cb),'messagingSenderId':_0x41a088(0x19c),'appId':_0x41a088(0x200),'measurementId':'G-QDESJ2WR42'};firebase['initializeApp'](firebaseConfig);const db=firebase[_0x41a088(0x20f)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x41a088(0x16c)]()['toString'](0x24)['substr'](0x2,0x9),lastActivity=Date['now'](),typingTimeout,gr8stg='';function _0x504b(){const _0xffe527=['floor','margin-left:5px;background:none;border:none;color:red;cursor:pointer;','onload','985049198428','sent','pushState','val','s\x20due\x20to\x20spam.\x20Please\x20wait.','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','🎙️','roomChoiceScreen','description','https://easy-chatroom-default-rtdb.firebaseio.com','remove','1663000BSumdB','audioBase64','display','data:audio/webm;base64,','values','recordBtn','length','/messages/','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','#00ff88','addEventListener','volume','userSidebar','toLocaleString','none','usernameHistory','🚫\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.','push','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','show','👤\x20','innerText','🗑️','lastOnline','Failed\x20to\x20register\x20user\x20in\x20room.','antispam','error','\x20·\x20✓✓</small>','admins/','passwordScreen','\x0aHistory:\x0a','Admins\x20only.','child_added','innerHTML','❌\x20Failed\x20to\x20delete\x20message.','\x20minutes.','easy-chatroom.firebasestorage.app','trim','Enter\x20a\x20valid\x20room\x20code','toUpperCase','chat_username','hidden','passwordError','files','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','TIMESTAMP','profiles/','messages','onlineStatus','ref','cssText','profileUsernameInput','profile_description','onclick','visibilitychange','popstate','ondataavailable','2834772YSDuTE','\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>','No\x20room\x20code\x20available\x20for\x20private\x20rooms','split','\x20<span\x20style=\x22color:red;\x22>Admin</span>','msgInput','ABCDEFGHIJKLMNOPQRSTUVWXYZ','❌\x20Username\x20already\x20taken.','2790171elTDjg','created','antispam/','scrollHeight','[Voice\x20message]','flagPageAttention','●\x20Online','onloadend','typing','from','profileScreen','\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>','You\x27re\x20muted\x20for\x20another\x20','rooms/','lastChanged','ceil','title','</li>','join','createElement','[Image]','imageBase64','child','toLocaleTimeString','1:985049198428:web:d0eb7e2de39887710c9b99','scrollTop','active','audioUrl','sidebarOpen','rooms','050BBB66HH','readAsDataURL','DOMContentLoaded','result','<span\x20style=\x22color:#ff4081;\x22>@$&</span>','\x0aLast\x20Changed:\x20','<span\x20class=\x22sender-name\x22>','<small>','5757825TxeTWk','database','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','profileDescriptionInput','avatarBase64','block','\x0a\x20\x20\x20\x20','getElementById','easy-chatroom','profileViewer','state','userList','now','.sender-name','received','<img\x20src=\x22data:image/png;base64,','<audio\x20controls\x20src=\x22','then','getItem','data','\x0aName:\x20','Microphone\x20permission\x20denied.','80nJpjOv','data:image/png;base64,','135816dnJEIx','Profile\x20not\x20found.','querySelector','getUserMedia','forEach','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20message?','easy-chatroom.firebaseapp.com','random','namePreview','once','key','Delete\x20this\x20message?','users/','exists','828231nTCQdg','\x0aDescription:\x20','classList','set','<img\x20src=\x22','10866611oGLCxF','add','button','replace','style','onDisconnect','catch','/messages','reload','Enter','value','2-digit','get','update','\x20typing...','equalTo','contains','Session\x20expired.','mediaDevices','antispamBlocked/','antispamBlocked','No\x20bio\x20set','2DQcKay','admin','appendChild','onstop','setItem','chatScreen','start','username','limitToLast','6RfQkhb','filter'];_0x504b=function(){return _0xffe527;};return _0x504b();}const STATIC_ROOM=_0x41a088(0x206),MAX_MESSAGES=0xfa,sound=new Audio('sounds/beep.mp3');sound[_0x41a088(0x1b2)]=0.3;function _0x257b(_0x5e7dbb,_0x504ba4){const _0x504b6c=_0x504b();return _0x257b=function(_0x257bd4,_0x123d92){_0x257bd4=_0x257bd4-0x155;let _0x1d387d=_0x504b6c[_0x257bd4];return _0x1d387d;},_0x257b(_0x5e7dbb,_0x504ba4);}let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![];function checkIfAdmin(){const _0x41566a=_0x41a088,_0x1bc850=db['ref']('admins/'+roomCode+'/'+sanitizeUsername(username));return _0x1bc850[_0x41566a(0x16e)](_0x41566a(0x182))[_0x41566a(0x15e)](_0x36c93d=>{const _0x5571aa=_0x41566a;isRoomAdmin=_0x36c93d[_0x5571aa(0x172)]();});}function toggleRecording(){const _0x1d55d3=_0x41a088;isRecording?stopRecording():navigator[_0x1d55d3(0x18a)][_0x1d55d3(0x168)]({'audio':!![]})[_0x1d55d3(0x15e)](_0x56f22a=>{const _0x36e8c1=_0x1d55d3;mediaRecorder=new MediaRecorder(_0x56f22a),mediaRecorder[_0x36e8c1(0x194)](),isRecording=!![],document['getElementById']('recordBtn')[_0x36e8c1(0x1bc)]='⏹️',audioChunks=[],mediaRecorder[_0x36e8c1(0x1df)]=_0x26b52e=>audioChunks['push'](_0x26b52e[_0x36e8c1(0x160)]),mediaRecorder[_0x36e8c1(0x191)]=()=>{const _0x27afe4=_0x36e8c1;clearTimeout(recordingTimer);const _0x42e91d=new Blob(audioChunks,{'type':'audio/webm'}),_0x2b3fdc=new FileReader();_0x2b3fdc[_0x27afe4(0x1ef)]=()=>{const _0x539b0d=_0x27afe4,_0x54d5fb=_0x2b3fdc[_0x539b0d(0x209)]['split'](',')[0x1],_0x197e50=db['ref']()[_0x539b0d(0x1b8)]()[_0x539b0d(0x16f)];db[_0x539b0d(0x1d8)](_0x539b0d(0x1f5)+roomCode+_0x539b0d(0x1ae)+_0x197e50)[_0x539b0d(0x176)]({'msg':_0x539b0d(0x1ec),'audioBase64':_0x54d5fb,'sender':username,'senderId':clientId,'timestamp':Date['now']()});},_0x2b3fdc[_0x27afe4(0x207)](_0x42e91d);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x1d55d3(0x17e)](_0x284b2b=>{const _0x485124=_0x1d55d3;alert(_0x485124(0x162));});}function stopRecording(){const _0x7f951b=_0x41a088;mediaRecorder&&isRecording&&(mediaRecorder['stop'](),isRecording=![],document['getElementById'](_0x7f951b(0x1ac))[_0x7f951b(0x1bc)]=_0x7f951b(0x1a2));}window[_0x41a088(0x19b)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x6dadd1){const _0x2c3201=_0x41a088;return _0x6dadd1[_0x2c3201(0x17b)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x6adedc=_0x41a088,_0x43a1a0=document['getElementById'](_0x6adedc(0x1da))[_0x6adedc(0x182)]['trim'](),_0x478da1=document[_0x6adedc(0x215)]('profileDescriptionInput')[_0x6adedc(0x182)][_0x6adedc(0x1cc)](),_0x5a896b=document[_0x6adedc(0x215)]('profileAvatarInput'),_0x4bddce=document['getElementById']('profileError');if(!_0x43a1a0||!_0x478da1){_0x4bddce[_0x6adedc(0x1bc)]=_0x6adedc(0x1a1),_0x4bddce['style'][_0x6adedc(0x1a9)]=_0x6adedc(0x213);return;}const _0x5cbef9=sanitizeUsername(_0x43a1a0),_0x4a2a7b=db[_0x6adedc(0x1d8)]('profiles/'+_0x5cbef9);_0x4a2a7b[_0x6adedc(0x16e)](_0x6adedc(0x182))[_0x6adedc(0x15e)](_0x5c84e4=>{const _0x490af1=_0x6adedc;if(_0x5c84e4[_0x490af1(0x172)]()){_0x4bddce['innerText']=_0x490af1(0x1e7),_0x4bddce[_0x490af1(0x17c)][_0x490af1(0x1a9)]='block';return;}let _0x1d6c7b='';if(_0x5a896b[_0x490af1(0x1d2)][_0x490af1(0x1ad)]>0x0){const _0x4fecaa=new FileReader();_0x4fecaa[_0x490af1(0x1ef)]=()=>{const _0x29d997=_0x490af1;_0x1d6c7b=_0x4fecaa['result'][_0x29d997(0x1e3)](',')[0x1],saveProfile(_0x43a1a0,_0x478da1,_0x1d6c7b,_0x5cbef9);},_0x4fecaa[_0x490af1(0x207)](_0x5a896b[_0x490af1(0x1d2)][0x0]);}else saveProfile(_0x43a1a0,_0x478da1,_0x1d6c7b,_0x5cbef9);});}function saveProfile(_0x32aebe,_0x4abc45,_0x2fa1f3,_0x428e8a){const _0x8e9a11=_0x41a088,_0x46f027=Date[_0x8e9a11(0x159)](),_0x203371=[_0x32aebe];db[_0x8e9a11(0x1d8)](_0x8e9a11(0x1d5)+_0x428e8a)[_0x8e9a11(0x176)]({'username':_0x32aebe,'description':_0x4abc45,'avatarBase64':_0x2fa1f3,'lastChanged':_0x46f027,'usernameHistory':_0x203371}),localStorage[_0x8e9a11(0x192)](_0x8e9a11(0x1cf),_0x32aebe),localStorage['setItem'](_0x8e9a11(0x1db),_0x4abc45),document[_0x8e9a11(0x215)](_0x8e9a11(0x16d))[_0x8e9a11(0x1bc)]=_0x32aebe,showScreen(_0x8e9a11(0x1a3));}function generateRoom(){const _0x3001d8=_0x41a088;roomCode=genRoomCode(),db[_0x3001d8(0x1d8)]('rooms/'+roomCode)[_0x3001d8(0x176)]({'active':!![],'created':Date[_0x3001d8(0x159)]()}),startChat();}function joinRoom(){const _0x461e93=_0x41a088,_0x2a1400=roomCode||document[_0x461e93(0x215)]('roomCodeInput')['value'][_0x461e93(0x1cc)]()[_0x461e93(0x1ce)]();if(!_0x2a1400)return alert(_0x461e93(0x1cd));roomCode=_0x2a1400;if(roomCode===STATIC_ROOM){showScreen(_0x461e93(0x1c4));return;}db['ref']('rooms/'+roomCode)[_0x461e93(0x184)]()[_0x461e93(0x15e)](_0x1ecab0=>{const _0x44b679=_0x461e93;_0x1ecab0['exists']()&&_0x1ecab0[_0x44b679(0x19f)]()[_0x44b679(0x202)]!==![]?startChat():alert(_0x44b679(0x1b9));});}function startChat(){const _0x1a7188=_0x41a088;if(!roomCode||!username)return alert('Missing\x20room\x20or\x20user\x20information.'),showScreen(_0x1a7188(0x1a3));checkIfAdmin()[_0x1a7188(0x15e)](()=>{const _0xd49887=_0x1a7188,_0x3ccdec=sanitizeUsername(username),_0x349967=db[_0xd49887(0x1d8)]('users/'+roomCode+'/'+_0x3ccdec),_0x53f0a5={'username':username,'lastOnline':firebase[_0xd49887(0x20f)]['ServerValue']['TIMESTAMP'],'online':!![]};db[_0xd49887(0x1d8)](_0xd49887(0x1c3)+roomCode+'/'+_0x3ccdec)[_0xd49887(0x16e)](_0xd49887(0x182))[_0xd49887(0x15e)](_0x46cd3c=>{const _0x2b2ce9=_0xd49887;_0x46cd3c['exists']()&&(_0x53f0a5[_0x2b2ce9(0x18f)]=!![]),_0x349967[_0x2b2ce9(0x176)](_0x53f0a5,_0x11cc99=>{const _0x3a9c28=_0x2b2ce9;if(_0x11cc99)return alert(_0x3a9c28(0x1bf)),showScreen(_0x3a9c28(0x1a3));_0x349967[_0x3a9c28(0x17d)]()[_0x3a9c28(0x185)]({'online':![],'lastOnline':Date[_0x3a9c28(0x159)]()}),document[_0x3a9c28(0x215)]('userDisplay')[_0x3a9c28(0x1bc)]=username,roomCode===STATIC_ROOM?document[_0x3a9c28(0x215)]('roomDisplay')[_0x3a9c28(0x1bc)]=_0x3a9c28(0x1e2):document[_0x3a9c28(0x215)]('roomDisplay')[_0x3a9c28(0x1bc)]=roomCode,showScreen(_0x3a9c28(0x193)),listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();});});});}function validateStaticRoomPassword(){const _0x465b6a=_0x41a088,_0x143a6f=document[_0x465b6a(0x215)]('staticPasswordInput')['value'],_0x23fc4d=document[_0x465b6a(0x215)](_0x465b6a(0x1d1));db['ref']('gr8stg')['get']()[_0x465b6a(0x15e)](_0x2cc316=>{const _0x3d3c10=_0x465b6a,_0x4137bc=_0x2cc316[_0x3d3c10(0x19f)]();_0x143a6f===_0x4137bc?(_0x23fc4d['style'][_0x3d3c10(0x1a9)]=_0x3d3c10(0x1b5),startChat()):_0x23fc4d[_0x3d3c10(0x17c)]['display']=_0x3d3c10(0x213);});}document['getElementById']('imageInput')[_0x41a088(0x1b1)]('change',function(){const _0xb4e75d=_0x41a088,_0x4a90a2=this[_0xb4e75d(0x1d2)][0x0];if(!_0x4a90a2)return;const _0x2b682c=new FileReader();_0x2b682c[_0xb4e75d(0x1ef)]=function(){const _0x352fdd=_0xb4e75d,_0x4cf553=_0x2b682c[_0x352fdd(0x209)][_0x352fdd(0x1e3)](',')[0x1],_0x4cb4b1=db[_0x352fdd(0x1d8)]()[_0x352fdd(0x1b8)]()['key'];db[_0x352fdd(0x1d8)](_0x352fdd(0x1f5)+roomCode+_0x352fdd(0x1ae)+_0x4cb4b1)[_0x352fdd(0x176)]({'msg':_0x352fdd(0x1fc),'imageBase64':_0x4cf553,'sender':username,'senderId':clientId,'timestamp':Date[_0x352fdd(0x159)]()});},_0x2b682c[_0xb4e75d(0x207)](_0x4a90a2);});function sendMessage(){const _0x326b99=_0x41a088,_0x5ca8f2=document[_0x326b99(0x215)](_0x326b99(0x1e5)),_0x5e2527=_0x5ca8f2[_0x326b99(0x182)]['trim']();if(!_0x5e2527)return;const _0x3896ab=Date[_0x326b99(0x159)](),_0x40c1a4=sanitizeUsername(username);db[_0x326b99(0x1d8)](_0x326b99(0x18b)+roomCode+'/'+_0x40c1a4)['once']('value')[_0x326b99(0x15e)](_0x16845d=>{const _0x118642=_0x326b99,_0x27f820=_0x16845d[_0x118642(0x19f)]();if(_0x27f820&&_0x3896ab<_0x27f820){const _0x520e14=Math[_0x118642(0x1f7)]((_0x27f820-_0x3896ab)/0x3e8);alert('⛔\x20You\x27re\x20blocked\x20for\x20'+_0x520e14+_0x118642(0x1a0));return;}const _0x3af35c=db[_0x118642(0x1d8)]('muted/'+roomCode+'/'+sanitizeUsername(username));_0x3af35c[_0x118642(0x16e)]('value')[_0x118642(0x15e)](_0x47742c=>{const _0xb9a271=_0x118642,_0xed9189=_0x47742c['val']();if(_0xed9189&&Date['now']()<_0xed9189){const _0x5011ce=Math[_0xb9a271(0x1f7)]((_0xed9189-Date[_0xb9a271(0x159)]())/0x3e8);return alert(_0xb9a271(0x1f4)+_0x5011ce+'\x20seconds.');}});const _0x5a1789=db[_0x118642(0x1d8)](_0x118642(0x1ea)+roomCode+'/'+_0x40c1a4);_0x5a1789['once'](_0x118642(0x182))['then'](_0x2aaf9f=>{const _0x3277eb=_0x118642,_0x5d2b07=_0x2aaf9f[_0x3277eb(0x19f)]()||[],_0x477db7=[..._0x5d2b07,_0x3896ab]['filter'](_0x332c3f=>_0x3896ab-_0x332c3f<0xbb8);if(_0x477db7[_0x3277eb(0x1ad)]>=0x5){alert(_0x3277eb(0x1b7)),db['ref'](_0x3277eb(0x18b)+roomCode+'/'+_0x40c1a4)[_0x3277eb(0x176)](_0x3896ab+0x7530);const _0x156340=db[_0x3277eb(0x1d8)]('rooms/'+roomCode+_0x3277eb(0x17f));_0x156340['orderByChild']('senderId')[_0x3277eb(0x187)](clientId)['limitToLast'](0x5)[_0x3277eb(0x16e)](_0x3277eb(0x182),_0x5df275=>{_0x5df275['forEach'](_0x2b243d=>{const _0x3d8403=_0x257b;_0x156340[_0x3d8403(0x1fe)](_0x2b243d['key'])[_0x3d8403(0x1a6)]();});}),_0x5a1789[_0x3277eb(0x176)]([]);return;}_0x5a1789[_0x3277eb(0x176)](_0x477db7);const _0x2d3c83=db['ref']()[_0x3277eb(0x1b8)]()[_0x3277eb(0x16f)];db['ref'](_0x3277eb(0x1f5)+roomCode+_0x3277eb(0x1ae)+_0x2d3c83)[_0x3277eb(0x176)]({'msg':_0x5e2527,'sender':username,'senderId':clientId,'timestamp':_0x3896ab}),_0x5ca8f2['value']='',sendTyping(!![]),lastActivity=_0x3896ab;});});}function listenForMessages(){const _0x2455d8=_0x41a088,_0x4df95c=db['ref'](_0x2455d8(0x1f5)+roomCode+'/messages'),_0x2322c4=_0x4df95c[_0x2455d8(0x196)](MAX_MESSAGES);_0x2322c4['on'](_0x2455d8(0x1c7),_0x264d93=>{const _0x49f4d6=_0x2455d8,_0x107df1=_0x264d93[_0x49f4d6(0x19f)](),{msg:_0x36d8f8,sender:_0x5e6d16,senderId:_0x1f36df,timestamp:_0x17fba3}=_0x107df1,_0x49245b=_0x1f36df===clientId,_0x5c54ac=_0x107df1[_0x49f4d6(0x203)]||null,_0x3a2b4c=_0x107df1[_0x49f4d6(0x1a8)]||null;addMessage(_0x36d8f8,_0x5e6d16,_0x17fba3,_0x49245b,_0x5c54ac,_0x3a2b4c,_0x264d93[_0x49f4d6(0x16f)]),roomCode!==STATIC_ROOM&&db[_0x49f4d6(0x1d8)](_0x49f4d6(0x1f5)+roomCode+_0x49f4d6(0x1ae)+_0x264d93[_0x49f4d6(0x16f)])['remove'](),!_0x49245b&&(sound['play'](),flagPageAttention());});}function addMessage(_0x528e1f,_0x139ae9,_0x5c590e,_0x3d68ad,_0x42044a=null,_0x330e2c=null,_0x1cf330=null){const _0x5c4850=_0x41a088,_0x73cbe5=document[_0x5c4850(0x1fb)]('div');_0x73cbe5[_0x5c4850(0x175)]['add']('msg',_0x3d68ad?_0x5c4850(0x19d):_0x5c4850(0x15b));const _0x46adc2=new Date(_0x5c590e)[_0x5c4850(0x1ff)]([],{'hour':_0x5c4850(0x183),'minute':_0x5c4850(0x183)});let _0x3b5b9e='';if(_0x139ae9&&roomCode){const _0x34028e=db[_0x5c4850(0x1d8)]('admins/'+roomCode+'/'+sanitizeUsername(_0x139ae9));_0x34028e[_0x5c4850(0x16e)](_0x5c4850(0x182))[_0x5c4850(0x15e)](_0x117a6f=>{const _0xae69bc=_0x5c4850;_0x117a6f['exists']()&&(_0x73cbe5[_0xae69bc(0x167)](_0xae69bc(0x15a))[_0xae69bc(0x1c8)]+=_0xae69bc(0x1e1));});}let _0xe3ec4a=_0x5c4850(0x20c)+_0x139ae9+'</span><br>';_0x3d68ad?_0xe3ec4a+=_0x5c4850(0x20d)+_0x46adc2+_0x5c4850(0x1c2):_0xe3ec4a+=_0x5c4850(0x20d)+_0x46adc2+'</small>';!_0x42044a&&!_0x330e2c&&(_0x528e1f=_0x528e1f['replace'](new RegExp('@'+username+'\x5cb','gi'),_0x5c4850(0x20a)));if(_0x42044a)_0xe3ec4a+=_0x5c4850(0x15d)+_0x42044a+_0x5c4850(0x1af);else{if(_0x330e2c){const _0x46ca13=_0x5c4850(0x1aa)+_0x330e2c;_0xe3ec4a+=_0x5c4850(0x15d)+_0x46ca13+_0x5c4850(0x1af);}else{if(data[_0x5c4850(0x1fd)]){const _0x58febe=_0x5c4850(0x164)+data[_0x5c4850(0x1fd)];_0xe3ec4a+=_0x5c4850(0x177)+_0x58febe+_0x5c4850(0x1f3);}else _0xe3ec4a+=_0x528e1f;}}isRoomAdmin&&_0x1cf330&&(delBtn[_0x5c4850(0x17c)][_0x5c4850(0x1d9)]='margin-left:8px;background:none;border:none;color:red;font-weight:bold;cursor:pointer;',delBtn[_0x5c4850(0x1dc)]=()=>{const _0x36be58=_0x5c4850;confirm(_0x36be58(0x16a))&&db['ref'](_0x36be58(0x1f5)+roomCode+_0x36be58(0x1ae)+_0x1cf330)[_0x36be58(0x1a6)]()[_0x36be58(0x15e)](()=>{_0x73cbe5['remove']();})[_0x36be58(0x17e)](_0x23b325=>{const _0x332f5c=_0x36be58;alert(_0x332f5c(0x1c9)),console[_0x332f5c(0x1c1)](_0x23b325);});},_0x73cbe5['appendChild'](delBtn));_0xe3ec4a+=_0x5c4850(0x20d)+_0x46adc2+'</small>',_0x73cbe5[_0x5c4850(0x1c8)]=_0xe3ec4a;const _0x5e5d3f=document[_0x5c4850(0x215)](_0x5c4850(0x1d6));_0x5e5d3f[_0x5c4850(0x190)](_0x73cbe5);if(isRoomAdmin){const _0x205c12=document[_0x5c4850(0x1fb)](_0x5c4850(0x17a));_0x205c12[_0x5c4850(0x1bc)]=_0x5c4850(0x1bd),_0x205c12[_0x5c4850(0x17c)][_0x5c4850(0x1d9)]=_0x5c4850(0x19a),_0x205c12[_0x5c4850(0x1dc)]=()=>{const _0x119748=_0x5c4850;confirm(_0x119748(0x170))&&(db[_0x119748(0x1d8)](_0x119748(0x1f5)+roomCode+'/messages/'+snap[_0x119748(0x16f)])[_0x119748(0x1a6)](),_0x73cbe5[_0x119748(0x1a6)]());},_0x73cbe5[_0x5c4850(0x190)](_0x205c12);}_0x5e5d3f[_0x5c4850(0x201)]=_0x5e5d3f[_0x5c4850(0x1eb)];}function cleanupOldRooms(){const _0x1a16cc=_0x41a088;db['ref'](_0x1a16cc(0x205))[_0x1a16cc(0x16e)]('value')[_0x1a16cc(0x15e)](_0x544ca3=>{const _0x4c4816=_0x1a16cc,_0x470312=_0x544ca3[_0x4c4816(0x19f)]();if(!_0x470312)return;const _0x2c6678=Date[_0x4c4816(0x159)]();for(const _0x327fcd in _0x470312){if(_0x327fcd===STATIC_ROOM)continue;const _0x790cdb=_0x470312[_0x327fcd];_0x2c6678-(_0x790cdb[_0x4c4816(0x1e9)]||0x0)>0x2*0x3c*0x3e8&&db[_0x4c4816(0x1d8)](_0x4c4816(0x1f5)+_0x327fcd)[_0x4c4816(0x1a6)]();}db[_0x4c4816(0x1d8)](_0x4c4816(0x1c0))[_0x4c4816(0x16e)]('value')[_0x4c4816(0x15e)](_0x5b00ef=>{const _0x49fb50=_0x4c4816,_0x5ea020=_0x5b00ef[_0x49fb50(0x19f)]();if(!_0x5ea020)return;for(const _0x36c799 in _0x5ea020){if(_0x36c799!==STATIC_ROOM)db[_0x49fb50(0x1d8)]('antispam/'+_0x36c799)[_0x49fb50(0x1a6)]();}}),db[_0x4c4816(0x1d8)](_0x4c4816(0x18c))[_0x4c4816(0x16e)]('value')[_0x4c4816(0x15e)](_0x4f1dc7=>{const _0x4c9056=_0x4c4816,_0x60d4df=_0x4f1dc7[_0x4c9056(0x19f)]();if(!_0x60d4df)return;for(const _0x4fc769 in _0x60d4df){if(_0x4fc769!==STATIC_ROOM)db['ref'](_0x4c9056(0x18b)+_0x4fc769)[_0x4c9056(0x1a6)]();}});});}document[_0x41a088(0x1b1)](_0x41a088(0x208),()=>{const _0x40c3ec=_0x41a088,_0x391901=document[_0x40c3ec(0x215)](_0x40c3ec(0x1e5));_0x391901&&_0x391901[_0x40c3ec(0x1b1)]('keypress',function(_0x2030f3){const _0x397727=_0x40c3ec;_0x2030f3[_0x397727(0x16f)]===_0x397727(0x181)&&(_0x2030f3['preventDefault'](),sendMessage());});});function showScreen(_0xa3dae9){const _0x216fbf=_0x41a088;['usernameScreen',_0x216fbf(0x1a3),'codeEntryScreen',_0x216fbf(0x193),_0x216fbf(0x1c4),_0x216fbf(0x1f2)][_0x216fbf(0x169)](_0x55008e=>{const _0x10d831=_0x216fbf;document['getElementById'](_0x55008e)[_0x10d831(0x17c)]['display']=_0x10d831(0x1b5);}),document['getElementById'](_0xa3dae9)[_0x216fbf(0x17c)]['display']='flex';}function genRoomCode(){const _0x139aa0=_0x41a088,_0x1bbfd6=_0x139aa0(0x1e6),_0x2d846f='0123456789',_0x38b5d4=(_0x515ee7,_0x30c3d2)=>Array[_0x139aa0(0x1f1)]({'length':_0x30c3d2},()=>_0x515ee7[Math[_0x139aa0(0x199)](Math[_0x139aa0(0x16c)]()*_0x515ee7[_0x139aa0(0x1ad)])])[_0x139aa0(0x1fa)]('');return _0x38b5d4(_0x2d846f,0x3)+_0x38b5d4(_0x1bbfd6,0x3)+_0x38b5d4(_0x2d846f,0x2)+_0x38b5d4(_0x1bbfd6,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x16691a=_0x257b;Date[_0x16691a(0x159)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x16691a(0x1d8)]('rooms/'+roomCode)[_0x16691a(0x185)]({'active':![]}),alert(_0x16691a(0x189)),location[_0x16691a(0x180)]());},0x7530);}function setupSidebarBackHandler(){const _0x24419d=_0x41a088;window[_0x24419d(0x1b1)](_0x24419d(0x1de),()=>{const _0x5bea0a=_0x24419d,_0x131a15=document[_0x5bea0a(0x215)](_0x5bea0a(0x1b3));_0x131a15?.[_0x5bea0a(0x175)][_0x5bea0a(0x188)]('show')&&_0x131a15['classList']['remove'](_0x5bea0a(0x1ba));});}function toggleSidebar(){const _0x5a2de6=_0x41a088,_0x4835c1=document['getElementById'](_0x5a2de6(0x1b3));if(!_0x4835c1['classList'][_0x5a2de6(0x188)]('show'))_0x4835c1[_0x5a2de6(0x175)][_0x5a2de6(0x179)](_0x5a2de6(0x1ba)),history[_0x5a2de6(0x19e)]({'sidebarOpen':!![]},'');else{_0x4835c1['classList'][_0x5a2de6(0x1a6)]('show');if(history[_0x5a2de6(0x157)]?.[_0x5a2de6(0x204)])history['back']();}}function setupVisibilityAttention(){const _0xa69fb3=_0x41a088;let _0x5a3000=0x0,_0x2f1e20=document[_0xa69fb3(0x1f8)];document[_0xa69fb3(0x1b1)](_0xa69fb3(0x1dd),()=>{const _0x117d70=_0xa69fb3;!document[_0x117d70(0x1d0)]&&(document[_0x117d70(0x1f8)]=_0x2f1e20,_0x5a3000=0x0);}),window[_0xa69fb3(0x1ed)]=function(){const _0x3b9811=_0xa69fb3;document[_0x3b9811(0x1d0)]&&(_0x5a3000++,document[_0x3b9811(0x1f8)]='('+_0x5a3000+')\x20New\x20message\x20•\x20'+_0x2f1e20);};}function tryEditProfile(){const _0x3dae88=_0x41a088,_0x5e1c05=sanitizeUsername(username);db['ref'](_0x3dae88(0x1d5)+_0x5e1c05)[_0x3dae88(0x184)]()[_0x3dae88(0x15e)](_0x435010=>{const _0x2f241c=_0x3dae88,_0x4babd5=_0x435010[_0x2f241c(0x19f)]();if(!_0x4babd5)return alert(_0x2f241c(0x166));const _0x1468f6=_0x4babd5[_0x2f241c(0x1f6)]||0x0,_0x1b2c6c=Date['now'](),_0x43f30a=0x18*0x3c*0x3c*0x3e8;if(_0x1b2c6c-_0x1468f6<_0x43f30a){const _0x1d7021=Math['ceil']((_0x43f30a-(_0x1b2c6c-_0x1468f6))/(0x3c*0x3e8));alert(_0x2f241c(0x1d3)+_0x1d7021+_0x2f241c(0x1ca));}else showScreen('profileScreen'),document[_0x2f241c(0x215)](_0x2f241c(0x1da))['value']=username,document['getElementById'](_0x2f241c(0x211))['value']=_0x4babd5[_0x2f241c(0x1a4)]||'';});}function listenForUserList(){const _0x59f356=_0x41a088;db[_0x59f356(0x1d8)](_0x59f356(0x171)+roomCode)['on'](_0x59f356(0x182),_0x14b08f=>{const _0x4ca16b=_0x59f356,_0x58e598=_0x14b08f[_0x4ca16b(0x19f)]()||{},_0x4da3d2=Date['now'](),_0x1b87a9=Object['values'](_0x58e598)['map'](_0x4e5002=>{const _0x2f2632=_0x4ca16b,_0x46094a=_0x4e5002['online'],_0x1e4fc4=_0x4da3d2-_0x4e5002[_0x2f2632(0x1be)]<=0x1e*0x3c*0x3e8;if(!_0x46094a&&!_0x1e4fc4)return'';const _0x15e970=_0x4e5002[_0x2f2632(0x212)]?_0x2f2632(0x15c)+_0x4e5002[_0x2f2632(0x212)]+'\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;\x22>':_0x2f2632(0x1bb),_0x4cdeb5=_0x46094a?_0x2f2632(0x1b0):'#888',_0x3b46ca=_0x46094a?'🟢':'🕒',_0x121e68=new Date(_0x4e5002[_0x2f2632(0x1be)])[_0x2f2632(0x1ff)]([],{'hour':_0x2f2632(0x183),'minute':'2-digit'}),_0x2dfd4d=_0x4e5002[_0x2f2632(0x18f)]?_0x2f2632(0x1e4):'';return'<li\x20style=\x22color:'+_0x4cdeb5+';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27'+sanitizeUsername(_0x4e5002[_0x2f2632(0x195)])+'\x27)\x22>'+_0x15e970+_0x3b46ca+'\x20'+_0x4e5002[_0x2f2632(0x195)]+_0x2dfd4d+_0x2f2632(0x1f9);})[_0x4ca16b(0x1fa)]('');document[_0x4ca16b(0x215)](_0x4ca16b(0x158))['innerHTML']=_0x1b87a9;});}function sendTyping(_0x2785b7=![]){const _0x91a9d7=_0x41a088,_0x44a4cc=_0x91a9d7(0x1f5)+roomCode+'/typing/'+clientId;_0x2785b7?db['ref'](_0x44a4cc)[_0x91a9d7(0x1a6)]():(db[_0x91a9d7(0x1d8)](_0x44a4cc)[_0x91a9d7(0x176)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x1ef5cc=_0x91a9d7;db['ref'](_0x44a4cc)[_0x1ef5cc(0x1a6)]();},0xbb8));}function listenForTyping(){const _0xfe76e2=_0x41a088,_0x48a714=document[_0xfe76e2(0x215)](_0xfe76e2(0x1f0));db['ref'](_0xfe76e2(0x1f5)+roomCode+'/typing')['on'](_0xfe76e2(0x182),_0x52924f=>{const _0x3fce3d=_0xfe76e2,_0x2796cb=_0x52924f[_0x3fce3d(0x19f)]();if(!_0x2796cb)return _0x48a714['innerText']='';const _0x530130=Object[_0x3fce3d(0x1ab)](_0x2796cb)[_0x3fce3d(0x198)](_0x284a06=>_0x284a06!==username);_0x48a714[_0x3fce3d(0x1bc)]=_0x530130[_0x3fce3d(0x1ad)]?_0x530130[_0x3fce3d(0x1fa)](',\x20')+_0x3fce3d(0x186):'';});}function trackPresence(){const _0x38aa6f=_0x41a088;if(!username||!roomCode)return;const _0x555429=sanitizeUsername(username),_0x46d316=db[_0x38aa6f(0x1d8)]('users/'+roomCode+'/'+_0x555429),_0x289156={'username':username,'lastOnline':firebase['database']['ServerValue'][_0x38aa6f(0x1d4)],'online':!![]};db[_0x38aa6f(0x1d8)](_0x38aa6f(0x1c3)+roomCode+'/'+_0x555429)[_0x38aa6f(0x16e)]('value')[_0x38aa6f(0x15e)](_0x3a3064=>{const _0x298541=_0x38aa6f;if(_0x3a3064[_0x298541(0x172)]())_0x289156[_0x298541(0x18f)]=!![];_0x46d316[_0x298541(0x176)](_0x289156),_0x46d316[_0x298541(0x17d)]()[_0x298541(0x185)]({'online':![],'lastOnline':Date[_0x298541(0x159)]()}),updateOnlineIndicator();});}function muteUser(_0x195825,_0x15aa9c){const _0x34b6b0=_0x41a088;if(!isRoomAdmin)return alert(_0x34b6b0(0x1c6));const _0x2c4d58=Date[_0x34b6b0(0x159)]()+_0x15aa9c*0x3c*0x3e8;db['ref']('muted/'+roomCode+'/'+sanitizeUsername(_0x195825))['set'](_0x2c4d58);}function unmuteUser(_0xa97b9f){const _0x1054cf=_0x41a088;if(!isRoomAdmin)return alert(_0x1054cf(0x1c6));db[_0x1054cf(0x1d8)]('muted/'+roomCode+'/'+sanitizeUsername(_0xa97b9f))[_0x1054cf(0x1a6)]();}function updateOnlineIndicator(){const _0x14e484=_0x41a088,_0x2aa4a1=document[_0x14e484(0x215)](_0x14e484(0x1d7));_0x2aa4a1['innerText']=_0x14e484(0x1ee),_0x2aa4a1[_0x14e484(0x17c)]['color']=_0x14e484(0x1b0);}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x3ef11a){const _0x346906=_0x41a088;db['ref'](_0x346906(0x1d5)+_0x3ef11a)[_0x346906(0x184)]()[_0x346906(0x15e)](_0x2612f9=>{const _0x34ca36=_0x346906;if(!_0x2612f9[_0x34ca36(0x172)]())return;const _0x1de29a=_0x2612f9[_0x34ca36(0x19f)](),_0x2d0585=(_0x34ca36(0x161)+_0x1de29a[_0x34ca36(0x195)]+_0x34ca36(0x174)+(_0x1de29a['description']||_0x34ca36(0x18d))+_0x34ca36(0x1c5)+(_0x1de29a[_0x34ca36(0x1b6)]||[])['join']('\x0a')+_0x34ca36(0x20b)+new Date(_0x1de29a[_0x34ca36(0x1f6)])[_0x34ca36(0x1b4)]()+_0x34ca36(0x214))['trim']();document['getElementById']('profileContent')[_0x34ca36(0x1bc)]=_0x2d0585,document[_0x34ca36(0x215)](_0x34ca36(0x156))[_0x34ca36(0x17c)][_0x34ca36(0x1a9)]='block';});}function initUsernameFlow(){const _0x1f6e68=_0x41a088,_0x10f6e6=localStorage[_0x1f6e68(0x15f)]('chat_username');!_0x10f6e6?showScreen(_0x1f6e68(0x1f2)):(username=_0x10f6e6,document[_0x1f6e68(0x215)](_0x1f6e68(0x16d))[_0x1f6e68(0x1bc)]=username,showScreen(_0x1f6e68(0x1a3)));}function closeProfile(){const _0x24497a=_0x41a088;document[_0x24497a(0x215)](_0x24497a(0x156))['style'][_0x24497a(0x1a9)]=_0x24497a(0x1b5);}