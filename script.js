const _0x2f1c03=_0x22a7;(function(_0x176822,_0xb000c6){const _0x19c1ba=_0x22a7,_0x5d293a=_0x176822();while(!![]){try{const _0x453be3=-parseInt(_0x19c1ba(0x24b))/0x1*(parseInt(_0x19c1ba(0x241))/0x2)+-parseInt(_0x19c1ba(0x1f4))/0x3*(parseInt(_0x19c1ba(0x1f5))/0x4)+-parseInt(_0x19c1ba(0x216))/0x5*(parseInt(_0x19c1ba(0x273))/0x6)+parseInt(_0x19c1ba(0x26d))/0x7*(parseInt(_0x19c1ba(0x229))/0x8)+parseInt(_0x19c1ba(0x24c))/0x9*(parseInt(_0x19c1ba(0x29a))/0xa)+parseInt(_0x19c1ba(0x25d))/0xb+parseInt(_0x19c1ba(0x2a0))/0xc;if(_0x453be3===_0xb000c6)break;else _0x5d293a['push'](_0x5d293a['shift']());}catch(_0x15d688){_0x5d293a['push'](_0x5d293a['shift']());}}}(_0x3f13,0x3c70e));function _0x3f13(){const _0x337e61=['profileScreen','trim','\x0aName:\x20','https://easy-chatroom-default-rtdb.firebaseio.com','once','value','sent','getItem','\x20typing...','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','innerHTML','10WCoQaQ','/messages/','<small>','set','child','profileError','6693612rjnlzp','color','Enter\x20a\x20valid\x20room\x20code','push','style','show','msgInput','0123456789','audioBase64','senderId','onlineStatus','ref','remove','profileViewer','msg','back','appendChild',')\x20New\x20message\x20•\x20','mediaDevices','antispamBlocked','users/','</span>','admins/','pushState','lastChanged','easy-chatroom','1:985049198428:web:d0eb7e2de39887710c9b99','2898ANqpps','436KuLonu','lastOnline','#00ff88','initializeApp','description','update','equalTo','profiles/','limitToLast','profileUsernameInput','setItem','\x0aHistory:\x0a','namePreview','antispam/','onstop','addEventListener','onDisconnect','readAsDataURL','antispamBlocked/','⛔\x20You\x27re\x20blocked\x20for\x20','roomCodeInput','\x0aDescription:\x20','block','key',';cursor:pointer;display:flex;align-items:center;gap:6px;\x22\x20onclick=\x22viewProfile(\x27','\x20seconds.','rooms','<img\x20src=\x22','flagPageAttention','<img\x20src=\x22data:image/png;base64,','data','now','You\x27re\x20muted\x20for\x20another\x20','10yYEjAL','keypress','values','ceil','passwordScreen','●\x20Online','avatar_base64','volume','database','<span\x20class=\x22sender-name\x22>','data:audio/webm;base64,','none','ondataavailable','antispam','toUpperCase','length','\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>','sidebarOpen','audio/webm','4352AzGeLz','rooms/','.sender-name','[Voice\x20message]','staticPasswordInput','play','profileContent','catch','\x22\x20style=\x22width:28px;height:28px;border-radius:50%;margin-right:8px;vertical-align:middle;\x22>','files','\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;vertical-align:middle;\x22>','<span\x20style=\x22margin-right:8px;\x22>👤</span>','start','roomChoiceScreen','preventDefault','\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>','join','innerText','title','stop','get','\x20minutes.','createElement','active','2UAXzEG','chatScreen','replace','userDisplay','userList','classList','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','state','floor','flex','447934wSwMzi','2384784XokACQ','add','val','admin','usernameScreen','scrollHeight','profileDescriptionInput','display','online','</div>','<audio\x20controls\x20src=\x22','\x0a\x20\x20\x20\x20\x20\x20</li>','sidebarAvatarPreview','random','typing','\x20<span\x20style=\x22color:red;\x22>Admin</span>','TIMESTAMP','569063zHPFsq','onload','<span\x20style=\x22margin-right:5px;\x22>👤</span>','DOMContentLoaded','data:image/png;base64,','hidden','from','visibilitychange','2-digit','easy-chatroom.firebaseapp.com','muted/','No\x20room\x20code\x20available\x20for\x20private\x20rooms','popstate','then','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','usernameHistory','4802uZBDth','/messages','chat_username','/typing','recordBtn','received','1340700UORCeL','Session\x20expired.','easy-chatroom.firebasestorage.app','🚫\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.','roomDisplay','getElementById','exists','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','Admins\x20only.','split','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleString','getUserMedia','contains','G-QDESJ2WR42','avatarBase64','toLocaleTimeString','onloadend','created','toString','username','<div>','profile_description','\x0aLast\x20Changed:\x20','filter','ServerValue','codeEntryScreen','s\x20due\x20to\x20spam.\x20Please\x20wait.'];_0x3f13=function(){return _0x337e61;};return _0x3f13();}function _0x22a7(_0x2abc87,_0x3b7d2a){const _0x3f1342=_0x3f13();return _0x22a7=function(_0x22a71a,_0x2fadc5){_0x22a71a=_0x22a71a-0x1df;let _0xae8e7e=_0x3f1342[_0x22a71a];return _0xae8e7e;},_0x22a7(_0x2abc87,_0x3b7d2a);}const firebaseConfig={'apiKey':_0x2f1c03(0x298),'authDomain':_0x2f1c03(0x266),'databaseURL':_0x2f1c03(0x292),'projectId':_0x2f1c03(0x1f2),'storageBucket':_0x2f1c03(0x275),'messagingSenderId':'985049198428','appId':_0x2f1c03(0x1f3),'measurementId':_0x2f1c03(0x281)};firebase[_0x2f1c03(0x1f8)](firebaseConfig);const db=firebase[_0x2f1c03(0x21e)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x2f1c03(0x259)]()[_0x2f1c03(0x286)](0x24)['substr'](0x2,0x9),lastActivity=Date[_0x2f1c03(0x214)](),typingTimeout,gr8stg='';const STATIC_ROOM='050BBB66HH',MAX_MESSAGES=0xfa,sound=new Audio('sounds/beep.mp3');sound[_0x2f1c03(0x21d)]=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![];function checkIfAdmin(){const _0x391347=_0x2f1c03,_0x5aa7fa=db[_0x391347(0x1e4)]('admins/'+roomCode+'/'+sanitizeUsername(username));return _0x5aa7fa['once'](_0x391347(0x294))[_0x391347(0x26a)](_0xb7f01a=>{isRoomAdmin=_0xb7f01a['exists']();});}function toggleRecording(){const _0x305dbe=_0x2f1c03;isRecording?stopRecording():navigator[_0x305dbe(0x1eb)][_0x305dbe(0x27f)]({'audio':!![]})[_0x305dbe(0x26a)](_0x3eda0d=>{const _0x1cee01=_0x305dbe;mediaRecorder=new MediaRecorder(_0x3eda0d),mediaRecorder[_0x1cee01(0x235)](),isRecording=!![],document[_0x1cee01(0x278)](_0x1cee01(0x271))[_0x1cee01(0x23a)]='⏹️',audioChunks=[],mediaRecorder[_0x1cee01(0x222)]=_0x4b4a6d=>audioChunks[_0x1cee01(0x2a3)](_0x4b4a6d[_0x1cee01(0x213)]),mediaRecorder[_0x1cee01(0x203)]=()=>{const _0x2f89e7=_0x1cee01;clearTimeout(recordingTimer);const _0x78060=new Blob(audioChunks,{'type':_0x2f89e7(0x228)}),_0x271b35=new FileReader();_0x271b35[_0x2f89e7(0x284)]=()=>{const _0x39cec8=_0x2f89e7,_0xfabcd0=_0x271b35['result'][_0x39cec8(0x27c)](',')[0x1],_0x5d0bc2=db['ref']()[_0x39cec8(0x2a3)]()[_0x39cec8(0x20c)];db[_0x39cec8(0x1e4)](_0x39cec8(0x22a)+roomCode+_0x39cec8(0x29b)+_0x5d0bc2)[_0x39cec8(0x29d)]({'msg':_0x39cec8(0x22c),'audioBase64':_0xfabcd0,'sender':username,'senderId':clientId,'timestamp':Date['now']()});},_0x271b35['readAsDataURL'](_0x78060);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x305dbe(0x230)](_0x261fb8=>{alert('Microphone\x20permission\x20denied.');});}function stopRecording(){const _0x3a80ea=_0x2f1c03;mediaRecorder&&isRecording&&(mediaRecorder[_0x3a80ea(0x23c)](),isRecording=![],document[_0x3a80ea(0x278)](_0x3a80ea(0x271))[_0x3a80ea(0x23a)]='🎙️');}window[_0x2f1c03(0x25e)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x382dcb){const _0x14ced3=_0x2f1c03;return _0x382dcb[_0x14ced3(0x243)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x5b507d=_0x2f1c03,_0x562568=document[_0x5b507d(0x278)](_0x5b507d(0x1fe))['value'][_0x5b507d(0x290)](),_0x5f4fa7=document[_0x5b507d(0x278)]('profileDescriptionInput')[_0x5b507d(0x294)]['trim'](),_0x2d90d1=document[_0x5b507d(0x278)](_0x5b507d(0x29f));if(!_0x562568||!_0x5f4fa7){_0x2d90d1[_0x5b507d(0x23a)]='Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.',_0x2d90d1[_0x5b507d(0x2a4)][_0x5b507d(0x253)]='block';return;}const _0x54a666=sanitizeUsername(_0x562568),_0x179bf1=db[_0x5b507d(0x1e4)](_0x5b507d(0x1fc)+_0x54a666);_0x179bf1['once']('value')[_0x5b507d(0x26a)](_0x1e761d=>{const _0x5e8cab=_0x5b507d;if(_0x1e761d['exists']()){_0x2d90d1['innerText']='❌\x20Username\x20already\x20taken.',_0x2d90d1['style'][_0x5e8cab(0x253)]=_0x5e8cab(0x20b);return;}});}function saveProfile(_0x20ca90,_0x293330,_0xa5e478){const _0x4d9e86=_0x2f1c03,_0x667669=Date[_0x4d9e86(0x214)](),_0x1f623b=[_0x20ca90];db[_0x4d9e86(0x1e4)](_0x4d9e86(0x1fc)+_0xa5e478)[_0x4d9e86(0x29d)]({'username':_0x20ca90,'description':_0x293330,'lastChanged':_0x667669,'usernameHistory':_0x1f623b}),localStorage[_0x4d9e86(0x1ff)](_0x4d9e86(0x26f),_0x20ca90),localStorage[_0x4d9e86(0x1ff)](_0x4d9e86(0x289),_0x293330),document[_0x4d9e86(0x278)](_0x4d9e86(0x201))['innerText']=_0x20ca90,showScreen('roomChoiceScreen');}function generateRoom(){const _0x49e060=_0x2f1c03;roomCode=genRoomCode(),db[_0x49e060(0x1e4)](_0x49e060(0x22a)+roomCode)[_0x49e060(0x29d)]({'active':!![],'created':Date[_0x49e060(0x214)]()}),startChat();}function joinRoom(){const _0x2a0089=_0x2f1c03,_0x8b8a09=roomCode||document[_0x2a0089(0x278)](_0x2a0089(0x209))['value'][_0x2a0089(0x290)]()[_0x2a0089(0x224)]();if(!_0x8b8a09)return alert(_0x2a0089(0x2a2));roomCode=_0x8b8a09;if(roomCode===STATIC_ROOM){showScreen(_0x2a0089(0x21a));return;}db[_0x2a0089(0x1e4)](_0x2a0089(0x22a)+roomCode)['get']()[_0x2a0089(0x26a)](_0x3b75f8=>{const _0x4d31db=_0x2a0089;_0x3b75f8[_0x4d31db(0x279)]()&&_0x3b75f8[_0x4d31db(0x24e)]()[_0x4d31db(0x240)]!==![]?startChat():alert(_0x4d31db(0x27a));});}function startChat(){const _0x17a733=_0x2f1c03;if(!roomCode||!username)return alert('Missing\x20room\x20or\x20user\x20information.'),showScreen('roomChoiceScreen');checkIfAdmin()[_0x17a733(0x26a)](()=>{const _0x1505ce=_0x17a733,_0x40163b=sanitizeUsername(username),_0x1ecd38=db['ref'](_0x1505ce(0x1ed)+roomCode+'/'+_0x40163b),_0x58a51b={'username':username,'lastOnline':firebase[_0x1505ce(0x21e)][_0x1505ce(0x28c)][_0x1505ce(0x25c)],'online':!![]};db[_0x1505ce(0x1e4)](_0x1505ce(0x1ef)+roomCode+'/'+_0x40163b)[_0x1505ce(0x293)](_0x1505ce(0x294))[_0x1505ce(0x26a)](_0x41e37=>{const _0x5ef907=_0x1505ce;_0x41e37['exists']()&&(_0x58a51b['admin']=!![]),_0x1ecd38[_0x5ef907(0x29d)](_0x58a51b,_0x5e27fc=>{const _0x5036c8=_0x5ef907;if(_0x5e27fc)return alert('Failed\x20to\x20register\x20user\x20in\x20room.'),showScreen(_0x5036c8(0x236));_0x1ecd38[_0x5036c8(0x205)]()[_0x5036c8(0x1fa)]({'online':![],'lastOnline':Date[_0x5036c8(0x214)]()}),document[_0x5036c8(0x278)](_0x5036c8(0x244))[_0x5036c8(0x23a)]=username,roomCode===STATIC_ROOM?document[_0x5036c8(0x278)](_0x5036c8(0x277))[_0x5036c8(0x23a)]=_0x5036c8(0x268):document[_0x5036c8(0x278)](_0x5036c8(0x277))['innerText']=roomCode,showScreen(_0x5036c8(0x242)),listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();});});});}function validateStaticRoomPassword(){const _0x506350=_0x2f1c03,_0x316e50=document['getElementById'](_0x506350(0x22d))['value'],_0x460661=document[_0x506350(0x278)]('passwordError');db[_0x506350(0x1e4)]('gr8stg')[_0x506350(0x23d)]()[_0x506350(0x26a)](_0x59dde7=>{const _0x330656=_0x506350,_0x5bca6c=_0x59dde7[_0x330656(0x24e)]();_0x316e50===_0x5bca6c?(_0x460661['style'][_0x330656(0x253)]=_0x330656(0x221),startChat()):_0x460661[_0x330656(0x2a4)][_0x330656(0x253)]='block';});}function sendMessage(){const _0x50b8ec=_0x2f1c03,_0x5b75cc=document[_0x50b8ec(0x278)](_0x50b8ec(0x1df)),_0x575c41=_0x5b75cc[_0x50b8ec(0x294)][_0x50b8ec(0x290)]();if(!_0x575c41)return;const _0x32b39a=Date[_0x50b8ec(0x214)](),_0x559023=sanitizeUsername(username);db[_0x50b8ec(0x1e4)]('antispamBlocked/'+roomCode+'/'+_0x559023)[_0x50b8ec(0x293)](_0x50b8ec(0x294))[_0x50b8ec(0x26a)](_0x59c3f6=>{const _0x214fed=_0x50b8ec,_0x3e97df=_0x59c3f6[_0x214fed(0x24e)]();if(_0x3e97df&&_0x32b39a<_0x3e97df){const _0x7f9979=Math['ceil']((_0x3e97df-_0x32b39a)/0x3e8);alert(_0x214fed(0x208)+_0x7f9979+_0x214fed(0x28e));return;}const _0xa41bec=db['ref'](_0x214fed(0x267)+roomCode+'/'+sanitizeUsername(username));_0xa41bec['once'](_0x214fed(0x294))[_0x214fed(0x26a)](_0x5d010a=>{const _0x26edf3=_0x214fed,_0x257d14=_0x5d010a[_0x26edf3(0x24e)]();if(_0x257d14&&Date['now']()<_0x257d14){const _0x419cfb=Math[_0x26edf3(0x219)]((_0x257d14-Date[_0x26edf3(0x214)]())/0x3e8);return alert(_0x26edf3(0x215)+_0x419cfb+_0x26edf3(0x20e));}});const _0x3b50c2=db['ref'](_0x214fed(0x202)+roomCode+'/'+_0x559023);_0x3b50c2[_0x214fed(0x293)](_0x214fed(0x294))[_0x214fed(0x26a)](_0x2b1fa7=>{const _0x1e58d8=_0x214fed,_0x3e321a=_0x2b1fa7[_0x1e58d8(0x24e)]()||[],_0x129c2d=[..._0x3e321a,_0x32b39a][_0x1e58d8(0x28b)](_0x5bb074=>_0x32b39a-_0x5bb074<0xbb8);if(_0x129c2d[_0x1e58d8(0x225)]>=0x5){alert(_0x1e58d8(0x276)),db[_0x1e58d8(0x1e4)](_0x1e58d8(0x207)+roomCode+'/'+_0x559023)[_0x1e58d8(0x29d)](_0x32b39a+0x7530);const _0x23e707=db[_0x1e58d8(0x1e4)](_0x1e58d8(0x22a)+roomCode+_0x1e58d8(0x26e));_0x23e707['orderByChild'](_0x1e58d8(0x1e2))[_0x1e58d8(0x1fb)](clientId)['limitToLast'](0x5)[_0x1e58d8(0x293)]('value',_0xfce8f=>{_0xfce8f['forEach'](_0x3051c4=>{const _0x2c5413=_0x22a7;_0x23e707[_0x2c5413(0x29e)](_0x3051c4['key'])[_0x2c5413(0x1e5)]();});}),_0x3b50c2[_0x1e58d8(0x29d)]([]);return;}_0x3b50c2[_0x1e58d8(0x29d)](_0x129c2d);const _0x5800ee=db[_0x1e58d8(0x1e4)]()[_0x1e58d8(0x2a3)]()[_0x1e58d8(0x20c)];db[_0x1e58d8(0x1e4)]('rooms/'+roomCode+_0x1e58d8(0x29b)+_0x5800ee)[_0x1e58d8(0x29d)]({'msg':_0x575c41,'sender':username,'senderId':clientId,'timestamp':_0x32b39a}),_0x5b75cc[_0x1e58d8(0x294)]='',sendTyping(!![]),lastActivity=_0x32b39a;});});}function listenForMessages(){const _0x11499d=_0x2f1c03,_0x2b52ae=db['ref']('rooms/'+roomCode+'/messages'),_0x267b02=_0x2b52ae[_0x11499d(0x1fd)](MAX_MESSAGES);_0x267b02['on']('child_added',_0x559322=>{const _0x218c3c=_0x11499d,_0x4a0638=_0x559322['val'](),{msg:_0x4f7a23,sender:_0xaf2004,senderId:_0x124bba,timestamp:_0x42c3b7}=_0x4a0638,_0x34f8e9=_0x124bba===clientId,_0x3f7b99=_0x4a0638['audioUrl']||null,_0x208fd3=_0x4a0638[_0x218c3c(0x1e1)]||null;addMessage(_0x4a0638,_0x34f8e9,_0x559322['key']),roomCode!==STATIC_ROOM&&db['ref'](_0x218c3c(0x22a)+roomCode+'/messages/'+_0x559322['key'])[_0x218c3c(0x1e5)](),!_0x34f8e9&&(sound[_0x218c3c(0x22e)](),flagPageAttention());});}function addMessage(_0x1ae866,_0x6c360b,_0x91f2d2=null){const _0x1331e4=_0x2f1c03,{msg:_0x7479f1,sender:_0x4c766d,senderId:_0x3a54fe,timestamp:_0x2b8ef6,audioUrl:_0x4ec586,audioBase64:_0x199f43,imageBase64:_0x78046f,avatarBase64:_0x23bbf3}=_0x1ae866,_0x4f552e=document[_0x1331e4(0x23f)]('div');_0x4f552e[_0x1331e4(0x246)]['add'](_0x1331e4(0x1e7),_0x6c360b?_0x1331e4(0x295):_0x1331e4(0x272));const _0x1448cf=new Date(_0x2b8ef6)[_0x1331e4(0x283)]([],{'hour':_0x1331e4(0x265),'minute':'2-digit'}),_0x3dfd7b=_0x23bbf3?_0x1331e4(0x212)+_0x23bbf3+_0x1331e4(0x231):_0x1331e4(0x234);let _0x4d23b7=_0x7479f1?.['replace'](new RegExp('@'+username+'\x5cb','gi'),'<span\x20style=\x22color:#ff4081;\x22>@$&</span>'),_0x1ddffe=_0x3dfd7b+_0x1331e4(0x21f)+_0x4c766d+_0x1331e4(0x1ee);_0x6c360b?_0x1ddffe+='<small>'+_0x1448cf+'\x20·\x20✓✓</small>':_0x1ddffe+=_0x1331e4(0x29c)+_0x1448cf+'</small>';if(_0x4ec586)_0x1ddffe+=_0x1331e4(0x256)+_0x4ec586+_0x1331e4(0x247);else{if(_0x199f43){const _0x150af0=_0x1331e4(0x220)+_0x199f43;_0x1ddffe+=_0x1331e4(0x256)+_0x150af0+'\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>';}else{if(_0x78046f){const _0x1e714e=_0x1331e4(0x261)+_0x78046f;_0x1ddffe+=_0x1331e4(0x210)+_0x1e714e+_0x1331e4(0x226);}else _0x1ddffe+=_0x1331e4(0x288)+_0x4d23b7+_0x1331e4(0x255);}}_0x4f552e[_0x1331e4(0x299)]=_0x1ddffe;const _0x165f88=_0x4f552e['querySelector'](_0x1331e4(0x22b));_0x165f88&&db['ref'](_0x1331e4(0x1ef)+roomCode+'/'+sanitizeUsername(_0x4c766d))['once']('value')[_0x1331e4(0x26a)](_0x1f72fe=>{const _0x535708=_0x1331e4;_0x1f72fe[_0x535708(0x279)]()&&(_0x165f88[_0x535708(0x299)]+=_0x535708(0x238));});const _0x32a1af=document[_0x1331e4(0x278)]('messages');_0x32a1af[_0x1331e4(0x1e9)](_0x4f552e),_0x32a1af['scrollTop']=_0x32a1af[_0x1331e4(0x251)];}function cleanupOldRooms(){const _0x21e8b6=_0x2f1c03;db[_0x21e8b6(0x1e4)](_0x21e8b6(0x20f))[_0x21e8b6(0x293)](_0x21e8b6(0x294))[_0x21e8b6(0x26a)](_0x12a0b9=>{const _0x436ddb=_0x21e8b6,_0x198fe1=_0x12a0b9[_0x436ddb(0x24e)]();if(!_0x198fe1)return;const _0x5cdf6d=Date[_0x436ddb(0x214)]();for(const _0x315e8c in _0x198fe1){if(_0x315e8c===STATIC_ROOM)continue;const _0x573847=_0x198fe1[_0x315e8c];_0x5cdf6d-(_0x573847[_0x436ddb(0x285)]||0x0)>0x2*0x3c*0x3e8&&db[_0x436ddb(0x1e4)](_0x436ddb(0x22a)+_0x315e8c)[_0x436ddb(0x1e5)]();}db['ref'](_0x436ddb(0x223))[_0x436ddb(0x293)](_0x436ddb(0x294))[_0x436ddb(0x26a)](_0x397095=>{const _0x308155=_0x436ddb,_0xc8e103=_0x397095[_0x308155(0x24e)]();if(!_0xc8e103)return;for(const _0x345660 in _0xc8e103){if(_0x345660!==STATIC_ROOM)db[_0x308155(0x1e4)](_0x308155(0x202)+_0x345660)[_0x308155(0x1e5)]();}}),db[_0x436ddb(0x1e4)](_0x436ddb(0x1ec))[_0x436ddb(0x293)]('value')['then'](_0x511219=>{const _0x229677=_0x436ddb,_0x50ef09=_0x511219['val']();if(!_0x50ef09)return;for(const _0x167dc5 in _0x50ef09){if(_0x167dc5!==STATIC_ROOM)db[_0x229677(0x1e4)](_0x229677(0x207)+_0x167dc5)[_0x229677(0x1e5)]();}});});}document[_0x2f1c03(0x204)](_0x2f1c03(0x260),()=>{const _0x14300a=_0x2f1c03,_0x4c0c5c=document[_0x14300a(0x278)](_0x14300a(0x1df));_0x4c0c5c&&_0x4c0c5c[_0x14300a(0x204)](_0x14300a(0x217),function(_0x52a71e){const _0x53ce33=_0x14300a;_0x52a71e[_0x53ce33(0x20c)]==='Enter'&&(_0x52a71e[_0x53ce33(0x237)](),sendMessage());});});function showScreen(_0x375642){const _0x12805a=_0x2f1c03;[_0x12805a(0x250),_0x12805a(0x236),_0x12805a(0x28d),_0x12805a(0x242),_0x12805a(0x21a),_0x12805a(0x28f)]['forEach'](_0x46feed=>{const _0x435633=_0x12805a;document[_0x435633(0x278)](_0x46feed)[_0x435633(0x2a4)]['display']=_0x435633(0x221);}),document['getElementById'](_0x375642)['style'][_0x12805a(0x253)]=_0x12805a(0x24a);}function genRoomCode(){const _0x49a562=_0x2f1c03,_0x1ac06c='ABCDEFGHIJKLMNOPQRSTUVWXYZ',_0x5444c4=_0x49a562(0x1e0),_0xe87df4=(_0x4b496a,_0xa740d1)=>Array[_0x49a562(0x263)]({'length':_0xa740d1},()=>_0x4b496a[Math[_0x49a562(0x249)](Math[_0x49a562(0x259)]()*_0x4b496a[_0x49a562(0x225)])])['join']('');return _0xe87df4(_0x5444c4,0x3)+_0xe87df4(_0x1ac06c,0x3)+_0xe87df4(_0x5444c4,0x2)+_0xe87df4(_0x1ac06c,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x486b07=_0x22a7;Date[_0x486b07(0x214)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x486b07(0x1e4)](_0x486b07(0x22a)+roomCode)[_0x486b07(0x1fa)]({'active':![]}),alert(_0x486b07(0x274)),location['reload']());},0x7530);}function setupSidebarBackHandler(){const _0x539427=_0x2f1c03;window['addEventListener'](_0x539427(0x269),()=>{const _0x49196f=_0x539427,_0x5094b3=document[_0x49196f(0x278)]('userSidebar');_0x5094b3?.[_0x49196f(0x246)][_0x49196f(0x280)]('show')&&_0x5094b3[_0x49196f(0x246)][_0x49196f(0x1e5)](_0x49196f(0x2a5));});}function toggleSidebar(){const _0x9c8c59=_0x2f1c03,_0x375507=document[_0x9c8c59(0x278)]('userSidebar');if(!_0x375507['classList']['contains'](_0x9c8c59(0x2a5)))_0x375507['classList'][_0x9c8c59(0x24d)](_0x9c8c59(0x2a5)),history[_0x9c8c59(0x1f0)]({'sidebarOpen':!![]},'');else{_0x375507['classList'][_0x9c8c59(0x1e5)](_0x9c8c59(0x2a5));if(history[_0x9c8c59(0x248)]?.[_0x9c8c59(0x227)])history[_0x9c8c59(0x1e8)]();}}function setupVisibilityAttention(){const _0x3f3917=_0x2f1c03;let _0x4f9d95=0x0,_0x2efca2=document['title'];document[_0x3f3917(0x204)](_0x3f3917(0x264),()=>{const _0x3a2fde=_0x3f3917;!document['hidden']&&(document[_0x3a2fde(0x23b)]=_0x2efca2,_0x4f9d95=0x0);}),window[_0x3f3917(0x211)]=function(){const _0x51da0e=_0x3f3917;document[_0x51da0e(0x262)]&&(_0x4f9d95++,document[_0x51da0e(0x23b)]='('+_0x4f9d95+_0x51da0e(0x1ea)+_0x2efca2);};}function tryEditProfile(){const _0x417d98=_0x2f1c03,_0x585e56=sanitizeUsername(username);db[_0x417d98(0x1e4)](_0x417d98(0x1fc)+_0x585e56)[_0x417d98(0x23d)]()[_0x417d98(0x26a)](_0x12422a=>{const _0x3e9265=_0x417d98,_0x5ee35c=_0x12422a[_0x3e9265(0x24e)]();if(!_0x5ee35c)return alert('Profile\x20not\x20found.');const _0x4282e1=_0x5ee35c[_0x3e9265(0x1f1)]||0x0,_0x49b1f6=Date[_0x3e9265(0x214)](),_0x4ce469=0x18*0x3c*0x3c*0x3e8;if(_0x49b1f6-_0x4282e1<_0x4ce469){const _0x2a022a=Math[_0x3e9265(0x219)]((_0x4ce469-(_0x49b1f6-_0x4282e1))/(0x3c*0x3e8));alert(_0x3e9265(0x26b)+_0x2a022a+_0x3e9265(0x23e));}else showScreen(_0x3e9265(0x28f)),document[_0x3e9265(0x278)](_0x3e9265(0x1fe))['value']=username,document['getElementById'](_0x3e9265(0x252))['value']=_0x5ee35c[_0x3e9265(0x1f9)]||'';});}function listenForUserList(){const _0x230e3b=_0x2f1c03;db['ref'](_0x230e3b(0x1ed)+roomCode)['on'](_0x230e3b(0x294),_0x2caa00=>{const _0x9f9722=_0x230e3b,_0x3f3d5e=_0x2caa00[_0x9f9722(0x24e)]()||{},_0x272bc1=Date[_0x9f9722(0x214)](),_0x316f3f=Object[_0x9f9722(0x218)](_0x3f3d5e)['map'](_0x2dd1b=>{const _0xe0c848=_0x9f9722,_0x2b65c6=_0x2dd1b[_0xe0c848(0x254)],_0x61be2e=_0x272bc1-_0x2dd1b[_0xe0c848(0x1f6)]<=0x1e*0x3c*0x3e8;if(!_0x2b65c6&&!_0x61be2e)return'';const _0x2cb5da=_0x2b65c6?_0xe0c848(0x1f7):'#888',_0x46e04a=_0x2b65c6?'🟢':'🕒',_0x11c910=new Date(_0x2dd1b[_0xe0c848(0x1f6)])[_0xe0c848(0x283)]([],{'hour':_0xe0c848(0x265),'minute':_0xe0c848(0x265)}),_0x28950e=_0x2dd1b[_0xe0c848(0x282)]?'<img\x20src=\x22data:image/png;base64,'+_0x2dd1b[_0xe0c848(0x282)]+_0xe0c848(0x233):_0xe0c848(0x25f),_0xfc9f04=_0x2dd1b['admin']?_0xe0c848(0x25b):'';return'<li\x20style=\x22color:'+_0x2cb5da+_0xe0c848(0x20d)+sanitizeUsername(_0x2dd1b[_0xe0c848(0x287)])+_0xe0c848(0x27d)+_0x28950e+_0x46e04a+'\x20'+_0x2dd1b[_0xe0c848(0x287)]+_0xfc9f04+_0xe0c848(0x257);})[_0x9f9722(0x239)]('');document['getElementById'](_0x9f9722(0x245))[_0x9f9722(0x299)]=_0x316f3f;});}function sendTyping(_0x196115=![]){const _0x3ae1c2=_0x2f1c03,_0x4c52cc=_0x3ae1c2(0x22a)+roomCode+'/typing/'+clientId;_0x196115?db[_0x3ae1c2(0x1e4)](_0x4c52cc)['remove']():(db['ref'](_0x4c52cc)[_0x3ae1c2(0x29d)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x1edeeb=_0x3ae1c2;db['ref'](_0x4c52cc)[_0x1edeeb(0x1e5)]();},0xbb8));}function listenForTyping(){const _0xe20597=_0x2f1c03,_0x1624f7=document['getElementById'](_0xe20597(0x25a));db[_0xe20597(0x1e4)](_0xe20597(0x22a)+roomCode+_0xe20597(0x270))['on'](_0xe20597(0x294),_0x109a16=>{const _0x50d354=_0xe20597,_0xd997a9=_0x109a16[_0x50d354(0x24e)]();if(!_0xd997a9)return _0x1624f7[_0x50d354(0x23a)]='';const _0x5e1bde=Object['values'](_0xd997a9)[_0x50d354(0x28b)](_0x12188d=>_0x12188d!==username);_0x1624f7[_0x50d354(0x23a)]=_0x5e1bde['length']?_0x5e1bde[_0x50d354(0x239)](',\x20')+_0x50d354(0x297):'';});}function trackPresence(){const _0x1c0990=_0x2f1c03;if(!username||!roomCode)return;const _0x22a9d1=sanitizeUsername(username),_0x642cc0=db[_0x1c0990(0x1e4)]('users/'+roomCode+'/'+_0x22a9d1),_0x168f41=localStorage['getItem']('avatar_base64')||'',_0xe825af={'username':username,'lastOnline':firebase['database'][_0x1c0990(0x28c)][_0x1c0990(0x25c)],'online':!![],'avatarBase64':_0x168f41};db[_0x1c0990(0x1e4)]('admins/'+roomCode+'/'+_0x22a9d1)[_0x1c0990(0x293)](_0x1c0990(0x294))[_0x1c0990(0x26a)](_0x5ae605=>{const _0x5b3687=_0x1c0990;if(_0x5ae605['exists']())_0xe825af[_0x5b3687(0x24f)]=!![];_0x642cc0[_0x5b3687(0x29d)](_0xe825af),_0x642cc0[_0x5b3687(0x205)]()[_0x5b3687(0x1fa)]({'online':![],'lastOnline':Date[_0x5b3687(0x214)]()}),updateOnlineIndicator();});}function uploadSidebarAvatar(_0x4b2acc){const _0x4b333c=_0x2f1c03;if(!_0x4b2acc[_0x4b333c(0x232)][_0x4b333c(0x225)])return;const _0x1a0eb2=new FileReader();_0x1a0eb2['onloadend']=()=>{const _0xc971b0=_0x4b333c,_0x299d44=_0x1a0eb2['result']['split'](',')[0x1];localStorage['setItem'](_0xc971b0(0x21c),_0x299d44);const _0x43b2ee=document[_0xc971b0(0x278)](_0xc971b0(0x258));_0x43b2ee['src']='data:image/png;base64,'+_0x299d44,_0x43b2ee[_0xc971b0(0x2a4)][_0xc971b0(0x253)]=_0xc971b0(0x20b),trackPresence();},_0x1a0eb2[_0x4b333c(0x206)](_0x4b2acc[_0x4b333c(0x232)][0x0]);}function muteUser(_0x188cc2,_0x411c4a){const _0x248a38=_0x2f1c03;if(!isRoomAdmin)return alert(_0x248a38(0x27b));const _0x30b0c7=Date[_0x248a38(0x214)]()+_0x411c4a*0x3c*0x3e8;db['ref']('muted/'+roomCode+'/'+sanitizeUsername(_0x188cc2))[_0x248a38(0x29d)](_0x30b0c7);}function unmuteUser(_0x36a4f5){const _0x393112=_0x2f1c03;if(!isRoomAdmin)return alert(_0x393112(0x27b));db[_0x393112(0x1e4)]('muted/'+roomCode+'/'+sanitizeUsername(_0x36a4f5))[_0x393112(0x1e5)]();}function updateOnlineIndicator(){const _0x4d2909=_0x2f1c03,_0x35379e=document[_0x4d2909(0x278)](_0x4d2909(0x1e3));_0x35379e[_0x4d2909(0x23a)]=_0x4d2909(0x21b),_0x35379e['style'][_0x4d2909(0x2a1)]=_0x4d2909(0x1f7);}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0xcc8d1d){const _0x2dbf59=_0x2f1c03;db['ref']('profiles/'+_0xcc8d1d)[_0x2dbf59(0x23d)]()[_0x2dbf59(0x26a)](_0x262633=>{const _0x415d07=_0x2dbf59;if(!_0x262633[_0x415d07(0x279)]())return;const _0x452cd2=_0x262633[_0x415d07(0x24e)](),_0x515367=(_0x415d07(0x291)+_0x452cd2['username']+_0x415d07(0x20a)+(_0x452cd2[_0x415d07(0x1f9)]||'No\x20bio\x20set')+_0x415d07(0x200)+(_0x452cd2[_0x415d07(0x26c)]||[])['join']('\x0a')+_0x415d07(0x28a)+new Date(_0x452cd2[_0x415d07(0x1f1)])[_0x415d07(0x27e)]()+'\x0a\x20\x20\x20\x20')[_0x415d07(0x290)]();document[_0x415d07(0x278)](_0x415d07(0x22f))['innerText']=_0x515367,document['getElementById'](_0x415d07(0x1e6))[_0x415d07(0x2a4)][_0x415d07(0x253)]=_0x415d07(0x20b);});}function initUsernameFlow(){const _0x38025d=_0x2f1c03,_0x3768ab=localStorage[_0x38025d(0x296)](_0x38025d(0x26f));!_0x3768ab?showScreen(_0x38025d(0x28f)):(username=_0x3768ab,document[_0x38025d(0x278)]('namePreview')['innerText']=username,showScreen(_0x38025d(0x236)));}function closeProfile(){const _0x45b0b5=_0x2f1c03;document[_0x45b0b5(0x278)](_0x45b0b5(0x1e6))[_0x45b0b5(0x2a4)][_0x45b0b5(0x253)]=_0x45b0b5(0x221);}