const _0x3d1446=_0x42b7;(function(_0x222325,_0x3ad372){const _0x469489=_0x42b7,_0x1f92e3=_0x222325();while(!![]){try{const _0x5c0d9d=parseInt(_0x469489(0x20c))/0x1+parseInt(_0x469489(0x232))/0x2+-parseInt(_0x469489(0x1fb))/0x3*(parseInt(_0x469489(0x241))/0x4)+-parseInt(_0x469489(0x24b))/0x5*(parseInt(_0x469489(0x221))/0x6)+parseInt(_0x469489(0x21d))/0x7*(-parseInt(_0x469489(0x217))/0x8)+parseInt(_0x469489(0x236))/0x9+-parseInt(_0x469489(0x1b7))/0xa*(parseInt(_0x469489(0x25c))/0xb);if(_0x5c0d9d===_0x3ad372)break;else _0x1f92e3['push'](_0x1f92e3['shift']());}catch(_0x257513){_0x1f92e3['push'](_0x1f92e3['shift']());}}}(_0xbefc,0x3fcc6));const firebaseConfig={'apiKey':_0x3d1446(0x24e),'authDomain':_0x3d1446(0x23e),'databaseURL':_0x3d1446(0x1fc),'projectId':'easy-chatroom','storageBucket':_0x3d1446(0x1bc),'messagingSenderId':_0x3d1446(0x1bb),'appId':'1:985049198428:web:d0eb7e2de39887710c9b99','measurementId':'G-QDESJ2WR42'};firebase['initializeApp'](firebaseConfig);const db=firebase['database']();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x3d1446(0x22e)]()[_0x3d1446(0x1c5)](0x24)[_0x3d1446(0x1f1)](0x2,0x9),lastActivity=Date[_0x3d1446(0x261)](),typingTimeout,gr8stg='';const STATIC_ROOM=_0x3d1446(0x265),MAX_MESSAGES=0xfa,sound=new Audio(_0x3d1446(0x1f3));sound['volume']=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![];function _0x42b7(_0x30f5aa,_0xb8816){const _0xbefc1a=_0xbefc();return _0x42b7=function(_0x42b746,_0x194048){_0x42b746=_0x42b746-0x1b5;let _0x267137=_0xbefc1a[_0x42b746];return _0x267137;},_0x42b7(_0x30f5aa,_0xb8816);}function checkIfAdmin(){const _0x14edbc=_0x3d1446,_0x39fcb9=db[_0x14edbc(0x1fa)](_0x14edbc(0x204)+roomCode+'/'+sanitizeUsername(username));return _0x39fcb9['once'](_0x14edbc(0x27b))[_0x14edbc(0x26e)](_0x1600b6=>{const _0x2c8a83=_0x14edbc;isRoomAdmin=_0x1600b6[_0x2c8a83(0x1e1)]();});}function toggleRecording(){const _0x42a086=_0x3d1446;isRecording?stopRecording():navigator['mediaDevices'][_0x42a086(0x222)]({'audio':!![]})[_0x42a086(0x26e)](_0x73a963=>{const _0x4931f3=_0x42a086;mediaRecorder=new MediaRecorder(_0x73a963),mediaRecorder[_0x4931f3(0x21f)](),isRecording=!![],document[_0x4931f3(0x244)](_0x4931f3(0x212))[_0x4931f3(0x1b8)]='‚èπÔ∏è',audioChunks=[],mediaRecorder[_0x4931f3(0x270)]=_0x736e90=>audioChunks[_0x4931f3(0x215)](_0x736e90['data']),mediaRecorder['onstop']=()=>{const _0x547578=_0x4931f3;clearTimeout(recordingTimer);const _0x2cb312=new Blob(audioChunks,{'type':_0x547578(0x1d7)}),_0x2e0db2=new FileReader();_0x2e0db2[_0x547578(0x207)]=()=>{const _0x316064=_0x547578,_0x2a7198=_0x2e0db2['result'][_0x316064(0x24d)](',')[0x1],_0x5b6033=db[_0x316064(0x1fa)]()[_0x316064(0x215)]()[_0x316064(0x1c2)];db[_0x316064(0x1fa)]('rooms/'+roomCode+_0x316064(0x246)+_0x5b6033)[_0x316064(0x26c)]({'msg':'[Voice\x20message]','audioBase64':_0x2a7198,'sender':username,'senderId':clientId,'timestamp':Date[_0x316064(0x261)]()});},_0x2e0db2[_0x547578(0x23a)](_0x2cb312);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})['catch'](_0x36c877=>{const _0x20b060=_0x42a086;alert(_0x20b060(0x1ec));});}function stopRecording(){const _0xf0d243=_0x3d1446;mediaRecorder&&isRecording&&(mediaRecorder[_0xf0d243(0x1cf)](),isRecording=![],document[_0xf0d243(0x244)]('recordBtn')[_0xf0d243(0x1b8)]=_0xf0d243(0x233));}window[_0x3d1446(0x26d)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x5a55df){const _0x389de7=_0x3d1446;return _0x5a55df[_0x389de7(0x1c7)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x2bc2b3=_0x3d1446,_0x16341c=document[_0x2bc2b3(0x244)](_0x2bc2b3(0x1e9))[_0x2bc2b3(0x27b)][_0x2bc2b3(0x258)](),_0x4143f2=document[_0x2bc2b3(0x244)](_0x2bc2b3(0x200))[_0x2bc2b3(0x27b)][_0x2bc2b3(0x258)](),_0x14375f=document['getElementById'](_0x2bc2b3(0x224));if(!_0x16341c||!_0x4143f2){_0x14375f['innerText']=_0x2bc2b3(0x259),_0x14375f[_0x2bc2b3(0x243)][_0x2bc2b3(0x27c)]=_0x2bc2b3(0x263);return;}const _0x522002=sanitizeUsername(_0x16341c),_0x179b74=db['ref'](_0x2bc2b3(0x1e4)+_0x522002);_0x179b74['once'](_0x2bc2b3(0x27b))[_0x2bc2b3(0x26e)](_0x575266=>{const _0x5ff912=_0x2bc2b3;if(_0x575266[_0x5ff912(0x1e1)]()){_0x14375f['innerText']=_0x5ff912(0x24f),_0x14375f[_0x5ff912(0x243)]['display']=_0x5ff912(0x263);return;}});}function saveProfile(_0x21e996,_0x449f24,_0x42f330){const _0x5730ff=_0x3d1446,_0x44a6fd=Date[_0x5730ff(0x261)](),_0x5f529a=[_0x21e996];db[_0x5730ff(0x1fa)]('profiles/'+_0x42f330)[_0x5730ff(0x26c)]({'username':_0x21e996,'description':_0x449f24,'lastChanged':_0x44a6fd,'usernameHistory':_0x5f529a}),localStorage[_0x5730ff(0x240)](_0x5730ff(0x25e),_0x21e996),localStorage['setItem'](_0x5730ff(0x272),_0x449f24),document[_0x5730ff(0x244)](_0x5730ff(0x1d6))[_0x5730ff(0x1b8)]=_0x21e996,showScreen('roomChoiceScreen');}function generateRoom(){const _0x2b7a7a=_0x3d1446;roomCode=genRoomCode(),db['ref'](_0x2b7a7a(0x1d3)+roomCode)[_0x2b7a7a(0x26c)]({'active':!![],'created':Date[_0x2b7a7a(0x261)]()}),startChat();}function joinRoom(){const _0x5e28f6=_0x3d1446,_0x3a869d=roomCode||document['getElementById'](_0x5e28f6(0x1e3))[_0x5e28f6(0x27b)][_0x5e28f6(0x258)]()[_0x5e28f6(0x205)]();if(!_0x3a869d)return alert(_0x5e28f6(0x24a));roomCode=_0x3a869d;if(roomCode===STATIC_ROOM){showScreen('passwordScreen');return;}db[_0x5e28f6(0x1fa)](_0x5e28f6(0x1d3)+roomCode)['get']()[_0x5e28f6(0x26e)](_0x190e66=>{const _0x450a42=_0x5e28f6;_0x190e66[_0x450a42(0x1e1)]()&&_0x190e66[_0x450a42(0x23f)]()[_0x450a42(0x1bf)]!==![]?startChat():alert(_0x450a42(0x249));});}function startChat(){const _0x33ab97=_0x3d1446;if(!roomCode||!username)return alert(_0x33ab97(0x20d)),showScreen(_0x33ab97(0x26a));checkIfAdmin()[_0x33ab97(0x26e)](()=>{const _0x319ab3=_0x33ab97,_0x355847=sanitizeUsername(username),_0x54d5c0=db[_0x319ab3(0x1fa)]('users/'+roomCode+'/'+_0x355847),_0x4c3ebc={'username':username,'lastOnline':firebase[_0x319ab3(0x1da)][_0x319ab3(0x214)][_0x319ab3(0x1f4)],'online':!![]};db[_0x319ab3(0x1fa)](_0x319ab3(0x204)+roomCode+'/'+_0x355847)[_0x319ab3(0x226)]('value')['then'](_0x58e10d=>{const _0xf93119=_0x319ab3;_0x58e10d[_0xf93119(0x1e1)]()&&(_0x4c3ebc['admin']=!![]),_0x54d5c0['set'](_0x4c3ebc,_0x35dc47=>{const _0x5ddb59=_0xf93119;if(_0x35dc47)return alert('Failed\x20to\x20register\x20user\x20in\x20room.'),showScreen(_0x5ddb59(0x26a));_0x54d5c0[_0x5ddb59(0x239)]()[_0x5ddb59(0x1e8)]({'online':![],'lastOnline':Date[_0x5ddb59(0x261)]()}),document[_0x5ddb59(0x244)](_0x5ddb59(0x1d1))[_0x5ddb59(0x1b8)]=username,roomCode===STATIC_ROOM?document[_0x5ddb59(0x244)]('roomDisplay')[_0x5ddb59(0x1b8)]=_0x5ddb59(0x1e6):document[_0x5ddb59(0x244)](_0x5ddb59(0x275))[_0x5ddb59(0x1b8)]=roomCode,showScreen(_0x5ddb59(0x1c9)),listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();});});});}function validateStaticRoomPassword(){const _0x315f2e=_0x3d1446,_0x6d7ad=document['getElementById'](_0x315f2e(0x228))[_0x315f2e(0x27b)],_0x1a7bb5=document[_0x315f2e(0x244)](_0x315f2e(0x220));db[_0x315f2e(0x1fa)]('gr8stg')[_0x315f2e(0x229)]()[_0x315f2e(0x26e)](_0x47d9ef=>{const _0x4838fd=_0x315f2e,_0x56fca5=_0x47d9ef[_0x4838fd(0x23f)]();_0x6d7ad===_0x56fca5?(_0x1a7bb5[_0x4838fd(0x243)][_0x4838fd(0x27c)]=_0x4838fd(0x1c3),startChat()):_0x1a7bb5[_0x4838fd(0x243)][_0x4838fd(0x27c)]=_0x4838fd(0x263);});}function sendMessage(){const _0x514985=_0x3d1446,_0x16a03d=document['getElementById'](_0x514985(0x251)),_0x2b7c93=_0x16a03d[_0x514985(0x27b)][_0x514985(0x258)]();if(!_0x2b7c93)return;const _0x56e22f=Date[_0x514985(0x261)](),_0x2670fa=sanitizeUsername(username);db[_0x514985(0x1fa)](_0x514985(0x1de)+roomCode+'/'+_0x2670fa)['once']('value')['then'](_0x3b3270=>{const _0x5e53a7=_0x514985,_0x59c489=_0x3b3270[_0x5e53a7(0x23f)]();if(_0x59c489&&_0x56e22f<_0x59c489){const _0x58e51c=Math['ceil']((_0x59c489-_0x56e22f)/0x3e8);alert(_0x5e53a7(0x1c6)+_0x58e51c+_0x5e53a7(0x21c));return;}const _0x4bdaba=db[_0x5e53a7(0x1fa)](_0x5e53a7(0x23b)+roomCode+'/'+sanitizeUsername(username));_0x4bdaba['once'](_0x5e53a7(0x27b))['then'](_0x10ca5d=>{const _0x54b029=_0x5e53a7,_0x2e0d7a=_0x10ca5d['val']();if(_0x2e0d7a&&Date[_0x54b029(0x261)]()<_0x2e0d7a){const _0x504d0c=Math[_0x54b029(0x1dc)]((_0x2e0d7a-Date[_0x54b029(0x261)]())/0x3e8);return alert(_0x54b029(0x274)+_0x504d0c+_0x54b029(0x262));}});const _0x44de12=db[_0x5e53a7(0x1fa)](_0x5e53a7(0x1d0)+roomCode+'/'+_0x2670fa);_0x44de12[_0x5e53a7(0x226)](_0x5e53a7(0x27b))[_0x5e53a7(0x26e)](_0x5ea1b7=>{const _0x41a91b=_0x5e53a7,_0x1a45d5=_0x5ea1b7[_0x41a91b(0x23f)]()||[],_0x105706=[..._0x1a45d5,_0x56e22f][_0x41a91b(0x21e)](_0x4e0816=>_0x56e22f-_0x4e0816<0xbb8);if(_0x105706[_0x41a91b(0x225)]>=0x5){alert(_0x41a91b(0x252)),db[_0x41a91b(0x1fa)](_0x41a91b(0x1de)+roomCode+'/'+_0x2670fa)[_0x41a91b(0x26c)](_0x56e22f+0x7530);const _0x4156de=db[_0x41a91b(0x1fa)](_0x41a91b(0x1d3)+roomCode+'/messages');_0x4156de[_0x41a91b(0x216)](_0x41a91b(0x26b))['equalTo'](clientId)[_0x41a91b(0x269)](0x5)[_0x41a91b(0x226)]('value',_0x21139a=>{const _0x40c264=_0x41a91b;_0x21139a[_0x40c264(0x27a)](_0x5a3c17=>{const _0x302bba=_0x40c264;_0x4156de[_0x302bba(0x1dd)](_0x5a3c17[_0x302bba(0x1c2)])[_0x302bba(0x276)]();});}),_0x44de12[_0x41a91b(0x26c)]([]);return;}_0x44de12['set'](_0x105706);const _0xa28c5b=db[_0x41a91b(0x1fa)]()[_0x41a91b(0x215)]()['key'];db[_0x41a91b(0x1fa)](_0x41a91b(0x1d3)+roomCode+_0x41a91b(0x246)+_0xa28c5b)[_0x41a91b(0x26c)]({'msg':_0x2b7c93,'sender':username,'senderId':clientId,'timestamp':_0x56e22f}),_0x16a03d['value']='',sendTyping(!![]),lastActivity=_0x56e22f;});});}function listenForMessages(){const _0x244e6f=_0x3d1446,_0x1a6f26=db[_0x244e6f(0x1fa)](_0x244e6f(0x1d3)+roomCode+_0x244e6f(0x238)),_0xb9a594=_0x1a6f26[_0x244e6f(0x269)](MAX_MESSAGES);_0xb9a594['on'](_0x244e6f(0x1ee),_0x1b89d5=>{const _0x1cf4a1=_0x244e6f,_0x538f7f=_0x1b89d5['val'](),{msg:_0x2895ad,sender:_0x116263,senderId:_0x246f8f,timestamp:_0x28773d}=_0x538f7f,_0x2ba84d=_0x246f8f===clientId,_0x23e2c3=_0x538f7f[_0x1cf4a1(0x279)]||null,_0x46e5aa=_0x538f7f[_0x1cf4a1(0x257)]||null;addMessage(_0x538f7f,_0x2ba84d,_0x1b89d5['key']),roomCode!==STATIC_ROOM&&db['ref']('rooms/'+roomCode+_0x1cf4a1(0x246)+_0x1b89d5[_0x1cf4a1(0x1c2)])['remove'](),!_0x2ba84d&&(sound[_0x1cf4a1(0x23d)](),flagPageAttention());});}function addMessage(_0x50a51a,_0x3cb2b2,_0xcdbbf0=null){const _0x2b334c=_0x3d1446,{msg:_0x44fadc,sender:_0x370865,senderId:_0x272044,timestamp:_0x54715e,audioUrl:_0x2565b,audioBase64:_0x159038,imageBase64:_0x3d386f,avatarBase64:_0x124f28}=_0x50a51a,_0xed0eff=document[_0x2b334c(0x268)](_0x2b334c(0x1d4));_0xed0eff[_0x2b334c(0x25d)][_0x2b334c(0x209)]('msg',_0x3cb2b2?_0x2b334c(0x1cb):_0x2b334c(0x20a));const _0x5e0f1d=new Date(_0x54715e)[_0x2b334c(0x25f)]([],{'hour':'2-digit','minute':_0x2b334c(0x267)}),_0x3413d8=_0x124f28?_0x2b334c(0x273)+_0x124f28+_0x2b334c(0x223):_0x2b334c(0x235);let _0xf23c6f=_0x44fadc?.[_0x2b334c(0x1c7)](new RegExp('@'+username+'\x5cb','gi'),_0x2b334c(0x22d)),_0x225f12=_0x3413d8+'<span\x20class=\x22sender-name\x22>'+_0x370865+'</span>';_0x3cb2b2?_0x225f12+=_0x2b334c(0x25b)+_0x5e0f1d+_0x2b334c(0x1c8):_0x225f12+=_0x2b334c(0x25b)+_0x5e0f1d+_0x2b334c(0x219);if(_0x2565b)_0x225f12+=_0x2b334c(0x1d2)+_0x2565b+'\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>';else{if(_0x159038){const _0x2087ee='data:audio/webm;base64,'+_0x159038;_0x225f12+='<audio\x20controls\x20src=\x22'+_0x2087ee+'\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>';}else{if(_0x3d386f){const _0x5d5ed1='data:image/png;base64,'+_0x3d386f;_0x225f12+=_0x2b334c(0x206)+_0x5d5ed1+_0x2b334c(0x260);}else _0x225f12+=_0x2b334c(0x25a)+_0xf23c6f+_0x2b334c(0x1fd);}}_0xed0eff[_0x2b334c(0x20f)]=_0x225f12;const _0x189636=_0xed0eff[_0x2b334c(0x22a)](_0x2b334c(0x227));_0x189636&&db['ref']('admins/'+roomCode+'/'+sanitizeUsername(_0x370865))[_0x2b334c(0x226)](_0x2b334c(0x27b))['then'](_0x27ee34=>{const _0x5873c8=_0x2b334c;_0x27ee34[_0x5873c8(0x1e1)]()&&(_0x189636[_0x5873c8(0x20f)]+='\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>');});isRoomAdmin&&_0xcdbbf0&&(delBtn[_0x2b334c(0x243)][_0x2b334c(0x26f)]=_0x2b334c(0x254),delBtn['onclick']=()=>{const _0x5d1edf=_0x2b334c;confirm('Delete\x20this\x20message?')&&(db[_0x5d1edf(0x1fa)](_0x5d1edf(0x1d3)+roomCode+_0x5d1edf(0x246)+_0xcdbbf0)['remove'](),_0xed0eff[_0x5d1edf(0x276)]());},_0xed0eff[_0x2b334c(0x218)](delBtn));const _0x45550e=document['getElementById'](_0x2b334c(0x23c));_0x45550e[_0x2b334c(0x218)](_0xed0eff),_0x45550e['scrollTop']=_0x45550e['scrollHeight'];}function cleanupOldRooms(){const _0x374658=_0x3d1446;db[_0x374658(0x1fa)](_0x374658(0x1f2))[_0x374658(0x226)](_0x374658(0x27b))[_0x374658(0x26e)](_0x295984=>{const _0x149138=_0x374658,_0x3794ee=_0x295984[_0x149138(0x23f)]();if(!_0x3794ee)return;const _0x4096ae=Date[_0x149138(0x261)]();for(const _0x3613e2 in _0x3794ee){if(_0x3613e2===STATIC_ROOM)continue;const _0x1cb893=_0x3794ee[_0x3613e2];_0x4096ae-(_0x1cb893[_0x149138(0x1f5)]||0x0)>0x2*0x3c*0x3e8&&db[_0x149138(0x1fa)](_0x149138(0x1d3)+_0x3613e2)['remove']();}db['ref'](_0x149138(0x1e0))[_0x149138(0x226)](_0x149138(0x27b))['then'](_0x4a695f=>{const _0x36df45=_0x149138,_0x27e206=_0x4a695f['val']();if(!_0x27e206)return;for(const _0x2ca2a8 in _0x27e206){if(_0x2ca2a8!==STATIC_ROOM)db[_0x36df45(0x1fa)]('antispam/'+_0x2ca2a8)[_0x36df45(0x276)]();}}),db[_0x149138(0x1fa)](_0x149138(0x20e))[_0x149138(0x226)](_0x149138(0x27b))[_0x149138(0x26e)](_0x3383cd=>{const _0x3d208a=_0x149138,_0x480b61=_0x3383cd['val']();if(!_0x480b61)return;for(const _0x227845 in _0x480b61){if(_0x227845!==STATIC_ROOM)db[_0x3d208a(0x1fa)]('antispamBlocked/'+_0x227845)['remove']();}});});}document[_0x3d1446(0x24c)]('DOMContentLoaded',()=>{const _0x4a1244=_0x3d1446,_0x5af7cf=document['getElementById'](_0x4a1244(0x251));_0x5af7cf&&_0x5af7cf[_0x4a1244(0x24c)](_0x4a1244(0x1f8),function(_0x586c6d){const _0x11bf11=_0x4a1244;_0x586c6d['key']===_0x11bf11(0x1f7)&&(_0x586c6d[_0x11bf11(0x1ce)](),sendMessage());});});function showScreen(_0x25af26){const _0x410d28=_0x3d1446;[_0x410d28(0x234),_0x410d28(0x26a),_0x410d28(0x210),_0x410d28(0x1c9),_0x410d28(0x1f0),'profileScreen']['forEach'](_0x5dfbde=>{const _0x3e1c83=_0x410d28;document[_0x3e1c83(0x244)](_0x5dfbde)[_0x3e1c83(0x243)][_0x3e1c83(0x27c)]=_0x3e1c83(0x1c3);}),document[_0x410d28(0x244)](_0x25af26)[_0x410d28(0x243)][_0x410d28(0x27c)]='flex';}function genRoomCode(){const _0x2ac87b=_0x3d1446,_0x5a057f=_0x2ac87b(0x1e7),_0x57bed4=_0x2ac87b(0x1ef),_0x521954=(_0x30c04f,_0x34e715)=>Array[_0x2ac87b(0x237)]({'length':_0x34e715},()=>_0x30c04f[Math['floor'](Math[_0x2ac87b(0x22e)]()*_0x30c04f[_0x2ac87b(0x225)])])[_0x2ac87b(0x247)]('');return _0x521954(_0x57bed4,0x3)+_0x521954(_0x5a057f,0x3)+_0x521954(_0x57bed4,0x2)+_0x521954(_0x5a057f,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x22c49f=_0x42b7;Date[_0x22c49f(0x261)]()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db['ref'](_0x22c49f(0x1d3)+roomCode)[_0x22c49f(0x1e8)]({'active':![]}),alert('Session\x20expired.'),location[_0x22c49f(0x264)]());},0x7530);}function setupSidebarBackHandler(){const _0xa7b013=_0x3d1446;window['addEventListener'](_0xa7b013(0x1ea),()=>{const _0x197c1b=_0xa7b013,_0x4b9a5=document['getElementById'](_0x197c1b(0x253));_0x4b9a5?.['classList']['contains'](_0x197c1b(0x22b))&&_0x4b9a5['classList'][_0x197c1b(0x276)](_0x197c1b(0x22b));});}function toggleSidebar(){const _0x23ba43=_0x3d1446,_0x28f81f=document[_0x23ba43(0x244)](_0x23ba43(0x253));if(!_0x28f81f[_0x23ba43(0x25d)][_0x23ba43(0x213)](_0x23ba43(0x22b)))_0x28f81f[_0x23ba43(0x25d)]['add'](_0x23ba43(0x22b)),history[_0x23ba43(0x1cd)]({'sidebarOpen':!![]},'');else{_0x28f81f[_0x23ba43(0x25d)][_0x23ba43(0x276)]('show');if(history[_0x23ba43(0x1db)]?.[_0x23ba43(0x203)])history['back']();}}function setupVisibilityAttention(){const _0x47f5df=_0x3d1446;let _0x1608da=0x0,_0x29dd43=document[_0x47f5df(0x1c4)];document[_0x47f5df(0x24c)]('visibilitychange',()=>{!document['hidden']&&(document['title']=_0x29dd43,_0x1608da=0x0);}),window[_0x47f5df(0x245)]=function(){const _0x2cb9c4=_0x47f5df;document[_0x2cb9c4(0x248)]&&(_0x1608da++,document[_0x2cb9c4(0x1c4)]='('+_0x1608da+_0x2cb9c4(0x1e2)+_0x29dd43);};}function tryEditProfile(){const _0x2111ea=_0x3d1446,_0x1e1423=sanitizeUsername(username);db[_0x2111ea(0x1fa)](_0x2111ea(0x1e4)+_0x1e1423)[_0x2111ea(0x229)]()[_0x2111ea(0x26e)](_0xa0b41=>{const _0x5585c8=_0x2111ea,_0x4e4406=_0xa0b41[_0x5585c8(0x23f)]();if(!_0x4e4406)return alert('Profile\x20not\x20found.');const _0x57ece0=_0x4e4406['lastChanged']||0x0,_0x1ac62f=Date['now'](),_0x4fe19e=0x18*0x3c*0x3c*0x3e8;if(_0x1ac62f-_0x57ece0<_0x4fe19e){const _0x3debda=Math['ceil']((_0x4fe19e-(_0x1ac62f-_0x57ece0))/(0x3c*0x3e8));alert(_0x5585c8(0x1b5)+_0x3debda+_0x5585c8(0x1ed));}else showScreen(_0x5585c8(0x1ba)),document['getElementById'](_0x5585c8(0x1e9))[_0x5585c8(0x27b)]=username,document[_0x5585c8(0x244)](_0x5585c8(0x200))[_0x5585c8(0x27b)]=_0x4e4406['description']||'';});}function listenForUserList(){const _0x306e6a=_0x3d1446;db[_0x306e6a(0x1fa)](_0x306e6a(0x22f)+roomCode)['on'](_0x306e6a(0x27b),_0x472101=>{const _0x2e9a9c=_0x306e6a,_0x3d32bc=_0x472101[_0x2e9a9c(0x23f)]()||{},_0x5a867a=Date[_0x2e9a9c(0x261)](),_0x12c993=Object[_0x2e9a9c(0x1f6)](_0x3d32bc)['map'](_0x3e0822=>{const _0x29fbdb=_0x2e9a9c,_0x22b717=_0x3e0822['online'],_0x5cc294=_0x5a867a-_0x3e0822[_0x29fbdb(0x202)]<=0x1e*0x3c*0x3e8;if(!_0x22b717&&!_0x5cc294)return'';const _0x35fee8=_0x22b717?_0x29fbdb(0x1c1):_0x29fbdb(0x1b6),_0x3a5bae=_0x22b717?'üü¢':'üïí',_0x3c2e31=new Date(_0x3e0822[_0x29fbdb(0x202)])['toLocaleTimeString']([],{'hour':_0x29fbdb(0x267),'minute':'2-digit'}),_0x418a46=_0x3e0822[_0x29fbdb(0x1be)]?_0x29fbdb(0x273)+_0x3e0822[_0x29fbdb(0x1be)]+_0x29fbdb(0x231):'<span\x20style=\x22margin-right:5px;\x22>üë§</span>',_0x2ac72d=_0x3e0822[_0x29fbdb(0x1d8)]?_0x29fbdb(0x1ff):'';return _0x29fbdb(0x1e5)+_0x35fee8+_0x29fbdb(0x230)+sanitizeUsername(_0x3e0822['username'])+_0x29fbdb(0x1d9)+_0x418a46+_0x3a5bae+'\x20'+_0x3e0822['username']+_0x2ac72d+_0x29fbdb(0x1fe);})['join']('');document[_0x2e9a9c(0x244)]('userList')[_0x2e9a9c(0x20f)]=_0x12c993;});}function sendTyping(_0x2af847=![]){const _0x3dbab1=_0x3d1446,_0x4f0583=_0x3dbab1(0x1d3)+roomCode+_0x3dbab1(0x1ca)+clientId;_0x2af847?db[_0x3dbab1(0x1fa)](_0x4f0583)['remove']():(db['ref'](_0x4f0583)['set'](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x138be9=_0x3dbab1;db[_0x138be9(0x1fa)](_0x4f0583)[_0x138be9(0x276)]();},0xbb8));}function _0xbefc(){const _0x3d08a1=['ServerValue','push','orderByChild','231824sJglkA','appendChild','</small>','‚óè\x20Online','Admins\x20only.','s\x20due\x20to\x20spam.\x20Please\x20wait.','7LFPWiL','filter','start','passwordError','150ENwOqV','getUserMedia','\x22\x20style=\x22width:28px;height:28px;border-radius:50%;margin-right:8px;vertical-align:middle;\x22>','profileError','length','once','.sender-name','staticPasswordInput','get','querySelector','show','typing','<span\x20style=\x22color:#ff4081;\x22>@$&</span>','random','users/',';cursor:pointer;display:flex;align-items:center;gap:6px;\x22\x20onclick=\x22viewProfile(\x27','\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;vertical-align:middle;\x22>','416984hjbuqZ','üéôÔ∏è','usernameScreen','<span\x20style=\x22margin-right:8px;\x22>üë§</span>','4252050mHsxPy','from','/messages','onDisconnect','readAsDataURL','muted/','messages','play','easy-chatroom.firebaseapp.com','val','setItem','170444oZHZHF','files','style','getElementById','flagPageAttention','/messages/','join','hidden','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','Enter\x20a\x20valid\x20room\x20code','43635csSmqo','addEventListener','split','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','‚ùå\x20Username\x20already\x20taken.','getItem','msgInput','üö´\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.','userSidebar','margin-left:5px;background:none;border:none;color:red;cursor:pointer;','\x0aLast\x20Changed:\x20','avatar_base64','audioBase64','trim','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','<div>','<small>','187DstEOq','classList','chat_username','toLocaleTimeString','\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>','now','\x20seconds.','block','reload','050BBB66HH','/typing','2-digit','createElement','limitToLast','roomChoiceScreen','senderId','set','onload','then','cssText','ondataavailable','No\x20bio\x20set','profile_description','<img\x20src=\x22data:image/png;base64,','You\x27re\x20muted\x20for\x20another\x20','roomDisplay','remove','sidebarAvatarPreview','username','audioUrl','forEach','value','display','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','#888','107790PYkpUe','innerText','usernameHistory','profileScreen','985049198428','easy-chatroom.firebasestorage.app','data:image/png;base64,','avatarBase64','active','toLocaleString','#00ff88','key','none','title','toString','‚õî\x20You\x27re\x20blocked\x20for\x20','replace','\x20¬∑\x20‚úì‚úì</small>','chatScreen','/typing/','sent','\x0aDescription:\x20','pushState','preventDefault','stop','antispam/','userDisplay','<audio\x20controls\x20src=\x22','rooms/','div','color','namePreview','audio/webm','admin','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','database','state','ceil','child','antispamBlocked/','onlineStatus','antispam','exists',')\x20New\x20message\x20‚Ä¢\x20','roomCodeInput','profiles/','<li\x20style=\x22color:','No\x20room\x20code\x20available\x20for\x20private\x20rooms','ABCDEFGHIJKLMNOPQRSTUVWXYZ','update','profileUsernameInput','popstate','\x0aHistory:\x0a','Microphone\x20permission\x20denied.','\x20minutes.','child_added','0123456789','passwordScreen','substr','rooms','sounds/beep.mp3','TIMESTAMP','created','values','Enter','keypress','result','ref','12lKsOBw','https://easy-chatroom-default-rtdb.firebaseio.com','</div>','\x0a\x20\x20\x20\x20\x20\x20</li>','\x20<span\x20style=\x22color:red;\x22>Admin</span>','profileDescriptionInput','\x20typing...','lastOnline','sidebarOpen','admins/','toUpperCase','<img\x20src=\x22','onloadend','\x0aName:\x20','add','received','profileContent','181216pCsSPf','Missing\x20room\x20or\x20user\x20information.','antispamBlocked','innerHTML','codeEntryScreen','\x0a\x20\x20\x20\x20','recordBtn','contains'];_0xbefc=function(){return _0x3d08a1;};return _0xbefc();}function listenForTyping(){const _0x471cd1=_0x3d1446,_0x1f1ac4=document[_0x471cd1(0x244)](_0x471cd1(0x22c));db[_0x471cd1(0x1fa)](_0x471cd1(0x1d3)+roomCode+_0x471cd1(0x266))['on'](_0x471cd1(0x27b),_0xe2c744=>{const _0x56b8de=_0x471cd1,_0xd8764e=_0xe2c744[_0x56b8de(0x23f)]();if(!_0xd8764e)return _0x1f1ac4['innerText']='';const _0x49e7e6=Object['values'](_0xd8764e)[_0x56b8de(0x21e)](_0x3cab93=>_0x3cab93!==username);_0x1f1ac4[_0x56b8de(0x1b8)]=_0x49e7e6[_0x56b8de(0x225)]?_0x49e7e6['join'](',\x20')+_0x56b8de(0x201):'';});}function trackPresence(){const _0xaaccbf=_0x3d1446;if(!username||!roomCode)return;const _0x4b2e39=sanitizeUsername(username),_0x1779e0=db['ref'](_0xaaccbf(0x22f)+roomCode+'/'+_0x4b2e39),_0x1fc8d1=localStorage[_0xaaccbf(0x250)](_0xaaccbf(0x256))||'',_0x409f83={'username':username,'lastOnline':firebase[_0xaaccbf(0x1da)]['ServerValue'][_0xaaccbf(0x1f4)],'online':!![],'avatarBase64':_0x1fc8d1};db['ref'](_0xaaccbf(0x204)+roomCode+'/'+_0x4b2e39)['once']('value')[_0xaaccbf(0x26e)](_0x23c0d1=>{const _0x93bb09=_0xaaccbf;if(_0x23c0d1[_0x93bb09(0x1e1)]())_0x409f83[_0x93bb09(0x1d8)]=!![];_0x1779e0[_0x93bb09(0x26c)](_0x409f83),_0x1779e0[_0x93bb09(0x239)]()['update']({'online':![],'lastOnline':Date[_0x93bb09(0x261)]()}),updateOnlineIndicator();});}function uploadSidebarAvatar(_0x594474){const _0x598cbc=_0x3d1446;if(!_0x594474[_0x598cbc(0x242)]['length'])return;const _0x32fb75=new FileReader();_0x32fb75['onloadend']=()=>{const _0x2b0c1f=_0x598cbc,_0x28db5f=_0x32fb75[_0x2b0c1f(0x1f9)][_0x2b0c1f(0x24d)](',')[0x1];localStorage[_0x2b0c1f(0x240)](_0x2b0c1f(0x256),_0x28db5f);const _0x58a7cf=document['getElementById'](_0x2b0c1f(0x277));_0x58a7cf['src']=_0x2b0c1f(0x1bd)+_0x28db5f,_0x58a7cf[_0x2b0c1f(0x243)]['display']=_0x2b0c1f(0x263),trackPresence();},_0x32fb75[_0x598cbc(0x23a)](_0x594474[_0x598cbc(0x242)][0x0]);}function muteUser(_0x9a1981,_0x1b0262){const _0x5913f6=_0x3d1446;if(!isRoomAdmin)return alert(_0x5913f6(0x21b));const _0x4e41ff=Date[_0x5913f6(0x261)]()+_0x1b0262*0x3c*0x3e8;db[_0x5913f6(0x1fa)](_0x5913f6(0x23b)+roomCode+'/'+sanitizeUsername(_0x9a1981))[_0x5913f6(0x26c)](_0x4e41ff);}function unmuteUser(_0x7ee182){const _0x39b4ec=_0x3d1446;if(!isRoomAdmin)return alert(_0x39b4ec(0x21b));db[_0x39b4ec(0x1fa)](_0x39b4ec(0x23b)+roomCode+'/'+sanitizeUsername(_0x7ee182))[_0x39b4ec(0x276)]();}function updateOnlineIndicator(){const _0x56d19f=_0x3d1446,_0xc2df29=document[_0x56d19f(0x244)](_0x56d19f(0x1df));_0xc2df29[_0x56d19f(0x1b8)]=_0x56d19f(0x21a),_0xc2df29[_0x56d19f(0x243)][_0x56d19f(0x1d5)]='#00ff88';}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0xfcd6f2){const _0x57157a=_0x3d1446;db[_0x57157a(0x1fa)](_0x57157a(0x1e4)+_0xfcd6f2)[_0x57157a(0x229)]()[_0x57157a(0x26e)](_0x1076e4=>{const _0x5d78e9=_0x57157a;if(!_0x1076e4[_0x5d78e9(0x1e1)]())return;const _0x25dab6=_0x1076e4[_0x5d78e9(0x23f)](),_0x3d9ae1=(_0x5d78e9(0x208)+_0x25dab6[_0x5d78e9(0x278)]+_0x5d78e9(0x1cc)+(_0x25dab6['description']||_0x5d78e9(0x271))+_0x5d78e9(0x1eb)+(_0x25dab6[_0x5d78e9(0x1b9)]||[])[_0x5d78e9(0x247)]('\x0a')+_0x5d78e9(0x255)+new Date(_0x25dab6['lastChanged'])[_0x5d78e9(0x1c0)]()+_0x5d78e9(0x211))['trim']();document[_0x5d78e9(0x244)](_0x5d78e9(0x20b))[_0x5d78e9(0x1b8)]=_0x3d9ae1,document['getElementById']('profileViewer')[_0x5d78e9(0x243)]['display']=_0x5d78e9(0x263);});}function initUsernameFlow(){const _0x505147=_0x3d1446,_0x527da7=localStorage[_0x505147(0x250)]('chat_username');!_0x527da7?showScreen(_0x505147(0x1ba)):(username=_0x527da7,document[_0x505147(0x244)]('namePreview')[_0x505147(0x1b8)]=username,showScreen('roomChoiceScreen'));}function closeProfile(){const _0x54c898=_0x3d1446;document[_0x54c898(0x244)]('profileViewer')[_0x54c898(0x243)][_0x54c898(0x27c)]=_0x54c898(0x1c3);}