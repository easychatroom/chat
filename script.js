const _0xff6e2f=_0x4e4e;(function(_0x43cb5e,_0x867364){const _0x18e71a=_0x4e4e,_0x3e8181=_0x43cb5e();while(!![]){try{const _0x59bdce=parseInt(_0x18e71a(0x1dc))/0x1+parseInt(_0x18e71a(0x1e9))/0x2+-parseInt(_0x18e71a(0x1fc))/0x3*(-parseInt(_0x18e71a(0x1e8))/0x4)+parseInt(_0x18e71a(0x1f8))/0x5*(parseInt(_0x18e71a(0x215))/0x6)+parseInt(_0x18e71a(0x1dd))/0x7*(-parseInt(_0x18e71a(0x1bf))/0x8)+parseInt(_0x18e71a(0x22b))/0x9+parseInt(_0x18e71a(0x21f))/0xa*(-parseInt(_0x18e71a(0x206))/0xb);if(_0x59bdce===_0x867364)break;else _0x3e8181['push'](_0x3e8181['shift']());}catch(_0x5dad39){_0x3e8181['push'](_0x3e8181['shift']());}}}(_0x50d0,0x39f2a));const firebaseConfig={'apiKey':_0xff6e2f(0x20d),'authDomain':_0xff6e2f(0x219),'databaseURL':_0xff6e2f(0x223),'projectId':'easy-chatroom','storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0xff6e2f(0x228),'appId':_0xff6e2f(0x1d8),'measurementId':'G-QDESJ2WR42'};firebase[_0xff6e2f(0x1e5)](firebaseConfig);const db=firebase['database'](),STATIC_ROOM='050BBB66HH',ROOM_TTL_MS=0x2*0x3c*0x3e8;let username=localStorage[_0xff6e2f(0x21b)](_0xff6e2f(0x1c0)),roomCode='',clientId=generateClientId(),lastActivity=Date[_0xff6e2f(0x227)](),typingTimeout;const userKey=sanitizeUsername(username);window[_0xff6e2f(0x1cc)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow();};function initUsernameFlow(){const _0x3a46f0=_0xff6e2f,_0x3a55ec=localStorage['getItem']('chat_username');!_0x3a55ec?(username=null,showScreen('usernameScreen')):(username=_0x3a55ec,document[_0x3a46f0(0x217)](_0x3a46f0(0x1e0))[_0x3a46f0(0x225)]=username,showScreen(_0x3a46f0(0x1ca)));}function _0x50d0(){const _0xe532ed=['display','sidebarOpen','4jAiEhU','901390ziJjoT','<span\x20class=\x22sender-name\x22>','<small>','entries','msg','codeEntryScreen','update','innerHTML','chatScreen','Please\x20enter\x20a\x20valid\x20name','messages','TIMESTAMP','log','reload','lastOnline','1660RSjqPV','userSidebar','roomCodeInput','random','1371891JVCXlm','üóëÔ∏è\x20Deleted\x20expired\x20room:','database','trim','/typing','</li>','userList','toString','Enter','value','8762050lOvtnD','userDisplay','once','state','preventDefault','classList','filter','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','none','exists','appendChild','/messages','child_added','key','floor','1056QobKgd','usernameScreen','getElementById','username','easy-chatroom.firebaseapp.com','ABCDEFGHIJKLMNOPQRSTUVWXYZ','getItem','setItem','div','0123456789','10Ajdohn','back','sent','ServerValue','https://easy-chatroom-default-rtdb.firebaseio.com','050BBB66HH','innerText','add','now','985049198428','join','contains','146250ITpVxk','from','typing','DOMContentLoaded','System','online','</small>','\x20typing...','addEventListener','keypress','25056oCXgtP','chat_username','flex','ref','\x20left\x20the\x20room','set','replace','\x20joined\x20the\x20room','createElement','rooms/','/typing/','roomChoiceScreen','#888','onload','users/','rooms','msgInput','<li\x20style=\x22color:','/messages/','val','forEach','2-digit','beforeunload','style','limitToLast','1:985049198428:web:d0eb7e2de39887710c9b99','show','toLocaleTimeString','remove','464654ZnUvTE','924gzearo','scrollTop','</span><br>','namePreview','active','then','values','received','initializeApp'];_0x50d0=function(){return _0xe532ed;};return _0x50d0();}function saveUsername(){const _0x3f881d=_0xff6e2f,_0x4f4cce=document[_0x3f881d(0x217)]('usernameInput')[_0x3f881d(0x205)]['trim']();if(!_0x4f4cce)return alert(_0x3f881d(0x1f2));username=_0x4f4cce,localStorage[_0x3f881d(0x21c)](_0x3f881d(0x1c0),username),initUsernameFlow();}function generateRoom(){const _0x1c7d34=_0xff6e2f;roomCode=genRoomCode(),db[_0x1c7d34(0x1c2)](_0x1c7d34(0x1c8)+roomCode)['set']({'active':!![],'created':Date[_0x1c7d34(0x227)]()}),startChat();}function joinRoom(){const _0x5dd04d=_0xff6e2f;roomCode=document['getElementById'](_0x5dd04d(0x1fa))[_0x5dd04d(0x205)]['trim']()['toUpperCase']();if(!roomCode)return alert('Enter\x20a\x20valid\x20room\x20code');db['ref']('rooms/'+roomCode)['get']()[_0x5dd04d(0x1e2)](_0x4ce499=>{const _0x1fe86b=_0x5dd04d;_0x4ce499[_0x1fe86b(0x20f)]()&&_0x4ce499[_0x1fe86b(0x1d2)]()[_0x1fe86b(0x1e1)]!==![]?startChat():alert('Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.');});}function joinGlobalRoom(){const _0x50d99b=_0xff6e2f;roomCode=_0x50d99b(0x224),db[_0x50d99b(0x1c2)]('rooms/'+roomCode)[_0x50d99b(0x1c4)]({'active':!![],'created':Date[_0x50d99b(0x227)]()}),startChat();}function startChat(){const _0x35ef2f=_0xff6e2f;showScreen('chatScreen'),document[_0x35ef2f(0x217)](_0x35ef2f(0x207))[_0x35ef2f(0x225)]=username,document[_0x35ef2f(0x217)]('roomDisplay')['innerText']=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList(),logSystemMessage(username+_0x35ef2f(0x1c6)),window[_0x35ef2f(0x1bd)](_0x35ef2f(0x1d5),()=>{const _0x40af5f=_0x35ef2f;logSystemMessage(username+_0x40af5f(0x1c3));});}function trackPresence(){const _0x862fbc=_0xff6e2f,_0x531ca6=sanitizeUsername(username),_0x5d2160=db['ref'](_0x862fbc(0x1cd)+roomCode+'/'+_0x531ca6),_0x57248c={'username':username,'lastOnline':firebase[_0x862fbc(0x1fe)][_0x862fbc(0x222)][_0x862fbc(0x1f4)],'online':!![]};_0x5d2160[_0x862fbc(0x1c4)](_0x57248c),_0x5d2160['onDisconnect']()['update']({'online':![],'lastOnline':Date[_0x862fbc(0x227)]()});}function listenForUserList(){const _0x563eb6=_0xff6e2f;db[_0x563eb6(0x1c2)](_0x563eb6(0x1cd)+roomCode)['on'](_0x563eb6(0x205),_0x17d40c=>{const _0x57b66d=_0x563eb6,_0x595439=_0x17d40c['val']()||{},_0x561b74=Date[_0x57b66d(0x227)](),_0xf68f6d=Object[_0x57b66d(0x1e3)](_0x595439)[_0x57b66d(0x20c)](_0x3f4fed=>_0x3f4fed[_0x57b66d(0x218)])['map'](_0x315c28=>{const _0x1c6fd0=_0x57b66d,_0x370c8d=_0x315c28[_0x1c6fd0(0x230)],_0x34cca5=_0x561b74-_0x315c28[_0x1c6fd0(0x1f7)]<=0x1e*0x3c*0x3e8;if(!_0x370c8d&&!_0x34cca5)return'';const _0x17b594=_0x370c8d?'#00ff88':_0x1c6fd0(0x1cb),_0x3086f1=_0x370c8d?'üü¢':'üïí';return _0x1c6fd0(0x1d0)+_0x17b594+'\x22>'+_0x3086f1+'\x20'+_0x315c28[_0x1c6fd0(0x218)]+_0x1c6fd0(0x201);})[_0x57b66d(0x229)]('');document[_0x57b66d(0x217)](_0x57b66d(0x202))[_0x57b66d(0x1f0)]=_0xf68f6d;});}function logSystemMessage(_0x5ee023){const _0x1f44b6=_0xff6e2f,_0x2159e5=db[_0x1f44b6(0x1c2)]()['push']()[_0x1f44b6(0x213)];db[_0x1f44b6(0x1c2)](_0x1f44b6(0x1c8)+roomCode+_0x1f44b6(0x1d1)+_0x2159e5)[_0x1f44b6(0x1c4)]({'msg':_0x5ee023,'sender':_0x1f44b6(0x22f),'senderId':'system','timestamp':Date[_0x1f44b6(0x227)]()});}function setupSidebarBackHandler(){const _0x489b3c=_0xff6e2f;window[_0x489b3c(0x1bd)]('popstate',()=>{const _0x5f3bb7=_0x489b3c,_0x2298c9=document[_0x5f3bb7(0x217)](_0x5f3bb7(0x1f9));_0x2298c9?.[_0x5f3bb7(0x20b)][_0x5f3bb7(0x22a)](_0x5f3bb7(0x1d9))&&_0x2298c9[_0x5f3bb7(0x20b)][_0x5f3bb7(0x1db)](_0x5f3bb7(0x1d9));});}function toggleSidebar(){const _0x3ee9ac=_0xff6e2f,_0x1f4267=document[_0x3ee9ac(0x217)](_0x3ee9ac(0x1f9));if(!_0x1f4267[_0x3ee9ac(0x20b)]['contains'](_0x3ee9ac(0x1d9)))_0x1f4267[_0x3ee9ac(0x20b)][_0x3ee9ac(0x226)](_0x3ee9ac(0x1d9)),history['pushState']({'sidebarOpen':!![]},'');else{_0x1f4267[_0x3ee9ac(0x20b)][_0x3ee9ac(0x1db)](_0x3ee9ac(0x1d9));if(history[_0x3ee9ac(0x209)]?.[_0x3ee9ac(0x1e7)])history[_0x3ee9ac(0x220)]();}}document['addEventListener'](_0xff6e2f(0x22e),()=>{const _0x1d81a7=_0xff6e2f,_0x411f55=document['getElementById']('msgInput');_0x411f55&&_0x411f55[_0x1d81a7(0x1bd)](_0x1d81a7(0x1be),function(_0x212bfe){const _0x50c242=_0x1d81a7;_0x212bfe['key']===_0x50c242(0x204)&&(_0x212bfe[_0x50c242(0x20a)](),sendMessage());});});function showScreen(_0x297cc7){const _0x19b734=_0xff6e2f;[_0x19b734(0x216),_0x19b734(0x1ca),_0x19b734(0x1ee),_0x19b734(0x1f1)][_0x19b734(0x1d3)](_0x46eb76=>{const _0x2133e8=_0x19b734;document[_0x2133e8(0x217)](_0x46eb76)[_0x2133e8(0x1d6)]['display']=_0x2133e8(0x20e);}),document['getElementById'](_0x297cc7)[_0x19b734(0x1d6)][_0x19b734(0x1e6)]=_0x19b734(0x1c1);}function sendMessage(){const _0x4268ff=_0xff6e2f,_0x5d4fa8=document[_0x4268ff(0x217)](_0x4268ff(0x1cf)),_0x59061f=_0x5d4fa8[_0x4268ff(0x205)][_0x4268ff(0x1ff)]();if(!_0x59061f)return;const _0x42e092=db[_0x4268ff(0x1c2)]()['push']()[_0x4268ff(0x213)];db[_0x4268ff(0x1c2)](_0x4268ff(0x1c8)+roomCode+_0x4268ff(0x1d1)+_0x42e092)[_0x4268ff(0x1c4)]({'msg':_0x59061f,'sender':username,'senderId':clientId,'timestamp':Date[_0x4268ff(0x227)]()}),_0x5d4fa8[_0x4268ff(0x205)]='',sendTyping(!![]),lastActivity=Date[_0x4268ff(0x227)]();}function _0x4e4e(_0x1f05c0,_0xaf3d71){const _0x50d0ef=_0x50d0();return _0x4e4e=function(_0x4e4e78,_0x4c5ad1){_0x4e4e78=_0x4e4e78-0x1bc;let _0x2f8b95=_0x50d0ef[_0x4e4e78];return _0x2f8b95;},_0x4e4e(_0x1f05c0,_0xaf3d71);}function listenForMessages(){const _0x48fb21=_0xff6e2f,_0x8fec8=db[_0x48fb21(0x1c2)](_0x48fb21(0x1c8)+roomCode+_0x48fb21(0x211)),_0x5ecdf0=roomCode===STATIC_ROOM?_0x8fec8[_0x48fb21(0x1d7)](0x50):_0x8fec8;_0x5ecdf0['on'](_0x48fb21(0x212),_0x40eef9=>{const _0x3d69ca=_0x48fb21,{msg:_0x1f7e2d,sender:_0x2259db,senderId:_0x1a1f27,timestamp:_0xa09bdb}=_0x40eef9[_0x3d69ca(0x1d2)](),_0x1517ca=_0x1a1f27===clientId;addMessage(_0x1f7e2d,_0x2259db,_0xa09bdb,_0x1517ca),roomCode!==STATIC_ROOM&&db['ref'](_0x3d69ca(0x1c8)+roomCode+_0x3d69ca(0x1d1)+_0x40eef9[_0x3d69ca(0x213)])[_0x3d69ca(0x1db)]();});}function addMessage(_0x395b71,_0x2a39a3,_0x17fedb,_0x2f3998){const _0x4d5c8f=_0xff6e2f,_0x429a31=document[_0x4d5c8f(0x1c7)](_0x4d5c8f(0x21d));_0x429a31[_0x4d5c8f(0x20b)][_0x4d5c8f(0x226)](_0x4d5c8f(0x1ed),_0x2f3998?_0x4d5c8f(0x221):_0x4d5c8f(0x1e4));const _0x546e23=new Date(_0x17fedb)[_0x4d5c8f(0x1da)]([],{'hour':'2-digit','minute':_0x4d5c8f(0x1d4)});_0x429a31[_0x4d5c8f(0x1f0)]=_0x4d5c8f(0x1ea)+_0x2a39a3+_0x4d5c8f(0x1df)+_0x395b71+_0x4d5c8f(0x1eb)+_0x546e23+_0x4d5c8f(0x231),document[_0x4d5c8f(0x217)]('messages')[_0x4d5c8f(0x210)](_0x429a31),document['getElementById'](_0x4d5c8f(0x1f3))[_0x4d5c8f(0x1de)]=0x1869f;}function sendTyping(_0x18e66e=![]){const _0x43a356=_0xff6e2f;_0x18e66e?db[_0x43a356(0x1c2)](_0x43a356(0x1c8)+roomCode+_0x43a356(0x1c9)+clientId)[_0x43a356(0x1db)]():(db['ref'](_0x43a356(0x1c8)+roomCode+'/typing/'+clientId)['set'](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x56dcd4=_0x43a356;db[_0x56dcd4(0x1c2)](_0x56dcd4(0x1c8)+roomCode+_0x56dcd4(0x1c9)+clientId)[_0x56dcd4(0x1db)]();},0xbb8));}function listenForTyping(){const _0x1d3ef8=_0xff6e2f,_0x544519=document['getElementById'](_0x1d3ef8(0x22d));db['ref'](_0x1d3ef8(0x1c8)+roomCode+_0x1d3ef8(0x200))['on']('value',_0x16e737=>{const _0x1f32aa=_0x1d3ef8,_0x23b4aa=_0x16e737[_0x1f32aa(0x1d2)]();if(!_0x23b4aa)return _0x544519['innerText']='';const _0x370ac9=Object['values'](_0x23b4aa)[_0x1f32aa(0x20c)](_0x43df07=>_0x43df07!==username);_0x544519[_0x1f32aa(0x225)]=_0x370ac9['length']?_0x370ac9[_0x1f32aa(0x229)](',\x20')+_0x1f32aa(0x1bc):'';});}function startInactivityTimer(){setInterval(()=>{const _0xd2dfd8=_0x4e4e;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&(db[_0xd2dfd8(0x1c2)](_0xd2dfd8(0x1c8)+roomCode)[_0xd2dfd8(0x1ef)]({'active':![]}),alert('Session\x20expired.'),location[_0xd2dfd8(0x1f6)]());},0x7530);}function genRoomCode(){const _0x22e9a8=_0xff6e2f,_0x2e093=_0x22e9a8(0x21a),_0x46e471=_0x22e9a8(0x21e),_0x56fed7=(_0x52df7b,_0x24932b)=>Array[_0x22e9a8(0x22c)]({'length':_0x24932b},()=>_0x52df7b[Math[_0x22e9a8(0x214)](Math[_0x22e9a8(0x1fb)]()*_0x52df7b['length'])])['join']('');return _0x56fed7(_0x46e471,0x3)+_0x56fed7(_0x2e093,0x3)+_0x56fed7(_0x46e471,0x2)+_0x56fed7(_0x2e093,0x2);}function generateClientId(){const _0x544148=_0xff6e2f;return'_'+Math['random']()[_0x544148(0x203)](0x24)['substr'](0x2,0x9);}function cleanupOldRooms(){const _0x2f9808=_0xff6e2f;db[_0x2f9808(0x1c2)](_0x2f9808(0x1ce))[_0x2f9808(0x208)](_0x2f9808(0x205))[_0x2f9808(0x1e2)](_0x1f1ff1=>{const _0x3b45fb=_0x2f9808,_0x48c684=_0x1f1ff1[_0x3b45fb(0x1d2)]();if(!_0x48c684)return;const _0x3da218=Date['now']();Object[_0x3b45fb(0x1ec)](_0x48c684)[_0x3b45fb(0x1d3)](([_0x5846d2,_0x5c16cd])=>{const _0x115e54=_0x3b45fb;if(_0x5846d2===STATIC_ROOM)return;const _0x12d57f=_0x5c16cd['created']||0x0,_0x3a70fb=_0x3da218-_0x12d57f>ROOM_TTL_MS;_0x3a70fb&&(db[_0x115e54(0x1c2)](_0x115e54(0x1c8)+_0x5846d2)[_0x115e54(0x1db)](),console[_0x115e54(0x1f5)](_0x115e54(0x1fd),_0x5846d2));});});}function sanitizeUsername(_0x3be7a8){const _0x56e73c=_0xff6e2f;return _0x3be7a8[_0x56e73c(0x1c5)](/[.#$\[\]]/g,'_');}