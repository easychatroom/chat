const _0x25e68e=_0x29a6;(function(_0x2fde5b,_0x5b83a6){const _0x351bf9=_0x29a6,_0x554e15=_0x2fde5b();while(!![]){try{const _0x322854=parseInt(_0x351bf9(0x199))/0x1+parseInt(_0x351bf9(0x139))/0x2*(parseInt(_0x351bf9(0x18f))/0x3)+parseInt(_0x351bf9(0x1be))/0x4*(parseInt(_0x351bf9(0x188))/0x5)+parseInt(_0x351bf9(0x145))/0x6+-parseInt(_0x351bf9(0x148))/0x7+parseInt(_0x351bf9(0x14f))/0x8*(-parseInt(_0x351bf9(0x17c))/0x9)+parseInt(_0x351bf9(0x178))/0xa*(-parseInt(_0x351bf9(0x15f))/0xb);if(_0x322854===_0x5b83a6)break;else _0x554e15['push'](_0x554e15['shift']());}catch(_0x59b2f3){_0x554e15['push'](_0x554e15['shift']());}}}(_0x22ce,0x6847b));const firebaseConfig={'apiKey':_0x25e68e(0x192),'authDomain':'easy-chatroom.firebaseapp.com','databaseURL':_0x25e68e(0x1d0),'projectId':_0x25e68e(0x181),'storageBucket':_0x25e68e(0x1c6),'messagingSenderId':_0x25e68e(0x1d5),'appId':_0x25e68e(0x175),'measurementId':'G-QDESJ2WR42'};firebase[_0x25e68e(0x1ba)](firebaseConfig);const db=firebase[_0x25e68e(0x1b0)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x25e68e(0x18c)]()[_0x25e68e(0x167)](0x24)['substr'](0x2,0x9),lastActivity=Date['now'](),typingTimeout,gr8stg='';const STATIC_ROOM='050BBB66HH',MAX_MESSAGES=0xfa,sound=new Audio(_0x25e68e(0x169));sound[_0x25e68e(0x162)]=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer;function toggleRecording(){const _0x4aa5e7=_0x25e68e;isRecording?stopRecording():navigator[_0x4aa5e7(0x1c2)][_0x4aa5e7(0x1c4)]({'audio':!![]})[_0x4aa5e7(0x14e)](_0x2629c8=>{const _0x3b2ed9=_0x4aa5e7;mediaRecorder=new MediaRecorder(_0x2629c8),mediaRecorder[_0x3b2ed9(0x19b)](),isRecording=!![],document['getElementById'](_0x3b2ed9(0x1bc))[_0x3b2ed9(0x17e)]='â¹ï¸',audioChunks=[],mediaRecorder[_0x3b2ed9(0x1d2)]=_0x324ae7=>audioChunks[_0x3b2ed9(0x1b7)](_0x324ae7[_0x3b2ed9(0x16a)]),mediaRecorder[_0x3b2ed9(0x13e)]=()=>{const _0x36fce0=_0x3b2ed9;clearTimeout(recordingTimer);const _0xf52b45=new Blob(audioChunks,{'type':_0x36fce0(0x15a)}),_0x450d74=new FileReader();_0x450d74[_0x36fce0(0x16f)]=()=>{const _0x1e6237=_0x36fce0,_0x3de010=_0x450d74['result'][_0x1e6237(0x182)](',')[0x1],_0x431b2b=db[_0x1e6237(0x186)]()['push']()[_0x1e6237(0x1b3)];db['ref'](_0x1e6237(0x1b5)+roomCode+_0x1e6237(0x152)+_0x431b2b)['set']({'msg':'[Voice\x20message]','audioBase64':_0x3de010,'sender':username,'senderId':clientId,'timestamp':Date[_0x1e6237(0x154)]()});},_0x450d74['readAsDataURL'](_0xf52b45);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x4aa5e7(0x1ca)](_0x3582a8=>{alert('Microphone\x20permission\x20denied.');});}function stopRecording(){const _0xe05cd1=_0x25e68e;mediaRecorder&&isRecording&&(mediaRecorder[_0xe05cd1(0x168)](),isRecording=![],document['getElementById'](_0xe05cd1(0x1bc))[_0xe05cd1(0x17e)]=_0xe05cd1(0x166));}window[_0x25e68e(0x1d1)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x3b3c7f){const _0x3d0bd7=_0x25e68e;return _0x3b3c7f[_0x3d0bd7(0x1cd)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x219345=_0x25e68e,_0x53619f=document[_0x219345(0x141)]('profileUsernameInput')[_0x219345(0x14d)]['trim'](),_0x1f3afe=document[_0x219345(0x141)](_0x219345(0x1af))['value'][_0x219345(0x171)](),_0x12e391=document['getElementById'](_0x219345(0x193));if(!_0x53619f||!_0x1f3afe){_0x12e391[_0x219345(0x17e)]=_0x219345(0x1d3),_0x12e391['style'][_0x219345(0x1b9)]=_0x219345(0x1bd);return;}_0x12e391[_0x219345(0x14b)][_0x219345(0x1b9)]=_0x219345(0x1e1),username=_0x53619f;const _0xc03782=Date['now'](),_0x4cbf88=sanitizeUsername(_0x53619f),_0x13d139=db[_0x219345(0x186)](_0x219345(0x194)+_0x4cbf88);_0x13d139[_0x219345(0x1d7)]()[_0x219345(0x14e)](_0x54f6fe=>{const _0x18beec=_0x219345,_0x108658=_0x54f6fe[_0x18beec(0x1de)]()||{},_0xd616e5=_0x108658[_0x18beec(0x1cb)]||[];if(!_0xd616e5['includes'](_0x53619f))_0xd616e5[_0x18beec(0x1b7)](_0x53619f);_0x13d139[_0x18beec(0x19c)]({'username':_0x53619f,'description':_0x1f3afe,'lastChanged':_0xc03782,'usernameHistory':_0xd616e5}),localStorage[_0x18beec(0x14a)]('chat_username',_0x53619f),localStorage[_0x18beec(0x14a)](_0x18beec(0x17d),_0x1f3afe),document[_0x18beec(0x141)](_0x18beec(0x1d6))['innerText']=username,showScreen(_0x18beec(0x144));});}function saveUsername(){const _0x203624=_0x25e68e,_0x155bc5=document[_0x203624(0x141)](_0x203624(0x1d4))[_0x203624(0x14d)]['trim']();if(!_0x155bc5)return alert(_0x203624(0x17a));username=_0x155bc5,localStorage[_0x203624(0x14a)](_0x203624(0x1ae),username),initUsernameFlow();}function generateRoom(){const _0x5371b6=_0x25e68e;roomCode=genRoomCode(),db[_0x5371b6(0x186)]('rooms/'+roomCode)[_0x5371b6(0x19c)]({'active':!![],'created':Date['now']()}),startChat();}function joinRoom(){const _0x3d21ea=_0x25e68e,_0x19fb6c=roomCode||document[_0x3d21ea(0x141)](_0x3d21ea(0x173))[_0x3d21ea(0x14d)][_0x3d21ea(0x171)]()['toUpperCase']();if(!_0x19fb6c)return alert('Enter\x20a\x20valid\x20room\x20code');roomCode=_0x19fb6c;if(roomCode===STATIC_ROOM){showScreen(_0x3d21ea(0x1bf));return;}db[_0x3d21ea(0x186)]('rooms/'+roomCode)['get']()[_0x3d21ea(0x14e)](_0x55952f=>{const _0x48482e=_0x3d21ea;_0x55952f[_0x48482e(0x196)]()&&_0x55952f[_0x48482e(0x1de)]()['active']!==![]?startChat():alert(_0x48482e(0x1c1));});}function startChat(){const _0x524c35=_0x25e68e;if(!roomCode||!username)return alert(_0x524c35(0x16c)),showScreen(_0x524c35(0x144));showScreen(_0x524c35(0x164)),document[_0x524c35(0x141)](_0x524c35(0x170))[_0x524c35(0x17e)]=username,(roomCode=_0x524c35(0x161))?document['getElementById'](_0x524c35(0x1a5))['innerText']=_0x524c35(0x15e):document[_0x524c35(0x141)](_0x524c35(0x1a5))['innerText']=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();}function validateStaticRoomPassword(){const _0xc5c5ba=_0x25e68e,_0x22d371=document[_0xc5c5ba(0x141)]('staticPasswordInput')['value'],_0x2ef845=document[_0xc5c5ba(0x141)](_0xc5c5ba(0x190));db[_0xc5c5ba(0x186)](_0xc5c5ba(0x1c7))['get']()[_0xc5c5ba(0x14e)](_0x2096e7=>{const _0x1d0d9a=_0xc5c5ba,_0x51372e=_0x2096e7[_0x1d0d9a(0x1de)]();_0x22d371===_0x51372e?(_0x2ef845[_0x1d0d9a(0x14b)][_0x1d0d9a(0x1b9)]=_0x1d0d9a(0x1e1),startChat()):_0x2ef845[_0x1d0d9a(0x14b)]['display']=_0x1d0d9a(0x1bd);});}function _0x29a6(_0x4e8705,_0x5405c4){const _0x22ce86=_0x22ce();return _0x29a6=function(_0x29a6e6,_0x144e4d){_0x29a6e6=_0x29a6e6-0x138;let _0x187c03=_0x22ce86[_0x29a6e6];return _0x187c03;},_0x29a6(_0x4e8705,_0x5405c4);}function sendMessage(){const _0x3e7d61=_0x25e68e,_0x1840c0=document[_0x3e7d61(0x141)](_0x3e7d61(0x195)),_0x5d97e4=_0x1840c0['value'][_0x3e7d61(0x171)]();if(!_0x5d97e4)return;const _0x4bbffb=Date[_0x3e7d61(0x154)](),_0x19a417=sanitizeUsername(username);db[_0x3e7d61(0x186)]('antispamBlocked/'+roomCode+'/'+_0x19a417)['once']('value')[_0x3e7d61(0x14e)](_0x4aa5cb=>{const _0x25dd31=_0x3e7d61,_0x4a73f9=_0x4aa5cb[_0x25dd31(0x1de)]();if(_0x4a73f9&&_0x4bbffb<_0x4a73f9){const _0x58a48e=Math[_0x25dd31(0x1d9)]((_0x4a73f9-_0x4bbffb)/0x3e8);alert(_0x25dd31(0x142)+_0x58a48e+'s\x20due\x20to\x20spam.\x20Please\x20wait.');return;}const _0x3bc8b5=db['ref']('antispam/'+roomCode+'/'+_0x19a417);_0x3bc8b5['once'](_0x25dd31(0x14d))[_0x25dd31(0x14e)](_0x4143c0=>{const _0x406f86=_0x25dd31,_0x5da60e=_0x4143c0[_0x406f86(0x1de)]()||[],_0x5707ea=[..._0x5da60e,_0x4bbffb]['filter'](_0x2c2e1a=>_0x4bbffb-_0x2c2e1a<0xbb8);if(_0x5707ea['length']>=0x5){alert(_0x406f86(0x19f)),db[_0x406f86(0x186)](_0x406f86(0x153)+roomCode+'/'+_0x19a417)[_0x406f86(0x19c)](_0x4bbffb+0x7530);const _0x479a7f=db[_0x406f86(0x186)]('rooms/'+roomCode+_0x406f86(0x172));_0x479a7f['orderByChild'](_0x406f86(0x1b8))['equalTo'](clientId)['limitToLast'](0x5)[_0x406f86(0x156)](_0x406f86(0x14d),_0x5f5cfb=>{const _0x441115=_0x406f86;_0x5f5cfb[_0x441115(0x1a2)](_0x523328=>{const _0x1daa2e=_0x441115;_0x479a7f[_0x1daa2e(0x191)](_0x523328[_0x1daa2e(0x1b3)])[_0x1daa2e(0x18b)]();});}),_0x3bc8b5[_0x406f86(0x19c)]([]);return;}_0x3bc8b5[_0x406f86(0x19c)](_0x5707ea);const _0x2a6210=db[_0x406f86(0x186)]()[_0x406f86(0x1b7)]()[_0x406f86(0x1b3)];db[_0x406f86(0x186)]('rooms/'+roomCode+'/messages/'+_0x2a6210)[_0x406f86(0x19c)]({'msg':_0x5d97e4,'sender':username,'senderId':clientId,'timestamp':_0x4bbffb}),_0x1840c0['value']='',sendTyping(!![]),lastActivity=_0x4bbffb;});});}function listenForMessages(){const _0x220cf1=_0x25e68e,_0x2de9c8=db[_0x220cf1(0x186)](_0x220cf1(0x1b5)+roomCode+_0x220cf1(0x172)),_0x175f6a=_0x2de9c8[_0x220cf1(0x179)](MAX_MESSAGES);_0x175f6a['on'](_0x220cf1(0x146),_0x207767=>{const _0x58b778=_0x220cf1,_0x4cee4e=_0x207767[_0x58b778(0x1de)](),{msg:_0x57d117,sender:_0x48cc8e,senderId:_0x5cc6c2,timestamp:_0x2175bd}=_0x4cee4e,_0x4a91cb=_0x5cc6c2===clientId,_0x19a5f1=_0x4cee4e[_0x58b778(0x1ad)]||null,_0x2f80af=_0x4cee4e[_0x58b778(0x158)]||null;addMessage(_0x57d117,_0x48cc8e,_0x2175bd,_0x4a91cb,_0x19a5f1,_0x2f80af),roomCode!==STATIC_ROOM&&db[_0x58b778(0x186)](_0x58b778(0x1b5)+roomCode+_0x58b778(0x152)+_0x207767['key'])[_0x58b778(0x18b)](),!_0x4a91cb&&(sound[_0x58b778(0x18d)](),flagPageAttention());});}function addMessage(_0x4ce010,_0x4780f3,_0x5e4032,_0x4564b2,_0x191a8d=null,_0x30f01d=null){const _0x273efc=_0x25e68e,_0x3c00db=document[_0x273efc(0x1da)]('div');_0x3c00db[_0x273efc(0x163)][_0x273efc(0x1b4)]('msg',_0x4564b2?_0x273efc(0x165):_0x273efc(0x159));const _0x4afef6=new Date(_0x5e4032)[_0x273efc(0x15d)]([],{'hour':_0x273efc(0x1a6),'minute':_0x273efc(0x1a6)});let _0x5072e7=_0x273efc(0x1c5)+_0x4780f3+'</span><br>';if(_0x191a8d)_0x5072e7+=_0x273efc(0x1e0)+_0x191a8d+_0x273efc(0x143);else{if(_0x30f01d){const _0x5436fa=_0x273efc(0x1c9)+_0x30f01d;_0x5072e7+='<audio\x20controls\x20src=\x22'+_0x5436fa+_0x273efc(0x143);}else _0x5072e7+=_0x4ce010;}_0x5072e7+='<small>'+_0x4afef6+_0x273efc(0x155),_0x3c00db[_0x273efc(0x151)]=_0x5072e7;const _0x308b65=document[_0x273efc(0x141)](_0x273efc(0x1df));_0x308b65[_0x273efc(0x13a)](_0x3c00db),_0x308b65[_0x273efc(0x17f)]=_0x308b65[_0x273efc(0x184)];}function cleanupOldRooms(){const _0x190a6a=_0x25e68e;db['ref']('rooms')['once']('value')[_0x190a6a(0x14e)](_0x56fa82=>{const _0x56adf2=_0x190a6a,_0x189c88=_0x56fa82[_0x56adf2(0x1de)]();if(!_0x189c88)return;const _0x362f20=Date[_0x56adf2(0x154)]();for(const _0x348b6a in _0x189c88){if(_0x348b6a===STATIC_ROOM)continue;const _0x44be4b=_0x189c88[_0x348b6a];_0x362f20-(_0x44be4b[_0x56adf2(0x13f)]||0x0)>0x2*0x3c*0x3e8&&db[_0x56adf2(0x186)](_0x56adf2(0x1b5)+_0x348b6a)['remove']();}db[_0x56adf2(0x186)](_0x56adf2(0x1cf))['once']('value')['then'](_0x3f5ce1=>{const _0x59219d=_0x56adf2,_0x12b191=_0x3f5ce1[_0x59219d(0x1de)]();if(!_0x12b191)return;for(const _0x5a07cc in _0x12b191){if(_0x5a07cc!==STATIC_ROOM)db[_0x59219d(0x186)](_0x59219d(0x198)+_0x5a07cc)['remove']();}}),db['ref']('antispamBlocked')['once']('value')[_0x56adf2(0x14e)](_0x2053ee=>{const _0x9f650c=_0x56adf2,_0xaf531f=_0x2053ee['val']();if(!_0xaf531f)return;for(const _0x232786 in _0xaf531f){if(_0x232786!==STATIC_ROOM)db[_0x9f650c(0x186)](_0x9f650c(0x153)+_0x232786)['remove']();}});});}document[_0x25e68e(0x13d)](_0x25e68e(0x185),()=>{const _0x4f7fea=_0x25e68e,_0xda37c=document[_0x4f7fea(0x141)](_0x4f7fea(0x195));_0xda37c&&_0xda37c['addEventListener'](_0x4f7fea(0x176),function(_0xe8953f){const _0x2cdee3=_0x4f7fea;_0xe8953f[_0x2cdee3(0x1b3)]==='Enter'&&(_0xe8953f['preventDefault'](),sendMessage());});});function showScreen(_0x2688f0){const _0x2377c3=_0x25e68e;[_0x2377c3(0x1ab),_0x2377c3(0x144),_0x2377c3(0x160),'chatScreen',_0x2377c3(0x1bf),_0x2377c3(0x1ce)][_0x2377c3(0x1a2)](_0x334b4c=>{const _0xa1c485=_0x2377c3;document[_0xa1c485(0x141)](_0x334b4c)[_0xa1c485(0x14b)]['display']=_0xa1c485(0x1e1);}),document[_0x2377c3(0x141)](_0x2688f0)[_0x2377c3(0x14b)]['display']=_0x2377c3(0x1aa);}function genRoomCode(){const _0xa73c44=_0x25e68e,_0x1cc912=_0xa73c44(0x18e),_0x1d80fd='0123456789',_0x4b0b6b=(_0x241e75,_0xe98839)=>Array['from']({'length':_0xe98839},()=>_0x241e75[Math['floor'](Math[_0xa73c44(0x18c)]()*_0x241e75['length'])])[_0xa73c44(0x1a4)]('');return _0x4b0b6b(_0x1d80fd,0x3)+_0x4b0b6b(_0x1cc912,0x3)+_0x4b0b6b(_0x1d80fd,0x2)+_0x4b0b6b(_0x1cc912,0x2);}function _0x22ce(){const _0x431449=['forEach','values','join','roomDisplay','2-digit','/typing/','onDisconnect','state','flex','usernameScreen','contains','audioUrl','chat_username','profileDescriptionInput','database','username','\x20minutes.','key','add','rooms/','\x0aDescription:\x20','push','senderId','display','initializeApp','</li>','recordBtn','block','4DNHTYx','passwordScreen','title','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','mediaDevices','\x0aHistory:\x0a','getUserMedia','<span\x20class=\x22sender-name\x22>','easy-chatroom.firebasestorage.app','gr8stg','lastChanged','data:audio/webm;base64,','catch','usernameHistory','length','replace','profileScreen','antispam','https://easy-chatroom-default-rtdb.firebaseio.com','onload','ondataavailable','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','usernameInput','985049198428','namePreview','get','#888','ceil','createElement','map',';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27','online','val','messages','<audio\x20controls\x20src=\x22','none','\x27)\x22>','lastOnline','sidebarOpen','12gtSoWG','appendChild','profileContent','\x0a\x20\x20\x20\x20','addEventListener','onstop','created','\x20typing...','getElementById','â›”\x20You\x27re\x20blocked\x20for\x20','\x22\x20style=\x22width:100%;margin-top:5px;\x22></audio>','roomChoiceScreen','332160paFgQC','child_added','Profile\x20not\x20found.','3506846OsbDig','userSidebar','setItem','style','#00ff88','value','then','8760ESWMbF','profileUsernameInput','innerHTML','/messages/','antispamBlocked/','now','</small>','once','filter','audioBase64','received','audio/webm','users/','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','toLocaleTimeString','No\x20room\x20code\x20available\x20for\x20private\x20rooms','11sTZwuW','codeEntryScreen','050BBB66HH','volume','classList','chatScreen','sent','ðŸŽ™ï¸','toString','stop','sounds/beep.mp3','data','\x0aName:\x20','Missing\x20room\x20or\x20user\x20information.','show','visibilitychange','onloadend','userDisplay','trim','/messages','roomCodeInput','/typing','1:985049198428:web:d0eb7e2de39887710c9b99','keypress','hidden','2072180gydpDd','limitToLast','Please\x20enter\x20a\x20valid\x20name','pushState','1773FvaWLE','profile_description','innerText','scrollTop','description','easy-chatroom','split','userList','scrollHeight','DOMContentLoaded','ref','ServerValue','4265785MNHotp','typing',')\x20New\x20message\x20â€¢\x20','remove','random','play','ABCDEFGHIJKLMNOPQRSTUVWXYZ','150786uPIcgT','passwordError','child','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','profileError','profiles/','msgInput','exists','getItem','antispam/','140953wXSgDY','update','start','set','No\x20bio\x20set','Session\x20expired.','ðŸš«\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.','popstate','\x0aLast\x20Changed:\x20'];_0x22ce=function(){return _0x431449;};return _0x22ce();}function startInactivityTimer(){setInterval(()=>{const _0x1797b4=_0x29a6;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x1797b4(0x186)](_0x1797b4(0x1b5)+roomCode)[_0x1797b4(0x19a)]({'active':![]}),alert(_0x1797b4(0x19e)),location['reload']());},0x7530);}function setupSidebarBackHandler(){const _0x5271a5=_0x25e68e;window[_0x5271a5(0x13d)](_0x5271a5(0x1a0),()=>{const _0x1930a0=_0x5271a5,_0xb330ab=document[_0x1930a0(0x141)](_0x1930a0(0x149));_0xb330ab?.[_0x1930a0(0x163)][_0x1930a0(0x1ac)](_0x1930a0(0x16d))&&_0xb330ab[_0x1930a0(0x163)][_0x1930a0(0x18b)](_0x1930a0(0x16d));});}function toggleSidebar(){const _0x1d1fb2=_0x25e68e,_0x2e9fa4=document[_0x1d1fb2(0x141)](_0x1d1fb2(0x149));if(!_0x2e9fa4[_0x1d1fb2(0x163)][_0x1d1fb2(0x1ac)]('show'))_0x2e9fa4[_0x1d1fb2(0x163)]['add']('show'),history[_0x1d1fb2(0x17b)]({'sidebarOpen':!![]},'');else{_0x2e9fa4[_0x1d1fb2(0x163)]['remove']('show');if(history[_0x1d1fb2(0x1a9)]?.[_0x1d1fb2(0x138)])history['back']();}}function setupVisibilityAttention(){const _0x17784a=_0x25e68e;let _0x31b2dd=0x0,_0x43649c=document[_0x17784a(0x1c0)];document[_0x17784a(0x13d)](_0x17784a(0x16e),()=>{const _0x5ddf44=_0x17784a;!document[_0x5ddf44(0x177)]&&(document[_0x5ddf44(0x1c0)]=_0x43649c,_0x31b2dd=0x0);}),window['flagPageAttention']=function(){const _0x189b0c=_0x17784a;document[_0x189b0c(0x177)]&&(_0x31b2dd++,document[_0x189b0c(0x1c0)]='('+_0x31b2dd+_0x189b0c(0x18a)+_0x43649c);};}function tryEditProfile(){const _0x5d6f59=_0x25e68e,_0x2a77c5=sanitizeUsername(username);db[_0x5d6f59(0x186)]('profiles/'+_0x2a77c5)['get']()[_0x5d6f59(0x14e)](_0x66e13d=>{const _0x27c48f=_0x5d6f59,_0xa29ac3=_0x66e13d['val']();if(!_0xa29ac3)return alert(_0x27c48f(0x147));const _0x51b610=_0xa29ac3[_0x27c48f(0x1c8)]||0x0,_0xb701b8=Date['now'](),_0x2973e0=0x18*0x3c*0x3c*0x3e8;if(_0xb701b8-_0x51b610<_0x2973e0){const _0x52f1ac=Math[_0x27c48f(0x1d9)]((_0x2973e0-(_0xb701b8-_0x51b610))/(0x3c*0x3e8));alert(_0x27c48f(0x15c)+_0x52f1ac+_0x27c48f(0x1b2));}else showScreen('profileScreen'),document[_0x27c48f(0x141)](_0x27c48f(0x150))[_0x27c48f(0x14d)]=username,document['getElementById'](_0x27c48f(0x1af))[_0x27c48f(0x14d)]=_0xa29ac3['description']||'';});}function listenForUserList(){const _0x258df0=_0x25e68e;db['ref'](_0x258df0(0x15b)+roomCode)['on']('value',_0x33d149=>{const _0x17cc38=_0x258df0,_0x46a385=_0x33d149[_0x17cc38(0x1de)]()||{},_0x3ed81b=Date['now'](),_0x714eb4=Object[_0x17cc38(0x1a3)](_0x46a385)[_0x17cc38(0x1db)](_0x5141eb=>{const _0x760621=_0x17cc38,_0x3a7afe=_0x5141eb[_0x760621(0x1dd)],_0x33b17a=_0x3ed81b-_0x5141eb[_0x760621(0x1e3)]<=0x1e*0x3c*0x3e8;if(!_0x3a7afe&&!_0x33b17a)return'';const _0x228236=_0x3a7afe?_0x760621(0x14c):_0x760621(0x1d8),_0x36a39d=_0x3a7afe?'ðŸŸ¢':'ðŸ•’',_0x1d022c=new Date(_0x5141eb[_0x760621(0x1e3)])[_0x760621(0x15d)]([],{'hour':_0x760621(0x1a6),'minute':_0x760621(0x1a6)});return'<li\x20style=\x22color:'+_0x228236+_0x760621(0x1dc)+sanitizeUsername(_0x5141eb['username'])+_0x760621(0x1e2)+_0x36a39d+'\x20'+_0x5141eb[_0x760621(0x1b1)]+_0x760621(0x1bb);})[_0x17cc38(0x1a4)]('');document['getElementById'](_0x17cc38(0x183))[_0x17cc38(0x151)]=_0x714eb4;});}function sendTyping(_0x4bbd5a=![]){const _0x5a3d54=_0x25e68e,_0x451811=_0x5a3d54(0x1b5)+roomCode+_0x5a3d54(0x1a7)+clientId;_0x4bbd5a?db['ref'](_0x451811)[_0x5a3d54(0x18b)]():(db[_0x5a3d54(0x186)](_0x451811)[_0x5a3d54(0x19c)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x5d8cfe=_0x5a3d54;db[_0x5d8cfe(0x186)](_0x451811)[_0x5d8cfe(0x18b)]();},0xbb8));}function listenForTyping(){const _0x20c93a=_0x25e68e,_0x17a2dd=document[_0x20c93a(0x141)](_0x20c93a(0x189));db[_0x20c93a(0x186)](_0x20c93a(0x1b5)+roomCode+_0x20c93a(0x174))['on'](_0x20c93a(0x14d),_0x2d226f=>{const _0x31c68d=_0x20c93a,_0x181040=_0x2d226f['val']();if(!_0x181040)return _0x17a2dd[_0x31c68d(0x17e)]='';const _0x31e24b=Object[_0x31c68d(0x1a3)](_0x181040)[_0x31c68d(0x157)](_0x26d378=>_0x26d378!==username);_0x17a2dd['innerText']=_0x31e24b[_0x31c68d(0x1cc)]?_0x31e24b[_0x31c68d(0x1a4)](',\x20')+_0x31c68d(0x140):'';});}function trackPresence(){const _0x389645=_0x25e68e;if(!username||!roomCode)return;const _0xb72229=sanitizeUsername(username),_0x1be641=db[_0x389645(0x186)](_0x389645(0x15b)+roomCode+'/'+_0xb72229),_0x571db8={'username':username,'lastOnline':firebase['database'][_0x389645(0x187)]['TIMESTAMP'],'online':!![]};_0x1be641[_0x389645(0x19c)](_0x571db8),_0x1be641[_0x389645(0x1a8)]()['update']({'online':![],'lastOnline':Date[_0x389645(0x154)]()});}function viewProfile(_0x3e8a36){const _0x1f7bc3=_0x25e68e;db[_0x1f7bc3(0x186)](_0x1f7bc3(0x194)+_0x3e8a36)[_0x1f7bc3(0x1d7)]()[_0x1f7bc3(0x14e)](_0xd647c2=>{const _0xb5c04=_0x1f7bc3;if(!_0xd647c2[_0xb5c04(0x196)]())return;const _0x31f107=_0xd647c2[_0xb5c04(0x1de)](),_0x27ed2e=(_0xb5c04(0x16b)+_0x31f107['username']+_0xb5c04(0x1b6)+(_0x31f107[_0xb5c04(0x180)]||_0xb5c04(0x19d))+_0xb5c04(0x1c3)+(_0x31f107[_0xb5c04(0x1cb)]||[])[_0xb5c04(0x1a4)]('\x0a')+_0xb5c04(0x1a1)+new Date(_0x31f107['lastChanged'])['toLocaleString']()+_0xb5c04(0x13c))[_0xb5c04(0x171)]();document[_0xb5c04(0x141)](_0xb5c04(0x13b))[_0xb5c04(0x17e)]=_0x27ed2e,document[_0xb5c04(0x141)]('profileViewer')[_0xb5c04(0x14b)][_0xb5c04(0x1b9)]=_0xb5c04(0x1bd);});}function initUsernameFlow(){const _0x46dbe9=_0x25e68e,_0x590ac5=localStorage[_0x46dbe9(0x197)]('chat_username');!_0x590ac5?showScreen(_0x46dbe9(0x1ce)):(username=_0x590ac5,document['getElementById'](_0x46dbe9(0x1d6))[_0x46dbe9(0x17e)]=username,showScreen('roomChoiceScreen'));}