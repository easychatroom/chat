const _0x244c9f=_0x2963;(function(_0x3aacef,_0x5a0374){const _0x4acc07=_0x2963,_0x5ddecf=_0x3aacef();while(!![]){try{const _0xc2836e=parseInt(_0x4acc07(0xcb))/0x1*(-parseInt(_0x4acc07(0xdc))/0x2)+parseInt(_0x4acc07(0xc4))/0x3*(parseInt(_0x4acc07(0xb8))/0x4)+-parseInt(_0x4acc07(0xce))/0x5*(parseInt(_0x4acc07(0xbe))/0x6)+parseInt(_0x4acc07(0xec))/0x7+-parseInt(_0x4acc07(0xb7))/0x8*(parseInt(_0x4acc07(0xcd))/0x9)+parseInt(_0x4acc07(0x89))/0xa*(-parseInt(_0x4acc07(0xf1))/0xb)+parseInt(_0x4acc07(0xc3))/0xc;if(_0xc2836e===_0x5a0374)break;else _0x5ddecf['push'](_0x5ddecf['shift']());}catch(_0x5d58a0){_0x5ddecf['push'](_0x5ddecf['shift']());}}}(_0x4cd3,0xd5ddb));const firebaseConfig={'apiKey':_0x244c9f(0xab),'authDomain':_0x244c9f(0x9d),'databaseURL':_0x244c9f(0xd3),'projectId':_0x244c9f(0xb1),'storageBucket':_0x244c9f(0xda),'messagingSenderId':_0x244c9f(0x8f),'appId':_0x244c9f(0xc8),'measurementId':'G-QDESJ2WR42'};firebase['initializeApp'](firebaseConfig);const db=firebase[_0x244c9f(0x93)](),STATIC_ROOM=_0x244c9f(0x85),ROOM_TTL_MS=0x2*0x3c*0x3e8;function _0x2963(_0x20b848,_0x236365){const _0x4cd39f=_0x4cd3();return _0x2963=function(_0x296364,_0xa45982){_0x296364=_0x296364-0x84;let _0x378505=_0x4cd39f[_0x296364];return _0x378505;},_0x2963(_0x20b848,_0x236365);}let username=localStorage[_0x244c9f(0x87)]('chat_username'),roomCode='',clientId=generateClientId(),lastActivity=Date['now'](),typingTimeout;window[_0x244c9f(0xb4)]=()=>{const _0x4308df=_0x244c9f;!username?showScreen('usernameScreen'):(document[_0x4308df(0xc5)](_0x4308df(0xc7))[_0x4308df(0xd2)]=username,showScreen('roomChoiceScreen')),cleanupOldRooms(),!username?showScreen('usernameScreen'):(document[_0x4308df(0xc5)](_0x4308df(0xc7))[_0x4308df(0xd2)]=username,showScreen(_0x4308df(0x94)));};function _0x4cd3(){const _0x529a54=['random','appendChild','toggle','length','chatScreen','easy-chatroom','once','\x20joined\x20the\x20room','onload','rooms/','scrollTop','728dRqEZI','452xlnEyO','System','setItem','reload','then','</span><br>','8094VkLGQK','now','Please\x20enter\x20your\x20name','preventDefault','remove','42884580pQUCAi','15159VslcXQ','getElementById','key','namePreview','1:985049198428:web:d0eb7e2de39887710c9b99','typing','floor','22899RTDEZl','show','71721AHIqiH','4125jaIFcD','toString','\x20left\x20the\x20room','entries','innerText','https://easy-chatroom-default-rtdb.firebaseio.com','usernameScreen','push','createElement','style','/messages','Enter','easy-chatroom.firebasestorage.app','substr','14zbOgxG','rooms','userList','#00ff88','</small>','innerHTML','ServerValue','none','set','from','users/','div','codeEntryScreen','update','value','online','1166368fvTrrZ','child_added','TIMESTAMP','<span\x20class=\x22sender-name\x22>','join','3951574oPVPND','2-digit','050BBB66HH','/typing/','getItem','userSidebar','40aOABIa','Session\x20expired.','chat_username','ref','display','lastOnline','985049198428','addEventListener','onDisconnect','values','database','roomChoiceScreen','toLocaleTimeString','active','Enter\x20a\x20valid\x20room\x20code','keypress','forEach','received','/typing','trim','easy-chatroom.firebaseapp.com','filter','roomCodeInput','userDisplay','messages','msg','DOMContentLoaded','usernameInput','beforeunload','username','/messages/','val','ABCDEFGHIJKLMNOPQRSTUVWXYZ','exists','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw'];_0x4cd3=function(){return _0x529a54;};return _0x4cd3();}function saveUsername(){const _0x3acf4c=_0x244c9f;username=document[_0x3acf4c(0xc5)](_0x3acf4c(0xa4))[_0x3acf4c(0xea)][_0x3acf4c(0x9c)]();if(!username)return alert(_0x3acf4c(0xc0));localStorage[_0x3acf4c(0xba)](_0x3acf4c(0x8b),username),document['getElementById'](_0x3acf4c(0xc7))[_0x3acf4c(0xd2)]=username,showScreen(_0x3acf4c(0x94));}function generateRoom(){const _0x184d7c=_0x244c9f;roomCode=genRoomCode(),db[_0x184d7c(0x8c)](_0x184d7c(0xb5)+roomCode)[_0x184d7c(0xe4)]({'active':!![],'created':Date[_0x184d7c(0xbf)]()}),startChat();}function joinRoom(){const _0x52f778=_0x244c9f;roomCode=document['getElementById'](_0x52f778(0x9f))[_0x52f778(0xea)][_0x52f778(0x9c)]()['toUpperCase']();if(!roomCode)return alert(_0x52f778(0x97));db[_0x52f778(0x8c)](_0x52f778(0xb5)+roomCode)['get']()[_0x52f778(0xbc)](_0x5912f1=>{const _0x20277d=_0x52f778;_0x5912f1[_0x20277d(0xaa)]()&&_0x5912f1[_0x20277d(0xa8)]()[_0x20277d(0x96)]!==![]?startChat():alert('Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.');});}function joinGlobalRoom(){const _0xc9c811=_0x244c9f;roomCode=_0xc9c811(0x85),db['ref'](_0xc9c811(0xb5)+roomCode)[_0xc9c811(0xe4)]({'active':!![],'created':Date[_0xc9c811(0xbf)]()}),startChat();}function startChat(){const _0x3b79bd=_0x244c9f;showScreen(_0x3b79bd(0xb0)),document[_0x3b79bd(0xc5)](_0x3b79bd(0xa0))['innerText']=username,document[_0x3b79bd(0xc5)]('roomDisplay')[_0x3b79bd(0xd2)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),logSystemMessage(username+_0x3b79bd(0xb3)),window['addEventListener'](_0x3b79bd(0xa5),()=>{const _0x5b5891=_0x3b79bd;logSystemMessage(username+_0x5b5891(0xd0));});}function trackPresence(){const _0x2895d4=_0x244c9f,_0x4e0311=db[_0x2895d4(0x8c)](_0x2895d4(0xe6)+roomCode+'/'+clientId),_0x89f384={'username':username,'lastOnline':firebase[_0x2895d4(0x93)][_0x2895d4(0xe2)][_0x2895d4(0xee)],'online':!![]};_0x4e0311[_0x2895d4(0xe4)](_0x89f384),_0x4e0311[_0x2895d4(0x91)]()[_0x2895d4(0xe9)]({'online':![],'lastOnline':Date[_0x2895d4(0xbf)]()}),listenForUserList();}function listenForUserList(){const _0x3cefbe=_0x244c9f;db[_0x3cefbe(0x8c)](_0x3cefbe(0xe6)+roomCode)['on'](_0x3cefbe(0xea),_0xc6e90b=>{const _0x4f78fc=_0x3cefbe,_0x1a9911=_0xc6e90b['val']()||{},_0x221b81=Date[_0x4f78fc(0xbf)](),_0x414a7e={};for(const _0x4553ad in _0x1a9911){const _0x3d2de6=_0x1a9911[_0x4553ad];if(!_0x3d2de6[_0x4f78fc(0xa6)])continue;(!_0x414a7e[_0x3d2de6['username']]||_0x414a7e[_0x3d2de6[_0x4f78fc(0xa6)]][_0x4f78fc(0xeb)]===![]&&_0x3d2de6[_0x4f78fc(0xeb)]===!![])&&(_0x414a7e[_0x3d2de6['username']]=_0x3d2de6);}const _0x25dcd2=Object[_0x4f78fc(0x92)](_0x414a7e)['map'](_0x1b66dd=>{const _0x25ebc8=_0x4f78fc,_0xba8ca9=_0x1b66dd[_0x25ebc8(0xeb)]===!![],_0xbcbcd6=_0x221b81-_0x1b66dd[_0x25ebc8(0x8e)]<=0x1e*0x3c*0x3e8;if(!_0xba8ca9&&!_0xbcbcd6)return'';const _0x4604b5=_0xba8ca9?_0x25ebc8(0xdf):'#888',_0x517266=_0xba8ca9?'🟢':'🕒';return'<li\x20style=\x22color:'+_0x4604b5+'\x22>'+_0x517266+'\x20'+_0x1b66dd[_0x25ebc8(0xa6)]+'</li>';})[_0x4f78fc(0xf0)]('');document['getElementById'](_0x4f78fc(0xde))[_0x4f78fc(0xe1)]=_0x25dcd2;});}function logSystemMessage(_0x1ee525){const _0x56c97d=_0x244c9f,_0x142710=db['ref']()[_0x56c97d(0xd5)]()[_0x56c97d(0xc6)];db[_0x56c97d(0x8c)](_0x56c97d(0xb5)+roomCode+_0x56c97d(0xa7)+_0x142710)[_0x56c97d(0xe4)]({'msg':_0x1ee525,'sender':_0x56c97d(0xb9),'senderId':'system','timestamp':Date[_0x56c97d(0xbf)]()});}function toggleSidebar(){const _0x299fb5=_0x244c9f;document[_0x299fb5(0xc5)](_0x299fb5(0x88))['classList'][_0x299fb5(0xae)](_0x299fb5(0xcc));}document['addEventListener'](_0x244c9f(0xa3),()=>{const _0x412dd3=_0x244c9f,_0x55bd96=document[_0x412dd3(0xc5)]('msgInput');_0x55bd96&&_0x55bd96[_0x412dd3(0x90)](_0x412dd3(0x98),function(_0x9de7a6){const _0x110b5d=_0x412dd3;_0x9de7a6[_0x110b5d(0xc6)]===_0x110b5d(0xd9)&&(_0x9de7a6[_0x110b5d(0xc1)](),sendMessage());});});function showScreen(_0x19b1c0){const _0x57f38f=_0x244c9f;[_0x57f38f(0xd4),'roomChoiceScreen',_0x57f38f(0xe8),_0x57f38f(0xb0)][_0x57f38f(0x99)](_0x2ea6c0=>{const _0x54ef20=_0x57f38f;document['getElementById'](_0x2ea6c0)[_0x54ef20(0xd7)][_0x54ef20(0x8d)]=_0x54ef20(0xe3);}),document[_0x57f38f(0xc5)](_0x19b1c0)[_0x57f38f(0xd7)]['display']='flex';}function sendMessage(){const _0x287ff1=_0x244c9f,_0x513a64=document[_0x287ff1(0xc5)]('msgInput'),_0x348c36=_0x513a64[_0x287ff1(0xea)]['trim']();if(!_0x348c36)return;const _0xa50334=db[_0x287ff1(0x8c)]()[_0x287ff1(0xd5)]()[_0x287ff1(0xc6)];db[_0x287ff1(0x8c)](_0x287ff1(0xb5)+roomCode+_0x287ff1(0xa7)+_0xa50334)[_0x287ff1(0xe4)]({'msg':_0x348c36,'sender':username,'senderId':clientId,'timestamp':Date[_0x287ff1(0xbf)]()}),_0x513a64[_0x287ff1(0xea)]='',sendTyping(!![]),lastActivity=Date['now']();}function listenForMessages(){const _0x235538=_0x244c9f,_0x18704b=db[_0x235538(0x8c)](_0x235538(0xb5)+roomCode+_0x235538(0xd8)),_0x393bdc=roomCode===STATIC_ROOM?_0x18704b['limitToLast'](0x50):_0x18704b;_0x393bdc['on'](_0x235538(0xed),_0x37b536=>{const _0x434c4a=_0x235538,{msg:_0x55acdb,sender:_0x50d75e,senderId:_0x8f5f37,timestamp:_0x5e7147}=_0x37b536[_0x434c4a(0xa8)](),_0x8c3fbd=_0x8f5f37===clientId;addMessage(_0x55acdb,_0x50d75e,_0x5e7147,_0x8c3fbd),roomCode!==STATIC_ROOM&&db['ref'](_0x434c4a(0xb5)+roomCode+_0x434c4a(0xa7)+_0x37b536[_0x434c4a(0xc6)])[_0x434c4a(0xc2)]();});}function addMessage(_0x452d75,_0x3f1a3f,_0x33bc12,_0xcf36c4){const _0x4ad169=_0x244c9f,_0xec125d=document[_0x4ad169(0xd6)](_0x4ad169(0xe7));_0xec125d['classList']['add'](_0x4ad169(0xa2),_0xcf36c4?'sent':_0x4ad169(0x9a));const _0x38fb6e=new Date(_0x33bc12)[_0x4ad169(0x95)]([],{'hour':_0x4ad169(0x84),'minute':'2-digit'});_0xec125d[_0x4ad169(0xe1)]=_0x4ad169(0xef)+_0x3f1a3f+_0x4ad169(0xbd)+_0x452d75+'<small>'+_0x38fb6e+_0x4ad169(0xe0),document['getElementById']('messages')[_0x4ad169(0xad)](_0xec125d),document[_0x4ad169(0xc5)](_0x4ad169(0xa1))[_0x4ad169(0xb6)]=0x1869f;}function sendTyping(_0x5712af=![]){const _0x5eca89=_0x244c9f;_0x5712af?db[_0x5eca89(0x8c)](_0x5eca89(0xb5)+roomCode+_0x5eca89(0x86)+clientId)[_0x5eca89(0xc2)]():(db[_0x5eca89(0x8c)](_0x5eca89(0xb5)+roomCode+_0x5eca89(0x86)+clientId)[_0x5eca89(0xe4)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x478469=_0x5eca89;db[_0x478469(0x8c)](_0x478469(0xb5)+roomCode+_0x478469(0x86)+clientId)[_0x478469(0xc2)]();},0xbb8));}function listenForTyping(){const _0x266ed4=_0x244c9f,_0x32ca01=document[_0x266ed4(0xc5)](_0x266ed4(0xc9));db[_0x266ed4(0x8c)](_0x266ed4(0xb5)+roomCode+_0x266ed4(0x9b))['on'](_0x266ed4(0xea),_0x1894fc=>{const _0x4d894b=_0x266ed4,_0x3f9fa4=_0x1894fc[_0x4d894b(0xa8)]();if(!_0x3f9fa4)return _0x32ca01[_0x4d894b(0xd2)]='';const _0x5ef728=Object[_0x4d894b(0x92)](_0x3f9fa4)[_0x4d894b(0x9e)](_0x39da88=>_0x39da88!==username);_0x32ca01[_0x4d894b(0xd2)]=_0x5ef728[_0x4d894b(0xaf)]?_0x5ef728['join'](',\x20')+'\x20typing...':'';});}function startInactivityTimer(){setInterval(()=>{const _0x4080e4=_0x2963;Date[_0x4080e4(0xbf)]()-lastActivity>0x5*0x3c*0x3e8&&(db[_0x4080e4(0x8c)](_0x4080e4(0xb5)+roomCode)[_0x4080e4(0xe9)]({'active':![]}),alert(_0x4080e4(0x8a)),location[_0x4080e4(0xbb)]());},0x7530);}function genRoomCode(){const _0x409e17=_0x244c9f,_0x54774f=_0x409e17(0xa9),_0x2b179d='0123456789',_0x5dfb4e=(_0xfa5ea3,_0x478e8c)=>Array[_0x409e17(0xe5)]({'length':_0x478e8c},()=>_0xfa5ea3[Math[_0x409e17(0xca)](Math[_0x409e17(0xac)]()*_0xfa5ea3['length'])])['join']('');return _0x5dfb4e(_0x2b179d,0x3)+_0x5dfb4e(_0x54774f,0x3)+_0x5dfb4e(_0x2b179d,0x2)+_0x5dfb4e(_0x54774f,0x2);}function generateClientId(){const _0x150ea9=_0x244c9f;return'_'+Math[_0x150ea9(0xac)]()[_0x150ea9(0xcf)](0x24)[_0x150ea9(0xdb)](0x2,0x9);}function cleanupOldRooms(){const _0xbdb4f2=_0x244c9f;db[_0xbdb4f2(0x8c)](_0xbdb4f2(0xdd))[_0xbdb4f2(0xb2)]('value')[_0xbdb4f2(0xbc)](_0x10c483=>{const _0x164efb=_0xbdb4f2,_0x4ba478=_0x10c483[_0x164efb(0xa8)]();if(!_0x4ba478)return;const _0x1d4945=Date['now']();Object[_0x164efb(0xd1)](_0x4ba478)[_0x164efb(0x99)](([_0x2272b6,_0xe9ab83])=>{const _0x390e83=_0x164efb;if(_0x2272b6===STATIC_ROOM)return;const _0x11d86d=_0xe9ab83['created']||0x0,_0x3865a7=_0x1d4945-_0x11d86d>ROOM_TTL_MS;_0x3865a7&&(db[_0x390e83(0x8c)](_0x390e83(0xb5)+_0x2272b6)[_0x390e83(0xc2)](),console['log']('🗑️\x20Deleted\x20expired\x20room:',_0x2272b6));});});}