const _0x290389=_0x3597;(function(_0x1f4417,_0x230f61){const _0x17acce=_0x3597,_0x15e9c9=_0x1f4417();while(!![]){try{const _0x321f56=parseInt(_0x17acce(0x111))/0x1+parseInt(_0x17acce(0x107))/0x2+parseInt(_0x17acce(0x132))/0x3*(-parseInt(_0x17acce(0x11a))/0x4)+parseInt(_0x17acce(0x108))/0x5*(parseInt(_0x17acce(0x14c))/0x6)+parseInt(_0x17acce(0x115))/0x7+-parseInt(_0x17acce(0x12e))/0x8+-parseInt(_0x17acce(0x12a))/0x9*(parseInt(_0x17acce(0xed))/0xa);if(_0x321f56===_0x230f61)break;else _0x15e9c9['push'](_0x15e9c9['shift']());}catch(_0xbadeaa){_0x15e9c9['push'](_0x15e9c9['shift']());}}}(_0x1960,0xeeed0));const firebaseConfig={'apiKey':_0x290389(0x156),'authDomain':_0x290389(0x13a),'databaseURL':'https://easy-chatroom-default-rtdb.firebaseio.com','projectId':'easy-chatroom','storageBucket':_0x290389(0x125),'messagingSenderId':_0x290389(0x117),'appId':_0x290389(0x119),'measurementId':'G-QDESJ2WR42'};firebase['initializeApp'](firebaseConfig);const db=firebase['database'](),STATIC_ROOM=_0x290389(0x11c),ROOM_TTL_MS=0x2*0x3c*0x3e8;let username=localStorage[_0x290389(0x12b)](_0x290389(0x10f)),roomCode='',clientId=generateClientId(),lastActivity=Date[_0x290389(0x10c)](),typingTimeout;const userKey=sanitizeUsername(username);window['onload']=()=>{const _0x5118c5=_0x290389;!username?showScreen(_0x5118c5(0x14f)):(document[_0x5118c5(0x13b)]('namePreview')['innerText']=username,showScreen(_0x5118c5(0x146))),cleanupOldRooms(),!username?showScreen(_0x5118c5(0x14f)):(document['getElementById'](_0x5118c5(0x130))[_0x5118c5(0xf9)]=username,showScreen(_0x5118c5(0x146)));};function saveUsername(){const _0x15f50d=_0x290389;username=document['getElementById']('usernameInput')[_0x15f50d(0x150)]['trim']();if(!username)return alert(_0x15f50d(0x139));localStorage[_0x15f50d(0x126)]('chat_username',username),document[_0x15f50d(0x13b)]('namePreview')['innerText']=username,showScreen('roomChoiceScreen');}function generateRoom(){const _0x2a1fc0=_0x290389;roomCode=genRoomCode(),db[_0x2a1fc0(0x148)]('rooms/'+roomCode)[_0x2a1fc0(0x13d)]({'active':!![],'created':Date[_0x2a1fc0(0x10c)]()}),startChat();}function joinRoom(){const _0x50cc58=_0x290389;roomCode=document[_0x50cc58(0x13b)](_0x50cc58(0xf2))[_0x50cc58(0x150)]['trim']()[_0x50cc58(0xee)]();if(!roomCode)return alert('Enter\x20a\x20valid\x20room\x20code');db['ref']('rooms/'+roomCode)[_0x50cc58(0x101)]()['then'](_0x5a9667=>{const _0x419b9c=_0x50cc58;_0x5a9667[_0x419b9c(0xef)]()&&_0x5a9667[_0x419b9c(0x13c)]()[_0x419b9c(0x10d)]!==![]?startChat():alert(_0x419b9c(0x147));});}function joinGlobalRoom(){const _0x296e1e=_0x290389;roomCode='050BBB66HH',db[_0x296e1e(0x148)](_0x296e1e(0x155)+roomCode)[_0x296e1e(0x13d)]({'active':!![],'created':Date['now']()}),startChat();}function startChat(){const _0x3e89ea=_0x290389;showScreen(_0x3e89ea(0x10b)),document['getElementById'](_0x3e89ea(0x144))[_0x3e89ea(0xf9)]=username,document['getElementById'](_0x3e89ea(0x143))[_0x3e89ea(0xf9)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),logSystemMessage(username+'\x20joined\x20the\x20room'),window['addEventListener'](_0x3e89ea(0x11b),()=>{logSystemMessage(username+'\x20left\x20the\x20room');});}function trackPresence(){const _0x997471=_0x290389,_0x38ff01=sanitizeUsername(username),_0x47c084=db[_0x997471(0x148)]('users/'+roomCode+'/'+_0x38ff01),_0x2ca8b2={'username':username,'lastOnline':firebase[_0x997471(0x12c)][_0x997471(0x10a)][_0x997471(0x13e)],'online':!![]};_0x47c084[_0x997471(0x13d)](_0x2ca8b2),_0x47c084[_0x997471(0xf5)]()[_0x997471(0x120)]({'online':![],'lastOnline':Date['now']()});}function listenForUserList(){const _0x390506=_0x290389;db[_0x390506(0x148)](_0x390506(0xfe)+roomCode)['on'](_0x390506(0x150),_0x2d860c=>{const _0x18d45d=_0x390506,_0x19fce2=_0x2d860c[_0x18d45d(0x13c)]()||{},_0x1b092e=Date[_0x18d45d(0x10c)](),_0x3bd3e9=Object[_0x18d45d(0x142)](_0x19fce2)[_0x18d45d(0x128)](_0x804cda=>_0x804cda[_0x18d45d(0x136)])[_0x18d45d(0x112)](_0x31db02=>{const _0x580d4b=_0x18d45d,_0x21989f=_0x31db02['online'],_0x572c94=_0x1b092e-_0x31db02[_0x580d4b(0x129)]<=0x1e*0x3c*0x3e8;if(!_0x21989f&&!_0x572c94)return'';const _0x2e86bd=_0x21989f?'#00ff88':_0x580d4b(0x123),_0xbde5d=_0x21989f?'üü¢':'üïí';return _0x580d4b(0x12d)+_0x2e86bd+'\x22>'+_0xbde5d+'\x20'+_0x31db02['username']+_0x580d4b(0x104);})[_0x18d45d(0x11f)]('');document[_0x18d45d(0x13b)](_0x18d45d(0x151))[_0x18d45d(0x14d)]=_0x3bd3e9;});}function _0x3597(_0x448ffd,_0x5e7f49){const _0x1960f2=_0x1960();return _0x3597=function(_0x359782,_0x1aaac8){_0x359782=_0x359782-0xeb;let _0x6c0d7=_0x1960f2[_0x359782];return _0x6c0d7;},_0x3597(_0x448ffd,_0x5e7f49);}function logSystemMessage(_0x42b581){const _0x509bbc=_0x290389,_0x21d340=db[_0x509bbc(0x148)]()[_0x509bbc(0xf3)]()[_0x509bbc(0xf8)];db['ref'](_0x509bbc(0x155)+roomCode+_0x509bbc(0x14a)+_0x21d340)['set']({'msg':_0x42b581,'sender':_0x509bbc(0x14b),'senderId':_0x509bbc(0x109),'timestamp':Date['now']()});}function toggleSidebar(){const _0x54f31d=_0x290389;document['getElementById'](_0x54f31d(0x141))[_0x54f31d(0x154)][_0x54f31d(0x152)](_0x54f31d(0xf4));}document[_0x290389(0x140)]('DOMContentLoaded',()=>{const _0x27481a=_0x290389,_0x31d19f=document[_0x27481a(0x13b)](_0x27481a(0x134));_0x31d19f&&_0x31d19f[_0x27481a(0x140)]('keypress',function(_0x3104ea){const _0x22d354=_0x27481a;_0x3104ea[_0x22d354(0xf8)]===_0x22d354(0xfd)&&(_0x3104ea[_0x22d354(0x137)](),sendMessage());});});function showScreen(_0x5d7543){const _0x586110=_0x290389;['usernameScreen',_0x586110(0x146),_0x586110(0xf6),_0x586110(0x10b)][_0x586110(0xf0)](_0x163839=>{const _0x2b1e7a=_0x586110;document[_0x2b1e7a(0x13b)](_0x163839)[_0x2b1e7a(0xeb)]['display']='none';}),document['getElementById'](_0x5d7543)[_0x586110(0xeb)][_0x586110(0x103)]=_0x586110(0x122);}function sendMessage(){const _0x1644fe=_0x290389,_0x5ec6fc=document[_0x1644fe(0x13b)](_0x1644fe(0x134)),_0x185261=_0x5ec6fc[_0x1644fe(0x150)][_0x1644fe(0x124)]();if(!_0x185261)return;const _0x54d56b=db[_0x1644fe(0x148)]()[_0x1644fe(0xf3)]()['key'];db[_0x1644fe(0x148)](_0x1644fe(0x155)+roomCode+'/messages/'+_0x54d56b)['set']({'msg':_0x185261,'sender':username,'senderId':clientId,'timestamp':Date[_0x1644fe(0x10c)]()}),_0x5ec6fc[_0x1644fe(0x150)]='',sendTyping(!![]),lastActivity=Date[_0x1644fe(0x10c)]();}function listenForMessages(){const _0x4b615c=_0x290389,_0xec57fd=db[_0x4b615c(0x148)]('rooms/'+roomCode+_0x4b615c(0xf7)),_0x44c76d=roomCode===STATIC_ROOM?_0xec57fd['limitToLast'](0x50):_0xec57fd;_0x44c76d['on']('child_added',_0x271f30=>{const _0x1bd976=_0x4b615c,{msg:_0x262d6f,sender:_0x9fc88c,senderId:_0x51b4c3,timestamp:_0x560a93}=_0x271f30[_0x1bd976(0x13c)](),_0xc93475=_0x51b4c3===clientId;addMessage(_0x262d6f,_0x9fc88c,_0x560a93,_0xc93475),roomCode!==STATIC_ROOM&&db[_0x1bd976(0x148)](_0x1bd976(0x155)+roomCode+_0x1bd976(0x14a)+_0x271f30[_0x1bd976(0xf8)])[_0x1bd976(0x14e)]();});}function addMessage(_0x4af4e5,_0x16882e,_0x3932bb,_0x373b84){const _0x27c3c4=_0x290389,_0xf1eb85=document[_0x27c3c4(0x113)](_0x27c3c4(0x114));_0xf1eb85['classList'][_0x27c3c4(0x149)](_0x27c3c4(0x138),_0x373b84?_0x27c3c4(0x106):'received');const _0x243ee7=new Date(_0x3932bb)[_0x27c3c4(0x102)]([],{'hour':_0x27c3c4(0x127),'minute':_0x27c3c4(0x127)});_0xf1eb85['innerHTML']=_0x27c3c4(0x145)+_0x16882e+_0x27c3c4(0x121)+_0x4af4e5+_0x27c3c4(0x11d)+_0x243ee7+_0x27c3c4(0xf1),document['getElementById'](_0x27c3c4(0x11e))[_0x27c3c4(0xfa)](_0xf1eb85),document[_0x27c3c4(0x13b)](_0x27c3c4(0x11e))['scrollTop']=0x1869f;}function sendTyping(_0xb27fb5=![]){const _0x45ef8b=_0x290389;_0xb27fb5?db[_0x45ef8b(0x148)](_0x45ef8b(0x155)+roomCode+_0x45ef8b(0xfb)+clientId)[_0x45ef8b(0x14e)]():(db[_0x45ef8b(0x148)](_0x45ef8b(0x155)+roomCode+'/typing/'+clientId)[_0x45ef8b(0x13d)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x14df22=_0x45ef8b;db[_0x14df22(0x148)]('rooms/'+roomCode+_0x14df22(0xfb)+clientId)[_0x14df22(0x14e)]();},0xbb8));}function listenForTyping(){const _0x52af5d=_0x290389,_0x403c83=document['getElementById'](_0x52af5d(0x100));db[_0x52af5d(0x148)]('rooms/'+roomCode+'/typing')['on'](_0x52af5d(0x150),_0x3928aa=>{const _0x24a976=_0x52af5d,_0xd6d95c=_0x3928aa[_0x24a976(0x13c)]();if(!_0xd6d95c)return _0x403c83[_0x24a976(0xf9)]='';const _0x1d26db=Object[_0x24a976(0x142)](_0xd6d95c)[_0x24a976(0x128)](_0x1e9e87=>_0x1e9e87!==username);_0x403c83[_0x24a976(0xf9)]=_0x1d26db[_0x24a976(0x116)]?_0x1d26db['join'](',\x20')+_0x24a976(0x12f):'';});}function startInactivityTimer(){setInterval(()=>{const _0x56bd5b=_0x3597;Date[_0x56bd5b(0x10c)]()-lastActivity>0x5*0x3c*0x3e8&&(db['ref']('rooms/'+roomCode)[_0x56bd5b(0x120)]({'active':![]}),alert(_0x56bd5b(0x10e)),location[_0x56bd5b(0xec)]());},0x7530);}function genRoomCode(){const _0x26226d=_0x290389,_0x70d85b='ABCDEFGHIJKLMNOPQRSTUVWXYZ',_0x20bd32=_0x26226d(0x105),_0x4f4aa1=(_0x566b28,_0x36f76e)=>Array[_0x26226d(0x157)]({'length':_0x36f76e},()=>_0x566b28[Math['floor'](Math[_0x26226d(0x13f)]()*_0x566b28[_0x26226d(0x116)])])[_0x26226d(0x11f)]('');return _0x4f4aa1(_0x20bd32,0x3)+_0x4f4aa1(_0x70d85b,0x3)+_0x4f4aa1(_0x20bd32,0x2)+_0x4f4aa1(_0x70d85b,0x2);}function _0x1960(){const _0xcefd9f=['classList','rooms/','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','from','style','reload','130oEIoHy','toUpperCase','exists','forEach','</small>','roomCodeInput','push','show','onDisconnect','codeEntryScreen','/messages','key','innerText','appendChild','/typing/','substr','Enter','users/','once','typing','get','toLocaleTimeString','display','</li>','0123456789','sent','1168656MPuRLW','6955355CjVRNS','system','ServerValue','chatScreen','now','active','Session\x20expired.','chat_username','replace','1140949yxXrrj','map','createElement','div','11440653AyItsj','length','985049198428','üóëÔ∏è\x20Deleted\x20expired\x20room:','1:985049198428:web:d0eb7e2de39887710c9b99','69724CegPmz','beforeunload','050BBB66HH','<small>','messages','join','update','</span><br>','flex','#888','trim','easy-chatroom.firebasestorage.app','setItem','2-digit','filter','lastOnline','826992cFbqGQ','getItem','database','<li\x20style=\x22color:','12532360HSXWth','\x20typing...','namePreview','created','174bEmtLt','then','msgInput','entries','username','preventDefault','msg','Please\x20enter\x20your\x20name','easy-chatroom.firebaseapp.com','getElementById','val','set','TIMESTAMP','random','addEventListener','userSidebar','values','roomDisplay','userDisplay','<span\x20class=\x22sender-name\x22>','roomChoiceScreen','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','ref','add','/messages/','System','6GQyxsO','innerHTML','remove','usernameScreen','value','userList','toggle','log'];_0x1960=function(){return _0xcefd9f;};return _0x1960();}function generateClientId(){const _0x56b0fe=_0x290389;return'_'+Math['random']()['toString'](0x24)[_0x56b0fe(0xfc)](0x2,0x9);}function cleanupOldRooms(){const _0xcfed7e=_0x290389;db['ref']('rooms')[_0xcfed7e(0xff)](_0xcfed7e(0x150))[_0xcfed7e(0x133)](_0x127242=>{const _0x4ddbc6=_0xcfed7e,_0x300344=_0x127242['val']();if(!_0x300344)return;const _0x148fba=Date[_0x4ddbc6(0x10c)]();Object[_0x4ddbc6(0x135)](_0x300344)[_0x4ddbc6(0xf0)](([_0x4fca4e,_0x4bb423])=>{const _0x23e9d4=_0x4ddbc6;if(_0x4fca4e===STATIC_ROOM)return;const _0x184dad=_0x4bb423[_0x23e9d4(0x131)]||0x0,_0x15ca59=_0x148fba-_0x184dad>ROOM_TTL_MS;_0x15ca59&&(db[_0x23e9d4(0x148)](_0x23e9d4(0x155)+_0x4fca4e)[_0x23e9d4(0x14e)](),console[_0x23e9d4(0x153)](_0x23e9d4(0x118),_0x4fca4e));});});}function sanitizeUsername(_0x4dd014){const _0x3f57c6=_0x290389;return _0x4dd014[_0x3f57c6(0x110)](/[.#$\[\]]/g,'_');}