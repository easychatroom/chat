const _0x37b11a=_0x517c;(function(_0x1875ba,_0x4bae47){const _0x38fa1f=_0x517c,_0x5ce084=_0x1875ba();while(!![]){try{const _0x27bc2b=parseInt(_0x38fa1f(0x244))/0x1+parseInt(_0x38fa1f(0x260))/0x2+-parseInt(_0x38fa1f(0x23f))/0x3*(-parseInt(_0x38fa1f(0x1c4))/0x4)+parseInt(_0x38fa1f(0x21e))/0x5+parseInt(_0x38fa1f(0x253))/0x6+parseInt(_0x38fa1f(0x223))/0x7*(parseInt(_0x38fa1f(0x1e5))/0x8)+-parseInt(_0x38fa1f(0x234))/0x9*(parseInt(_0x38fa1f(0x206))/0xa);if(_0x27bc2b===_0x4bae47)break;else _0x5ce084['push'](_0x5ce084['shift']());}catch(_0x55190c){_0x5ce084['push'](_0x5ce084['shift']());}}}(_0x58da,0xe0025));const firebaseConfig={'apiKey':_0x37b11a(0x1dd),'authDomain':'easy-chatroom.firebaseapp.com','databaseURL':_0x37b11a(0x247),'projectId':_0x37b11a(0x24a),'storageBucket':_0x37b11a(0x1d4),'messagingSenderId':'985049198428','appId':_0x37b11a(0x24f),'measurementId':_0x37b11a(0x209)};firebase[_0x37b11a(0x23a)](firebaseConfig);const db=firebase[_0x37b11a(0x259)]();let roomUsers={},userListReady=![],pendingMessages=[],messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math[_0x37b11a(0x1e0)]()[_0x37b11a(0x1e2)](0x24)[_0x37b11a(0x233)](0x2,0x9),lastActivity=Date[_0x37b11a(0x20a)](),typingTimeout,gr8stg='';const STATIC_ROOM='050BBB66HH',MAX_MESSAGES=0xfa,sound=new Audio(_0x37b11a(0x261));sound['volume']=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer,isRoomAdmin=![];function checkIfAdmin(){const _0x35b13c=_0x37b11a,_0x2d8006=db[_0x35b13c(0x218)](_0x35b13c(0x262)+roomCode+'/'+sanitizeUsername(username));return _0x2d8006['once'](_0x35b13c(0x251))[_0x35b13c(0x236)](_0x18457f=>{isRoomAdmin=_0x18457f['exists']();});}function toggleRecording(){const _0xd55dd9=_0x37b11a;isRecording?stopRecording():navigator['mediaDevices'][_0xd55dd9(0x272)]({'audio':!![]})[_0xd55dd9(0x236)](_0x1ef251=>{const _0x222c8c=_0xd55dd9;mediaRecorder=new MediaRecorder(_0x1ef251),mediaRecorder[_0x222c8c(0x1cf)](),isRecording=!![],document[_0x222c8c(0x1da)](_0x222c8c(0x1ec))[_0x222c8c(0x241)]='‚èπÔ∏è',audioChunks=[],mediaRecorder[_0x222c8c(0x226)]=_0x373177=>audioChunks['push'](_0x373177['data']),mediaRecorder[_0x222c8c(0x221)]=()=>{const _0x2d7a18=_0x222c8c;clearTimeout(recordingTimer);const _0x43b35a=new Blob(audioChunks,{'type':_0x2d7a18(0x1ca)}),_0x1d1ac6=new FileReader();_0x1d1ac6[_0x2d7a18(0x1d9)]=()=>{const _0x39b9b2=_0x2d7a18,_0x1e9f82=_0x1d1ac6['result'][_0x39b9b2(0x25a)](',')[0x1],_0x296159=db[_0x39b9b2(0x218)]()['push']()['key'];db['ref'](_0x39b9b2(0x254)+roomCode+_0x39b9b2(0x1c2)+_0x296159)[_0x39b9b2(0x1e9)]({'msg':_0x39b9b2(0x211),'audioBase64':_0x1e9f82,'sender':username,'senderId':clientId,'timestamp':Date[_0x39b9b2(0x20a)]()});},_0x1d1ac6[_0x2d7a18(0x265)](_0x43b35a);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0xd55dd9(0x1dc)](_0x47027a=>{alert('Microphone\x20permission\x20denied.');});}function stopRecording(){const _0x143146=_0x37b11a;mediaRecorder&&isRecording&&(mediaRecorder[_0x143146(0x28b)](),isRecording=![],document['getElementById'](_0x143146(0x1ec))[_0x143146(0x241)]=_0x143146(0x27c));}window[_0x37b11a(0x235)]=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0x1103eb){const _0x1a9175=_0x37b11a;return _0x1103eb[_0x1a9175(0x1e8)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x9feff9=_0x37b11a,_0x401072=document[_0x9feff9(0x1da)](_0x9feff9(0x1ef))[_0x9feff9(0x251)]['trim'](),_0x2a8829=document[_0x9feff9(0x1da)](_0x9feff9(0x1fe))['value'][_0x9feff9(0x214)](),_0x248fff=document['getElementById']('profileError');if(!_0x401072||!_0x2a8829){_0x248fff['innerText']=_0x9feff9(0x215),_0x248fff[_0x9feff9(0x276)][_0x9feff9(0x28a)]=_0x9feff9(0x26b);return;}const _0x4b9b54=sanitizeUsername(_0x401072),_0x3b5875=db[_0x9feff9(0x218)]('profiles/'+_0x4b9b54);_0x3b5875[_0x9feff9(0x243)](_0x9feff9(0x251))[_0x9feff9(0x236)](_0x57197d=>{const _0x4ace31=_0x9feff9;if(_0x57197d[_0x4ace31(0x274)]())_0x248fff[_0x4ace31(0x241)]=_0x4ace31(0x203),_0x248fff[_0x4ace31(0x276)][_0x4ace31(0x28a)]='block';else{const _0x19ee1e={'username':_0x401072,'description':_0x2a8829,'lastChanged':Date[_0x4ace31(0x20a)](),'usernameHistory':[_0x401072]};_0x3b5875['set'](_0x19ee1e,_0x24910d=>{const _0x3a669e=_0x4ace31;_0x24910d?(console[_0x3a669e(0x1cb)](_0x3a669e(0x1e1),_0x24910d),_0x248fff[_0x3a669e(0x241)]=_0x3a669e(0x263),_0x248fff['style'][_0x3a669e(0x28a)]='block'):(localStorage[_0x3a669e(0x205)](_0x3a669e(0x248),_0x401072),localStorage[_0x3a669e(0x205)](_0x3a669e(0x26e),_0x2a8829),username=_0x401072,document['getElementById'](_0x3a669e(0x1d1))[_0x3a669e(0x241)]=_0x401072,showScreen(_0x3a669e(0x281)));});}})[_0x9feff9(0x1dc)](_0x229d39=>{const _0x4c6e48=_0x9feff9;console['error'](_0x4c6e48(0x23c),_0x229d39),_0x248fff[_0x4c6e48(0x241)]='‚ö†Ô∏è\x20Could\x20not\x20check\x20username.\x20Try\x20again.',_0x248fff['style'][_0x4c6e48(0x28a)]=_0x4c6e48(0x26b);});}function saveProfile(_0x45f99f,_0x2e5686,_0x39adc6){const _0xbb8d37=_0x37b11a,_0x22f363=Date[_0xbb8d37(0x20a)](),_0x471123=[_0x45f99f];db[_0xbb8d37(0x218)](_0xbb8d37(0x26f)+_0x39adc6)[_0xbb8d37(0x1e9)]({'username':_0x45f99f,'description':_0x2e5686,'lastChanged':_0x22f363,'usernameHistory':_0x471123}),localStorage[_0xbb8d37(0x205)]('chat_username',_0x45f99f),localStorage[_0xbb8d37(0x205)](_0xbb8d37(0x26e),_0x2e5686),document[_0xbb8d37(0x1da)](_0xbb8d37(0x1d1))['innerText']=_0x45f99f,showScreen(_0xbb8d37(0x281));}function generateRoom(){const _0x5787d5=_0x37b11a;roomCode=genRoomCode(),db[_0x5787d5(0x218)](_0x5787d5(0x254)+roomCode)[_0x5787d5(0x1e9)]({'active':!![],'created':Date[_0x5787d5(0x20a)]()}),startChat();}function joinRoom(){const _0x44c1e2=_0x37b11a,_0x292366=roomCode||document[_0x44c1e2(0x1da)](_0x44c1e2(0x224))[_0x44c1e2(0x251)][_0x44c1e2(0x214)]()[_0x44c1e2(0x217)]();if(!_0x292366)return alert(_0x44c1e2(0x1ce));roomCode=_0x292366;if(roomCode===STATIC_ROOM){showScreen(_0x44c1e2(0x227));return;}db[_0x44c1e2(0x218)]('rooms/'+roomCode)['get']()[_0x44c1e2(0x236)](_0x1d706d=>{const _0x502273=_0x44c1e2;_0x1d706d['exists']()&&_0x1d706d[_0x502273(0x1c6)]()[_0x502273(0x229)]!==![]?startChat():alert('Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.');});}function startChat(){const _0x3ecce2=_0x37b11a;if(!roomCode||!username)return alert(_0x3ecce2(0x24e)),showScreen(_0x3ecce2(0x281));checkIfAdmin()['then'](()=>{const _0x6de2fe=_0x3ecce2,_0x1df8d7=sanitizeUsername(username),_0x1a9467=db[_0x6de2fe(0x218)](_0x6de2fe(0x249)+roomCode+'/'+_0x1df8d7),_0x44d16a={'username':username,'lastOnline':firebase[_0x6de2fe(0x259)][_0x6de2fe(0x210)]['TIMESTAMP'],'online':!![]};db[_0x6de2fe(0x218)](_0x6de2fe(0x262)+roomCode+'/'+_0x1df8d7)[_0x6de2fe(0x243)]('value')[_0x6de2fe(0x236)](_0x3e6b24=>{const _0x475cf8=_0x6de2fe;_0x3e6b24[_0x475cf8(0x274)]()&&(_0x44d16a[_0x475cf8(0x27f)]=!![]),_0x1a9467[_0x475cf8(0x1e9)](_0x44d16a,_0x1d0444=>{const _0xc13631=_0x475cf8;if(_0x1d0444)return alert(_0xc13631(0x273)),showScreen(_0xc13631(0x281));_0x1a9467['onDisconnect']()[_0xc13631(0x1db)]({'online':![],'lastOnline':Date[_0xc13631(0x20a)]()}),document[_0xc13631(0x1da)](_0xc13631(0x22c))[_0xc13631(0x241)]=username,roomCode===STATIC_ROOM?document['getElementById'](_0xc13631(0x1e7))['innerText']=_0xc13631(0x288):document[_0xc13631(0x1da)](_0xc13631(0x1e7))[_0xc13631(0x241)]=roomCode,showScreen('chatScreen'),listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();});});});}function validateStaticRoomPassword(){const _0x57c22d=_0x37b11a,_0x36c5d9=document['getElementById']('staticPasswordInput')[_0x57c22d(0x251)],_0x1ef774=document[_0x57c22d(0x1da)](_0x57c22d(0x25d));db[_0x57c22d(0x218)](_0x57c22d(0x22e))[_0x57c22d(0x23d)]()[_0x57c22d(0x236)](_0x1830a0=>{const _0x3426a1=_0x57c22d,_0x2a962b=_0x1830a0['val']();_0x36c5d9===_0x2a962b?(_0x1ef774[_0x3426a1(0x276)][_0x3426a1(0x28a)]=_0x3426a1(0x1e4),startChat()):_0x1ef774[_0x3426a1(0x276)][_0x3426a1(0x28a)]=_0x3426a1(0x26b);});}const spamTimestamps=[];function sendMessage(){const _0x11dbf3=_0x37b11a,_0x55a540=document[_0x11dbf3(0x1da)](_0x11dbf3(0x1de)),_0x1d9e47=_0x55a540['value'][_0x11dbf3(0x214)]();if(!_0x1d9e47||isBlocked)return;const _0x167210=Date['now']();spamTimestamps['push'](_0x167210);const _0x4112a6=spamTimestamps['filter'](_0x1c02c0=>_0x167210-_0x1c02c0<0x1b58);if(_0x4112a6['length']>0x5){isBlocked=!![],_0x55a540[_0x11dbf3(0x1d5)]=!![],_0x55a540[_0x11dbf3(0x1fd)]=_0x11dbf3(0x1f0),alert(_0x11dbf3(0x257)),setTimeout(()=>{const _0x12410d=_0x11dbf3;isBlocked=![],_0x55a540[_0x12410d(0x1d5)]=![],_0x55a540[_0x12410d(0x1fd)]=_0x12410d(0x232),spamTimestamps[_0x12410d(0x1f8)]=0x0;},0x7530);return;}const _0x2c8ab1=localStorage[_0x11dbf3(0x1df)](_0x11dbf3(0x228))||'',_0x5166a4=db['ref']()[_0x11dbf3(0x269)]()['key'];db[_0x11dbf3(0x218)]('rooms/'+roomCode+'/messages/'+_0x5166a4)[_0x11dbf3(0x1e9)]({'msg':_0x1d9e47,'sender':username,'senderId':clientId,'avatarBase64':_0x2c8ab1,'timestamp':_0x167210}),_0x55a540['value']='',sendTyping(!![]),lastActivity=_0x167210;}function listenForMessages(){const _0x455169=_0x37b11a,_0x53db80=db[_0x455169(0x218)](_0x455169(0x254)+roomCode+_0x455169(0x250)),_0x6440cf=_0x53db80[_0x455169(0x20d)](MAX_MESSAGES);_0x6440cf['on'](_0x455169(0x1f1),_0x15cc5a=>{const _0x3cc909=_0x455169,_0x564746=_0x15cc5a[_0x3cc909(0x1c6)](),{senderId:_0x23809d}=_0x564746,_0x459526=_0x23809d===clientId;if(!userListReady){pendingMessages[_0x3cc909(0x269)]({'data':_0x564746,'sent':_0x459526,'key':_0x15cc5a[_0x3cc909(0x225)]});return;}const _0x15ac25=_0x564746[_0x3cc909(0x1ea)]||null,_0x1ae3a0=_0x564746['audioBase64']||null;addMessage(_0x564746,_0x459526,_0x15cc5a[_0x3cc909(0x225)]),roomCode!==STATIC_ROOM&&db[_0x3cc909(0x218)]('rooms/'+roomCode+'/messages/'+_0x15cc5a['key'])[_0x3cc909(0x207)](),!_0x459526&&(sound[_0x3cc909(0x286)](),flagPageAttention());});}function addMessage(_0x273770,_0x3464ff,_0x531e58=null){const _0xc0b9e=_0x37b11a,{msg:_0x5c587e,sender:_0x43e320,senderId:_0xe4e822,timestamp:_0x291afc,audioUrl:_0x400f02,audioBase64:_0x1eb68b,imageBase64:_0x4c4cad}=_0x273770,_0x3ae949=document['createElement'](_0xc0b9e(0x252));_0x3ae949['classList']['add'](_0xc0b9e(0x1ff),_0x3464ff?_0xc0b9e(0x200):'received');const _0x3d6cda=new Date(_0x291afc)['toLocaleTimeString']([],{'hour':'2-digit','minute':'2-digit'}),_0x1ca576=sanitizeUsername(_0x43e320),_0x42c009=roomUsers[_0x1ca576]||{},_0x27525f=_0x42c009[_0xc0b9e(0x220)]?_0xc0b9e(0x1f7)+_0x42c009[_0xc0b9e(0x220)]+_0xc0b9e(0x1f2):_0xc0b9e(0x287);let _0x1dcd16=_0x27525f+_0xc0b9e(0x22f)+_0x43e320+_0xc0b9e(0x1fc);_0x42c009[_0xc0b9e(0x27f)]&&(_0x1dcd16+=_0xc0b9e(0x266));_0x1dcd16+=_0xc0b9e(0x204);const _0x55d7ee=_0x5c587e?.[_0xc0b9e(0x1e8)](new RegExp('@'+username+'\x5cb','gi'),'<span\x20style=\x22color:#ff4081;\x22>@$&</span>');if(_0x400f02)_0x1dcd16+='<audio\x20controls\x20src=\x22'+_0x400f02+_0xc0b9e(0x1e3);else{if(_0x1eb68b){const _0x2acbf4=_0xc0b9e(0x20e)+_0x1eb68b;_0x1dcd16+=_0xc0b9e(0x21b)+_0x2acbf4+_0xc0b9e(0x1e3);}else{if(_0x4c4cad){const _0x578f24=_0xc0b9e(0x238)+_0x4c4cad;_0x1dcd16+=_0xc0b9e(0x239)+_0x578f24+_0xc0b9e(0x289);}else _0x1dcd16+=_0xc0b9e(0x22d)+_0x55d7ee+_0xc0b9e(0x1c3);}}_0x1dcd16+=_0xc0b9e(0x1f6)+_0x3d6cda+_0xc0b9e(0x201),_0x3ae949[_0xc0b9e(0x21a)]=_0x1dcd16;if(isRoomAdmin&&_0x531e58){const _0x36770b=document[_0xc0b9e(0x23e)](_0xc0b9e(0x1c5));_0x36770b['innerText']=_0xc0b9e(0x283),_0x36770b[_0xc0b9e(0x276)][_0xc0b9e(0x285)]=_0xc0b9e(0x219),_0x36770b[_0xc0b9e(0x255)]=()=>{const _0x5a4ff1=_0xc0b9e;confirm(_0x5a4ff1(0x22b))&&(db[_0x5a4ff1(0x218)](_0x5a4ff1(0x254)+roomCode+'/messages/'+_0x531e58)[_0x5a4ff1(0x207)](),_0x3ae949[_0x5a4ff1(0x207)]());},_0x3ae949[_0xc0b9e(0x1f3)](_0x36770b);}const _0x170fe7=document[_0xc0b9e(0x1da)](_0xc0b9e(0x1fb));_0x170fe7[_0xc0b9e(0x1f3)](_0x3ae949),_0x170fe7[_0xc0b9e(0x1d8)]=_0x170fe7[_0xc0b9e(0x1d0)];}function cleanupOldRooms(){const _0x539e98=_0x37b11a;db[_0x539e98(0x218)](_0x539e98(0x1d2))[_0x539e98(0x243)](_0x539e98(0x251))['then'](_0x3e3f45=>{const _0x2ac083=_0x539e98,_0x573ded=_0x3e3f45[_0x2ac083(0x1c6)]();if(!_0x573ded)return;const _0x3c2d6a=Date[_0x2ac083(0x20a)]();for(const _0x5be9c2 in _0x573ded){if(_0x5be9c2===STATIC_ROOM)continue;const _0x353f6a=_0x573ded[_0x5be9c2];_0x3c2d6a-(_0x353f6a[_0x2ac083(0x279)]||0x0)>0x2*0x3c*0x3e8&&db['ref'](_0x2ac083(0x254)+_0x5be9c2)[_0x2ac083(0x207)]();}db[_0x2ac083(0x218)]('antispam')[_0x2ac083(0x243)]('value')[_0x2ac083(0x236)](_0x4ee3e2=>{const _0x5de81e=_0x2ac083,_0x1ddb52=_0x4ee3e2[_0x5de81e(0x1c6)]();if(!_0x1ddb52)return;for(const _0x5348ed in _0x1ddb52){if(_0x5348ed!==STATIC_ROOM)db[_0x5de81e(0x218)](_0x5de81e(0x202)+_0x5348ed)[_0x5de81e(0x207)]();}}),db[_0x2ac083(0x218)](_0x2ac083(0x24c))[_0x2ac083(0x243)](_0x2ac083(0x251))['then'](_0x57ef69=>{const _0x6aaf4c=_0x2ac083,_0x4c5133=_0x57ef69[_0x6aaf4c(0x1c6)]();if(!_0x4c5133)return;for(const _0x22268a in _0x4c5133){if(_0x22268a!==STATIC_ROOM)db[_0x6aaf4c(0x218)](_0x6aaf4c(0x1d7)+_0x22268a)[_0x6aaf4c(0x207)]();}});});}document[_0x37b11a(0x212)](_0x37b11a(0x22a),()=>{const _0x1fd12=_0x37b11a,_0x3e0ab8=document[_0x1fd12(0x1da)]('msgInput');_0x3e0ab8&&_0x3e0ab8['addEventListener'](_0x1fd12(0x27a),function(_0x44dc99){const _0x29d890=_0x1fd12;_0x44dc99[_0x29d890(0x225)]===_0x29d890(0x1d6)&&(_0x44dc99[_0x29d890(0x26d)](),sendMessage());});});function showScreen(_0x19db0d){const _0xf696cf=_0x37b11a;[_0xf696cf(0x1c7),_0xf696cf(0x281),_0xf696cf(0x240),'chatScreen',_0xf696cf(0x227),_0xf696cf(0x25c),'profileViewer'][_0xf696cf(0x242)](_0x473d6e=>{const _0x42b866=_0xf696cf;document['getElementById'](_0x473d6e)[_0x42b866(0x276)][_0x42b866(0x28a)]=_0x42b866(0x1e4);}),document['getElementById'](_0x19db0d)['style'][_0xf696cf(0x28a)]=_0xf696cf(0x1cd);}function genRoomCode(){const _0x15074b=_0x37b11a,_0x21c100='ABCDEFGHIJKLMNOPQRSTUVWXYZ',_0x2eba7c=_0x15074b(0x24b),_0x2dc0d6=(_0x323ff2,_0x183c1f)=>Array[_0x15074b(0x27e)]({'length':_0x183c1f},()=>_0x323ff2[Math[_0x15074b(0x25f)](Math['random']()*_0x323ff2[_0x15074b(0x1f8)])])['join']('');return _0x2dc0d6(_0x2eba7c,0x3)+_0x2dc0d6(_0x21c100,0x3)+_0x2dc0d6(_0x2eba7c,0x2)+_0x2dc0d6(_0x21c100,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x51c3de=_0x517c;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x51c3de(0x218)](_0x51c3de(0x254)+roomCode)['update']({'active':![]}),alert('Session\x20expired.'),location['reload']());},0x7530);}function setupSidebarBackHandler(){const _0x5d5fa6=_0x37b11a;window[_0x5d5fa6(0x212)](_0x5d5fa6(0x284),()=>{const _0x678b2d=_0x5d5fa6,_0x48363b=document[_0x678b2d(0x1da)](_0x678b2d(0x21f));_0x48363b?.[_0x678b2d(0x277)][_0x678b2d(0x25e)](_0x678b2d(0x275))&&_0x48363b['classList'][_0x678b2d(0x207)](_0x678b2d(0x275));});}function toggleSidebar(){const _0x2ae675=_0x37b11a,_0x2c0fe4=document[_0x2ae675(0x1da)](_0x2ae675(0x21f));if(!_0x2c0fe4[_0x2ae675(0x277)]['contains'](_0x2ae675(0x275)))_0x2c0fe4['classList'][_0x2ae675(0x1f4)](_0x2ae675(0x275)),history[_0x2ae675(0x25b)]({'sidebarOpen':!![]},'');else{_0x2c0fe4[_0x2ae675(0x277)][_0x2ae675(0x207)]('show');if(history[_0x2ae675(0x282)]?.[_0x2ae675(0x1ed)])history['back']();}}function setupVisibilityAttention(){const _0x588834=_0x37b11a;let _0x4bcf8e=0x0,_0x2aeaa=document[_0x588834(0x26a)];document[_0x588834(0x212)](_0x588834(0x23b),()=>{const _0x4d8166=_0x588834;!document[_0x4d8166(0x20c)]&&(document[_0x4d8166(0x26a)]=_0x2aeaa,_0x4bcf8e=0x0);}),window['flagPageAttention']=function(){const _0x343bb6=_0x588834;document[_0x343bb6(0x20c)]&&(_0x4bcf8e++,document[_0x343bb6(0x26a)]='('+_0x4bcf8e+_0x343bb6(0x230)+_0x2aeaa);};}function tryEditProfile(){const _0x5566da=_0x37b11a,_0x5984ee=sanitizeUsername(username);db[_0x5566da(0x218)](_0x5566da(0x26f)+_0x5984ee)[_0x5566da(0x23d)]()[_0x5566da(0x236)](_0x58e885=>{const _0x362347=_0x5566da,_0x175de0=_0x58e885[_0x362347(0x1c6)]();if(!_0x175de0)return alert(_0x362347(0x216));const _0x8e4b26=_0x175de0['lastChanged']||0x0,_0x567067=Date[_0x362347(0x20a)](),_0x4f21eb=0x18*0x3c*0x3c*0x3e8;if(_0x567067-_0x8e4b26<_0x4f21eb){const _0x183c02=Math['ceil']((_0x4f21eb-(_0x567067-_0x8e4b26))/(0x3c*0x3e8));alert(_0x362347(0x256)+_0x183c02+_0x362347(0x237));}else showScreen(_0x362347(0x25c)),document[_0x362347(0x1da)]('profileUsernameInput')[_0x362347(0x251)]=username,document[_0x362347(0x1da)](_0x362347(0x1fe))[_0x362347(0x251)]=_0x175de0['description']||'';});}function _0x517c(_0x237773,_0x52a850){const _0x58da13=_0x58da();return _0x517c=function(_0x517c09,_0x5b9080){_0x517c09=_0x517c09-0x1c2;let _0x5ba438=_0x58da13[_0x517c09];return _0x5ba438;},_0x517c(_0x237773,_0x52a850);}function listenForUserList(){const _0xbf3960=_0x37b11a;db[_0xbf3960(0x218)](_0xbf3960(0x249)+roomCode)['on'](_0xbf3960(0x251),_0x147df7=>{const _0xbf06f4=_0xbf3960,_0x3ed075=_0x147df7['val']()||{},_0x594a7=Date[_0xbf06f4(0x20a)]();roomUsers={},Object[_0xbf06f4(0x1e6)](_0x3ed075)['forEach'](([_0x5287ed,_0x316be3])=>{roomUsers[sanitizeUsername(_0x316be3['username'])]=_0x316be3;}),userListReady=!![],pendingMessages[_0xbf06f4(0x242)](({data:_0x45bbe1,sent:_0x29471f,key:_0x28e4a7})=>{addMessage(_0x45bbe1,_0x29471f,_0x28e4a7);}),pendingMessages=[];const _0x598110=Object[_0xbf06f4(0x24d)](_0x3ed075)['map'](_0x1bd87f=>{const _0x28a104=_0xbf06f4,_0x54206d=_0x1bd87f['online'],_0x438679=_0x594a7-_0x1bd87f[_0x28a104(0x268)]<=0x1e*0x3c*0x3e8;if(!_0x54206d&&!_0x438679)return'';const _0x552b17=_0x54206d?'#00ff88':_0x28a104(0x21d),_0x2c2ec5=_0x54206d?'üü¢':'üïí',_0xc75eb8=_0x1bd87f['avatarBase64']?_0x28a104(0x1f7)+_0x1bd87f[_0x28a104(0x220)]+_0x28a104(0x222):_0x28a104(0x1eb),_0x4defe4=_0x1bd87f[_0x28a104(0x27f)]?'\x20<span\x20style=\x22color:red;\x22>Admin</span>':'';return _0x28a104(0x1f5)+_0x552b17+_0x28a104(0x1c9)+sanitizeUsername(_0x1bd87f[_0x28a104(0x270)])+_0x28a104(0x246)+_0xc75eb8+_0x2c2ec5+'\x20'+_0x1bd87f[_0x28a104(0x270)]+_0x4defe4+_0x28a104(0x1f9);})[_0xbf06f4(0x278)]('');document[_0xbf06f4(0x1da)](_0xbf06f4(0x28c))[_0xbf06f4(0x21a)]=_0x598110;});}function sendTyping(_0x45f99b=![]){const _0x30d42d=_0x37b11a;if(isBlocked)return;const _0x58ccf4=_0x30d42d(0x254)+roomCode+_0x30d42d(0x20f)+clientId;_0x45f99b?db[_0x30d42d(0x218)](_0x58ccf4)[_0x30d42d(0x207)]():(db['ref'](_0x58ccf4)[_0x30d42d(0x1e9)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x215048=_0x30d42d;db[_0x215048(0x218)](_0x58ccf4)['remove']();},0xbb8));}function listenForTyping(){const _0x270531=_0x37b11a,_0x247705=document[_0x270531(0x1da)](_0x270531(0x26c));db['ref']('rooms/'+roomCode+'/typing')['on'](_0x270531(0x251),_0xa86b41=>{const _0x1bbc5d=_0x270531,_0x3d26e4=_0xa86b41[_0x1bbc5d(0x1c6)]();if(!_0x3d26e4)return _0x247705[_0x1bbc5d(0x241)]='';const _0x5461fb=Object['values'](_0x3d26e4)[_0x1bbc5d(0x1ee)](_0x1aa5d3=>_0x1aa5d3!==username);_0x247705[_0x1bbc5d(0x241)]=_0x5461fb[_0x1bbc5d(0x1f8)]?_0x5461fb[_0x1bbc5d(0x278)](',\x20')+_0x1bbc5d(0x213):'';});}function trackPresence(){const _0x1e675a=_0x37b11a;if(!username||!roomCode)return;const _0x2e3de3=sanitizeUsername(username),_0x1a826=db['ref'](_0x1e675a(0x249)+roomCode+'/'+_0x2e3de3),_0x3305c0=localStorage[_0x1e675a(0x1df)](_0x1e675a(0x228))||'',_0x29f5fb={'username':username,'lastOnline':firebase[_0x1e675a(0x259)][_0x1e675a(0x210)][_0x1e675a(0x271)],'online':!![],'avatarBase64':_0x3305c0};db['ref'](_0x1e675a(0x262)+roomCode+'/'+_0x2e3de3)[_0x1e675a(0x243)]('value')[_0x1e675a(0x236)](_0x483179=>{const _0x550c45=_0x1e675a;if(_0x483179['exists']())_0x29f5fb['admin']=!![];_0x1a826[_0x550c45(0x1e9)](_0x29f5fb),_0x1a826[_0x550c45(0x20b)]()[_0x550c45(0x1db)]({'online':![],'lastOnline':Date[_0x550c45(0x20a)]()}),updateOnlineIndicator();});}function uploadSidebarAvatar(_0x3abe0f){const _0x49407d=_0x37b11a;if(!_0x3abe0f['files']['length'])return;const _0x18aae6=new FileReader();_0x18aae6[_0x49407d(0x1d9)]=()=>{const _0x39c72e=_0x49407d,_0x3c06a6=_0x18aae6[_0x39c72e(0x1fa)][_0x39c72e(0x25a)](',')[0x1];localStorage['setItem']('avatar_base64',_0x3c06a6);const _0x4a69d6=document['getElementById'](_0x39c72e(0x208));_0x4a69d6[_0x39c72e(0x1d3)]='data:image/png;base64,'+_0x3c06a6,_0x4a69d6['style']['display']=_0x39c72e(0x26b),trackPresence();},_0x18aae6[_0x49407d(0x265)](_0x3abe0f['files'][0x0]);}function muteUser(_0x405fb2,_0xd26f60){const _0x42dfb5=_0x37b11a;if(!isRoomAdmin)return alert(_0x42dfb5(0x1c8));const _0x2f5830=Date[_0x42dfb5(0x20a)]()+_0xd26f60*0x3c*0x3e8;db[_0x42dfb5(0x218)]('muted/'+roomCode+'/'+sanitizeUsername(_0x405fb2))['set'](_0x2f5830);}function unmuteUser(_0x58b4f5){const _0x5af3c4=_0x37b11a;if(!isRoomAdmin)return alert(_0x5af3c4(0x1c8));db['ref']('muted/'+roomCode+'/'+sanitizeUsername(_0x58b4f5))[_0x5af3c4(0x207)]();}function updateOnlineIndicator(){const _0x1ca4f0=_0x37b11a,_0x5a461e=document['getElementById'](_0x1ca4f0(0x258));_0x5a461e['innerText']=_0x1ca4f0(0x231),_0x5a461e['style'][_0x1ca4f0(0x264)]=_0x1ca4f0(0x27b);}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x14b520){const _0x5df299=_0x37b11a;db[_0x5df299(0x218)](_0x5df299(0x26f)+_0x14b520)['get']()['then'](_0x126d32=>{const _0x31cc8b=_0x5df299;if(!_0x126d32[_0x31cc8b(0x274)]())return;const _0x3c4334=_0x126d32['val'](),_0x26a65b=('\x0aName:\x20'+_0x3c4334[_0x31cc8b(0x270)]+'\x0aDescription:\x20'+(_0x3c4334['description']||_0x31cc8b(0x1cc))+_0x31cc8b(0x27d)+(_0x3c4334['usernameHistory']||[])[_0x31cc8b(0x278)]('\x0a')+_0x31cc8b(0x21c)+new Date(_0x3c4334['lastChanged'])['toLocaleString']()+_0x31cc8b(0x245))['trim']();document[_0x31cc8b(0x1da)](_0x31cc8b(0x280))[_0x31cc8b(0x241)]=_0x26a65b,document[_0x31cc8b(0x1da)]('profileViewer')['style'][_0x31cc8b(0x28a)]=_0x31cc8b(0x26b);});}function initUsernameFlow(){const _0x46918a=_0x37b11a,_0x2e887b=localStorage['getItem']('chat_username');!_0x2e887b?showScreen(_0x46918a(0x25c)):(username=_0x2e887b,document[_0x46918a(0x1da)](_0x46918a(0x1d1))[_0x46918a(0x241)]=username,showScreen(_0x46918a(0x281)));}function _0x58da(){const _0xe4fad3=['<div>','gr8stg','<span\x20class=\x22sender-name\x22>',')\x20New\x20message\x20‚Ä¢\x20','‚óè\x20Online','Type\x20a\x20message...','substr','32353281rhLZcc','onload','then','\x20minutes.','data:image/png;base64,','<img\x20src=\x22','initializeApp','visibilitychange','Error\x20checking\x20username:','get','createElement','768945xhjuhL','codeEntryScreen','innerText','forEach','once','505983gJSHOq','\x0a\x20\x20\x20\x20','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','https://easy-chatroom-default-rtdb.firebaseio.com','chat_username','users/','easy-chatroom','0123456789','antispamBlocked','values','Missing\x20room\x20or\x20user\x20information.','1:985049198428:web:d0eb7e2de39887710c9b99','/messages','value','div','9265080EvtLyD','rooms/','onclick','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','‚õî\x20You‚Äôve\x20been\x20muted\x20for\x20spamming.\x20Please\x20wait\x2030\x20seconds.','onlineStatus','database','split','pushState','profileScreen','passwordError','contains','floor','419574DOvTbP','sounds/beep.mp3','admins/','‚ö†Ô∏è\x20Failed\x20to\x20save\x20profile.\x20Try\x20again.','color','readAsDataURL','\x20<span\x20style=\x22color:red;font-weight:bold;\x22>Admin</span>','profileViewer','lastOnline','push','title','block','typing','preventDefault','profile_description','profiles/','username','TIMESTAMP','getUserMedia','Failed\x20to\x20register\x20user\x20in\x20room.','exists','show','style','classList','join','created','keypress','#00ff88','üéôÔ∏è','\x0aHistory:\x0a','from','admin','profileContent','roomChoiceScreen','state','üóëÔ∏è','popstate','cssText','play','<span\x20style=\x22margin-right:8px;\x22>üë§</span>','No\x20room\x20code\x20available\x20for\x20private\x20rooms','\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>','display','stop','userList','/messages/','</div>','4vuTRsJ','button','val','usernameScreen','Admins\x20only.',';cursor:pointer;display:flex;align-items:center;gap:6px;\x22\x20onclick=\x22viewProfile(\x27','audio/webm','error','No\x20bio\x20set','flex','Enter\x20a\x20valid\x20room\x20code','start','scrollHeight','namePreview','rooms','src','easy-chatroom.firebasestorage.app','disabled','Enter','antispamBlocked/','scrollTop','onloadend','getElementById','update','catch','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','msgInput','getItem','random','Failed\x20to\x20save\x20profile:','toString','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','none','8olBHFC','entries','roomDisplay','replace','set','audioUrl','<span\x20style=\x22margin-right:5px;\x22>üë§</span>','recordBtn','sidebarOpen','filter','profileUsernameInput','‚õî\x20You\x27re\x20blocked\x20for\x20spamming\x20(30s)','child_added','\x22\x20style=\x22width:28px;height:28px;border-radius:50%;margin-right:8px;vertical-align:middle;\x22>','appendChild','add','<li\x20style=\x22color:','<small>','<img\x20src=\x22data:image/png;base64,','length','\x0a\x20\x20\x20\x20\x20\x20</li>','result','messages','</span>','placeholder','profileDescriptionInput','msg','sent','</small>','antispam/','‚ùå\x20Username\x20already\x20taken.','<br>','setItem','10WNFQXL','remove','sidebarAvatarPreview','G-QDESJ2WR42','now','onDisconnect','hidden','limitToLast','data:audio/webm;base64,','/typing/','ServerValue','[Voice\x20message]','addEventListener','\x20typing...','trim','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','Profile\x20not\x20found.','toUpperCase','ref','margin-left:5px;background:none;border:none;color:red;cursor:pointer;','innerHTML','<audio\x20controls\x20src=\x22','\x0aLast\x20Changed:\x20','#888','3510440sHqtnv','userSidebar','avatarBase64','onstop','\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;vertical-align:middle;\x22>','9057979KFlHhi','roomCodeInput','key','ondataavailable','passwordScreen','avatar_base64','active','DOMContentLoaded','Delete\x20this\x20message?','userDisplay'];_0x58da=function(){return _0xe4fad3;};return _0x58da();}function closeProfile(){const _0x3d78f5=_0x37b11a;document[_0x3d78f5(0x1da)](_0x3d78f5(0x267))[_0x3d78f5(0x276)][_0x3d78f5(0x28a)]=_0x3d78f5(0x1e4);}