const _0x186074=_0x55b5;(function(_0x155872,_0x84f9e6){const _0x5581a7=_0x55b5,_0x1b175a=_0x155872();while(!![]){try{const _0x57af59=-parseInt(_0x5581a7(0xbe))/0x1*(parseInt(_0x5581a7(0xdd))/0x2)+parseInt(_0x5581a7(0xb1))/0x3+-parseInt(_0x5581a7(0x9d))/0x4*(parseInt(_0x5581a7(0xeb))/0x5)+-parseInt(_0x5581a7(0xab))/0x6+-parseInt(_0x5581a7(0xc4))/0x7+parseInt(_0x5581a7(0xe6))/0x8*(-parseInt(_0x5581a7(0x9f))/0x9)+parseInt(_0x5581a7(0xb8))/0xa;if(_0x57af59===_0x84f9e6)break;else _0x1b175a['push'](_0x1b175a['shift']());}catch(_0x5b8d73){_0x1b175a['push'](_0x1b175a['shift']());}}}(_0xb5b8,0xe0230));const firebaseConfig={'apiKey':_0x186074(0x93),'authDomain':_0x186074(0xf7),'databaseURL':_0x186074(0xa5),'projectId':_0x186074(0x9e),'storageBucket':_0x186074(0xd4),'messagingSenderId':_0x186074(0x9a),'appId':_0x186074(0xed),'measurementId':_0x186074(0xf9)};firebase[_0x186074(0xaa)](firebaseConfig);const db=firebase[_0x186074(0xf2)](),STATIC_ROOM='050BBB66HH',ROOM_TTL_MS=0x2*0x3c*0x3e8;let username=localStorage[_0x186074(0xd3)]('chat_username'),roomCode='',clientId=generateClientId(),lastActivity=Date['now'](),typingTimeout;window[_0x186074(0x98)]=()=>{const _0xeb2688=_0x186074;!username?showScreen('usernameScreen'):(document[_0xeb2688(0x92)](_0xeb2688(0xc9))[_0xeb2688(0xda)]=username,showScreen('roomChoiceScreen')),cleanupOldRooms(),!username?showScreen('usernameScreen'):(document['getElementById']('namePreview')[_0xeb2688(0xda)]=username,showScreen(_0xeb2688(0xe8)));};function saveUsername(){const _0x4df946=_0x186074;username=document[_0x4df946(0x92)](_0x4df946(0xb5))['value'][_0x4df946(0x9b)]();if(!username)return alert('Please\x20enter\x20your\x20name');localStorage[_0x4df946(0xb2)]('chat_username',username),document[_0x4df946(0x92)](_0x4df946(0xc9))['innerText']=username,showScreen('roomChoiceScreen');}function generateRoom(){const _0x3e49e9=_0x186074;roomCode=genRoomCode(),db[_0x3e49e9(0xc7)]('rooms/'+roomCode)['set']({'active':!![],'created':Date[_0x3e49e9(0xd9)]()}),startChat();}function joinRoom(){const _0x1f34f6=_0x186074;roomCode=document[_0x1f34f6(0x92)](_0x1f34f6(0xa2))[_0x1f34f6(0xaf)][_0x1f34f6(0x9b)]()[_0x1f34f6(0xb7)]();if(!roomCode)return alert(_0x1f34f6(0x9c));db[_0x1f34f6(0xc7)](_0x1f34f6(0xe7)+roomCode)['get']()[_0x1f34f6(0xfb)](_0x4d7a7c=>{const _0x18dee2=_0x1f34f6;_0x4d7a7c[_0x18dee2(0x95)]()&&_0x4d7a7c[_0x18dee2(0xc5)]()[_0x18dee2(0xa4)]!==![]?startChat():alert(_0x18dee2(0xcc));});}function _0xb5b8(){const _0x193c40=['namePreview','0123456789','<li\x20style=\x22color:','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','ABCDEFGHIJKLMNOPQRSTUVWXYZ','</span><br>','remove','\x20typing...','createElement','limitToLast','getItem','easy-chatroom.firebasestorage.app','once','#888','usernameScreen','received','now','innerText','classList','beforeunload','2zFEJsl','/messages/','substr','set','addEventListener','display','#00ff88','join','2-digit','8eJCtGF','rooms/','roomChoiceScreen','codeEntryScreen','050BBB66HH','5PDKqVG','created','1:985049198428:web:d0eb7e2de39887710c9b99','DOMContentLoaded','reload','sent','scrollTop','database','msg','userList','</small>','users/','easy-chatroom.firebaseapp.com','push','G-QDESJ2WR42','online','then','floor','toString','entries','getElementById','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','/typing/','exists','none','values','onload','chatScreen','985049198428','trim','Enter\x20a\x20valid\x20room\x20code','2600984VmMjbH','easy-chatroom','13004739KdjaoV','\x20left\x20the\x20room','key','roomCodeInput','lastOnline','active','https://easy-chatroom-default-rtdb.firebaseio.com','roomDisplay','random','forEach','style','initializeApp','6583290EzGugz','keypress','filter','flex','value','div','866028roJfHg','setItem','child_added','TIMESTAMP','usernameInput','typing','toUpperCase','53370220dyEYaD','\x20joined\x20the\x20room','preventDefault','Enter','/typing','map','1244647yXBXUp','rooms','length','onDisconnect','add','messages','1893885mEICyl','val','<small>','ref','system'];_0xb5b8=function(){return _0x193c40;};return _0xb5b8();}function joinGlobalRoom(){const _0x4da53e=_0x186074;roomCode=_0x4da53e(0xea),db[_0x4da53e(0xc7)](_0x4da53e(0xe7)+roomCode)['set']({'active':!![],'created':Date[_0x4da53e(0xd9)]()}),startChat();}function startChat(){const _0x49704f=_0x186074;showScreen(_0x49704f(0x99)),document['getElementById']('userDisplay')[_0x49704f(0xda)]=username,document[_0x49704f(0x92)](_0x49704f(0xa6))[_0x49704f(0xda)]=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),logSystemMessage(username+_0x49704f(0xb9)),window[_0x49704f(0xe1)](_0x49704f(0xdc),()=>{const _0x3c5f47=_0x49704f;logSystemMessage(username+_0x3c5f47(0xa0));});}function trackPresence(){const _0x5078e9=_0x186074,_0x3987be=db[_0x5078e9(0xc7)](_0x5078e9(0xf6)+roomCode+'/'+clientId),_0xe81247={'username':username,'lastOnline':firebase[_0x5078e9(0xf2)]['ServerValue'][_0x5078e9(0xb4)],'online':!![]};_0x3987be[_0x5078e9(0xe0)](_0xe81247),_0x3987be[_0x5078e9(0xc1)]()['update']({'online':![],'lastOnline':Date[_0x5078e9(0xd9)]()}),listenForUserList();}function listenForUserList(){const _0x43a7dc=_0x186074;db[_0x43a7dc(0xc7)](_0x43a7dc(0xf6)+roomCode)['on'](_0x43a7dc(0xaf),_0x1ea84e=>{const _0x7c1565=_0x43a7dc,_0x512088=_0x1ea84e[_0x7c1565(0xc5)]()||{},_0x196d5e=Object[_0x7c1565(0x97)](_0x512088),_0x547f54=Date[_0x7c1565(0xd9)](),_0x3fc57e=_0x196d5e[_0x7c1565(0xbd)](_0x12fb94=>{const _0x527927=_0x7c1565,_0x55d829=_0x12fb94[_0x527927(0xfa)]===!![],_0x51af8d=_0x547f54-_0x12fb94[_0x527927(0xa3)]<=0x1e*0x3c*0x3e8;if(_0x55d829||_0x51af8d){const _0x412573=_0x55d829?_0x527927(0xe3):_0x527927(0xd6),_0x4a0694=_0x55d829?'🟢':'🕒';return _0x527927(0xcb)+_0x412573+'\x22>'+_0x4a0694+'\x20'+_0x12fb94['username']+'</li>';}return'';})[_0x7c1565(0xe4)]('');document[_0x7c1565(0x92)](_0x7c1565(0xf4))['innerHTML']=_0x3fc57e;});}function logSystemMessage(_0x2b9c2a){const _0x524c5a=_0x186074,_0x590903=db[_0x524c5a(0xc7)]()[_0x524c5a(0xf8)]()[_0x524c5a(0xa1)];db[_0x524c5a(0xc7)]('rooms/'+roomCode+'/messages/'+_0x590903)['set']({'msg':_0x2b9c2a,'sender':'System','senderId':_0x524c5a(0xc8),'timestamp':Date[_0x524c5a(0xd9)]()});}document[_0x186074(0xe1)](_0x186074(0xee),()=>{const _0x50a643=_0x186074,_0x26b2d0=document['getElementById']('msgInput');_0x26b2d0&&_0x26b2d0['addEventListener'](_0x50a643(0xac),function(_0x56ce22){const _0x4d3c77=_0x50a643;_0x56ce22[_0x4d3c77(0xa1)]===_0x4d3c77(0xbb)&&(_0x56ce22[_0x4d3c77(0xba)](),sendMessage());});});function showScreen(_0x4d7461){const _0x1d5271=_0x186074;[_0x1d5271(0xd7),'roomChoiceScreen',_0x1d5271(0xe9),'chatScreen'][_0x1d5271(0xa8)](_0x49ec5e=>{const _0x54b424=_0x1d5271;document[_0x54b424(0x92)](_0x49ec5e)[_0x54b424(0xa9)][_0x54b424(0xe2)]=_0x54b424(0x96);}),document[_0x1d5271(0x92)](_0x4d7461)[_0x1d5271(0xa9)][_0x1d5271(0xe2)]=_0x1d5271(0xae);}function sendMessage(){const _0x25a383=_0x186074,_0x25c0cc=document[_0x25a383(0x92)]('msgInput'),_0x254b18=_0x25c0cc['value'][_0x25a383(0x9b)]();if(!_0x254b18)return;const _0xfcd106=db[_0x25a383(0xc7)]()[_0x25a383(0xf8)]()[_0x25a383(0xa1)];db[_0x25a383(0xc7)]('rooms/'+roomCode+_0x25a383(0xde)+_0xfcd106)['set']({'msg':_0x254b18,'sender':username,'senderId':clientId,'timestamp':Date[_0x25a383(0xd9)]()}),_0x25c0cc[_0x25a383(0xaf)]='',sendTyping(!![]),lastActivity=Date[_0x25a383(0xd9)]();}function listenForMessages(){const _0x58940e=_0x186074,_0x43fa80=db[_0x58940e(0xc7)](_0x58940e(0xe7)+roomCode+'/messages'),_0x4cdd28=roomCode===STATIC_ROOM?_0x43fa80[_0x58940e(0xd2)](0x50):_0x43fa80;_0x4cdd28['on'](_0x58940e(0xb3),_0x5e1752=>{const _0x2ff05a=_0x58940e,{msg:_0x5684b9,sender:_0x38a46b,senderId:_0x13ce5f,timestamp:_0x1ae034}=_0x5e1752['val'](),_0x448b97=_0x13ce5f===clientId;addMessage(_0x5684b9,_0x38a46b,_0x1ae034,_0x448b97),roomCode!==STATIC_ROOM&&db[_0x2ff05a(0xc7)](_0x2ff05a(0xe7)+roomCode+'/messages/'+_0x5e1752['key'])['remove']();});}function addMessage(_0x4f4c5e,_0xb99a44,_0x10fa00,_0x5457a8){const _0x3227e2=_0x186074,_0x4e62cf=document[_0x3227e2(0xd1)](_0x3227e2(0xb0));_0x4e62cf[_0x3227e2(0xdb)][_0x3227e2(0xc2)](_0x3227e2(0xf3),_0x5457a8?_0x3227e2(0xf0):_0x3227e2(0xd8));const _0x5b35f7=new Date(_0x10fa00)['toLocaleTimeString']([],{'hour':_0x3227e2(0xe5),'minute':_0x3227e2(0xe5)});_0x4e62cf['innerHTML']='<span\x20class=\x22sender-name\x22>'+_0xb99a44+_0x3227e2(0xce)+_0x4f4c5e+_0x3227e2(0xc6)+_0x5b35f7+_0x3227e2(0xf5),document[_0x3227e2(0x92)](_0x3227e2(0xc3))['appendChild'](_0x4e62cf),document[_0x3227e2(0x92)](_0x3227e2(0xc3))[_0x3227e2(0xf1)]=0x1869f;}function _0x55b5(_0x24dbe1,_0x2f1838){const _0xb5b892=_0xb5b8();return _0x55b5=function(_0x55b52e,_0x534806){_0x55b52e=_0x55b52e-0x92;let _0x3aaa00=_0xb5b892[_0x55b52e];return _0x3aaa00;},_0x55b5(_0x24dbe1,_0x2f1838);}function sendTyping(_0xdde20e=![]){const _0x56e3e9=_0x186074;_0xdde20e?db[_0x56e3e9(0xc7)](_0x56e3e9(0xe7)+roomCode+_0x56e3e9(0x94)+clientId)[_0x56e3e9(0xcf)]():(db[_0x56e3e9(0xc7)](_0x56e3e9(0xe7)+roomCode+_0x56e3e9(0x94)+clientId)[_0x56e3e9(0xe0)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x262c58=_0x56e3e9;db['ref'](_0x262c58(0xe7)+roomCode+_0x262c58(0x94)+clientId)[_0x262c58(0xcf)]();},0xbb8));}function listenForTyping(){const _0x5872d7=_0x186074,_0x26d48d=document['getElementById'](_0x5872d7(0xb6));db[_0x5872d7(0xc7)](_0x5872d7(0xe7)+roomCode+_0x5872d7(0xbc))['on']('value',_0x465b5d=>{const _0x2ae080=_0x5872d7,_0x57156e=_0x465b5d[_0x2ae080(0xc5)]();if(!_0x57156e)return _0x26d48d['innerText']='';const _0x700899=Object[_0x2ae080(0x97)](_0x57156e)[_0x2ae080(0xad)](_0x37c73c=>_0x37c73c!==username);_0x26d48d[_0x2ae080(0xda)]=_0x700899[_0x2ae080(0xc0)]?_0x700899[_0x2ae080(0xe4)](',\x20')+_0x2ae080(0xd0):'';});}function startInactivityTimer(){setInterval(()=>{const _0x38c45d=_0x55b5;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&(db['ref'](_0x38c45d(0xe7)+roomCode)['update']({'active':![]}),alert('Session\x20expired.'),location[_0x38c45d(0xef)]());},0x7530);}function genRoomCode(){const _0x49bfc=_0x186074,_0x2cc5bb=_0x49bfc(0xcd),_0x351a59=_0x49bfc(0xca),_0x65d7a4=(_0x74088e,_0x1e3036)=>Array['from']({'length':_0x1e3036},()=>_0x74088e[Math[_0x49bfc(0xfc)](Math[_0x49bfc(0xa7)]()*_0x74088e[_0x49bfc(0xc0)])])[_0x49bfc(0xe4)]('');return _0x65d7a4(_0x351a59,0x3)+_0x65d7a4(_0x2cc5bb,0x3)+_0x65d7a4(_0x351a59,0x2)+_0x65d7a4(_0x2cc5bb,0x2);}function generateClientId(){const _0x5041ee=_0x186074;return'_'+Math[_0x5041ee(0xa7)]()[_0x5041ee(0xfd)](0x24)[_0x5041ee(0xdf)](0x2,0x9);}function cleanupOldRooms(){const _0x3c9236=_0x186074;db[_0x3c9236(0xc7)](_0x3c9236(0xbf))[_0x3c9236(0xd5)](_0x3c9236(0xaf))['then'](_0x2a9249=>{const _0x2a37e7=_0x3c9236,_0x39cd29=_0x2a9249[_0x2a37e7(0xc5)]();if(!_0x39cd29)return;const _0x1ad76b=Date[_0x2a37e7(0xd9)]();Object[_0x2a37e7(0xfe)](_0x39cd29)['forEach'](([_0x17e06f,_0x236d67])=>{const _0x4c4597=_0x2a37e7;if(_0x17e06f===STATIC_ROOM)return;const _0x8bfc40=_0x236d67[_0x4c4597(0xec)]||0x0,_0x392337=_0x1ad76b-_0x8bfc40>ROOM_TTL_MS;_0x392337&&(db[_0x4c4597(0xc7)](_0x4c4597(0xe7)+_0x17e06f)[_0x4c4597(0xcf)](),console['log']('🗑️\x20Deleted\x20expired\x20room:',_0x17e06f));});});}