const _0x4e9099=_0x4417;(function(_0x2f75ab,_0x227a06){const _0x1d968d=_0x4417,_0x1b02f1=_0x2f75ab();while(!![]){try{const _0x5e6b81=-parseInt(_0x1d968d(0x26c))/0x1*(-parseInt(_0x1d968d(0x26e))/0x2)+-parseInt(_0x1d968d(0x205))/0x3*(parseInt(_0x1d968d(0x25d))/0x4)+-parseInt(_0x1d968d(0x284))/0x5+parseInt(_0x1d968d(0x214))/0x6*(-parseInt(_0x1d968d(0x24b))/0x7)+-parseInt(_0x1d968d(0x21b))/0x8+-parseInt(_0x1d968d(0x20d))/0x9*(parseInt(_0x1d968d(0x1eb))/0xa)+parseInt(_0x1d968d(0x245))/0xb;if(_0x5e6b81===_0x227a06)break;else _0x1b02f1['push'](_0x1b02f1['shift']());}catch(_0x80bc45){_0x1b02f1['push'](_0x1b02f1['shift']());}}}(_0x2f88,0x1c6b9));const firebaseConfig={'apiKey':_0x4e9099(0x248),'authDomain':_0x4e9099(0x286),'databaseURL':'https://easy-chatroom-default-rtdb.firebaseio.com','projectId':_0x4e9099(0x22b),'storageBucket':'easy-chatroom.firebasestorage.app','messagingSenderId':_0x4e9099(0x278),'appId':_0x4e9099(0x1d2),'measurementId':_0x4e9099(0x202)};firebase[_0x4e9099(0x24d)](firebaseConfig);const db=firebase[_0x4e9099(0x289)]();let messageTimestamps=[],isBlocked=![],username=null,roomCode=null,clientId='_'+Math['random']()['toString'](0x24)[_0x4e9099(0x283)](0x2,0x9),lastActivity=Date[_0x4e9099(0x27c)](),typingTimeout,gr8stg='';const STATIC_ROOM=_0x4e9099(0x210),MAX_MESSAGES=0xfa,sound=new Audio(_0x4e9099(0x1e1));sound[_0x4e9099(0x276)]=0.3;let mediaRecorder,audioChunks=[],isRecording=![],recordingTimer;function toggleRecording(){const _0x240ba6=_0x4e9099;isRecording?stopRecording():navigator['mediaDevices'][_0x240ba6(0x27a)]({'audio':!![]})[_0x240ba6(0x259)](_0x4925db=>{const _0x2b7dc4=_0x240ba6;mediaRecorder=new MediaRecorder(_0x4925db),mediaRecorder[_0x2b7dc4(0x1e4)](),isRecording=!![],document[_0x2b7dc4(0x203)](_0x2b7dc4(0x225))['innerText']='‚èπÔ∏è',audioChunks=[],mediaRecorder[_0x2b7dc4(0x1f2)]=_0x273715=>audioChunks['push'](_0x273715[_0x2b7dc4(0x282)]),mediaRecorder[_0x2b7dc4(0x227)]=()=>{const _0x246b00=_0x2b7dc4;clearTimeout(recordingTimer);const _0x590e42=new Blob(audioChunks,{'type':_0x246b00(0x216)}),_0x23bd30=new FileReader();_0x23bd30[_0x246b00(0x271)]=()=>{const _0x28ad22=_0x246b00,_0x23a720=_0x23bd30[_0x28ad22(0x22a)][_0x28ad22(0x21f)](',')[0x1],_0x5b6bc3=db[_0x28ad22(0x1ec)]()[_0x28ad22(0x230)]()[_0x28ad22(0x1dc)];db[_0x28ad22(0x1ec)](_0x28ad22(0x26b)+roomCode+_0x28ad22(0x1fa)+_0x5b6bc3)[_0x28ad22(0x242)]({'msg':_0x28ad22(0x274),'audioBase64':_0x23a720,'sender':username,'senderId':clientId,'timestamp':Date[_0x28ad22(0x27c)]()});},_0x23bd30[_0x246b00(0x1e9)](_0x590e42);},recordingTimer=setTimeout(()=>{mediaRecorder&&isRecording&&stopRecording();},0x4e20);})[_0x240ba6(0x239)](_0x553ab8=>{const _0x49f32d=_0x240ba6;alert(_0x49f32d(0x243));});}function stopRecording(){const _0x5e907b=_0x4e9099;mediaRecorder&&isRecording&&(mediaRecorder[_0x5e907b(0x25e)](),isRecording=![],document[_0x5e907b(0x203)](_0x5e907b(0x225))[_0x5e907b(0x1e5)]='üéôÔ∏è');}window['onload']=()=>{cleanupOldRooms(),setupSidebarBackHandler(),initUsernameFlow(),setupVisibilityAttention();};function sanitizeUsername(_0xfca2a5){const _0x50106c=_0x4e9099;return _0xfca2a5[_0x50106c(0x26d)](/[.#$\[\]]/g,'_');}function submitProfile(){const _0x53ca97=_0x4e9099,_0xd3619d=document[_0x53ca97(0x203)](_0x53ca97(0x233))[_0x53ca97(0x228)][_0x53ca97(0x209)](),_0xfefec=document['getElementById'](_0x53ca97(0x20b))[_0x53ca97(0x228)]['trim'](),_0x1553de=document[_0x53ca97(0x203)](_0x53ca97(0x208)),_0x197147=document[_0x53ca97(0x203)](_0x53ca97(0x1d5));if(!_0xd3619d||!_0xfefec){_0x197147['innerText']=_0x53ca97(0x217),_0x197147['style']['display']=_0x53ca97(0x258);return;}const _0x38d722=sanitizeUsername(_0xd3619d),_0x1cf8e9=db['ref'](_0x53ca97(0x268)+_0x38d722);_0x1cf8e9[_0x53ca97(0x1db)]('value')[_0x53ca97(0x259)](_0x975639=>{const _0x3fbd91=_0x53ca97;if(_0x975639['exists']()){_0x197147[_0x3fbd91(0x1e5)]=_0x3fbd91(0x1f1),_0x197147[_0x3fbd91(0x1fd)][_0x3fbd91(0x1f5)]='block';return;}let _0xfb25d5='';if(_0x1553de[_0x3fbd91(0x20f)]['length']>0x0){const _0x3dc4a2=new FileReader();_0x3dc4a2[_0x3fbd91(0x271)]=()=>{const _0x5d455c=_0x3fbd91;_0xfb25d5=_0x3dc4a2[_0x5d455c(0x22a)][_0x5d455c(0x21f)](',')[0x1],saveProfile(_0xd3619d,_0xfefec,_0xfb25d5,_0x38d722);},_0x3dc4a2[_0x3fbd91(0x1e9)](_0x1553de[_0x3fbd91(0x20f)][0x0]);}else saveProfile(_0xd3619d,_0xfefec,_0xfb25d5,_0x38d722);});}function saveProfile(_0x144833,_0x468e32,_0x2a623b,_0x12430c){const _0x1cf6e3=_0x4e9099,_0x51f16a=Date[_0x1cf6e3(0x27c)](),_0x396e75=[_0x144833];db[_0x1cf6e3(0x1ec)](_0x1cf6e3(0x268)+_0x12430c)[_0x1cf6e3(0x242)]({'username':_0x144833,'description':_0x468e32,'avatarBase64':_0x2a623b,'lastChanged':_0x51f16a,'usernameHistory':_0x396e75}),localStorage['setItem']('chat_username',_0x144833),localStorage['setItem'](_0x1cf6e3(0x275),_0x468e32),document[_0x1cf6e3(0x203)](_0x1cf6e3(0x212))[_0x1cf6e3(0x1e5)]=_0x144833,showScreen(_0x1cf6e3(0x1f4));}function _0x4417(_0x1a261c,_0x15aa54){const _0x2f8804=_0x2f88();return _0x4417=function(_0x441790,_0x1f8e97){_0x441790=_0x441790-0x1d2;let _0x2c860b=_0x2f8804[_0x441790];return _0x2c860b;},_0x4417(_0x1a261c,_0x15aa54);}function generateRoom(){const _0x2055f6=_0x4e9099;roomCode=genRoomCode(),db['ref'](_0x2055f6(0x26b)+roomCode)[_0x2055f6(0x242)]({'active':!![],'created':Date[_0x2055f6(0x27c)]()}),startChat();}function joinRoom(){const _0x356b0c=_0x4e9099,_0x232dac=roomCode||document['getElementById'](_0x356b0c(0x1e2))['value'][_0x356b0c(0x209)]()[_0x356b0c(0x270)]();if(!_0x232dac)return alert(_0x356b0c(0x22e));roomCode=_0x232dac;if(roomCode===STATIC_ROOM){showScreen(_0x356b0c(0x24a));return;}db[_0x356b0c(0x1ec)](_0x356b0c(0x26b)+roomCode)[_0x356b0c(0x252)]()[_0x356b0c(0x259)](_0x1cd26a=>{const _0x331cd6=_0x356b0c;_0x1cd26a['exists']()&&_0x1cd26a['val']()[_0x331cd6(0x1f9)]!==![]?startChat():alert(_0x331cd6(0x220));});}function _0x2f88(){const _0x250119=['data:image/png;base64,','random','block','then','keypress','\x20¬∑\x20‚úì‚úì</small>','DOMContentLoaded','76WlGJOx','stop','lastChanged','audioUrl','msgInput','\x20minutes.','typing','rooms','<span\x20style=\x22color:#ff4081;\x22>@$&</span>','username','userDisplay','profiles/','<img\x20src=\x22','users/','rooms/','42XsUWex','replace','9330LGhTCs','s\x20due\x20to\x20spam.\x20Please\x20wait.','toUpperCase','onloadend','passwordError','imageBase64','[Voice\x20message]','profile_description','volume','ceil','985049198428','child','getUserMedia','child_added','now','staticPasswordInput','contains','values','chatScreen','forEach','data','substr','176095StZDDX','getItem','easy-chatroom.firebaseapp.com','description','created','database','senderId','join','change','flex','\x0aLast\x20Changed:\x20','üö´\x20You\x27ve\x20been\x20blocked\x20for\x2030\x20seconds\x20due\x20to\x20spamming.','Session\x20expired.','1:985049198428:web:d0eb7e2de39887710c9b99','No\x20room\x20code\x20available\x20for\x20private\x20rooms','preventDefault','profileError','innerHTML','/typing','appendChild','usernameHistory','\x0aDescription:\x20','once','key','lastOnline',')\x20New\x20message\x20‚Ä¢\x20','scrollHeight','#00ff88','sounds/beep.mp3','roomCodeInput','exists','start','innerText','play','update','gr8stg','readAsDataURL','‚õî\x20You\x27re\x20blocked\x20for\x20','1130jyuErw','ref','\x27)\x22>','<small>','avatarBase64','val','‚ùå\x20Username\x20already\x20taken.','ondataavailable','toLocaleString','roomChoiceScreen','display','color','popstate','profileViewer','active','/messages/','</li>','\x22\x20style=\x22width:24px;height:24px;border-radius:50%;margin-right:5px;\x22>','style','onDisconnect','\x22\x20style=\x22width:100%;\x20max-width:100%;\x20margin-top:5px;\x22></audio>','Profile\x20not\x20found.','</small>','G-QDESJ2WR42','getElementById','codeEntryScreen','17298zBGStv','flagPageAttention','limitToLast','profileAvatarInput','trim','<span\x20class=\x22sender-name\x22>','profileDescriptionInput','title','14166jzJEQR','visibilitychange','files','050BBB66HH','show','namePreview','\x22\x20style=\x22max-width:100%;margin-top:5px;border-radius:10px;\x22\x20/>','258TehzYa','You\x20can\x20change\x20your\x20profile\x20again\x20in\x20','audio/webm','Please\x20enter\x20both\x20a\x20username\x20and\x20a\x20description.','map','</span><br>','<img\x20src=\x22data:image/png;base64,','1834056tssfbv','data:audio/webm;base64,','antispam/','msg','split','Room\x20doesn\x27t\x20exist\x20or\x20is\x20inactive.','#888','audioBase64','profileContent','none','recordBtn','userSidebar','onstop','value','div','result','easy-chatroom','\x0a\x20\x20\x20\x20','imageInput','Enter\x20a\x20valid\x20room\x20code','‚óè\x20Online','push','\x0aHistory:\x0a','received','profileUsernameInput','chat_username','hidden','reload','antispamBlocked','addEventListener','catch','state','roomDisplay','ServerValue','<audio\x20controls\x20src=\x22','üë§\x20','back','ABCDEFGHIJKLMNOPQRSTUVWXYZ','remove','set','Microphone\x20permission\x20denied.','Missing\x20room\x20or\x20user\x20information.','5989775XgZSiP','add','No\x20bio\x20set','AIzaSyBhfQ1Wf5JEy6sOU4ExXboRI4Ir4y_aKZw','antispamBlocked/','passwordScreen','11746rcDbcT','filter','initializeApp','profileScreen','classList','2-digit','/messages','get','\x0aName:\x20','length','Enter'];_0x2f88=function(){return _0x250119;};return _0x2f88();}function startChat(){const _0xb50c25=_0x4e9099;if(!roomCode||!username)return alert(_0xb50c25(0x244)),showScreen('roomChoiceScreen');showScreen(_0xb50c25(0x280)),document['getElementById'](_0xb50c25(0x267))['innerText']=username,(roomCode=_0xb50c25(0x210))?document[_0xb50c25(0x203)](_0xb50c25(0x23b))[_0xb50c25(0x1e5)]=_0xb50c25(0x1d3):document[_0xb50c25(0x203)](_0xb50c25(0x23b))['innerText']=roomCode,listenForMessages(),listenForTyping(),startInactivityTimer(),trackPresence(),listenForUserList();}function validateStaticRoomPassword(){const _0x52f61e=_0x4e9099,_0x30dd96=document[_0x52f61e(0x203)](_0x52f61e(0x27d))[_0x52f61e(0x228)],_0x28fbdc=document[_0x52f61e(0x203)](_0x52f61e(0x272));db[_0x52f61e(0x1ec)](_0x52f61e(0x1e8))[_0x52f61e(0x252)]()[_0x52f61e(0x259)](_0x3e626a=>{const _0x24a14e=_0x52f61e,_0x4e3108=_0x3e626a[_0x24a14e(0x1f0)]();_0x30dd96===_0x4e3108?(_0x28fbdc[_0x24a14e(0x1fd)][_0x24a14e(0x1f5)]=_0x24a14e(0x224),startChat()):_0x28fbdc[_0x24a14e(0x1fd)]['display']=_0x24a14e(0x258);});}document[_0x4e9099(0x203)](_0x4e9099(0x22d))['addEventListener'](_0x4e9099(0x28c),function(){const _0x335b1d=_0x4e9099,_0x37e054=this[_0x335b1d(0x20f)][0x0];if(!_0x37e054)return;const _0x4237a9=new FileReader();_0x4237a9[_0x335b1d(0x271)]=function(){const _0xa16a08=_0x335b1d,_0x322d42=_0x4237a9[_0xa16a08(0x22a)][_0xa16a08(0x21f)](',')[0x1],_0x2ac7aa=db['ref']()[_0xa16a08(0x230)]()['key'];db[_0xa16a08(0x1ec)](_0xa16a08(0x26b)+roomCode+_0xa16a08(0x1fa)+_0x2ac7aa)[_0xa16a08(0x242)]({'msg':'[Image]','imageBase64':_0x322d42,'sender':username,'senderId':clientId,'timestamp':Date[_0xa16a08(0x27c)]()});},_0x4237a9[_0x335b1d(0x1e9)](_0x37e054);});function sendMessage(){const _0x824675=_0x4e9099,_0x4f671a=document[_0x824675(0x203)](_0x824675(0x261)),_0x4a4994=_0x4f671a[_0x824675(0x228)]['trim']();if(!_0x4a4994)return;const _0x3df337=Date[_0x824675(0x27c)](),_0x311a26=sanitizeUsername(username);db[_0x824675(0x1ec)]('antispamBlocked/'+roomCode+'/'+_0x311a26)[_0x824675(0x1db)](_0x824675(0x228))[_0x824675(0x259)](_0x547c21=>{const _0x1805c3=_0x824675,_0xff0ac7=_0x547c21[_0x1805c3(0x1f0)]();if(_0xff0ac7&&_0x3df337<_0xff0ac7){const _0x578b24=Math['ceil']((_0xff0ac7-_0x3df337)/0x3e8);alert(_0x1805c3(0x1ea)+_0x578b24+_0x1805c3(0x26f));return;}const _0x36f97e=db[_0x1805c3(0x1ec)](_0x1805c3(0x21d)+roomCode+'/'+_0x311a26);_0x36f97e[_0x1805c3(0x1db)](_0x1805c3(0x228))['then'](_0x2e0de4=>{const _0x35400d=_0x1805c3,_0x38a7f8=_0x2e0de4[_0x35400d(0x1f0)]()||[],_0x430798=[..._0x38a7f8,_0x3df337]['filter'](_0x27c1a4=>_0x3df337-_0x27c1a4<0xbb8);if(_0x430798['length']>=0x5){alert(_0x35400d(0x28f)),db[_0x35400d(0x1ec)](_0x35400d(0x249)+roomCode+'/'+_0x311a26)[_0x35400d(0x242)](_0x3df337+0x7530);const _0xfa49ea=db[_0x35400d(0x1ec)](_0x35400d(0x26b)+roomCode+_0x35400d(0x251));_0xfa49ea['orderByChild'](_0x35400d(0x28a))['equalTo'](clientId)[_0x35400d(0x207)](0x5)[_0x35400d(0x1db)](_0x35400d(0x228),_0x10c391=>{_0x10c391['forEach'](_0x4baa78=>{const _0x5540e4=_0x4417;_0xfa49ea[_0x5540e4(0x279)](_0x4baa78[_0x5540e4(0x1dc)])[_0x5540e4(0x241)]();});}),_0x36f97e['set']([]);return;}_0x36f97e[_0x35400d(0x242)](_0x430798);const _0x1e4bf7=db[_0x35400d(0x1ec)]()['push']()[_0x35400d(0x1dc)];db['ref'](_0x35400d(0x26b)+roomCode+_0x35400d(0x1fa)+_0x1e4bf7)[_0x35400d(0x242)]({'msg':_0x4a4994,'sender':username,'senderId':clientId,'timestamp':_0x3df337}),_0x4f671a[_0x35400d(0x228)]='',sendTyping(!![]),lastActivity=_0x3df337;});});}function listenForMessages(){const _0x58c891=_0x4e9099,_0xeaffe4=db['ref'](_0x58c891(0x26b)+roomCode+_0x58c891(0x251)),_0x12155e=_0xeaffe4['limitToLast'](MAX_MESSAGES);_0x12155e['on'](_0x58c891(0x27b),_0x4f1148=>{const _0x1e273f=_0x58c891,_0x3eba6c=_0x4f1148[_0x1e273f(0x1f0)](),{msg:_0x9b78cc,sender:_0x3f0dde,senderId:_0x2ab1ce,timestamp:_0x7cce73}=_0x3eba6c,_0x54caca=_0x2ab1ce===clientId,_0x37fd48=_0x3eba6c[_0x1e273f(0x260)]||null,_0x676b8a=_0x3eba6c[_0x1e273f(0x222)]||null;addMessage(_0x9b78cc,_0x3f0dde,_0x7cce73,_0x54caca,_0x37fd48,_0x676b8a),roomCode!==STATIC_ROOM&&db[_0x1e273f(0x1ec)](_0x1e273f(0x26b)+roomCode+'/messages/'+_0x4f1148[_0x1e273f(0x1dc)])[_0x1e273f(0x241)](),!_0x54caca&&(sound[_0x1e273f(0x1e6)](),flagPageAttention());});}function addMessage(_0x56273f,_0x4211fb,_0x38fac7,_0x23fed2,_0x3bc7bd=null,_0x1bd011=null){const _0x3da4b2=_0x4e9099,_0x5da78e=document['createElement'](_0x3da4b2(0x229));_0x5da78e[_0x3da4b2(0x24f)][_0x3da4b2(0x246)](_0x3da4b2(0x21e),_0x23fed2?'sent':_0x3da4b2(0x232));const _0x3ead0e=new Date(_0x38fac7)['toLocaleTimeString']([],{'hour':_0x3da4b2(0x250),'minute':_0x3da4b2(0x250)});let _0x2cf1ee=_0x3da4b2(0x20a)+_0x4211fb+_0x3da4b2(0x219);_0x23fed2?_0x2cf1ee+=_0x3da4b2(0x1ee)+_0x3ead0e+_0x3da4b2(0x25b):_0x2cf1ee+=_0x3da4b2(0x1ee)+_0x3ead0e+_0x3da4b2(0x201);!_0x3bc7bd&&!_0x1bd011&&(_0x56273f=_0x56273f[_0x3da4b2(0x26d)](new RegExp('@'+username+'\x5cb','gi'),_0x3da4b2(0x265)));if(_0x3bc7bd)_0x2cf1ee+='<audio\x20controls\x20src=\x22'+_0x3bc7bd+_0x3da4b2(0x1ff);else{if(_0x1bd011){const _0x4e1411=_0x3da4b2(0x21c)+_0x1bd011;_0x2cf1ee+=_0x3da4b2(0x23d)+_0x4e1411+_0x3da4b2(0x1ff);}else{if(data[_0x3da4b2(0x273)]){const _0xe6df88=_0x3da4b2(0x256)+data[_0x3da4b2(0x273)];_0x2cf1ee+=_0x3da4b2(0x269)+_0xe6df88+_0x3da4b2(0x213);}else _0x2cf1ee+=_0x56273f;}}_0x2cf1ee+=_0x3da4b2(0x1ee)+_0x3ead0e+_0x3da4b2(0x201),_0x5da78e[_0x3da4b2(0x1d6)]=_0x2cf1ee;const _0x5570d4=document[_0x3da4b2(0x203)]('messages');_0x5570d4[_0x3da4b2(0x1d8)](_0x5da78e),_0x5570d4['scrollTop']=_0x5570d4[_0x3da4b2(0x1df)];}function cleanupOldRooms(){const _0x58aa8e=_0x4e9099;db[_0x58aa8e(0x1ec)](_0x58aa8e(0x264))[_0x58aa8e(0x1db)](_0x58aa8e(0x228))[_0x58aa8e(0x259)](_0x498f17=>{const _0x499233=_0x58aa8e,_0x4e4315=_0x498f17[_0x499233(0x1f0)]();if(!_0x4e4315)return;const _0x19aeb5=Date[_0x499233(0x27c)]();for(const _0x1a6dfc in _0x4e4315){if(_0x1a6dfc===STATIC_ROOM)continue;const _0x531015=_0x4e4315[_0x1a6dfc];_0x19aeb5-(_0x531015[_0x499233(0x288)]||0x0)>0x2*0x3c*0x3e8&&db[_0x499233(0x1ec)](_0x499233(0x26b)+_0x1a6dfc)[_0x499233(0x241)]();}db[_0x499233(0x1ec)]('antispam')[_0x499233(0x1db)](_0x499233(0x228))[_0x499233(0x259)](_0x28dd38=>{const _0x4fa2f0=_0x499233,_0x3c580c=_0x28dd38['val']();if(!_0x3c580c)return;for(const _0x482cd6 in _0x3c580c){if(_0x482cd6!==STATIC_ROOM)db[_0x4fa2f0(0x1ec)]('antispam/'+_0x482cd6)['remove']();}}),db[_0x499233(0x1ec)](_0x499233(0x237))['once'](_0x499233(0x228))[_0x499233(0x259)](_0x45884e=>{const _0xa97f13=_0x499233,_0x483147=_0x45884e[_0xa97f13(0x1f0)]();if(!_0x483147)return;for(const _0x308239 in _0x483147){if(_0x308239!==STATIC_ROOM)db[_0xa97f13(0x1ec)]('antispamBlocked/'+_0x308239)[_0xa97f13(0x241)]();}});});}document[_0x4e9099(0x238)](_0x4e9099(0x25c),()=>{const _0x59c199=_0x4e9099,_0x45e6ad=document[_0x59c199(0x203)](_0x59c199(0x261));_0x45e6ad&&_0x45e6ad['addEventListener'](_0x59c199(0x25a),function(_0x3a75a5){const _0x476a30=_0x59c199;_0x3a75a5[_0x476a30(0x1dc)]===_0x476a30(0x255)&&(_0x3a75a5[_0x476a30(0x1d4)](),sendMessage());});});function showScreen(_0x2fc352){const _0x401934=_0x4e9099;['usernameScreen',_0x401934(0x1f4),_0x401934(0x204),'chatScreen',_0x401934(0x24a),_0x401934(0x24e)][_0x401934(0x281)](_0x141170=>{const _0x87d89a=_0x401934;document[_0x87d89a(0x203)](_0x141170)[_0x87d89a(0x1fd)][_0x87d89a(0x1f5)]=_0x87d89a(0x224);}),document[_0x401934(0x203)](_0x2fc352)[_0x401934(0x1fd)][_0x401934(0x1f5)]=_0x401934(0x28d);}function genRoomCode(){const _0x511487=_0x4e9099,_0x37536a=_0x511487(0x240),_0x996299='0123456789',_0x391c00=(_0x323a89,_0x36eae3)=>Array['from']({'length':_0x36eae3},()=>_0x323a89[Math['floor'](Math[_0x511487(0x257)]()*_0x323a89[_0x511487(0x254)])])[_0x511487(0x28b)]('');return _0x391c00(_0x996299,0x3)+_0x391c00(_0x37536a,0x3)+_0x391c00(_0x996299,0x2)+_0x391c00(_0x37536a,0x2);}function startInactivityTimer(){setInterval(()=>{const _0x5c2aba=_0x4417;Date['now']()-lastActivity>0x5*0x3c*0x3e8&&roomCode!==STATIC_ROOM&&(db[_0x5c2aba(0x1ec)](_0x5c2aba(0x26b)+roomCode)['update']({'active':![]}),alert(_0x5c2aba(0x290)),location[_0x5c2aba(0x236)]());},0x7530);}function setupSidebarBackHandler(){const _0x7da81e=_0x4e9099;window[_0x7da81e(0x238)](_0x7da81e(0x1f7),()=>{const _0x548022=_0x7da81e,_0x210a18=document['getElementById'](_0x548022(0x226));_0x210a18?.[_0x548022(0x24f)][_0x548022(0x27e)](_0x548022(0x211))&&_0x210a18[_0x548022(0x24f)][_0x548022(0x241)]('show');});}function toggleSidebar(){const _0xaeb85f=_0x4e9099,_0x9da727=document[_0xaeb85f(0x203)](_0xaeb85f(0x226));if(!_0x9da727[_0xaeb85f(0x24f)][_0xaeb85f(0x27e)]('show'))_0x9da727['classList'][_0xaeb85f(0x246)](_0xaeb85f(0x211)),history['pushState']({'sidebarOpen':!![]},'');else{_0x9da727[_0xaeb85f(0x24f)][_0xaeb85f(0x241)]('show');if(history[_0xaeb85f(0x23a)]?.['sidebarOpen'])history[_0xaeb85f(0x23f)]();}}function setupVisibilityAttention(){const _0x3b50fc=_0x4e9099;let _0x4f43ca=0x0,_0x21492a=document[_0x3b50fc(0x20c)];document['addEventListener'](_0x3b50fc(0x20e),()=>{const _0xa5f0aa=_0x3b50fc;!document[_0xa5f0aa(0x235)]&&(document[_0xa5f0aa(0x20c)]=_0x21492a,_0x4f43ca=0x0);}),window[_0x3b50fc(0x206)]=function(){const _0x4db444=_0x3b50fc;document[_0x4db444(0x235)]&&(_0x4f43ca++,document[_0x4db444(0x20c)]='('+_0x4f43ca+_0x4db444(0x1de)+_0x21492a);};}function tryEditProfile(){const _0x40129d=_0x4e9099,_0x380894=sanitizeUsername(username);db[_0x40129d(0x1ec)](_0x40129d(0x268)+_0x380894)['get']()['then'](_0x36aa77=>{const _0x3ea38a=_0x40129d,_0x49036a=_0x36aa77[_0x3ea38a(0x1f0)]();if(!_0x49036a)return alert(_0x3ea38a(0x200));const _0x465cf5=_0x49036a[_0x3ea38a(0x25f)]||0x0,_0x214ef3=Date[_0x3ea38a(0x27c)](),_0x530df0=0x18*0x3c*0x3c*0x3e8;if(_0x214ef3-_0x465cf5<_0x530df0){const _0x307d9d=Math[_0x3ea38a(0x277)]((_0x530df0-(_0x214ef3-_0x465cf5))/(0x3c*0x3e8));alert(_0x3ea38a(0x215)+_0x307d9d+_0x3ea38a(0x262));}else showScreen(_0x3ea38a(0x24e)),document['getElementById'](_0x3ea38a(0x233))['value']=username,document['getElementById'](_0x3ea38a(0x20b))['value']=_0x49036a['description']||'';});}function listenForUserList(){const _0xabc3f1=_0x4e9099;db[_0xabc3f1(0x1ec)](_0xabc3f1(0x26a)+roomCode)['on'](_0xabc3f1(0x228),_0x2f44b1=>{const _0x2dfac4=_0xabc3f1,_0x6e0593=_0x2f44b1[_0x2dfac4(0x1f0)]()||{},_0x189b92=Date[_0x2dfac4(0x27c)](),_0x91c272=Object[_0x2dfac4(0x27f)](_0x6e0593)[_0x2dfac4(0x218)](_0x3e3960=>{const _0x102059=_0x2dfac4,_0x33ae2d=_0x3e3960['online'],_0xa06a95=_0x189b92-_0x3e3960[_0x102059(0x1dd)]<=0x1e*0x3c*0x3e8;if(!_0x33ae2d&&!_0xa06a95)return'';const _0x1d0cb8=_0x3e3960[_0x102059(0x1ef)]?_0x102059(0x21a)+_0x3e3960[_0x102059(0x1ef)]+_0x102059(0x1fc):_0x102059(0x23e),_0x37e3d0=_0x33ae2d?_0x102059(0x1e0):_0x102059(0x221),_0x14e767=_0x33ae2d?'üü¢':'üïí',_0x31145c=new Date(_0x3e3960[_0x102059(0x1dd)])['toLocaleTimeString']([],{'hour':_0x102059(0x250),'minute':_0x102059(0x250)});return'<li\x20style=\x22color:'+_0x37e3d0+';cursor:pointer;\x22\x20onclick=\x22viewProfile(\x27'+sanitizeUsername(_0x3e3960[_0x102059(0x266)])+_0x102059(0x1ed)+_0x1d0cb8+_0x14e767+'\x20'+_0x3e3960[_0x102059(0x266)]+_0x102059(0x1fb);})['join']('');document[_0x2dfac4(0x203)]('userList')[_0x2dfac4(0x1d6)]=_0x91c272;});}function sendTyping(_0x128dc5=![]){const _0x24e4a6=_0x4e9099,_0x46afc2=_0x24e4a6(0x26b)+roomCode+'/typing/'+clientId;_0x128dc5?db[_0x24e4a6(0x1ec)](_0x46afc2)['remove']():(db['ref'](_0x46afc2)[_0x24e4a6(0x242)](username),clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x39d0c7=_0x24e4a6;db[_0x39d0c7(0x1ec)](_0x46afc2)['remove']();},0xbb8));}function listenForTyping(){const _0x389bbe=_0x4e9099,_0xb509d2=document[_0x389bbe(0x203)](_0x389bbe(0x263));db[_0x389bbe(0x1ec)](_0x389bbe(0x26b)+roomCode+_0x389bbe(0x1d7))['on'](_0x389bbe(0x228),_0x131de3=>{const _0x1155bf=_0x389bbe,_0x2c2da8=_0x131de3['val']();if(!_0x2c2da8)return _0xb509d2[_0x1155bf(0x1e5)]='';const _0x1455a6=Object[_0x1155bf(0x27f)](_0x2c2da8)[_0x1155bf(0x24c)](_0x3881e1=>_0x3881e1!==username);_0xb509d2[_0x1155bf(0x1e5)]=_0x1455a6[_0x1155bf(0x254)]?_0x1455a6[_0x1155bf(0x28b)](',\x20')+'\x20typing...':'';});}function trackPresence(){const _0x5545ec=_0x4e9099;if(!username||!roomCode)return;const _0x24cb96=sanitizeUsername(username),_0x18284f=db[_0x5545ec(0x1ec)](_0x5545ec(0x26a)+roomCode+'/'+_0x24cb96),_0x22daf7={'username':username,'lastOnline':firebase[_0x5545ec(0x289)][_0x5545ec(0x23c)]['TIMESTAMP'],'online':!![]};_0x18284f[_0x5545ec(0x242)](_0x22daf7),_0x18284f[_0x5545ec(0x1fe)]()[_0x5545ec(0x1e7)]({'online':![],'lastOnline':Date[_0x5545ec(0x27c)]()}),updateOnlineIndicator();}function updateOnlineIndicator(){const _0x1de485=_0x4e9099,_0x461ec7=document[_0x1de485(0x203)]('onlineStatus');_0x461ec7[_0x1de485(0x1e5)]=_0x1de485(0x22f),_0x461ec7['style'][_0x1de485(0x1f6)]=_0x1de485(0x1e0);}setInterval(updateOnlineIndicator,0xbb8);function viewProfile(_0x526f15){const _0x6563=_0x4e9099;db[_0x6563(0x1ec)](_0x6563(0x268)+_0x526f15)[_0x6563(0x252)]()[_0x6563(0x259)](_0xb7ff64=>{const _0xf935f7=_0x6563;if(!_0xb7ff64[_0xf935f7(0x1e3)]())return;const _0x8c6d97=_0xb7ff64[_0xf935f7(0x1f0)](),_0x1683ea=(_0xf935f7(0x253)+_0x8c6d97[_0xf935f7(0x266)]+_0xf935f7(0x1da)+(_0x8c6d97[_0xf935f7(0x287)]||_0xf935f7(0x247))+_0xf935f7(0x231)+(_0x8c6d97[_0xf935f7(0x1d9)]||[])[_0xf935f7(0x28b)]('\x0a')+_0xf935f7(0x28e)+new Date(_0x8c6d97[_0xf935f7(0x25f)])[_0xf935f7(0x1f3)]()+_0xf935f7(0x22c))['trim']();document['getElementById'](_0xf935f7(0x223))[_0xf935f7(0x1e5)]=_0x1683ea,document['getElementById'](_0xf935f7(0x1f8))['style']['display']=_0xf935f7(0x258);});}function initUsernameFlow(){const _0x34438f=_0x4e9099,_0x3ffdcb=localStorage[_0x34438f(0x285)](_0x34438f(0x234));!_0x3ffdcb?showScreen(_0x34438f(0x24e)):(username=_0x3ffdcb,document['getElementById'](_0x34438f(0x212))[_0x34438f(0x1e5)]=username,showScreen(_0x34438f(0x1f4)));}function closeProfile(){const _0x5b56d8=_0x4e9099;document[_0x5b56d8(0x203)](_0x5b56d8(0x1f8))[_0x5b56d8(0x1fd)]['display']='none';}